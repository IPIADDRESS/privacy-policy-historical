<!--The following is the downloaded HTML source of the tradingeconomics.com privacy policy that was archived on 2019-12-21.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20191221042105id_/https%3A//tradingeconomics.com/privacy-policy.aspx) for the most accurate reproduction.-->

<!DOCTYPE html><html><head id="ctl00_Head1"><meta charset="utf-8"><title>
	TradingEconomics.com - Privacy Policy
</title><meta id="metaDesc" name="description" content="Trading Economics Privacy Policy"><meta id="metaKeyword" name="keywords"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta name="theme-color" content="#333333"><meta property="fb:app_id" content="780337348699873"><meta property="fb:admins" content="100008712870955"><link rel="icon" href="https://d3fy651gv2fhd3.cloudfront.net/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css"><link rel="stylesheet" href="https://d3fy651gv2fhd3.cloudfront.net/stylesheet.css?v=20191213c">
<script async="" src="//www.google-analytics.com/analytics.js"></script><script type="text/javascript">
    var DEBUG = false;
    if (window.location.host.indexOf('localhost') > -1) DEBUG = true;
    else if (window.location.href.indexOf('debug') > -1) DEBUG = true;
    if(!DEBUG){
        if(!window.console) window.console = {};
        var methods = ["log", "debug", "info"];
        for(var i=0;i<methods.length;i++){
            console[methods[i]] = function(){};
        }
    }
</script>
<script type="text/javascript">var TESymbol = ''; var TECountry = ''; var TECategory = ''; var TEFrequency = ''; var TELanguage = ''; var TELastUpdate = ''; var TEChartVersion = ''; var symbol = ''; var symbolType = ''; var hasCalendar = false; var isLoggedIn = false; var TEAlertsName = ''; var TEChartsDatasource = ''; var IsMobile =  false;;</script>
<script data-schema="Organization" type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"TRADING ECONOMICS","url":"https://tradingeconomics.com","logo":"https://d3fy651gv2fhd3.cloudfront.net/images/logo.png?v=20171228","sameAs":["https://www.facebook.com/TradingEconomics","https://twitter.com/teconomics"],"contactPoint": {"@type": "ContactPoint","telephone": "+1-646-593-8917","contactType": "Customer service"}, "email": "support(at)tradingeconomics.com", "founders" : [{"@type":"Person", "familyName": "Sousa", "givenName": "Antonio"},{"@type":"Person", "familyName": "Fedec","givenName": "Anna"}],   "location": {"@type": "Place", "name": "Headquarters", "address": {"@type": "PostalAddress","addressLocality": "New York City","addressRegion": "NY"}},"legalName":"IECONOMICS INC", "naics": "518210"}</script>
<script data-schema="WebPage" type="application/ld+json">{"url":"https://tradingeconomics.com/privacy-policy.aspx","@type":"WebPage","@context":"http://schema.org"}</script><link rel="canonical" href="https://tradingeconomics.com"></head>
<body>
    <form method="post" action="./privacy-policy.aspx" id="aspnetForm">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="OXaEl0zNIxV9/sAPKg6xB1uAgntaZge1KdiTywNzt/jPSmhpmhDxcEhDqMfesf+H0MtphwECLnYHBzASjjTw2SAIORUN2r9RVtrVRLbdW2U+5OOPgwyypf1K5UTsDnks98lCjCmNH2/Gt9sVOkLSz0mVuDydkUOuvJzsYfBC+p6XGJSS">
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/WebResource.axd?d=pynGkmcFUV13He1Qd6_TZBMhXpY-76SACKbmnGHSZE-ofY595en_c0qcOkCvri7A5kw1ug2&amp;t=636934885199995647" type="text/javascript"></script>


<script type="text/javascript">
//<![CDATA[
var isPostBack = false;//]]>
</script>

<script src="/ScriptResource.axd?d=qph9tUZ6hGPLbkznkRkqTYWzjMBsKlRyREi1YDjmYE3zZGh__TOd3PNxPEW8XfwkObfckMpB67GQVSJ51YrflW5zr1QyM_9-4d1Dx1U_ZJ94G98-0&amp;t=ffffffffda74082d" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=TvpD2YGOOsCm1yWcLkKnBcOzd1_nGQYeeL4PwtDBt7imo7Xq206E1JCXpNIIAaBOvalbrcyjs3ojCjl9X73ADInNbjuzU-P1PNtDcnYLQlyvhD9N0&amp;t=ffffffffda74082d" type="text/javascript"></script>
<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="2927320D">
</div>
       <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ctl00$AjaxScriptManager1$ScriptManager1', 'aspnetForm', [], [], [], 90, 'ctl00');
//]]>
</script>

       
<style>
    .nav-item {
        border-top: 1px solid #ddd;
        padding-top: 5px;
        padding-bottom: 5px;
    }

        .nav-item:hover {
            background-color: #fafafa;
        }

        .nav-item > a {
            text-decoration: none;
        }

    .dropdown:hover {
        background-color: #fff;
    }

        .dropdown:hover .dropdown-toggle {
            color: #000;
        }

          @media only screen and (max-width: 414px) {
         
        }
</style>
<div id="ctl00_NavigationUC1_ctl00_menu" class="navbar navbar-fixed-top navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header" id="searchMobileHeader" style="display: none; height: 40px;">
            <a noref="" class="navbar-brand">
                <input type="text" placeholder="Search" id="thisIstheTinySearchBoxIdTag" autocomplete="off" class="nav-search-input-class" style="font-size: 1.1em; border: 0px; color: #333; border-bottom: 1px solid #858585; background-color: transparent;">
            </a>
            <ul id="thisIstheTinySearchResultsIdTag" class="dropdown-menu" style="position: fixed; width: 100%; top: 42px; border-top-color: #FFF; display: block; padding: 0; border: 0;">
                <li>
                    <div class="container">
                        <div id="dpSearch-resultCnt-tiny" class="dpTaResult">
                        </div>
                    </div>
                </li>
            </ul>
            <div class="navbar-mobile-list pull-right hidden-sm hidden-md hidden-lg" style="padding-top: 10px;">
                <a noref="" class="navbar-mobile-item" id="thisIsTheTinyRemoveId"><i class="glyphicon glyphicon-remove"></i></a>
            </div>
        </div>


        <div class="navbar-header" id="mainHeader">
            <div class="logo-banner">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <span id="logo-title">TRADING</span><br>
                    <span id="logo-subtitle">ECONOMICS</span>
                </a>
                <div class="navbar-mobile-list pull-right hidden-sm hidden-md hidden-lg" style="padding-top: 10px;">
                    <a href="/calendar" class="navbar-mobile-item"><i class="glyphicon glyphicon-calendar"></i></a>
                    <a href="/countries" class="navbar-mobile-item"><i class="glyphicon glyphicon-globe"></i></a>
                    <a href="/indicators" class="navbar-mobile-item"><i class="glyphicon glyphicon-stats"></i></a>
                    <a noref="" class="navbar-mobile-item" id="thisIsTheTinyGlyphiconId"><i class="glyphicon glyphicon-search"></i></a>
                </div>
            </div>
        </div>

        <div class="navbar-collapse collapse">

              <ul class="nav navbar-nav pull-right">
                  <li id="ctl00_NavigationUC1_ctl00_Li1" class="dropdown">
                    <a style="color: green" href="/analytics/pricing.aspx?source=nav" title="Register">
                        <i class="glyphicon glyphicon-th-large small hidden-sm hidden-md"></i>&nbsp;Register
                    </a>
                </li>
                <li id="ctl00_NavigationUC1_ctl00_menuGuest" class="dropdown">
                 
                    
                       <a style="color: #858585" href="https://sso.tradingeconomics.com/sso/login?returnurl=https://tradingeconomics.com/privacy-policy.aspx" title="Login">
                        <i class="glyphicon glyphicon-user small hidden-sm hidden-md"></i>&nbsp;Login
                    </a>
                   </li>
                
            </ul>

            <ul class="nav navbar-nav pull-right">

                <li class="dropdown ">
                    <a href="/calendar">Calendar</a>
                </li>

                <li class="dropdown ">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Indicators<b class="caret hidden-sm"></b></a>
                    <ul class="dropdown-menu">
                        <li class="nav-item"><a href="/countries" target="_self">Countries</a></li>
                        <li class="nav-item"><a href="/indicators" target="_self">Indicators</a></li>
                        <li class="nav-item"><a href="/stream" target="_self">News</a></li>
                    </ul>
                </li>


                <li class="dropdown  ">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Markets<b class="caret hidden-sm"></b></a>
                    <ul class="dropdown-menu">
                        <li class="nav-item"><a href="/currencies" target="_self">Currencies</a></li>
                        <li class="nav-item"><a href="/stocks" target="_self">Stocks</a></li>
                        <li class="nav-item"><a href="/commodities" target="_self">Commodities</a></li>
                        <li class="nav-item"><a href="/bonds" target="_self">Bonds</a></li>
                        <li class="nav-item"><a href="/earnings" target="_self">Earnings</a></li>
                    </ul>
                </li>

                <li class="dropdown ">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Forecasts<b class="caret hidden-sm"></b></a>
                    <ul class="dropdown-menu">
                        <li class="nav-item"><a href="/forecasts" target="_self">Countries</a></li>
                        <li class="nav-item"><a href="/indicators?g=forecast" target="_self">Indicators</a></li>
                        <li class="nav-item"><a href="/forecast/currency" target="_self">Currencies</a></li>
                        <li class="nav-item"><a href="/forecast/stock-market" target="_self">Stocks</a></li>
                        <li class="nav-item"><a href="/forecast/commodity" target="_self">Commodities</a></li>
                        <li class="nav-item"><a href="/forecast/government-bond-10y" target="_self">Bonds</a></li>
                    </ul>
                </li>
                
                <li>
                    <a noref="" id="thisIsTheSearchPlaceholderId" class="nav-searchbox-class stickydropdown-toggle hidden-xs" title="Search" style="margin-left: 20px; margin-top: -3px;">
                        <div id="thisIsTheSearchBoxWrapperId" class="typeahead-searchbox-glyphicon-wrapper">

                            <input type="text" placeholder="Search" id="thisIstheSearchBoxIdTag" autocomplete="off" class="hidden-xs hidden-sm nav-search-input-class" style="border: 0px; color: #333; /*border-bottom: 1px solid #858585; */ background-color: transparent;">

                            <i id="thisIsTheBigGlyphiconId" class="glyphicon glyphicon-search hidden-sm nav-search-glyphicon-class" style="color: #858585; padding-bottom: 2px; padding-right: 2px; margin-left: -5px;"></i>
                            <i id="thisIsTheSmallGlyphiconId" class="glyphicon glyphicon-search hidden-md hidden-lg nav-search-glyphicon-class" style="color: #858585;"></i>

                        </div>
                    </a>

                    <ul id="thisIstheSearchResultsIdTag" class="dropdown-menu" style="position: fixed; width: 100%; top: 54px; border-top-color: #FFF; display: block; padding: 0; border: 0;">
                        <li>
                            <div class="container">
                                <div id="dpSearch-resultCnt" class="dpTaResult">
                                </div>
                            </div>
                        </li>
                    </ul>
                </li>
                
                  
                
            </ul>
          
        </div>

    </div>
</div>

       
       
        <div class="container">
            <div class="row">
                <div class="col-lg-12" role="main">
                                 
                    
<br>


 <table border="0" cellpadding="0" cellspacing="0" style="width: 720px; text-align: justify">
        <tbody><tr>
            <td width="20px">
            </td>
            <td style="text-align: justify">

<b>PRIVACY POLICY</b>
<br>
<br>
                
                <b>Security Technology </b>
                <br>
                <br>
                Trading Economics uses Secure Socket Layer (SSL) encryption technology in order to protect 
                certain information that you submit. This type of technology protects you from 
                having your information intercepted by anyone other than Trading Economics while it is being 
                transmitted to us. We work hard to ensure that our Web sites are secure and that 
                they meet industry standards. We also use other safeguards such as firewalls, 
                authentication systems (e.g., passwords and personal identification numbers), 
                and access control mechanisms to control unauthorized access to systems and 
                data.
                <br>
                <br>
                <br>
                <b>About Cookies</b><br>
                <br>
                Cookies are small files containing information that a Web site uses to track its 
                visitors. Trading Economics may set and access Trading Economics cookies on your computer, enabling us to 
                learn which advertisements and promotions bring users to our Web site. Trading Economics or 
                any of its divisions may use cookies in connection with Trading Economics products and 
                services to track your activities on our Web sites. Such information that we 
                collect and share would be anonymous and not personally identifiable.
                <br>
                <br>
                <br>
                <b>Sharing Information with Our Affiliates </b>
                <br>
                <br>
                We may share personal information described above with our affiliates for 
                business purposes, such as servicing customer accounts and informing customers 
                about new products and services, and as permitted by applicable law. Our 
                affiliates may include companies controlled or owned by us as well as companies 
                that have an ownership interest in our company. The information we share with 
                affiliates may include any of the information described above, such as your 
                name, address, and account information. Our affiliates maintain the privacy of 
                your information to the same extent Trading Economics does in accordance with this Policy.
                <br>
                <br>
                <br>
                <b>Sharing Information with Third Parties</b><br>
                <br>
                Trading Economics does not disclose your personal information to third parties, except as 
                described in this Policy. Third party disclosures may include sharing such 
                information with non-affiliated companies that perform support services for your 
                account or facilitate your transactions with Trading Economics, including those that provide 
                professional, legal, or accounting advice to Trading Economics. Non-affiliated companies that 
                assist Trading Economics in providing services to you are required to maintain the 
                confidentiality of such information to the extent they receive it and to use 
                your personal information only in the course of providing such services and only 
                for the purposes that Trading Economics dictates. We may also disclose your personal 
                information to third parties to fulfill your instructions or pursuant to your 
                expressed consent. We want you to know that Trading Economics will not sell your personal 
                information.
                <br>
                <br>
                <br>
                <b>Regulatory Disclosure</b><br>
                <br>
                Under limited circumstances, Trading Economics may disclose your personal information to 
                third parties as permitted by, or to comply with, applicable laws and 
                regulations. For example, we may disclose personal information to cooperate with 
                regulatory authorities and law enforcement agencies to comply with subpoenas or 
                other official requests, and as necessary to protect our rights or property. 
                Except as described in this privacy policy, we will not use your personal 
                information for any other purpose, unless we describe how such information will 
                be used at the time you disclose it to us or we obtain your permission.
                <br>
                <br>
                <br>
                <b>Opt Out<br>
                </b>
                <br>
                You are not required to supply any of the personal information that we may 
                request; however, failure to do so may result in our being unable to open or 
                maintain your account or to provide services to you. While we make every effort 
                to ensure that all information we hold about you is accurate, complete, and up 
                to date, you can help us considerably in this regard by promptly notifying us if 
                there are any changes to your personal information.</td>
        </tr>
    </tbody></table>
    <br>
    <br>
    <br>



                </div>
                
            </div>
            <br>
            <br>
        </div>
        <div class="container-fluid" style="background-color: #000; color: #ffffff;">
            <footer style="padding: 20px;">
               <div class="container">
                    <div class="row">
                        <div id="ctl00_Footer1_PanelFooter">
	
    <br>
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-sm-2 col-xs-6">
                <span style="font-weight: bold;">Indicators</span><br>
                <a id="ctl00_Footer1_HyperLink6" class="footerItems" href="./">Homepage</a><br>
                <a id="ctl00_Footer1_HyperLink17" class="footerItems" href="countries">Countries</a><br>
                <a id="ctl00_Footer1_HyperLink18" class="footerItems" href="indicators">Indicators</a><br>
                <a id="ctl00_Footer1_HyperLink1" class="footerItems" href="calendar">Calendar</a><br>
                <a id="ctl00_Footer1_HyperLink2" class="footerItems" href="forecasts">Forecasts</a><br>
                <a id="ctl00_Footer1_HyperLink11" class="footerItems" href="country-list/rating">Ratings</a>
                
            </div>

            <div class="col-md-2 col-sm-2 col-xs-6">
                <span style="font-weight: bold;">About Us</span><br>
                <a id="ctl00_Footer1_HyperLink19" class="footerItems" href="about-te.aspx">Facts</a><br>
                <a id="ctl00_Footer1_HyperLink20" class="footerItems" href="advertise.aspx">Advertisers</a><br>
                <a id="ctl00_Footer1_HyperLink21" class="footerItems" href="investors.aspx">Investors</a><br>
                <a id="ctl00_Footer1_HyperLink23" class="footerItems" href="careers.aspx">Careers</a><br>
                <a id="ctl00_Footer1_HyperLink8" class="footerItems" href="contact.aspx">Contact</a><br>
                <a id="ctl00_Footer1_HyperLink9" class="footerItems" href="privacy-policy.aspx">Privacy</a>

            </div>
            <div class="col-md-2 col-sm-2 col-xs-6">
                <span style="font-weight: bold;">Follow Us</span><br>
                
                <a href="https://www.twitter.com/teconomics"><span class="footerItems">Twitter</span></a><br>
                <a href="https://tradingeconomics.com/rss/"><span class="footerItems">RSS</span></a><br>
                <a href="https://github.com/tradingeconomics/tradingeconomics"><span class="footerItems">GitHub</span></a><br>
                <a href="https://www.youtube.com/channel/UCQix-tJyauKo80AhnN9Ndzg/videos"><span class="footerItems">YouTube</span></a><br>
                <br>
                <br>
            </div>
            <div class="col-md-1 col-sm-1">
                <br>
                <div class="visible-xs visible-sm">&nbsp;<br>
                </div>
                <a href="https://itunes.apple.com/us/app/trading-economics/id1142178921?mt=8" style="display: inline-block; overflow: hidden; background: url(//d3fy651gv2fhd3.cloudfront.net/images/appstore-lrg.svg?v=20171228) no-repeat; width: 135px; height: 40px; background-size: contain;"></a>
                <br>
                <br>
                <a href="https://play.google.com/store/apps/details?id=com.tradingeconomics.android">
                    <img alt="Android app on Google Play" src="https://d3fy651gv2fhd3.cloudfront.net/images/google-play.png"></a>
            </div>

        </div>
    </div>
    <br>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-4 col-xs-12">
                <span style="font-weight: bold; color: green">Solutions</span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 col-sm-2 col-xs-6">
                <a href="/analytics/features.aspx?source=footer" target="_self" class="footerItems">
                    <b class="list-group-item-heading">Export Data</b><br>
                    <span class="list-group-item-text">Download historical data for 20 million indicators using your browser.</span>
                </a>
            </div>
            <div class="col-md-2 col-sm-2 col-xs-6">
                <a href="/api/?source=footer" target="_self" class="footerItems">
                    <b class="list-group-item-heading">API</b><br>
                    <span class="list-group-item-text">Direct access to our calendar releases and historical data.</span>
                </a>
            </div>
          

            
        </div>
    </div>
    <br>
    <span style="font-weight: bold; padding-left: 10px; color: darkorange">Languages</span><br>
    
<div class="container">
    <div class="row">
        <div class="col-md-1 col-sm-2 col-xs-6">
            <a class="footerItems" href="https://tradingeconomics.com" target="_self">English</a><br>
            <a class="footerItems" href="https://es.tradingeconomics.com" target="_self">Español</a><br>
            <a class="footerItems" href="https://pt.tradingeconomics.com" target="_self">Português</a><br>
            <a class="footerItems" href="https://fr.tradingeconomics.com" target="_self">Français</a><br>
            <a class="footerItems" href="https://de.tradingeconomics.com" target="_self">Deutsch</a><br>
            <a class="footerItems" href="https://it.tradingeconomics.com" target="_self">Italiano</a><br>
        </div>
        <div class="col-md-1 col-sm-2 col-xs-6">
            <a class="footerItems" href="https://ru.tradingeconomics.com" target="_self">Русский</a><br>
            <a class="footerItems" href="https://pl.tradingeconomics.com" target="_self">Polski</a><br>
            <a class="footerItems" href="https://da.tradingeconomics.com" target="_self">Dansk</a><br>
            <a class="footerItems" href="https://sv.tradingeconomics.com" target="_self">Svenska</a><br>
            <a class="footerItems" href="https://no.tradingeconomics.com" target="_self">Norsk</a><br>
            <a class="footerItems" href="https://fi.tradingeconomics.com" target="_self">Suomi</a><br>
        </div>
        <div class="col-md-1 col-sm-2 col-xs-6">
            <a class="footerItems" href="https://tr.tradingeconomics.com" target="_self">Türkçe</a><br>
            <a class="footerItems" href="https://hu.tradingeconomics.com" target="_self">Magyar</a><br>
            <a class="footerItems" href="https://fa.tradingeconomics.com" target="_self">Farsi</a><br>
            <a class="footerItems" href="https://id.tradingeconomics.com" target="_self">Indonesian</a><br>
            <a class="footerItems" href="https://ms.tradingeconomics.com" target="_self">Malay</a><br>
            <a class="footerItems" href="https://sw.tradingeconomics.com" target="_self">Swahili</a><br>
        </div>
        <div class="col-md-1 col-sm-2 col-xs-6">
            <a class="footerItems" href="https://zh.tradingeconomics.com" target="_self">简体中文</a><br>
            <a class="footerItems" href="https://jp.tradingeconomics.com" target="_self">日本語</a><br>
            <a class="footerItems" href="https://ko.tradingeconomics.com" target="_self">한국어</a><br>
            <a class="footerItems" href="https://hi.tradingeconomics.com" target="_self">हिंदी</a><br>
            <a class="footerItems" href="https://bn.tradingeconomics.com" target="_self">বাংলা</a><br>
            <a class="footerItems" href="https://ar.tradingeconomics.com" target="_self">العربية</a><br>
            <a class="footerItems" href="https://ur.tradingeconomics.com" target="_self">اردو</a><br>
        </div>
    </div>
</div>
    <br>
    <span style="color: #E7E7EF">Copyright ©2019 TRADING ECONOMICS<br>
        All Rights Reserved</span><br>
    <br>
    <br>
    

</div>


                    </div>
                </div>
            </footer>
        </div>
    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
    

<style>
    .modal-dialog-centered {
        display: flex;
        align-items: center;
        justify-content: center;
        height: calc(100% - 60px);
    }

    .modal-header, .modal-footer {
        padding: 10px 15px;
        border: none;
    }

    #menu-download-dropdown a {
        padding: 10px 20px;
    }
</style>

<script>
 

    $(document).ready(function () {
        console.log("JS for page menu");

        var pageTabs = document.querySelector(".pagetabs");
        if (pageTabs) {
            pageTabs.addEventListener("click", function (e) {
                if (e.target.classList.contains("scroll-top-on-click")) {
                    window.scroll(0, 0);
                }
            });
        }

        // build the event to the click
        $('body').on("click", "a[data-download]", function (event) {
            event.preventDefault();
            event.stopPropagation();
            downloadBtnClickEvent(event);
        });

        $('.pagetabs').on('click', '.page-scroll', function () {
            $('html, body').animate({
                scrollTop: $($.attr(this, 'href')).offset().top
            }, 500);
            return false;
        });

        $('.pagetabs').on('click', '.page-scroll-adjusted', function () {
            $('html, body').animate({
                scrollTop: $($.attr(this, 'href')).offset().top-100
            }, 500);
            return false;
        });

        var indicatorPage = false, calendarPage = false, snapshotPage = false;
        var URL = window.location.pathname;
        var hasTabs = false;
        if (URL.indexOf("/currencies") > -1 || URL.indexOf("/stocks") > -1 || URL.indexOf("/bonds") > -1 || URL.indexOf("/commodities") > -1 || URL.indexOf(":") > -1) {
            if (!hasTabs) {
                var download_link = "https://api.tradingeconomics.com/markets/";
                if (URL.indexOf("/currencies") > -1) {
                    download_link += "currency";
                } else if (URL.indexOf("/stocks") > -1) {
                    download_link += "index";
                } else if (URL.indexOf("/bonds") > -1) {
                    download_link += "bond";
                } else if (URL.indexOf("/commodities") > -1) {
                    download_link += "commodities";
                } else if (URL.indexOf(":") > -1) {
     
                }


                var tab = "<li><a href='" + download_link + "' data-download='csv'><i class='glyphicon glyphicon-save hidden-sm hidden-md'></i>&nbsp;Download</a></li>";
                $('#pagemenutabs').append(tab);
                hasTabs = true;

                snapshotPage = true;
            }
        }
        else if ($("#menu-download-btn") && $("#menu-download-btn").length > 0) {
            indicatorPage = true;

            buildDownloadList($("#menu-download-btn"));

            // Event to GA on clicks on the download menu btn in the IndicatorUC pages
            $("#menu-download-btn").click(function () {
                ga('send', 'event', 'Data Request', 'Dropdown');
            });
        }
        else if ($(".calendar-download") && $(".calendar-download").length > 0) {
            calendarPage = true;
            buildCalendarDownload($(".calendar-download"));
        }



        function downloadBtnClickEvent(event)
        {
            console.log("download click ..");

            var downloadBtn = $(event.target).closest("a");

            var dataDownload = $(downloadBtn).attr("data-download");
            if (!dataDownload)
                return;

            console.log("data-download = " + dataDownload);

            var modalTitle = "";
            var modalContent = "";
            var modalFooter = "";
            var loginReturn = "https://sso.tradingeconomics.com/?returnurl=https://tradingeconomics.com" + URL;
            var loginAction = "<a class='btn btn-default' href='" + loginReturn + "' target='_blank'>Member?  <b>Login</b></a>";

            switch (dataDownload) {
                case "csv":
                    if (isLoggedIn) {
                        downloadItem(event.target, dataDownload);
                        return;
                    } else {
                        modalTitle = "<b>Join Trading Economics</b>";

                        modalContent = "Trading Economics provides more than 20 million economic indicators for nearly 200 countries, plus exchange rates, government bond yields, stock indexes, and commodity prices. ";
                        modalContent += "Subscription users can use a web interface to export data or get it directly through an Excel add-in. ";
                        modalContent += "Clients can also use an API to have direct access to our data, to query our real-time economic calendar and to subscribe to updates from any programming language.";

                        modalFooter += "<div style='text-align:center;'><div class='btn-group'><a class='btn btn-default' href='https://tradingeconomics.com/analytics/features.aspx' target='_blank'>Learn More</a>";
                        modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/analytics/pricing.aspx' target='_blank'>Pricing</a>";
                        modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/contact.aspx?subject=data' target='_blank'>Questions? <b>Contact us</b></a>";
                        modalFooter += loginAction;
                        modalFooter += "</div></div>"

                        // ga event for logged out CSV download
                        if (indicatorPage)
                            ga('send', 'event', 'Data Request', 'Dropdown', 'csv');
                        else if (calendarPage)
                            ga('send', 'event', 'Data Request', 'Calendar', 'csv');
                        else if (snapshotPage)
                            ga('send', 'event', 'Data Request', 'Snapshot', 'csv');
                    }
                    break;
                case "excel":
                    modalTitle = "<b>Trading Economics Excel Add-in</b>";
                    modalContent += "The Trading Economics Excel Addin allows users with an active subscription to access our data directly from excel. "
                    modalContent += "Trading Economic provides more than 20 million economic indicators for nearly 200 countries, plus exchange rates, government bond yields, stock indexes, and commodity prices. ";
                    modalFooter = "<div style='text-align:center;'><div class='btn-group'><a class='btn btn-default' href='https://tradingeconomics.com/analytics/excel.aspx' target='_blank'>Learn More</a>";
                    modalFooter += "<a class='btn btn-default'  data-download='excel-addin'>Download Addin</a>";
                    modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/contact.aspx?subject=excel' target='_blank'>Questions? <b>Contact us</b></a>";
                    if (!isLoggedIn)
                        modalFooter += loginAction;
                    modalFooter += "</div></div>";

                    // ga event for Excel click
                    if (indicatorPage)
                        ga('send', 'event', 'Data Request', 'Dropdown', 'excel');

                    break;
                case "api":
                    modalTitle = "<b>Trading Economics API</b>";
                    modalContent = "<div>";
                    modalContent += "API Users have direct access to our economic data from any programming language, can query our real-time calendar, retrieve financial market quotes and subscribe to live updates. ";
                    modalContent += "Trading Economics provides more than 20 million economic indicators for nearly 200 countries, plus exchange rates, government bond yields, stock indexes, and commodity prices."
                    modalContent += "</div>";
                    modalFooter = "<div style='text-align:center;'><div class='btn-group'><a class='btn btn-default' href='https://tradingeconomics.com/api/' target='_blank'>Learn More</a>";
                    modalFooter += "<a class='btn btn-default' href='https://docs.tradingeconomics.com/' target='_blank'>API Docs</a>";
                    modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/contact.aspx?subject=api+plan' target='_blank'>Questions? <b>Contact us</b></a>";
                    if (!isLoggedIn)
                        modalFooter += loginAction;
                    modalFooter += "</div></div>";

                    // ga event for API click on indicator
                    if (indicatorPage)
                        ga('send', 'event', 'Data Request', 'Dropdown', 'api');

                    break;
                case "api-calendar":
                    modalTitle = "<b>Trading Economics API</b>"
                    modalContent = "The Trading Economics API provides you with direct access to our calendar,  instant updates after economic events get released, historical data on thousands of indicators and live market quotes. ";

                    modalFooter = "<div style='text-align:center'><div class='btn-group'><a class='btn btn-default' href='../api/?source=calendar' target='_blank'>Learn More</a>";
                    modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/contact.aspx?subject=API+Access' target='_blank'>Any question? <b>Contact us</b></a>";
                    if (!isLoggedIn)
                        modalFooter += loginAction;
                    modalFooter += "</div></div>";

                    // ga event for API click on calendar
                    if (indicatorPage)
                        ga('send', 'event', 'Data Request', 'Calendar', 'api');
                    break;
                case "excel-addin":
                    console.log("Excel Addin Download")
                    ga('send', 'event', 'Data Request', 'Excel-Download');
                    window.location = 'https://github.com/tradingeconomics/tradingeconomics/raw/master/Excel/All_Releases/ExcelAddInDeploy_latest.msi';
                    return;
                    break;
            }

            showDownloadModal(modalTitle, modalContent, modalFooter);
        }

        function showDownloadModal(modalTitle, modalContent, modalFooter) {
            var modal = "<div class ='modal' id='downloadModal' tabindex='-1' role='dialog' aria-labelledby='myModalLabel'>";
            modal += "<div class='modal-dialog modal-dialog-centered' role='document'>";
            modal += "<div class='modal-content'>";
            modal += "<div class='modal-header'><button type='button' class ='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times; </span></button><div class='modal-title'></div></div>";
            modal += "<div class='modal-body' style='text-align:justify;'></div>"
            modal += "<div class='modal-footer'></div>"
            modal += "</div></div></div>"

            var jModal = $(modal);

            $(jModal).find(".modal-title").html(modalTitle);

            // define the modal content
            if (modalContent)
                $(jModal).find(".modal-body").html(modalContent);
            else
                $(jModal).find(".modal-body").remove();

            // define the modal footer
            if (modalFooter)
                $(jModal).find(".modal-footer").html(modalFooter);
            else
                $(jModal).find(".modal-footer").remove();

            $(jModal).on('show.bs.modal', function (e) {
                $(".navbar").css("padding-right", "17px");
                $(".pagemenu").css("padding-right", "17px");
                $(".pagetabs").css("padding-right", "17px");
            });

            $(jModal).on('hide.bs.modal', function (e) {
                $(".navbar").css("padding-right", "");
                $(".pagemenu").css("padding-right", "");
                $(".pagetabs").css("padding-right", "");
            });


            $(jModal).modal("show");
        }

        function buildDownloadList(downloadBtn) {
            downloadBtn.addClass("dropdown-toggle");
            downloadBtn.attr("data-toggle", "dropdown");


            var csvLink = $("<li><a href='#' data-download='csv'><img src='https://d3fy651gv2fhd3.cloudfront.net/Images/DownloadIcons/download-csv-filled.png' alt='CSV download button' style='height: 25px; width: 25px'>&nbsp;&nbsp;Download Data</a></li>");
            var excelLink = $("<li><a href='#' data-download='excel'><img src='https://d3fy651gv2fhd3.cloudfront.net/Images/DownloadIcons/microsoft-excel-filled.svg' alt='Excel download button' style='height: 25px; width: 25px'>&nbsp;&nbsp;Excel Add-in</a></li>");
            var apiLink = $("<li><a href='#' data-download='api'><img src='https://d3fy651gv2fhd3.cloudfront.net/Images/DownloadIcons/download-api.svg' alt='CSV download button' style='height: 25px; width: 25px'>&nbsp;&nbsp;API Access</a></li>");

            // THIS IS A HACK SO WE DONT NEED TO REWRITE THE LINK BUILT IN THIS MOMENT
            var currCsvDownload = $("#data a.export-btn-csv").attr("href");

            if (currCsvDownload)
                csvLink = $("<li><a href='" + currCsvDownload + "' data-download='csv' target='_blank'><img src='../Images/DownloadIcons/download-csv-filled.png' alt='CSV download button' style='height: 25px; width: 25px'>&nbsp;&nbsp;Download Data</a></li>");

            var downloadList = $("<ul id='menu-download-dropdown' class='dropdown-menu'>");
            downloadList.append(csvLink);
            downloadList.append(excelLink);
            downloadList.append(apiLink);

            downloadBtn.after(downloadList);
        }

        function buildCalendarDownload(container) {
            if (isLoggedIn) {
                var downloadBtn = $("<a id='HyperLinkToDownload' href='https://api.tradingeconomics.com/calendar' class='btn btn-info' data-download='csv'><i class='glyphicon glyphicon-save hidden-sm hidden-md'></i>&nbsp;Download</a>");
                var apiBtn = $("<a id='HyperLinkToAPI' href='#' class='btn btn btn-primary' data-download='api-calendar'><i class='glyphicon glyphicon-th hidden-sm hidden-md'></i>&nbsp;API</a>");

                $(container).append(downloadBtn);
                $(container).append(apiBtn);
            } else {
                var downloadBtn = $("<a id='HyperLinkToDownload' href='https://api.tradingeconomics.com/calendar' class='btn btn-primary' data-download='api-calendar'><i class='glyphicon glyphicon-save hidden-sm hidden-md'></i>&nbsp;Download</a>");
                $(container).append(downloadBtn);
            }
        }

        var lock_download = false;
        function downloadItem(target, format) {

            target = $(target).closest('a');

            if (!target || target.length == 0 || !$(target).is('a')) {
                console.log('Download link not found');
                return;
            }

            if (lock_download)
                return;

            lock_download = true;

            var url = $(target).attr('href');
            console.log('url to download = ' + url);

            var d_type = format;
            if (format == 'csv') {
                url = url.replace('format=csv', 'format=json');
                d_type = 'json';
            }

            var loader = $("<span>&nbsp;</span><div class='loader' style='height: 15px;width: 15px;display: inline-block;vertical-align: text-bottom;'></div>");
            $(target).append(loader);

            $.ajax({
                url: url,
                type: "GET",
                dataType: d_type,
                xhrFields: {
                    withCredentials: true
                },
            }).done(function (data, status, xhr) {
                console.log('SUCCESS');
                console.log('status = ' + xhr.status);
                console.log('data = ' + data.length);

                // ga event for logged in successful CSV download
                if (indicatorPage)
                    ga('send', 'event', 'Data Request', 'Dropdown', format, 1);
                else if (calendarPage)
                    ga('send', 'event', 'Data Request', 'Calendar', format, 1);
                else if (snapshotPage)
                    ga('send', 'event', 'Data Request', 'Snapshot', format, 1);

                var filename = buildFilename(url, format);

                downloadData(data, filename, format);

            }).fail(function (xhr, status, error) {
                console.log('ERROR');
                console.log('status = ' + xhr.status);
                console.log('error message = ' + xhr.responseText)

                // ga event for logged in failed CSV download
                if (indicatorPage)
                    ga('send', 'event', 'Data Request', 'Dropdown', format, 0);
                else if (calendarPage)
                    ga('send', 'event', 'Data Request', 'Calendar', format, 0);
                else if (snapshotPage)
                    ga('send', 'event', 'Data Request', 'Snapshot', format, 0);

                if (xhr.status) {
                    switch (xhr.status) {
                        case 401: // unauthorized
                            launchInvalidKeyModal();
                            break;
                        case 403: // forbidden
                            launchTrialOverModal();
                            break;
                        case 400: // bad request
                            launchBadRequestModal();
                            break;
                        case 409: // conflict (more requests per second than allowed)
                            launchThrottleModal();
                            break;
                        default:
                            console.log('Unhandled status = ' + xhr.status)
                            var redirect_url = '';
                            if (TECountry) {
                                redirect_url = 'https://data.tradingeconomics.com/data/export/bycountry?country=' + TECountry;
                            } else {
                                redirect_url = 'https://data.tradingeconomics.com/';
                            }
                            console.log('redirecting to: ' + redirect_url);
                            window.open(redirect_url, '_blank');
                            break;
                    }
                }
            }).always(function (xhr, status, error) {
                lock_download = false;
                console.log('done downloading!');
                loader.remove();
            });
        };

        function buildFilename(url, format) {
            var filename = decodeURI(url);

            filename = filename.replace("https://api.tradingeconomics.com/", "");

            var questionMark = filename.indexOf('?');
            if (questionMark != -1)
                filename = filename.substring(0, questionMark);

            filename = filename.replace(/\//g, '_');
            filename = filename.replace(/\s/g, '_');
            filename = filename.replace(/:/g, '_');
            filename = filename.replace(/-/g, '_');

            return filename + '.' + format;
        }

        function downloadData(data, filename, type) {
            var dataFile = null;

            switch (type) {
                case "csv":
                    var csv = convertArrayOfObjectsToCSV({ data: data });
                    if (csv == null) return;
                    // create the csv file
                    var dataFile = new Blob([csv], { type: "text/csv;charset=utf-8" });
                    break;
                case "json":
                    var dataFile = new Blob([JSON.stringify(data)], { type: "text/json;charset=utf-8" });
                    break;
                case "xml":
                    var dataFile = new Blob([new XMLSerializer().serializeToString(data.documentElement)], { type: "text/plain;charset=utf-8" });
                    break;
            }

            if (dataFile != null) {
                var anchor = document.createElement('a');
                anchor.href = window.URL.createObjectURL(dataFile);
                anchor.setAttribute("hidden", true);
                anchor.setAttribute("target", "_self");
                anchor.setAttribute("download", filename);

                document.body.appendChild(anchor);

                anchor.click();
                anchor.remove();
            }
        }

        /* Download CSV from: https://halistechnology.com/2015/05/28/use-javascript-to-export-your-data-as-csv/ */
        function convertArrayOfObjectsToCSV(args) {
            var result, ctr, keys, columnDelimiter, lineDelimiter, data;

            data = args.data || null;
            if (data == null || !data.length) {
                return null;
            }

            columnDelimiter = args.columnDelimiter || ',';
            lineDelimiter = args.lineDelimiter || '\r\n';

            keys = Object.keys(data[0]);

            result = '';
            result += keys.join(columnDelimiter);
            result += lineDelimiter;

            data.forEach(function (item) {
                ctr = 0;
                keys.forEach(function (key) {
                    if (ctr > 0) result += columnDelimiter;

                    result += item[key];
                    ctr++;
                });
                result += lineDelimiter;
            });

            return result;
        }

        function errorModal(title, text, actionLink, actionMsg, contactSubject) {
            var modalTitle = "<span><b>" + title + "</b></span>";
            var modalFooter = "<div style='text-align:center;'><div class='btn-group'>";
            if (actionLink && actionMsg)
                modalFooter += "<a class='btn btn-primary' href='" + actionLink + "'>" + actionMsg + "</a>";
            modalFooter += "<a class='btn btn-default' href='https://tradingeconomics.com/contact.aspx?subject=" + contactSubject + "' target='_blank'>Any question? <b>Contact us</b></a></div></div>";

            showDownloadModal(modalTitle, text, modalFooter);
        }

        function launchTrialOverModal(experience) {
            errorModal("Trading Economics Data",
                "Activate your plan to get more data from Trading Economics",
                "https://billing.tradingeconomics.com/plans.aspx?activate=true",
                "ACTIVATE",
                "account+limit");
        }

        function launchInvalidKeyModal() {
            errorModal("Trading Economics Data",
                "Trading Economics provides its premium members with access to more than 20 million indicators for 196 countries plus historical/delayed/live quotes for exchange rates, stocks, indexes, bonds and commodity prices. Subscribe to a plan to download data in a easy to use web interface, using our excel addin or our API.",
                "https://billing.tradingeconomics.com/plans.aspx?lead=true",
                "Get Started",
                "Subscription+Plans");
        }

        function launchThrottleModal() {
            errorModal("Trading Economics Data",
               "Limit of request per second reached",
               null,
               null,
               "API+Access");
        }

        function launchBadRequestModal() {
            errorModal("Trading Economics Data",
               "Something went wrong with the request, please contact support@tradingeconomics.com, or click the button bellow",
               "https://tradingeconomics.com/contact.aspx?subject=API+Bad+Request",
               "CONTACT SUPPORT",
               "API+Access");
        }
    });

</script>

<script type="text/javascript">
    var HasForecastChart = false;
    $(document).ready(function () {
        var chartUrl = '/privacy-policy.aspx';
        var chartUrl2 = "";
        var startDate = "";
        var endDate = "";
        var chartType = "";
        if (!isPostBack) {
            console.log("HISTORICAL CHART JS");
            chartUrl = $('#ImageChart').attr('src');
        }
        else {
            console.log("HISTORICAL CHART POSTBACK");
        }

        function SetSrc(src) {
            console.log("chart src:" + src);
            $('#ImageChart').attr("src", src);
            var srcset = src + " 1x";
            srcset += ", " + src.replace(".png", "@2x.png") + " 2x";
            srcset += ", " + src.replace(".png", "@3x.png") + " 3x";
            srcset += ", " + src.replace(".png", "@4x.png") + " 4x";
            //var srcset = src + "&w=200 500w";
            //srcset += ", " + src + "&w=100 730w";
            $('#ImageChart').attr("srcset", srcset);
        }
        $('.chart-lookback').click(function () {
            console.log("chart lookback click");
            var now = new Date();
            var lookback = $(this).attr("data-lookback")
            console.log("lookback: " + lookback + " days ");
            now.setDate(now.getDate() - lookback);
            startDate = now.toISOString().split('T')[0].replace("-", "").replace("-", "");
            console.log("startDate: " + startDate);
            endDate = "";
            SetChart()
        });

        $('#chart-custom-dates').click(function () {
            startDate = $('#startDate').val().replace("-", "").replace("-", "");
            console.log("endDate: " + startDate);
            endDate = $('#endDate').val().replace("-", "").replace("-", "");
            console.log("endDate: " + endDate);
            SetChart();
        });

        $('.chart-type').click(function () {
            chartType = $(this).attr("data-type")
            console.log("chartType: " + chartType);
            SetChart();
        });

        function SetChart() {
            console.log("Updating Chart..");
            $('#spinner').css("visibility", "visible");
            var src = chartUrl;
            if (startDate != "") src += "&d1=" + startDate;
            if (endDate != "") src += "&d2=" + endDate;
            if (chartType != "") src += "&" + chartType;
            if (chartUrl2 != "") src += "&url2=" + chartUrl2;
            SetSrc(src);
            SetEmbed();
        }



        function SetComparison(url2) {
            console.log("Comparing with");
            console.log(url2);
            chartUrl2 = url2;
            SetChart();
        }
        function SetEmbed() {
            console.log("Setting Embed...");
            console.log("embed chart url:" + chartUrl);
            var src = "https://d3fy651gv2fhd3.cloudfront.net/embed/?";
            src += chartUrl.substring(chartUrl.indexOf("?") + 1);
            if (startDate != "") src += "&d1=" + startDate;
            if (endDate != "") src += "&d2=" + endDate;
            if (chartType != "") src += "&type=" + chartType;
            if (chartUrl2 != "") src += "&title=false&url2=" + chartUrl2;
            var embedHeight = $('#TextBoxHeight').val();
            var embedWidth = $('#TextBoxWidth').val();
            src += "&h=" + embedHeight;
            src += "&w=" + embedWidth;
            console.log("embed url:" + src);
            var embedText = "<iframe src='" + src + "' height='" + embedHeight + "' width='" + embedWidth + "'  frameborder='0' scrolling='no'></iframe><br />source: <a href='" + location.href + "'>tradingeconomics.com</a>"
            $('#TextBoxEmbed').val(embedText);
            $('#embedPreviewLink').attr("href", src);
        }
        $('#DropDownListCategory').change(function () {
            console.log("Changing Categories...");
        });
        $('#embedButton').click(function () {
            console.log("Expanding Embed...");
        });

        $('#TextBoxWidth').keyup(function () {
            console.log("Setting Embed Width...");
            SetEmbed();
        });
        $('#TextBoxHeight').keyup(function () {
            console.log("Setting Embed Height...");
            SetEmbed();
        });

        $('#ImageChart').on('load', function () {
            console.log("Completed load of chart...");
            $('#spinner').css("visibility", "hidden");
        });


        // LOAD HISTORICAL CHART ASYNC
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {

            var target = $(e.target).attr("href");
            console.log("Tab Click => " + target);

            if (target == "#historical" || target == "#forecast") {
                var src = 'https://d3fy651gv2fhd3.cloudfront.net/charts/historical.png';
                src += '?s=' + encodeURI(TESymbol);
                src += '&v=' + TELastUpdate;
                src += 'V20191105';

                if (target == "#forecast" && HasForecastChart == false) {
                    src += '&forecast=3';
                    var srcset = src + " 1x";
                    srcset += ", " + src.replace(".png", "@2x.png") + " 2x";
                    srcset += ", " + src.replace(".png", "@3x.png") + " 3x";
                    srcset += ", " + src.replace(".png", "@4x.png") + " 4x";
                    $('#forecast-desc').append("<img srcset='" + srcset + "' />");  
                    HasForecastChart = true;
                }
                   
            }

        if (target == "#alerts") {
            $('#AlertMePanel').collapse('show');
        }
    });


        var hasCountriesSelect = false;
        var hasIndicatorsSelect = false;
        var categorySelect = '';

        $('#compareButton').click(function () {
            console.log("Chart => Compare => Click");
            if (!hasCountriesSelect) {
                var countries = ["Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua And Barbuda", "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "East Timor", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Euro Area", "European Union", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Greenland", "Grenada", "Guatemala", "Guinea", "Guinea Bissau", "Guyana", "Haiti", "Honduras", "Hong Kong", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Isle Of Man", "Israel", "Italy", "Ivory Coast", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Kosovo", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Macau", "Macedonia", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nepal", "Netherlands", "New Caledonia", "New Zealand", "Nicaragua", "Niger", "Nigeria", "Norway", "Oman", "Pakistan", "Palau", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Puerto Rico", "Qatar", "Republic of the Congo", "Romania", "Russia", "Rwanda", "Samoa", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Korea", "South Sudan", "Spain", "Sri Lanka", "St Kitts and Nevis", "St Lucia", "St Vincent And The Grenadines", "Sudan", "Suriname", "Swaziland", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe", "Commodity"];
                var countriesSelect = '<option>Pick Country</option>';
                for (i = 0; i < countries.length; i++) {
                    countriesSelect += '<option>' + countries[i] + '</option>';
                }
                $('#compare-countries').append(countriesSelect);
                hasCountriesSelect = true;
            }

            $("#compare-countries").change(function () {
                if (hasIndicatorsSelect) {
                    $('#compare-indicators').find('option').remove().end();
                    $("#compare-indicators").hide();
                }

                var countrySelected = $("#compare-countries option:selected").text();
                console.log("Chart => Compare => Country = " + countrySelected);
                $.getJSON("/ws/query.ashx?c=" + countrySelected,
                    function (data) {
                        //console.log(data);
                        var indicatorsSelect = '<option>Pick Indicator</option>';
                        for (i = 0; i < data.length; i++) {
                            indicatorsSelect += '<option value="' + data[i].url + '">' + data[i].category + '</option>';
                        }
                        $("#compare-indicators").show();
                        $('#compare-indicators').append(indicatorsSelect);
                        hasIndicatorsSelect = true;

                        if (categorySelect != '') {
                            $categoryOption = $('#compare-indicators option').filter(function () { return $(this).html() == categorySelect; })
                            if ($categoryOption.length > 0) {
                                $categoryOption.prop('selected', true);
                                var urlSelect = $categoryOption.val();
                                SetComparison(urlSelect);
                            }
                            else {
                                console.log("Chart => Compare => This Country Does not Have Such Category");
                            }
                        }

                    }
                );

            });

            $("#compare-indicators").change(function () {
                categorySelect = $("#compare-indicators option:selected").text();
                var urlSelect = $("#compare-indicators option:selected").val();
                console.log("Chart => Compare => Indicator => " + categorySelect + " " + urlSelect);
                SetComparison(urlSelect);
            });

        });

        if (document.location.href.indexOf("#alerts") > -1) {
            console.log("Expand AlertMePanel");
            //$('#AlertMePanel').prepend("<br/>ALERTS<br/><br/>")
            $('.nav-tabs a[href="#alerts"]').tab('show');
            //$('#AlertMePanel').collapse('show');
        }

        var $myGroup = $('#historical');
        $myGroup.on('show.bs.collapse', '.collapse', function () {
            $myGroup.find('.collapse.in').collapse('hide');
        });

        /*
        if (TEFrequency == "Yearly") {
            $("li").find("[data-lookback='365']").hide();
            $("li").find("[data-lookback='1095']").hide();
        }*/
    });

</script>


<script src="https://d3fy651gv2fhd3.cloudfront.net/scripts/socket.io.js?v=2-3"></script>
<script>
    !function (t, i) { "function" == typeof define && define.amd ? define("pnotify", ["jquery"], function (s) { return i(s, t) }) : "object" == typeof exports && "undefined" != typeof module ? module.exports = i(require("jquery"), global || t) : t.PNotify = i(t.jQuery, t) }("undefined" != typeof window ? window : this, function (t, i) { var s = function (i) { var e, o, n = { dir1: "down", dir2: "left", push: "bottom", spacing1: 36, spacing2: 36, context: t("body"), modal: !1 }, a = t(i), r = function () { o = t("body"), c.prototype.options.stack.context = o, a = t(i), a.bind("resize", function () { e && clearTimeout(e), e = setTimeout(function () { c.positionAll(!0) }, 10) }) }, h = function (i) { var s = t("<div />", { class: "ui-pnotify-modal-overlay" }); return s.prependTo(i.context), i.overlay_close && s.click(function () { c.removeStack(i) }), s }, c = function (t) { this.state = "initializing", this.timer = null, this.animTimer = null, this.styles = null, this.elem = null, this.container = null, this.title_container = null, this.text_container = null, this.animating = !1, this.timerHide = !1, this.parseOptions(t), this.init() }; return t.extend(c.prototype, { version: "3.2.0", options: { title: !1, title_escape: !1, text: !1, text_escape: !1, styling: "brighttheme", addclass: "", cornerclass: "", auto_display: !0, width: "300px", min_height: "16px", type: "notice", icon: !0, animation: "fade", animate_speed: "normal", shadow: !0, hide: !0, delay: 8e3, mouse_reset: !0, remove: !0, insert_brs: !0, destroy: !0, stack: n }, modules: {}, runModules: function (t, i) { var s; for (var e in this.modules) s = "object" == typeof i && e in i ? i[e] : i, "function" == typeof this.modules[e][t] && (this.modules[e].notice = this, this.modules[e].options = "object" == typeof this.options[e] ? this.options[e] : {}, this.modules[e][t](this, "object" == typeof this.options[e] ? this.options[e] : {}, s)) }, init: function () { var i = this; return this.modules = {}, t.extend(!0, this.modules, c.prototype.modules), "object" == typeof this.options.styling ? this.styles = this.options.styling : this.styles = c.styling[this.options.styling], this.elem = t("<div />", { class: "ui-pnotify " + this.options.addclass, css: { display: "none" }, "aria-live": "assertive", "aria-role": "alertdialog", mouseenter: function (t) { if (i.options.mouse_reset && "out" === i.animating) { if (!i.timerHide) return; i.cancelRemove() } i.options.hide && i.options.mouse_reset && i.cancelRemove() }, mouseleave: function (t) { i.options.hide && i.options.mouse_reset && "out" !== i.animating && i.queueRemove(), c.positionAll() } }), "fade" === this.options.animation && this.elem.addClass("ui-pnotify-fade-" + this.options.animate_speed), this.container = t("<div />", { class: this.styles.container + " ui-pnotify-container " + ("error" === this.options.type ? this.styles.error : "info" === this.options.type ? this.styles.info : "success" === this.options.type ? this.styles.success : this.styles.notice), role: "alert" }).appendTo(this.elem), "" !== this.options.cornerclass && this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass), this.options.shadow && this.container.addClass("ui-pnotify-shadow"), !1 !== this.options.icon && t("<div />", { class: "ui-pnotify-icon" }).append(t("<span />", { class: !0 === this.options.icon ? "error" === this.options.type ? this.styles.error_icon : "info" === this.options.type ? this.styles.info_icon : "success" === this.options.type ? this.styles.success_icon : this.styles.notice_icon : this.options.icon })).prependTo(this.container), this.title_container = t("<h4 />", { class: "ui-pnotify-title" }).appendTo(this.container), !1 === this.options.title ? this.title_container.hide() : this.options.title_escape ? this.title_container.text(this.options.title) : this.title_container.html(this.options.title), this.text_container = t("<div />", { class: "ui-pnotify-text", "aria-role": "alert" }).appendTo(this.container), !1 === this.options.text ? this.text_container.hide() : this.options.text_escape ? this.text_container.text(this.options.text) : this.text_container.html(this.options.insert_brs ? String(this.options.text).replace(/\n/g, "<br />") : this.options.text), "string" == typeof this.options.width && this.elem.css("width", this.options.width), "string" == typeof this.options.min_height && this.container.css("min-height", this.options.min_height), "top" === this.options.stack.push ? c.notices = t.merge([this], c.notices) : c.notices = t.merge(c.notices, [this]), "top" === this.options.stack.push && this.queuePosition(!1, 1), this.options.stack.animation = !1, this.runModules("init"), this.state = "closed", this.options.auto_display && this.open(), this }, update: function (i) { var s = this.options; return this.parseOptions(s, i), this.elem.removeClass("ui-pnotify-fade-slow ui-pnotify-fade-normal ui-pnotify-fade-fast"), "fade" === this.options.animation && this.elem.addClass("ui-pnotify-fade-" + this.options.animate_speed), this.options.cornerclass !== s.cornerclass && this.container.removeClass("ui-corner-all " + s.cornerclass).addClass(this.options.cornerclass), this.options.shadow !== s.shadow && (this.options.shadow ? this.container.addClass("ui-pnotify-shadow") : this.container.removeClass("ui-pnotify-shadow")), !1 === this.options.addclass ? this.elem.removeClass(s.addclass) : this.options.addclass !== s.addclass && this.elem.removeClass(s.addclass).addClass(this.options.addclass), !1 === this.options.title ? this.title_container.slideUp("fast") : this.options.title !== s.title && (this.options.title_escape ? this.title_container.text(this.options.title) : this.title_container.html(this.options.title), !1 === s.title && this.title_container.slideDown(200)), !1 === this.options.text ? this.text_container.slideUp("fast") : this.options.text !== s.text && (this.options.text_escape ? this.text_container.text(this.options.text) : this.text_container.html(this.options.insert_brs ? String(this.options.text).replace(/\n/g, "<br />") : this.options.text), !1 === s.text && this.text_container.slideDown(200)), this.options.type !== s.type && this.container.removeClass(this.styles.error + " " + this.styles.notice + " " + this.styles.success + " " + this.styles.info).addClass("error" === this.options.type ? this.styles.error : "info" === this.options.type ? this.styles.info : "success" === this.options.type ? this.styles.success : this.styles.notice), (this.options.icon !== s.icon || !0 === this.options.icon && this.options.type !== s.type) && (this.container.find("div.ui-pnotify-icon").remove(), !1 !== this.options.icon && t("<div />", { class: "ui-pnotify-icon" }).append(t("<span />", { class: !0 === this.options.icon ? "error" === this.options.type ? this.styles.error_icon : "info" === this.options.type ? this.styles.info_icon : "success" === this.options.type ? this.styles.success_icon : this.styles.notice_icon : this.options.icon })).prependTo(this.container)), this.options.width !== s.width && this.elem.animate({ width: this.options.width }), this.options.min_height !== s.min_height && this.container.animate({ minHeight: this.options.min_height }), this.options.hide ? s.hide || this.queueRemove() : this.cancelRemove(), this.queuePosition(!0), this.runModules("update", s), this }, open: function () { this.state = "opening", this.runModules("beforeOpen"); var t = this; return this.elem.parent().length || this.elem.appendTo(this.options.stack.context ? this.options.stack.context : o), "top" !== this.options.stack.push && this.position(!0), this.animateIn(function () { t.queuePosition(!0), t.options.hide && t.queueRemove(), t.state = "open", t.runModules("afterOpen") }), this }, remove: function (s) { this.state = "closing", this.timerHide = !!s, this.runModules("beforeClose"); var e = this; return this.timer && (i.clearTimeout(this.timer), this.timer = null), this.animateOut(function () { if (e.state = "closed", e.runModules("afterClose"), e.queuePosition(!0), e.options.remove && e.elem.detach(), e.runModules("beforeDestroy"), e.options.destroy && null !== c.notices) { var i = t.inArray(e, c.notices); -1 !== i && c.notices.splice(i, 1) } e.runModules("afterDestroy") }), this }, get: function () { return this.elem }, parseOptions: function (i, s) { this.options = t.extend(!0, {}, c.prototype.options), this.options.stack = c.prototype.options.stack; for (var e, o = [i, s], n = 0; n < o.length && void 0 !== (e = o[n]); n++) if ("object" != typeof e) this.options.text = e; else for (var a in e) this.modules[a] ? t.extend(!0, this.options[a], e[a]) : this.options[a] = e[a] }, animateIn: function (t) { this.animating = "in"; var i = this, s = function () { i.animTimer && clearTimeout(i.animTimer), "in" === i.animating && (i.elem.is(":visible") ? (t && t.call(), i.animating = !1) : i.animTimer = setTimeout(s, 40)) }; "fade" === this.options.animation ? (this.elem.one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd oTransitionEnd transitionend", s).addClass("ui-pnotify-in"), this.elem.css("opacity"), this.elem.addClass("ui-pnotify-fade-in"), this.animTimer = setTimeout(s, 650)) : (this.elem.addClass("ui-pnotify-in"), s()) }, animateOut: function (i) { this.animating = "out"; var s = this, e = function () { if (s.animTimer && clearTimeout(s.animTimer), "out" === s.animating) if ("0" != s.elem.css("opacity") && s.elem.is(":visible")) s.animTimer = setTimeout(e, 40); else { if (s.elem.removeClass("ui-pnotify-in"), s.options.stack.overlay) { var o = !1; t.each(c.notices, function (t, i) { i != s && i.options.stack === s.options.stack && "closed" != i.state && (o = !0) }), o || s.options.stack.overlay.hide() } i && i.call(), s.animating = !1 } }; "fade" === this.options.animation ? (this.elem.one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd oTransitionEnd transitionend", e).removeClass("ui-pnotify-fade-in"), this.animTimer = setTimeout(e, 650)) : (this.elem.removeClass("ui-pnotify-in"), e()) }, position: function (t) { var i = this.options.stack, s = this.elem; if (void 0 === i.context && (i.context = o), i) { "number" != typeof i.nextpos1 && (i.nextpos1 = i.firstpos1), "number" != typeof i.nextpos2 && (i.nextpos2 = i.firstpos2), "number" != typeof i.addpos2 && (i.addpos2 = 0); var e = !s.hasClass("ui-pnotify-in"); if (!e || t) { i.modal && (i.overlay ? i.overlay.show() : i.overlay = h(i)), s.addClass("ui-pnotify-move"); var n, r, c; switch (i.dir1) { case "down": c = "top"; break; case "up": c = "bottom"; break; case "left": c = "right"; break; case "right": c = "left" } n = parseInt(s.css(c).replace(/(?:\..*|[^0-9.])/g, "")), isNaN(n) && (n = 0), void 0 !== i.firstpos1 || e || (i.firstpos1 = n, i.nextpos1 = i.firstpos1); var p; switch (i.dir2) { case "down": p = "top"; break; case "up": p = "bottom"; break; case "left": p = "right"; break; case "right": p = "left" } switch (r = parseInt(s.css(p).replace(/(?:\..*|[^0-9.])/g, "")), isNaN(r) && (r = 0), void 0 !== i.firstpos2 || e || (i.firstpos2 = r, i.nextpos2 = i.firstpos2), ("down" === i.dir1 && i.nextpos1 + s.height() > (i.context.is(o) ? a.height() : i.context.prop("scrollHeight")) || "up" === i.dir1 && i.nextpos1 + s.height() > (i.context.is(o) ? a.height() : i.context.prop("scrollHeight")) || "left" === i.dir1 && i.nextpos1 + s.width() > (i.context.is(o) ? a.width() : i.context.prop("scrollWidth")) || "right" === i.dir1 && i.nextpos1 + s.width() > (i.context.is(o) ? a.width() : i.context.prop("scrollWidth"))) && (i.nextpos1 = i.firstpos1, i.nextpos2 += i.addpos2 + (void 0 === i.spacing2 ? 25 : i.spacing2), i.addpos2 = 0), "number" == typeof i.nextpos2 && (i.animation ? s.css(p, i.nextpos2 + "px") : (s.removeClass("ui-pnotify-move"), s.css(p, i.nextpos2 + "px"), s.css(p), s.addClass("ui-pnotify-move"))), i.dir2) { case "down": case "up": s.outerHeight(!0) > i.addpos2 && (i.addpos2 = s.height()); break; case "left": case "right": s.outerWidth(!0) > i.addpos2 && (i.addpos2 = s.width()) } switch ("number" == typeof i.nextpos1 && (i.animation ? s.css(c, i.nextpos1 + "px") : (s.removeClass("ui-pnotify-move"), s.css(c, i.nextpos1 + "px"), s.css(c), s.addClass("ui-pnotify-move"))), i.dir1) { case "down": case "up": i.nextpos1 += s.height() + (void 0 === i.spacing1 ? 25 : i.spacing1); break; case "left": case "right": i.nextpos1 += s.width() + (void 0 === i.spacing1 ? 25 : i.spacing1) } } return this } }, queuePosition: function (t, i) { return e && clearTimeout(e), i || (i = 10), e = setTimeout(function () { c.positionAll(t) }, i), this }, cancelRemove: function () { return this.timer && i.clearTimeout(this.timer), this.animTimer && i.clearTimeout(this.animTimer), "closing" === this.state && (this.state = "open", this.animating = !1, this.elem.addClass("ui-pnotify-in"), "fade" === this.options.animation && this.elem.addClass("ui-pnotify-fade-in")), this }, queueRemove: function () { var t = this; return this.cancelRemove(), this.timer = i.setTimeout(function () { t.remove(!0) }, isNaN(this.options.delay) ? 0 : this.options.delay), this } }), t.extend(c, { notices: [], reload: s, removeAll: function () { t.each(c.notices, function (t, i) { i.remove && i.remove(!1) }) }, removeStack: function (i) { t.each(c.notices, function (t, s) { s.remove && s.options.stack === i && s.remove(!1) }) }, positionAll: function (i) { if (e && clearTimeout(e), e = null, c.notices && c.notices.length) t.each(c.notices, function (t, s) { var e = s.options.stack; e && (e.overlay && e.overlay.hide(), e.nextpos1 = e.firstpos1, e.nextpos2 = e.firstpos2, e.addpos2 = 0, e.animation = i) }), t.each(c.notices, function (t, i) { i.position() }); else { var s = c.prototype.options.stack; s && (delete s.nextpos1, delete s.nextpos2) } }, styling: { brighttheme: { container: "brighttheme", notice: "brighttheme-notice", notice_icon: "brighttheme-icon-notice", info: "brighttheme-info", info_icon: "brighttheme-icon-info", success: "brighttheme-success", success_icon: "brighttheme-icon-success", error: "brighttheme-error", error_icon: "brighttheme-icon-error" }, bootstrap3: { container: "alert", notice: "alert-warning", notice_icon: "glyphicon glyphicon-exclamation-sign", info: "alert-info", info_icon: "glyphicon glyphicon-info-sign", success: "alert-success", success_icon: "glyphicon glyphicon-ok-sign", error: "alert-danger", error_icon: "glyphicon glyphicon-warning-sign" } } }), c.styling.fontawesome = t.extend({}, c.styling.bootstrap3), t.extend(c.styling.fontawesome, { notice_icon: "fa fa-exclamation-circle", info_icon: "fa fa-info", success_icon: "fa fa-check", error_icon: "fa fa-warning" }), i.document.body ? r() : t(r), c }; return s(i) });
    !function (o, s) { "function" == typeof define && define.amd ? define("pnotify.buttons", ["jquery", "pnotify"], s) : "object" == typeof exports && "undefined" != typeof module ? module.exports = s(require("jquery"), require("./pnotify")) : s(o.jQuery, o.PNotify) }("undefined" != typeof window ? window : this, function (o, s) { return s.prototype.options.buttons = { closer: !0, closer_hover: !0, sticker: !0, sticker_hover: !0, show_on_nonblock: !1, labels: { close: "Close", stick: "Stick", unstick: "Unstick" }, classes: { closer: null, pin_up: null, pin_down: null } }, s.prototype.modules.buttons = { init: function (s, i) { var n = this; s.elem.on({ mouseenter: function (o) { !n.options.sticker || s.options.nonblock && s.options.nonblock.nonblock && !n.options.show_on_nonblock || n.sticker.trigger("pnotify:buttons:toggleStick").css("visibility", "visible"), !n.options.closer || s.options.nonblock && s.options.nonblock.nonblock && !n.options.show_on_nonblock || n.closer.css("visibility", "visible") }, mouseleave: function (o) { n.options.sticker_hover && n.sticker.css("visibility", "hidden"), n.options.closer_hover && n.closer.css("visibility", "hidden") } }), this.sticker = o("<div />", { class: "ui-pnotify-sticker", "aria-role": "button", "aria-pressed": s.options.hide ? "false" : "true", tabindex: "0", title: s.options.hide ? i.labels.stick : i.labels.unstick, css: { cursor: "pointer", visibility: i.sticker_hover ? "hidden" : "visible" }, click: function () { s.options.hide = !s.options.hide, s.options.hide ? s.queueRemove() : s.cancelRemove(), o(this).trigger("pnotify:buttons:toggleStick") } }).bind("pnotify:buttons:toggleStick", function () { var i = null === n.options.classes.pin_up ? s.styles.pin_up : n.options.classes.pin_up, e = null === n.options.classes.pin_down ? s.styles.pin_down : n.options.classes.pin_down; o(this).attr("title", s.options.hide ? n.options.labels.stick : n.options.labels.unstick).children().attr("class", "").addClass(s.options.hide ? i : e).attr("aria-pressed", s.options.hide ? "false" : "true") }).append("<span />").trigger("pnotify:buttons:toggleStick").prependTo(s.container), (!i.sticker || s.options.nonblock && s.options.nonblock.nonblock && !i.show_on_nonblock) && this.sticker.css("display", "none"), this.closer = o("<div />", { class: "ui-pnotify-closer", "aria-role": "button", tabindex: "0", title: i.labels.close, css: { cursor: "pointer", visibility: i.closer_hover ? "hidden" : "visible" }, click: function () { s.remove(!1), n.sticker.css("visibility", "hidden"), n.closer.css("visibility", "hidden") } }).append(o("<span />", { class: null === i.classes.closer ? s.styles.closer : i.classes.closer })).prependTo(s.container), (!i.closer || s.options.nonblock && s.options.nonblock.nonblock && !i.show_on_nonblock) && this.closer.css("display", "none") }, update: function (o, s) { !s.closer || o.options.nonblock && o.options.nonblock.nonblock && !s.show_on_nonblock ? this.closer.css("display", "none") : s.closer && this.closer.css("display", "block"), !s.sticker || o.options.nonblock && o.options.nonblock.nonblock && !s.show_on_nonblock ? this.sticker.css("display", "none") : s.sticker && this.sticker.css("display", "block"), this.sticker.trigger("pnotify:buttons:toggleStick"), this.closer.find("span").attr("class", "").addClass(null === s.classes.closer ? o.styles.closer : s.classes.closer), s.sticker_hover ? this.sticker.css("visibility", "hidden") : o.options.nonblock && o.options.nonblock.nonblock && !s.show_on_nonblock || this.sticker.css("visibility", "visible"), s.closer_hover ? this.closer.css("visibility", "hidden") : o.options.nonblock && o.options.nonblock.nonblock && !s.show_on_nonblock || this.closer.css("visibility", "visible") } }, o.extend(s.styling.brighttheme, { closer: "brighttheme-icon-closer", pin_up: "brighttheme-icon-sticker", pin_down: "brighttheme-icon-sticker brighttheme-icon-stuck" }), o.extend(s.styling.bootstrap3, { closer: "glyphicon glyphicon-remove", pin_up: "glyphicon glyphicon-pause", pin_down: "glyphicon glyphicon-play" }), o.extend(s.styling.fontawesome, { closer: "fa fa-times", pin_up: "fa fa-pause", pin_down: "fa fa-play" }), s });
    !function (i, t) { "function" == typeof define && define.amd ? define("pnotify.desktop", ["jquery", "pnotify"], t) : "object" == typeof exports && "undefined" != typeof module ? module.exports = t(require("jquery"), require("./pnotify")) : t(i.jQuery, i.PNotify) }("undefined" != typeof window ? window : this, function (i, t) { var o, n = function (i, t) { return (n = "Notification" in window ? function (i, t) { return new Notification(i, t) } : "mozNotification" in navigator ? function (i, t) { return navigator.mozNotification.createNotification(i, t.body, t.icon).show() } : "webkitNotifications" in window ? function (i, t) { return window.webkitNotifications.createNotification(t.icon, i, t.body) } : function (i, t) { return null })(i, t) }; return t.prototype.options.desktop = { desktop: !1, fallback: !0, icon: null, tag: null, title: null, text: null }, t.prototype.modules.desktop = { genNotice: function (i, t) { null === t.icon ? this.icon = "https://sciactive.com/pnotify/includes/desktop/" + i.options.type + ".png" : !1 === t.icon ? this.icon = null : this.icon = t.icon, null !== this.tag && null === t.tag || (this.tag = null === t.tag ? "PNotify-" + Math.round(1e6 * Math.random()) : t.tag), i.desktop = n(t.title || i.options.title, { icon: this.icon, body: t.text || i.options.text, tag: this.tag }), !("close" in i.desktop) && "cancel" in i.desktop && (i.desktop.close = function () { i.desktop.cancel() }), i.desktop.onclick = function () { i.elem.trigger("click") }, i.desktop.onclose = function () { "closing" !== i.state && "closed" !== i.state && i.remove() } }, init: function (i, n) { if (n.desktop) { if (0 !== (o = t.desktop.checkPermission())) return void (n.fallback || (i.options.auto_display = !1)); this.genNotice(i, n) } }, update: function (i, t, n) { 0 !== o && t.fallback || !t.desktop || this.genNotice(i, t) }, beforeOpen: function (i, t) { 0 !== o && t.fallback || !t.desktop || i.elem.css({ left: "-10000px" }).removeClass("ui-pnotify-in") }, afterOpen: function (i, t) { 0 !== o && t.fallback || !t.desktop || (i.elem.css({ left: "-10000px" }).removeClass("ui-pnotify-in"), "show" in i.desktop && i.desktop.show()) }, beforeClose: function (i, t) { 0 !== o && t.fallback || !t.desktop || i.elem.css({ left: "-10000px" }).removeClass("ui-pnotify-in") }, afterClose: function (i, t) { 0 !== o && t.fallback || !t.desktop || (i.elem.css({ left: "-10000px" }).removeClass("ui-pnotify-in"), "close" in i.desktop && i.desktop.close()) } }, t.desktop = { permission: function () { "undefined" != typeof Notification && "requestPermission" in Notification ? Notification.requestPermission() : "webkitNotifications" in window && window.webkitNotifications.requestPermission() }, checkPermission: function () { return "undefined" != typeof Notification && "permission" in Notification ? "granted" === Notification.permission ? 0 : 1 : "webkitNotifications" in window && 0 == window.webkitNotifications.checkPermission() ? 0 : 1 } }, o = t.desktop.checkPermission(), t });
    !function (i, o) { "function" == typeof define && define.amd ? define("pnotify.mobile", ["jquery", "pnotify"], o) : "object" == typeof exports && "undefined" != typeof module ? module.exports = o(require("jquery"), require("./pnotify")) : o(i.jQuery, i.PNotify) }("undefined" != typeof window ? window : this, function (i, o) { return o.prototype.options.mobile = { swipe_dismiss: !0, styling: !0 }, o.prototype.modules.mobile = { init: function (i, o) { var t = this, e = null, n = null, s = null; this.swipe_dismiss = o.swipe_dismiss, this.doMobileStyling(i, o), i.elem.on({ touchstart: function (o) { t.swipe_dismiss && (e = o.originalEvent.touches[0].screenX, s = i.elem.width(), i.container.css("left", "0")) }, touchmove: function (o) { if (e && t.swipe_dismiss) { var a = o.originalEvent.touches[0].screenX; n = a - e; var c = (1 - Math.abs(n) / s) * i.options.opacity; i.elem.css("opacity", c), i.container.css("left", n) } }, touchend: function () { if (e && t.swipe_dismiss) { if (Math.abs(n) > 40) { var o = n < 0 ? -2 * s : 2 * s; i.elem.animate({ opacity: 0 }, 100), i.container.animate({ left: o }, 100), i.remove() } else i.elem.animate({ opacity: i.options.opacity }, 100), i.container.animate({ left: 0 }, 100); e = null, n = null, s = null } }, touchcancel: function () { e && t.swipe_dismiss && (i.elem.animate({ opacity: i.options.opacity }, 100), i.container.animate({ left: 0 }, 100), e = null, n = null, s = null) } }) }, update: function (i, o) { this.swipe_dismiss = o.swipe_dismiss, this.doMobileStyling(i, o) }, doMobileStyling: function (o, t) { t.styling ? (o.elem.addClass("ui-pnotify-mobile-able"), i(window).width() <= 480 ? (o.options.stack.mobileOrigSpacing1 || (o.options.stack.mobileOrigSpacing1 = o.options.stack.spacing1, o.options.stack.mobileOrigSpacing2 = o.options.stack.spacing2), o.options.stack.spacing1 = 0, o.options.stack.spacing2 = 0) : (o.options.stack.mobileOrigSpacing1 || o.options.stack.mobileOrigSpacing2) && (o.options.stack.spacing1 = o.options.stack.mobileOrigSpacing1, delete o.options.stack.mobileOrigSpacing1, o.options.stack.spacing2 = o.options.stack.mobileOrigSpacing2, delete o.options.stack.mobileOrigSpacing2)) : (o.elem.removeClass("ui-pnotify-mobile-able"), o.options.stack.mobileOrigSpacing1 && (o.options.stack.spacing1 = o.options.stack.mobileOrigSpacing1, delete o.options.stack.mobileOrigSpacing1), o.options.stack.mobileOrigSpacing2 && (o.options.stack.spacing2 = o.options.stack.mobileOrigSpacing2, delete o.options.stack.mobileOrigSpacing2)) } }, o });
</script>

<script type="text/javascript">
    console.log('IO.JS v20170709');
    var MKT_TBL_SELEC = "#table-logic-handler-for-sockets";
    var TE_URL = window.location.pathname;
    var TEChannels = ['calendar'];
    
    var MKTChannels = [];

 
    if (TE_URL == '/') TEChannels = ['calendar', 'market'];
    else if (TE_URL.indexOf("calendar") > -1) TEChannels = ['calendar', 'market'];
    else if (TE_URL.indexOf("calendar") > -1 || TE_URL.indexOf("/dividends") > -1 || TE_URL.indexOf("/ipo") > -1 || TE_URL.indexOf("/stock-splits") > -1 || TE_URL.indexOf("/earnings") > -1) TEChannels = ['calendar', 'market'];
    else if (TE_URL.indexOf("stream") > -1) TEChannels = ['calendar', 'market', 'stream'];
    else if (TE_URL.indexOf("/currencies") > -1) TEChannels = ['currencies', 'calendar'];
    else if (TE_URL.indexOf("/stocks") > -1) TEChannels = ['indexes', 'calendar'];
    else if (TE_URL.indexOf("/bonds") > -1) TEChannels = ['bonds', 'calendar'];
    else if (TE_URL.indexOf("/commodities") > -1) TEChannels = ['commodities', 'calendar'];
    else if (TE_URL.indexOf("/currency") > -1 || TE_URL.indexOf("/stock-market") > -1 || TE_URL.indexOf("/commodity/") > -1 || TE_URL.indexOf("/government-bond-yield") > -1)
        TEChannels = ['market', 'calendar'];
    else if (TE_URL.split(':').length == 3 || TE_URL.indexOf("/forecast") > -1)
        TEChannels = ['calendar', 'market'];

    var socket_url = 'https://io.tradingeconomics.com?app=te&token=20171116';



    console.log('IO CONNECTING ' + socket_url);
    var socket = io.connect(socket_url);

    function GO_IO() {
        IS_CONNECTED = true;
        var _lag0 = 'seconds:2';
        console.log('IO CONNECTED');
        console.log('IO SUBSCRIBE TO ' + TEChannels, _lag0);
        socket.emit('subscribe', { s: TEChannels, lag: _lag0 })


        gatherMKTChannels();
        if (MKTChannels && MKTChannels.length) {
            var _lag = 'seconds:5';



            console.log('IO SUBSCRIBE TO ' + MKTChannels, _lag);
            socket.emit('subscribe', { s: MKTChannels, lag: _lag })
        }
        socket.on('disconnect', function () {
            IS_CONNECTED = false;
            console.log('Got disconnect!');
        });


        socket.on("smooth-disconnect", function () {
            socket.disconnect();
        });

    }

    socket.on('connect', GO_IO);

    var isSnap = true;

    for (var i = 0; i < TEChannels.length; i++) {
        channel = TEChannels[i];
        if (channel == 'calendar' || channel == 'stream') continue;
        console.log('IO Snap ' + channel);
        socket.on(channel, function (a) {
            if (a.length > 0) {
                for (i = 0; i < a.length; i++) {
                    TE_UpdateTable(a[i], isSnap)
                }
                isSnap = false;
            }
            else {
                console.log('IO Sent Empty Market Update');
            }
        });
    }


    socket.on('tick', function (t) {
        //console.log('tick', t);
        TE_UpdateTable(t);
    });

    function gatherMKTChannels() {
        //console.log('now what?', $("[data-subscribe]"), $("[data-subscribe]").length)
        $("[data-subscribe]").each(function (i, item) {
            //console.log(i, item, $(item).attr('data-subscribe'));
            if ($(item).attr('data-subscribe')) {
                MKTChannels.push($(item).attr('data-subscribe'))
            }
        })
    }

    function TE_UpdateTable(d, isSnap) {
        //console.log(d);
        //if (d.state != 'open') {console.log("Market Closed:", d);};
        var s = d.s;

        //console.log('s', s);
        /*if (s == 'CO1:COM') {
            console.log(d)
        }*/
        var r = $('tr[data-symbol="' + s + '"]');
        var p = r.find('td#p');

        var dec = 4;
        if (typeof r.data('decimals') !== 'undefined') dec = r.data("decimals");

        var p0 = parseFloat(p.text());

        if (p0 != d.p.toFixed(dec)) {

            p.text(d.p.toFixed(dec));

            fg = d.nch > 0 ? 'darkgreen' : d.nch < 0 ? 'darkred' : 'black';

            triangle = d.p > d.prev ? '<span class="market-positive-image"></span>' : d.nch < 0 ? '<span class="market-negative-image"></span>' : '<span class="market-neutral-image"></span>';

            /*if (s == 'CO1:COM') {
                console.log(d.nch, 'triangle', triangle);
            }*/

            var previous_triangle = r.find('td#triangle');

            if (previous_triangle && previous_triangle.length) {
                previous_triangle.html(triangle);
                //triangle = '';            
                //previous_triangle.attr("id", "newId");
            }


            var nch = r.find('td#nch');

            //if (s == 'INDU:IND') {
            //console.log('nch', nch.length, nch);
            if (nch) {
                nch.each(function (i, item) {
                    //console.log(i, item);
                    //return;
                    if ($(item).attr("data-no-triangle")) {

                        $(item).text(d.nch.toFixed(dec));
                        $(item).css("color", fg);
                        $(item).html(Math.abs(d.nch.toFixed(dec)));
                    } else {

                        $(item).text(d.nch.toFixed(dec));
                        $(item).css("color", fg);
                        $(item).html(triangle + ' ' + Math.abs(d.nch.toFixed(dec)));

                    }
                })
            }
            //}


            /*
            nch.text(d.nch.toFixed(dec));
            nch.css("color", fg);
            nch.html(triangle + ' ' + Math.abs(d.nch.toFixed(dec)));
            */


            var pch = r.find('td#pch');
            pch.text(d.pch.toFixed(2) + ' %');
            pch.css("color", fg);

            if (TEChannels != "market") {
                nch.attr('data-value', d.nch);
                pch.attr('data-value', d.pch);
            }

            r.find('td#pch')

            bg = '#cdebf9'; //#cdebf9
            p.css("backgroundColor", bg);

            setTimeout(function () {
                p.css("backgroundColor", '#ffffff');
            }, 2000)

            if (!isSnap) {
                var dt = new Date();
                var h = dt.getHours(); if (h < 10) { h = "0" + h; }
                var m = dt.getMinutes(); if (m < 10) { m = "0" + m; }
                var ds = [h, m].join(':');
                r.find('td#date').html(ds);
            }

            if (d.type == 'index') {
                var stateColor = '', stateSpan = '';
                var state = d.state;
                if (d.dstate) state = d.dstate;

                if (state == 'open') stateColor = 'green';
                else if (state == 'closed') stateColor = 'red';
                else if (state == 'pre') stateColor = '#CFB53B';
                else if (state == 'after') stateColor = '#CFB53B';

                if (stateColor != '') {
                    stateSpan = '<span class="glyphicon glyphicon-dashboard" style="font-size:11px; color: ' + stateColor + '" title="' + state + ' trading session"></span>';
                    r.find('td#session').html(stateSpan);
                }
            }


        }
        else {
            p.css("backgroundColor", 'rgb(255,255,255)');
        }

    };

    var TENotifications = 0;

    // CALENDAR + STREAM
    function TENotification(_title, _text, _url, _importance) {

        if (IsMobile) return;

        TENotifications++;

        console.log("IO => Notification => ", _title, _text, _url, _importance, TENotifications);

        if (TENotifications > 2 & _importance <= 1) return;
        if (TENotifications > 4 & _importance <= 2) return;

        var IsDesktop = false;
        var _titleHTML = 'ALERT';
        var _alertType = 'NEWS';
        var _color = "#5bc0de";

        if (_importance > 0) {
            _alertType = 'CALENDAR';
            if (_importance > 1) {
                IsDesktop = true;
                _color = '#5cb85c';
                if (_importance > 2) _color = '#d9534f';
            }
        }

        _titleHTML = '<div style="padding-bottom:10px; font-size: 11px;color: #fff; font-weight: bold;"><span style="background-color: #000; padding: 3px;">' + _alertType + '</span><span style="background-color: ' + _color + '; padding: 3px;">ALERT</span></div>';

        var _textHTML = _text;
        if (_text && _text.length > 200) {
            console.log("Trim text");
            _textHTML = _text.substring(0, 200) + '...';
            _textHTML += ' <a style="text-decoration: underline;" target="_new" href="' + _url + '">More</a>';
        }
        else if (_text) {
            _textHTML += ' <a style="text-decoration: underline;" target="_new" href="' + _url + '">More</a>';
        }

        ///if (IsDesktop) PNotify.desktop.permission();
        PNotify.desktop.permission();


        (new PNotify({
            title: _titleHTML,
            text: _textHTML,
            hide: true,
            animation: 'fade',
            shadow: true,
            icon: false,
            mouse_reset: false,
            delay: 20000,
            buttons: {
                sticker: false,
                closer_hover: false
            },
            addclass: 'custom',
        })).get().click(function (e) {
            if ($('.ui-pnotify-closer, .ui-pnotify-sticker, .ui-pnotify-closer *, .ui-pnotify-sticker *').is(e.target)) {
                console.log("Closed Notification");
                return;
            }
            window.location = _url;
        });

        if (IsDesktop) {

            var _tag = _url + "?v=" + new Date().toISOString().slice(0, 10).replace(/-/g, "");
            console.log("PNotify tag", _tag);

            (new PNotify({
                title: _titleHTML,
                text: _textHTML,
                hide: false,
                animation: 'fade',
                shadow: true,
                icon: false,
                mouse_reset: false,
                hide: true,
                delay: 20000,
                buttons: {
                    sticker: false,
                    closer_hover: false
                },
                addclass: 'custom',
                type: 'info',
                desktop: {
                    desktop: IsDesktop,
                    title: 'TRADING ECONOMICS',
                    text: _text,
                    tag: _tag,
                    fallback: false
                    //icon: '/images/logo2.png'
                }
            })).get().click(function (e) {
                if ($('.ui-pnotify-closer, .ui-pnotify-sticker, .ui-pnotify-closer *, .ui-pnotify-sticker *').is(e.target)) {
                    console.log("Closed Notification");
                    return;
                }
                window.location = _url;
            });;
        }

    }

    function TECalendarRowUpdate(c) {
        console.log("UPDATE CALENDAR ROW");

        var $row = $('tr[data-id="' + c.CalendarId + '"]');
        var $td = $row.find('span#actual');
        $td.text(c.Actual);
        bg = '#5bc0de';
        $td.css("backgroundColor", bg);
        color = c.Actual.indexOf("-") ? 'darkgreen' : 'darkred';
        $td.css("color", color);

        $row.find('span#previous').text(c.Previous);

        $row.find('img#incoming').css("display", 'none');

        //$td.slideUp();
        setInterval(function () {
            $td.css("backgroundColor", '#ffffff');
            //console.info("Flash");
        }, 2000);
    }

    socket.on('calendar', function (c) {
        console.log("IO CALENDAR")
        console.log(c);
        //var c = JSON.parse(_c);
        if (c.Importance >= 1) {
            var _title = c.Country.trim() + ' ' + c.Event.trim();
            var _text = _title;
            if (c.Actual != null && c.Actual != '') _text += '  reported at ' + c.Actual + '. ';
            if (c.Forecast != null && c.Forecast != '') _text += 'Consensus was ' + c.Forecast + '. ';
            if (c.Previous != null && c.Previous != '') _text += 'Previously at ' + c.Previous + '.';
            var _url = 'https://tradingeconomics.com' + c.URL;

            if (TE_URL.indexOf("calendar") > -1) TECalendarRowUpdate(c);

            TENotification(_title, _text, _url, c.Importance);

        }
    });

    socket.on('stream', function (j) {
        console.log("IO STREAM")
        console.log(j);
        var _title = j.title;
        var _description = j.description;
        var _url = j.url;
        if (_title && _description && _url) {
            TENotification(_title, _description, _url, 0);
        }
    });
</script>
<script>

    var KILL_SOCKET_AFTER_IDLE = 1000 * 60 * 30;
    var IS_RELOAD_REQUIRED = false;
    var IS_QUESTION_OPEN = false;
    var IS_CONNECTED = false;
    var LAST_VISIBLE = new Date().getTime();

    if (TE_URL.indexOf("calendar") > -1 ||
        TE_URL.indexOf("/currency") > -1 || TE_URL.indexOf("/stock-market") > -1 || TE_URL.indexOf("/commodity/") > -1 || TE_URL.indexOf("/government-bond-yield") > -1 ||
        TE_URL.indexOf("stream") > -1 ||
        TE_URL.indexOf("/currencies") > -1 ||
        TE_URL.indexOf("/stocks") > -1 ||
        TE_URL.indexOf("/bonds") > -1 ||
        TE_URL.indexOf("/commodities") > -1) {
        KILL_SOCKET_AFTER_IDLE = 1000 * 60 * 60;
        IS_RELOAD_REQUIRED = true;
        }

    function saveSocketNetworkBW() {
        console.log("socket check");
        setInterval(function () {
            if (typeof document == 'undefined' || !document) {
                console.log("ws: undefined");
                return LAST_VISIBLE = new Date().getTime();
            }
            if (typeof document.hidden != 'boolean') {
                console.log("ws: hidden");
                return LAST_VISIBLE = new Date().getTime();
            }
            if (!document.hidden) {
                console.log("ws: live");
                if (!IS_CONNECTED) {
                    console.log('ws: connecting');
                    socket.connect();
                }
                return LAST_VISIBLE = new Date().getTime();
            }
            var now = new Date().getTime();
            if (now - LAST_VISIBLE > KILL_SOCKET_AFTER_IDLE) {
                if (IS_CONNECTED) {
                    console.log('ws: disconnecting');
                    socket.disconnect();
                    if (IS_RELOAD_REQUIRED && IS_QUESTION_OPEN == false){
                        var result = confirm("Please Press Ok to Refresh the Data in this Page");
                        IS_QUESTION_OPEN = true;
                        if (result) {
                            IS_QUESTION_OPEN = false;
                            document.location = document.location.href;
                        } 
                    }
                   
                }
            }

        }, 1000 * 60);
    }
    saveSocketNetworkBW();

    
</script>





<script>
    var loader = "<div style='display:flex;flex-direction:column;align-items:center;padding:20px;'><div class='loader' style='width:30px;height:30px;'></div></div>";

    function hide_msg(element, miliseconds) {
        // hide the message after some time
        setTimeout(function () {
            element.fadeOut(1000);
        }, miliseconds);
    }

    $(document).on("click", "#api-url-text", function (e) {
        var copyTextarea = document.querySelector('#api-url-text');
        copyTextarea.focus();
        copyTextarea.select();

        document.execCommand("copy");

        document.getSelection().removeAllRanges();

        $("#copied-msg").remove();
        if (!$("#copied-msg") || $("#copied-msg").length <= 0) {
            var copied_msg = $('<div id="copied-msg" style="float: right;background-color: rgb(255, 222, 173);padding: 5px 15px;color: black;font-weight: bold;"><span>Copied</span></div>');
            $("#api-url-text").after(copied_msg)
            hide_msg(copied_msg, 5000);
        }
    });

    // click on the Export Data tab
    $(document).on("click", "[href='#data']", function (e) {
        ga('send', 'event', 'Data Request', 'tab export');
    });

    // click on the API Access tab
    $(document).on("click", "[href='#api']", function (e) {
        ga('send', 'event', 'Data Request', 'tab api');
        //var apiMsg = getApiSamples();
        //$("#api-msg-panel").html("");
        //$("#api-msg-panel").append(apiMsg);
    });

    // click on the CSV File button under Export Data tab
    $(document).on("click", ".export-btn-csv", function (e) {
        e.preventDefault();
        //ga('send', 'event', 'Data Request', 'tab export', 'CSV click');
        downloadItem(this, 'csv');
    });

    // click on the JSON File button under Export Data tab
    $(document).on("click", ".export-btn-json", function (e) {
        e.preventDefault();
        //ga('send', 'event', 'Data Request', 'tab export', 'JSON click');
        downloadItem(this, 'json');
    });

    // click on the XML File button under Export Data tab
    $(document).on("click", ".export-btn-xml", function (e) {
        e.preventDefault();
        //ga('send', 'event', 'Data Request', 'tab export', 'XML click');
        downloadItem(this, 'xml');
    });

    // click on the Python tab inside API tab
    $(document).on("click", "tabs-api-python", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'python inside API');
    });

    // click on the Excel tab inside API tab
    $(document).on("click", "tabs-api-excel", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'excel inside API');
    });

    // click on the jQuery tab inside API tab
    $(document).on("click", "tabs-api-jquery", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'jquery inside API');
    });

    // click on the R tab inside API tab
    $(document).on("click", "tabs-api-r", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'R inside API');
    });

    // click on the NodeJS tab inside API tab
    $(document).on("click", "tabs-api-nodejs", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'nodeJS inside API');
    });

    // click on the C# tab inside API tab
    $(document).on("click", "tabs-api-csharp", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'CSharp inside API');
    });

    // click on the Java tab inside API tab
    $(document).on("click", "tabs-api-java", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'java inside API');
    });

    // click on the PHP tab inside API tab
    $(document).on("click", "tabs-api-php", function (e) {
        ga('send', 'event', 'Data Request', 'tab api', 'PHP inside API');
    });

    var lock_download = false;

    function downloadItem(element, format) {

        if (lock_download)
            return;

        lock_download = true;

        // create a loader 
        var loading = $(loader);

        var experience = 1;

        var export_data_msg = $("#export-data-msg");

        // remove export message if any and insert the new one
        if (export_data_msg && export_data_msg.length > 0) {
            $("#export-msg-panel").remove();
            $("#export-data-msg").append(loading);
        } else {
            experience = 2;
        }

        // find the anchor element 
        if (!$(element).is('a')) {
            element = $(element).find('a')[0];
        }

        if (!element || element.length == 0 || !$(element).is('a')) {
            console.log('download link not found');
            return;
        }

        var url = $(element).attr('href');
        console.log('url to download = ' + url);

        var d_type = format;
        if (format == 'csv') {
            url = url.replace('format=csv', 'format=json');
            d_type = 'json';
        }

        $.ajax({
            url: url,
            type: "GET",
            dataType: d_type,
            xhrFields: {
                withCredentials: true
            },
        }).done(function (data, status, xhr) {
            console.log('SUCCESS');
            console.log('status = ' + xhr.status);
            console.log('data = ' + data.length);

            ga('send', 'event', 'Data Request', 'tab export', format, 1);

            var filename = buildFilename(url, format);

            downloadData(data, filename, format);

        }).fail(function (xhr, status, error) {
            console.log('ERROR');
            console.log('status = ' + xhr.status);
            console.log('error message = ' + xhr.responseText)

            ga('send', 'event', 'Data Request', 'tab export', format, 0);

            if (xhr.status) {
                switch (xhr.status) {
                    case 401: // unauthorized
                        launchInvalidKeyModal(experience);
                        break;
                    case 403: // forbidden
                        launchTrialOverModal(experience);
                        break;
                    case 400: // bad request
                        launchBadRequestModal(experience);
                        break;
                    case 409: // conflict (more requests per second than allowed)
                        launchThrottleModal(experience);
                        break;
                    default:
                        console.log('Unhandled status = ' + xhr.status)
                        var redirect_url = '';
                        if (TESymbol) {
                            redirect_url = 'https://data.tradingeconomics.com/Data/Export?term=' + TESymbol;
                        } else {
                            redirect_url = 'https://data.tradingeconomics.com/Data/Export';
                        }
                        console.log('redirecting to: ' + redirect_url);
                        window.open(redirect_url, '_blank');
                        break;
                }
            }
        }).always(function (xhr, status, error) {
            loading.remove();
            console.log('done downloading!');
            lock_download = false;
        });
    }

    function buildFilename(url, format) {
        var filename = decodeURI(url);

        filename = filename.replace("https://api.tradingeconomics.com/", "");

        var questionMark = filename.indexOf('?');
        if (questionMark != -1)
            filename = filename.substring(0, questionMark);

        filename = filename.replace(/\//g, '_');
        filename = filename.replace(/\s/g, '_');
        filename = filename.replace(/:/g, '_');
        filename = filename.replace(/-/g, '_');

        return filename + '.' + format;
    }

    function downloadData(data, filename, type) {
        var dataFile = null;

        switch (type) {
            case "csv":
                var csv = convertArrayOfObjectsToCSV({ data: data });
                if (csv == null) return;
                // create the csv file
                var dataFile = new Blob([csv], { type: "text/csv;charset=utf-8" });
                break;
            case "json":
                var dataFile = new Blob([JSON.stringify(data)], { type: "text/json;charset=utf-8" });                
                break;
            case "xml":
                var dataFile = new Blob([new XMLSerializer().serializeToString(data.documentElement)], { type: "text/plain;charset=utf-8" });                
                break;
        }

        if (dataFile != null) {
            var anchor = document.createElement('a');
            anchor.href = window.URL.createObjectURL(dataFile);
            anchor.setAttribute("hidden", true);
            anchor.setAttribute("target", "_self");
            anchor.setAttribute("download", filename);

            document.body.appendChild(anchor);

            anchor.click();
            anchor.remove();
        }
    }

    /* Download CSV from: https://halistechnology.com/2015/05/28/use-javascript-to-export-your-data-as-csv/ */
    function convertArrayOfObjectsToCSV(args) {
        var result, ctr, keys, columnDelimiter, lineDelimiter, data;

        data = args.data || null;
        if (data == null || !data.length) {
            return null;
        }

        columnDelimiter = args.columnDelimiter || ',';
        lineDelimiter = args.lineDelimiter || '\r\n';

        keys = Object.keys(data[0]);

        result = '';
        result += keys.join(columnDelimiter);
        result += lineDelimiter;

        data.forEach(function (item) {
            ctr = 0;
            keys.forEach(function (key) {
                if (ctr > 0) result += columnDelimiter;

                result += item[key];
                ctr++;
            });
            result += lineDelimiter;
        });

        return result;
    }

    function launchTrialOverModal(experience) {
        if (!experience) {
            experience = getParameterByName("ex", window.location.href);
        }

        if (!experience || experience == 1) {
            var panel = createPanel(
                'ACTIVATE',
                'https://billing.tradingeconomics.com/plans.aspx?activate=true',
                'Activate your plan to get more data from Trading Economics',
                'account+limit');

            $("#export-data-msg").append(panel);
        } else if (experience == 2) {
            createModal(
                'ACTIVATE',
                'https://billing.tradingeconomics.com/plans.aspx?activate=true',
                'Activate your plan to get more data from Trading Economics',
                'account+limit');
        }
    }

    function launchInvalidKeyModal() {
        var experience = getParameterByName("ex", window.location.href);

        if (!experience || experience == 1) {
            var panel = createPanel(
                'Get Started',
                'https://billing.tradingeconomics.com/plans.aspx?lead=true',
                'Trading Economics provides its premium members with access to more than 20 million indicators for 196 countries plus historical/delayed/live quotes for exchange rates, stocks,' +
                    ' indexes, bonds and commodity prices. Subscribe to a plan to download data in a easy to use web interface, using our excel addin or our API.',
                'Subscription+Plans');

            $("#export-data-msg").append(panel);
        } else if (experience == 2) {
            createModal(
                'Get Started',
                'https://billing.tradingeconomics.com/plans.aspx?lead=true',
                'Trading Economics provides its premium members with access to more than 20 million indicators for 196 countries plus historical/delayed/live quotes for exchange rates, stocks,' +
                    ' indexes, bonds and commodity prices. Subscribe to a plan to download data in a easy to use web interface, using our excel addin or our API.',
                'Subscription+Plans');
        }
    }

    function launchThrottleModal() {
        var experience = getParameterByName("ex", window.location.href);

        if (!experience || experience == 1) {
            var panel = createPanel(
                null,
                null,
                'Limit of request per second reached',
                'API+Access');

            $("#export-data-msg").append(panel);
        } else if (experience == 2) {
            createModal(
                null,
                null,
                'Limit of request per second reached',
                'API+Access');
        }
    }

    function launchBadRequestModal() {
        var experience = getParameterByName("ex", window.location.href);

        if (!experience || experience == 1) {
            var panel = createPanel(
                'CONTACT SUPPORT',
                'https://tradingeconomics.com/contact.aspx?subject=API+Bad+Request',
                'Something went wrong with the request, please contact support@tradingeconomics.com, or click the button bellow',
                'API+Access');

            $("#export-data-msg").append(panel);
        } else if (experience == 2) {
            createModal(
                'CONTACT SUPPORT',
                'https://tradingeconomics.com/contact.aspx?subject=API+Bad+Request',
                'Something went wrong with the request, please contact support@tradingeconomics.com, or click the button bellow',
                'API+Access');
        }
    }

    function createModal(actionCallBtnText, actionCallBtnLink, text, contactSubject, title) {
        var htmlModal = `
                        <div class="modal fade modal-api" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true" style="text-align: center;padding: 0!important;">
	                        <div class ="modal-dialog modal-dialog-centered modal-lg" role="document" style="display: inline-block;text-align: left;vertical-align: middle; ">
	                            <div class="modal-content">
	                                <div class="modal-body">
	                                    <div class="container-fluid">
	                                        <div class="row mb-4" style="margin-bottom:15px;">
	                                            <div class="col text-center">`+
                                                    (title ? '<h3 class="modal-title text-center" id="exampleModalLongTitle">' + title + '</h3>' : '')
	                                            + `</div>
	                                        </div>
	                                        <div class="row mb-2" style="margin-bottom:15px;">
	                                            <div class ="col text-center"> `+
                                                    (text ? '<p>' + text + '</p>' : '')
                                                + `</div>
	                                        </div>
	                                        <div class="row mb-3" style="margin-bottom:15px;">
	                                            <div class="col text-center">`+
                                                    (actionCallBtnText ? '<a class="btn btn-secondary default-btn btn-lg" href="' + actionCallBtnLink + '" target="_blank" style="background-color: #333 !important; color: white;font-weight: 300;">' + actionCallBtnText + '</a>' : '')
	                                            + `</div>
	                                        </div>
	                                        <div class="row" style="margin-bottom:15px;">
	                                            <div class="col text-center">
	                                                <p>Any question? <strong><a href="https://tradingeconomics.com/contact.aspx?subject=` + contactSubject.split(' ').join('+') + `" target="_blank">Contact us</a></strong></p>
	                                            </div>
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
	                        </div>
	                    </div>
                        `

        // create the modal
        var modal = $(htmlModal);

        $(modal).modal('show');
    }

    function createPanel(actionCallBtnText, actionCallBtnLink, text, contactSubject, title) {
        var htmlPanel = `
                    <div id="export-msg-panel" style="padding:10px;" class="panel">
                        <div class="row mb-4" style="margin-bottom:15px;">
	                        <div class="col text-center">`+
                                (title ? '<h3 class="modal-title text-center" id="exampleModalLongTitle">' + title + '</h3>' : '')
	                        + `</div>
	                    </div>
	                    <div class="row mb-2" style="margin-bottom:15px;">
	                        <div class ="col text-center"> `+
                                (text ? '<p>' + text + '</p>' : '')
                            + `</div>
	                    </div>
	                    <div class="row mb-3" style="margin-bottom:15px;">
	                        <div class="col text-center">`+
                                (actionCallBtnText ? '<a class="btn btn-secondary default-btn btn-lg" href="' + actionCallBtnLink + '" target="_blank" style="background-color: #333 !important; color: white;font-weight: 300;">' + actionCallBtnText + '</a>' : '')
	                        + `</div>
	                    </div>
	                    <div class="row" style="margin-bottom:15px;">
	                        <div class="col text-center">
	                            <p>Any question? <strong><a href="https://tradingeconomics.com/contact.aspx?subject=` + contactSubject.split(' ').join('+') + `" target="_blank">Contact us</a></strong></p>
	                        </div>
	                    </div>
                    </div>`

        return htmlPanel;
    }

    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    function getApiSamples(country, category) {
        var _country = '';
        var _category = '';
        var exportURL = '';

        if (country)
            _country = country.trim().toLowerCase();
        else if (TECountry)
            _country = TECountry.trim().toLowerCase();

        if (category)
            _category = category.trim().toLowerCase();
        else if (TECategory)
            _category = TECategory.trim().toLowerCase();

        var link = $('.export-btn-csv').attr('href');

        if (link) {
            if (link.indexOf('?format=csv') != -1)
                exportURL = link.replace('?format=csv', '');
            else
                exportURL = link.replace('&format=csv', '');

            var userKeyURL = exportURL.indexOf('?') != -1 ? '&c=Your_Key: Your_Secret' : '?c=Your_Key: Your_Secret';

            exportURL = exportURL + userKeyURL;
        }

        var apiCodeSamples = `
            <p><strong>API URL: </strong> <a href="`+ exportURL + `">` + exportURL + `</a></p>
            <p style="text-align:center;"><strong>Code examples: </strong></p>
                    <p><strong>Python:</strong></p>
                    <p style="margin-left:5%">
                        import tradingeconomics as te<br />
                        te.login('Your_Key:Your_Secret') <br />
                        te.getIndicatorData(country='`+ _country + `', indicators='` + _category + `') <br />
                    </p>
                    <p><strong>jQuery: </strong></p>
                    <p style="margin-left:5%">
                        var url = '`+ exportURL + `'; <br />
                        $.ajax({<br />
                        &nbsp&nbsp&nbsp&nbspurl: url, <br />
                        &nbsp&nbsp&nbsp&nbsptype: "GET", <br />
                        &nbsp&nbsp&nbsp&nbspdataType: 'json'<br />
                        }).done(function (data) {<br />
                                        &nbsp&nbsp&nbsp&nbspconsole.log(data); <br />
                        }); <br />
                    </p>`;

        return apiCodeSamples;
    }
</script>

<style>
    pre code {
        white-space: pre;
    }

    .modal-api:before {
        content: '';
        display: inline-block;
        height: 100%;
        vertical-align: middle;
        margin-right: -4px;
    }

    /* load spiner */
    .loader {
        border: 3px solid #f3f3f3;
        -webkit-animation: spin 1s linear infinite;
        animation: spin 1s linear infinite;
        border-top: 3px solid #555;
        border-radius: 50%;
    }

    @-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }
    /* end load spiner */
</style>


<script src="https://d3fy651gv2fhd3.cloudfront.net/scripts/bloodhound.gr.js" type="text/javascript"></script>


    <script src="https://d3fy651gv2fhd3.cloudfront.net/scripts/te-standalone-ta.min.js?v=20180510b" type="text/javascript"></script>
    <script src="https://d3fy651gv2fhd3.cloudfront.net/scripts/search.1.0.0.js?v=20180510" type="text/javascript"></script>

    
<script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-1982176-1', 'auto');
        ga('require', 'displayfeatures');

        if (typeof surveyExperiment != 'undefined' && typeof surveyVariation != 'undefined') {
            console.log('surveyExperiment', surveyExperiment, 'surveyVariation', surveyVariation);
            ga('set', 'exp', surveyExperiment + '.' + surveyVariation);
        }


        ga('send', 'pageview');

</script>


</body></html>