<!--The following is the downloaded HTML source of the sfglobe.com privacy policy that was archived on 2014-05-25.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20140525011409id_/http%3A//sfglobe.com/privacy.php) for the most accurate reproduction.-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml"><head>
  <title>The San Francisco Globe</title><meta http-equiv="Content-type" content="text/html" charset="UTF-8">
<meta name="application-name" content="The San Francisco Globe">
<meta name="description" content="Find the latest and most trending content on news, entertainment, life, culture, and more.">

<link rel="shortcut icon" href="http://sfglobe.com/img/favicon.ico?v=2">

<script id="facebook-jssdk" src="//connect.facebook.net/en_US/all.js#xfbml=1&amp;appId=229925160521517"></script><script id="twitter-wjs" src="https://platform.twitter.com/widgets.js"></script><script src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js" type="text/javascript" async=""></script><script type="text/javascript">
(function() {
   var wf = document.createElement('script');
   wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
       '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
   wf.type = 'text/javascript';
   wf.async = 'true';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(wf, s);
 })();
 
 WebFontConfig = {
  google: { families: [ 'Merriweather:700,400', 'Ubuntu:300,700', 'Playfair Display SC','Montserrat:400,700','Gilda Display' ]
       }
};
</script>


<script type="text/javascript">
window.twttr = (function (d,s,id) {
  var t, js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
  js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
  return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
}(document, "script", "twitter-wjs"));
</script>
<script type="text/javascript" src="http://sfglobe.com/js/translations.php"></script>
  <meta property="fb:admins" content="601901"><meta http-equiv="Content-type" content="text/html" charset="UTF-8">

</head>
<body style="margin: 0px; padding: 0px;" lang="EN-US" link="blue" vlink="purple">
<script type="text/javascript">
if(!window.parent || window.parent == window) {
  document.body.style.overflow = '';
}
</script>
<script type="text/javascript" src="http://sfglobe.com/js/fb_wrapper.js"></script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=229925160521517";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
AppConfig = {
  'APPID':'229925160521517',
  'JSPATH':'http://sfglobe.com/js',
  'HOMEURL': 'http://sfglobe.com',
  'APPNAME':"The San Francisco Globe"
}
</script><script type="text/javascript" src="http://sfglobe.com/js/all.js.php?f%5B0%5D=js%2Fjson.js&amp;f%5B1%5D=js%2Fajax_wrapper.js&amp;f%5B2%5D=js%2Futils.js&amp;f%5B3%5D=js%2Fdialog_wrapper.js&amp;f%5B4%5D=js%2Fmobile_app.js"></script><script type="text/javascript">
Ajax.auth_params = {};
</script><style type="text/css">

.btn_gray {
	background:#c6c6c6;
	color:#636363 !important;
}

.credit_citation {
	color: #a4a4a4;
	font-size:11px;
	font-style:italic;
	font-family: Georgia, sans-serif; 
}

.credit_citation a {
	color: #a4a4a4;
	font-size:11px;
	font-style:italic;
	font-family: Georgia, sans-serif; 
	text-decoration:none;
}

.credit_citation a:hover {
	color: #a4a4a4;
	font-size:11px;
	font-style:italic;
	font-family: Georgia, sans-serif; 
	text-decoration:none;
}

.credit_citation a:link {
	color: #a4a4a4;
	font-size:11px;
	font-style:italic;
	font-family: Georgia, sans-serif; 
	text-decoration:none;
}

.credit_citation a:visited {
	color: #a4a4a4;
	font-size:11px;
	font-style:italic;
	font-family: Georgia, sans-serif; 
	text-decoration:none;
}

.login_state {
  position:relative;
  float:right;
  color:white;
  font-family:Merriweather,Helvetica, Geneva, sans-serif;
  font-size:13px;
  padding-right:15px;
  font-weight:normal;
}

.status {
  margin-left:10px;
}

.status.link {
  margin-bottom:5px;
  display:block;
  text-align:left;
  margin-right:10px;
}

.status.signup:hover {
  background-color:#585858;
}
.status.login:hover {
  background-color:#585858;
}
.status .signup, .status .login {
  margin:5px;
}

.status.signup {
  display:inline-block;
  cursor:pointer;
  margin:5px;
  margin-right:0px;
  height:25px;
  border-radius:2px;
}

.status.login {
  display:inline-block;
  cursor:pointer;
  margin:5px;
  margin-right:0px;
  height:25px;
  border-radius:2px;
}

.status.profile {
  display:inline-block;
  cursor:pointer;
  margin:5px;
  margin-right:0px;
  height:25px;
  border-radius:2px;
}
.status.profile:hover {
  background-color:#585858;
}

.status.notifications {
  position:relative;
  display:inline-block;
  cursor:pointer;
  margin:5px;
  margin-right:0px;
  height:25px;
  border-radius:2px;
  
  user-select:none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -ms-user-select: none;
}
.status.notifications:hover {
  background-color:#585858;
}

.status.notifications .notifications_icon {
  padding:5px;
  background-image:url(http://sfglobe.com/img/icon_flag.png);
  background-size:19px 19px;
  background-position:3px 4px;
  background-repeat:no-repeat;
  width:15px;
  height:15px;
}

.status.notifications .unread_count {
  position:absolute;
  right:0px;
  top:0px;
  background-color:#f72903;
  border-radius:2px;
  padding-left:2px;
  padding-right:2px;
  padding-top:1px;
  padding-bottom:1px;
  text-align:center;
  font-size:10px;
  filter: alpha(opacity=90);
  opacity: 0.9;
  display:none;
}

#notifications_dropdown {
  position:absolute;
  right:0px;
  top:26px;
  border-radius:2px;
  border:1px solid #E6E6E6;
  background-color:#FFFFFF;
  color:#000000;
  display:block;
  text-align:left;
  width:350px;
}

.status.notifications.inactive #notifications_dropdown {
  display:none;
}

#notifications_dropdown .notifications_bar, #notifications_dropdown .notifications_footer {
  position:relative;
  min-height:19px;
  float:left;
  width:100%;
  font-family:Ubuntu,sans-serif;
  padding:0px;
  background-color:#ffffff;
  clear:both;
}

#notifications_dropdown .notifications_bar {
  border-bottom:1px solid #E6E6E6;
}

#notifications_dropdown .notifications_footer {
  border-top:1px solid #E6E6E6;
}

#notifications_dropdown .notifications_bar .notifications_title {
  font-weight:bold;
  float:left;
  margin:6px;
}

#notifications_dropdown .notifications_bar .notifications_mark {
  float:right;
  color:#2B86CD;
  margin:6px;
}
#notifications_dropdown .notifications_bar .notifications_mark:hover {
  text-decoration:underline;
}

#notifications_dropdown .notifications {
  position:relative;
  max-height:300px;
  width:100%;
  overflow-y:auto;
  overflow-x:hidden;
  overflow-scrolling:touch;
  -webkit-overflow-scrolling:touch;
  margin-bottom:-1px;
}

#notifications_dropdown .notification {
  position:relative;
  width:100%;
  float:left;
  font-family:'Arial',Georgia,Times,serif;
  font-size:13px;
  border-bottom:1px solid #E6E6E6;
  min-height:72px;
}

#notifications_dropdown .notification.no_activity {
  text-align:center;
  color:#676767;
  font-size:12px;
  line-height:60px;
  height:60px;
}

#notifications_dropdown .notification.unread {
  background-color:#EEEEEE;
}

#notifications_dropdown .notification:hover {
  background-color:#E6E6E6;
}

#notifications_dropdown .notification .notification_icon {
  position:absolute;
  left:6px;
  top:6px;
  width:80px;
  height:60px;
  margin-right:10px;
  margin-left:0px;
  margin-top:0px;
  margin-bottom:0px;
  padding:0px;
  background-size:cover;
  background-position:center;
}

#notifications_dropdown .notification .notification_content {
  padding-left:96px;
  margin-top:6px;
  width:235px;
}

#notifications_dropdown .notification .exerpt {
  text-overflow:ellipsis;
  word-wrap:break-word;
}

#notifications_dropdown .notification .exerpt:before {
  content:'"';
}

#notifications_dropdown .notification .exerpt:after {
  content:'"';
}

#notifications_dropdown .notification .notification_time {
  padding-left:96px;
  width:235px;
  color:#676767;
  font-size:10px;
  margin-bottom:6px;
}

#notifications_dropdown .notification .name {
  margin:0px;
  font-weight:bold;
}

#notifications_dropdown .load_more {
  -webkit-appearance: none;
  width:100%;
  margin:0px;
  background-color:#F9F9F9;
  border:0px none;
  font-size:12px;
  color:#D6D6D6;
  padding:7px;
  cursor:pointer;
  font-family:Ubuntu,sans-serif;
  font-weight:bold;
  text-transform:uppercase;
}

#notifications_dropdown .load_more:hover {
  background-color:#E6E6E6;
  color:#000000;
}

.status .name {
  margin:5px;
}


.status.settings {
  display:inline-block;
  cursor:pointer;
  margin:5px;
  margin-left:0px;
  width:25px;
  height:25px;
  border-radius:2px;
}

.status.settings:hover {
  background-color:#585858;
}
.status.settings.active {
  background-color:#585858;
}
.status.settings.inactive {
  background-color:;
}

.content {
  
}

.content.sections {
  position: absolute;
  top:36px;
  left:0px;
  background-color:white;
  border-radius:2px;
  border:1px #e6e6e6 solid;
  width:auto;
  width:200px;
  padding:10px;
  text-align:left;
}
.content.sections.inactive {
  display:none;
}
.content.sections.active {
  display:inline-block;
}

.content.settings {
  position: absolute;
  top:36px;
  right:23px;
  background-color:white;
  border-radius:2px;
  border:1px #e6e6e6 solid;
  width:auto;
  width:80px;
  padding:10px;
}
.content.settings.inactive {
  display:none;
}
.content.settings.active {
  display:inline-block;
}

.downarrow {
	width: 0; 
	height: 0; 
	border-left: 5px solid transparent;
	border-right: 5px solid transparent;
	
	border-top: 5px solid white;
	margin:10px;
	margin-left:7px;
}

.status.logout, .status.send_confirmation {
  display:block;
  white-space:nowrap;
  margin-right:10px;
}

.yellowbox {
	background:#f7f0b1;
	text-align:center;
	padding-top:5px;
	padding-bottom:5px;
	width:100%;
	min-height:35px;
}

.welcome_box {
	background:#c7ffca;
	text-align:center;
	width:100%;
	height:150px;
	position:absolute;
	top:45px;
	z-index:9999;
  box-shadow: 0px 1px 5px #888888;
}

html,body {
  height:100%;
}

.login.signup {
  margin-top:20px;
}
.login.forgotpassword {
  margin:10px;
}

.login.error {
  padding-top:10px;
}

.signup.email, .signup.password, .signup.first_name, .signup.last_name, .reset_password.password, .forgot_password.email, .change_email.email {
  border-radius:4px;
  border:1px #CCCCCC solid;
  font-family:Merriweather,Helvetica, Geneva, sans-serif;
  font-size:15px;
  padding:5px;
}

.login.email {
  border-radius:4px;
  border:1px #CCCCCC solid;
  font-family:Merriweather,Helvetica, Geneva, sans-serif;
  font-size:15px;
  padding:5px;
}
.login.password {
  border-radius:4px;
  border:1px #CCCCCC solid;
  font-family:Merriweather,Helvetica, Geneva, sans-serif;
  font-size:15px;
  padding:5px;
}

.login.submit, .signup.submit, .confirm_email.submit, .reset_password.submit, .forgot_password.submit, .change_email.submit {
  -webkit-appearance: none;
  background-color:#f72903;
  border:0px none;
  font-size:20px;
  color:white;
  padding:10px;
  cursor:pointer;
  font-family:Merriweather,Helvetica, Geneva, sans-serif;
  margin-top:20px;
  margin-bottom:20px;
}

.login.close, .signup.close, .forgot_password.close, .change_email.close {
  cursor:pointer;
  position:absolute;
  top:0px;
  right:0px;
  font-size:25px;
  font-weight:bold;
  text-decoration:none;
  color:#B0B0B0;
}


.indent {
  border-left:1px #e6e6e6 solid;
  margin-left:20px;
}

.replies {
  border-left:1px #e6e6e6 solid;
}

.comments {
  position:relative;
  z-index:1;
  width:97%;
  text-align:left;
}
.comment {
  font-family:'Arial',Georgia,Times,serif;
  font-size:13px;
  color:#575757;
  line-height:150%;
}

.highlighted .comment_inner, .highlighted.comment_inner {
  background-color:#FFFFD6;
}

.comment_inner {
  position:relative;
  padding-top:5px;
  padding-bottom:5px;
  padding-left:21px;
}

.comment .author {
  margin-right:5px;
  font-weight:bold;
  font-size:13px;
  color:black;
}

.comment .time {
  color:#676767;
  font-size:10px;
}

.comment .content {
  color:#000000;
  display:block;
  white-space:pre-wrap;
  word-wrap:break-word;
}

.comment .hidden_content {
  cursor:pointer;
  color:#999797;
}

.comment .score {
  margin-left:5px;
  font-size:10px;
  
  position:absolute;
  top:15px;
  left:-5px;
  width:20px;
  text-align:center;
}

.comment .upvote {
  bottom:13px;
  right:-12px;
  position:relative;
  
  position:absolute;
  left:1px;
  top:8px;
  
	width: 0; 
	height: 0; 
	border-left: 7px solid transparent;
	border-right: 7px solid transparent;
	border-bottom: 7px solid #B8B8B8;
}

.comment .upvote:hover {
  border-bottom: 7px solid #4fc49c;
}

.comment .downvote {
  top:13px;
  left:-12px;
  position:relative;
  
  position:absolute;
  left:1px;
  top:30px;
  
	width: 0; 
	height: 0; 
	border-left: 7px solid transparent;
	border-right: 7px solid transparent;
	border-top: 7px solid #B8B8B8;	
}

.comment .downvote:hover {
  border-top: 7px solid red;
}

.comment .vote_options {
  position:absolute;
  top:0px;
  left:0px;
}

.comment .vote_options span {
  cursor:pointer;
  margin:2px;
  z-index:1;
}

.comment .vote_options .voted {
}

.comment .vote_options .downvote.voted {
  border-top: 7px solid #f72903;
}
.comment .vote_options .upvote.voted {
  border-bottom: 7px solid #4fc49c;
}

.comment .reply_to {
  cursor:pointer;
  text-transform:capitalize;
  font-weight:bold;
  color:gray;
}

.add_comment {
  position:relative;
  width:100%;
  height:120px;
}
.add_comment .textarea_holder {
  position:absolute;
  top:5px;
  left:0px;
  right:12px;
  width:auto;
  
  display:block;
  height:60px;
}

.add_comment .textarea_holder textarea {
  -webkit-appearance: none;
  outline:0;
  border:1px #B8B8B8 solid;
  width:100%;
  height:100%;
  font-size:14px;
  padding:5px;
  font-family:Arial, georgia, Times, serif;
}

.add_comment .textarea_holder textarea:focus {
  border:1px #0ebcd9 solid;
}

.add_comment input {
  -webkit-appearance: none;
  float:right;
  margin-top:82px;
  border:1px #B8B8B8 solid;
  border-radius:5px;
  background-color:white;
  font-size:15px;
  padding:6px;
  padding-right:12px;
  padding-left:12px;
  cursor:pointer;
}
.add_comment input:hover {
  border:1px black solid;
}




@-webkit-keyframes pulse 
{       
  0% {-webkit-transform: scale(0); opacity: 0;}
  8% {-webkit-transform: scale(0); opacity: 0;}
  15% {-webkit-transform: scale(0.1); opacity: 1;}
  30% {-webkit-transform: scale(0.5); opacity: 1;}
  100% {opacity: 0; -webkit-transform: scale(1);}
}

@-moz-keyframes pulse 
{       
  0% {-moz-transform: scale(0); opacity: 0;}
  8% {-moz-transform: scale(0); opacity: 0;}
  15% {-moz-transform: scale(0.1); opacity: 1;}
  30% {-moz-transform: scale(0.5); opacity: 1;}
  100% {opacity: 0; -moz-transform: scale(1);}
}

.pulse_holder
{
  display: block;
  position: absolute;
  top: 0px;
  left: 0px;
}
  
.pulse_holder .pulse_marker 
{
  width: 16px;
  height: 16px;
  border-radius: 28px;
}

.pulse_holder .pulse_rays 
{
  margin: 0 auto;
  border-radius: 100px;
  position: absolute;
  right: -26px;
  top: -26px;
  z-index: 10;
  background-color: transparent;
  opacity: 0.1;
  width: 64px;
  height: 64px;
  border: 2px solid rgba(0, 128, 64, 1);
  -webkit-border-radius: 100px;
  -moz-border-radius: 100px;
  -o-border-radius: 100px;
  -ms-border-radius: 100px;
  border-radius: 100px;
  /* Giving Animation Function */
  -webkit-animation: pulse 2s linear infinite;
  -moz-animation: pulse 2s linear infinite; 
  border-image: initial;
}

.settings input {
  -webkit-appearance: none;
  border:1px #B8B8B8 solid;
  border-radius:5px;
  background-color:white;
  font-size:15px;
  padding:6px;
  padding-right:12px;
  padding-left:12px;
  cursor:pointer;
}

.btn_post {
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	cursor:pointer;
	border-radius:3px;
	font-size:14px;
	color:#ffffff;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	background:#3c85c3;
	border:0px;
}

.btn_subscribe_digest {
	padding-top:10px;
	padding-bottom:10px;
	padding-left:15px;
	padding-right:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:18px;
	color:#ffffff;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	background:#e24f1b;
	border:0px;
}
</style><style type="text/css">
.category_state.Tech {
  background-color:#ff8400;
}
.category_state.News {
  background-color:#4fc49c;
}
.category_state.Life {
  background-color:#d1cb1a;
}
.category_state.Entertainment {
  background-color:#f72903;
}
.category_state.People {
  background-color:#0ebcd9;
}
.category_state.Culture {
  background-color:#79519f;
}
.category_state.Science {
  background-color:#4073c0;
}

.category_name.Tech {
  color:#ff8400;
}
.category_name.News {
  color:#4fc49c;
}
.category_name.Life {
  color:#d1cb1a;
}
.category_name.Entertainment {
  color:#f72903;
}
.category_name.People {
  color:#0ebcd9;
}
.category_name.Culture {
  color:#79519f;
}
.category_name.Science {
  color:#4073c0;
}


.article_category.Science {
  color:#4073c0;
}

.article_category.Tech {
  color:#ff8400;
}
.article_category.News {
  color:#4fc49c;
}
.article_category.Life {
  color:#d1cb1a;
}

.article_category.Entertainment {
  color:#f72903;
}

.article_category.People {
  color:#0ebcd9;
}

.article_category.Culture {
  color:#79519f;
}

body {
	font-family: 'Garamond', Georgia, Times, serif;
	font-size: 14px; 
	text-align:center;
	background:#ffffff;
}

a {
	color: #2b86cd;
	text-decoration:none; 
}

a:visited {
	color: #2b86cd;
	text-decoration:none; 
}

a:hover {
	color: #2b86cd;
	text-decoration: underline; 
}

.header_fixed .button {
   border-radius:3px;
   display:inline-block;
   vertical-align:top;
   padding:5px;
   margin:9px;
   margin-right:5px;
   margin-left:5px;
   color:white;
   cursor:pointer;
}

.header_fixed .button:hover {
  background-color:#484848;
}

/* DIALOG BOX */

.kfm_dialog_overlay {
  position:absolute;
  z-index:999;
  z-index:10000;
  left:0px;
  top:0px;
  width:100%;
  height:100%;
  background-color:#000000;
  opacity:0.7;
  filter:alpha(opacity=70);
  -moz-opacity:0.7;
}

.kfm_dialog {
  position:absolute;
  z-index:1000;
  z-index:100000;
  left:50%;
  width:320px;
  margin-left:-160px;
  background-color:white;
  border-radius:3px;
}

.kfm_dialoglarge {
  position:absolute;
  z-index:1000;
  z-index:100000;
  left:50%;
  width:700px;
  margin-left:-350px;
  background-color:white;
}

.kfm_dialog_button_ok {
	background-color:#009900;
	color:white;
	font-weight:bold;
}

.kfm_largedialog {
	left:50%;
  width:700px;
  margin-left:-350px;
  background-color:white;
}
.kfm_largedialogtop {
	position:absolute;
	top:0px;
	left:0px;
	height:36px;
	width:700px;
}
.kfm_largedialogbottom {
	position:absolute;
	bottom:0px;
	left:0px;
	height:34px;
	width:700px;
}

.kfm_smalldialog {
	left:50%;
  width:300px;
  margin-left:-176px;
  background-color:white;
}
.kfm_smalldialogtop {
	position:absolute;
	top:0px;
	left:0px;
	height:36px;
	width:352px;
}

.kfm_smalldialogbottom {
	position:absolute;
	bottom:0px;
	left:0px;
	height:34px;
	width:352px;
}


.kfm_smalldialog_inner, .kfm_largedialog_inner {	
  margin:15px;
  position:relative;
  padding-bottom:50px;
  padding-left:20px;
  padding-right:15px;
  padding-top:20px;
  color:black;
}

.kfm_dialog_title {
  font-weight:bold;
  font-size:25px;
  padding:3px 5px 3px 5px;
  text-align:center;
}

.kfm_dialog_content {
  margin:10px 5px 5px 5px;
  font-size:15px;
}

.kfm_largedialog_buttons {
	position:absolute;
	bottom:15px;
	right:20px;
	width:300px;
  text-align:right;
  z-index:100;
}

.kfm_smalldialog_buttons {
	position:absolute;
	bottom:10px;
	left:50%;
	width:300px;
	margin-left:-150px;
  text-align:center;
  z-index:100;
}

.kfm_dialog_button {
  margin-left:5px;
}

.kfm_button {
  
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	padding:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:16px;
	color:#454545;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	border:0px;
	background:none;
	
}




.kfm_button_large {
  padding-left:10px;
  padding-right:10px;
  padding-top:5px;
  padding-bottom:5px;
  font-weight:bold;
  color:#fff; 
  font-family: 'Lato', Georgia, Times, serif;
  font-size:18px;
  display:inline-block;
  cursor:pointer;
  text-decoration:none;
}

.kfm_button_large {
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	padding:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:16px;
	color:#ffffff;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	border:0px;
	
	background:#405e9f;
	margin-left:100px;
}

.kfm_button_ignore_left {
  position:absolute;
  left:30px;
  top:0px;
}

.kfm_button_ignore {
  padding-left:4px;
  padding-right:4px;
  padding-top:5px;
  padding-bottom:5px;
  font-weight:normal;
  color:#454545; 
  font-family: 'Lato', Georgia, Times, serif;
  font-size:13px;
  display:inline-block;
  cursor:pointer;
  text-decoration:none;
}

.kfm_button_ignore {
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	padding:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:16px;
  color:#454545; 
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	border:0px;
	
	background:white;
}

.kfm_button_ignore_skipleft {
  background-repeat:repeat-x;
  background: #e5e5e5 url("http://sfglobe.com/img/button_bg_gray.gif") 0 0 repeat-x;
  border:1px solid #acacac;
  padding-left:8px;
  padding-right:8px;
  padding-top:5px;
  padding-bottom:5px;
  font-weight:bold;
  color:#454545; 
  font-family: 'Lato', Georgia, Times, serif;
  font-size:12px;
  display:inline-block;
  cursor:pointer;
  text-decoration:none;
  position:relative;
  left:-200px;
}

/* DIALOG BOX END */


.pg_header {
	margin-top:20px;
	margin-bottom:0px;
	padding-bottom:15px;
	border-bottom:3px solid #747474;
}

.category_header {
	padding-top:4px;
	padding-bottom:4px;
	border-bottom:1px solid #555555;	
	width:950px;
	display:inline-block;
}

.category_subheader {
	font-family: 'Helvetica', 'Arial', sans-serif;
	font-weight:normal;
  margin-top:10px;
  margin-bottom:15px;
  text-align:left;
  font-size:14px;
	width:950px;
	display:inline-block;
	position:relative;
  color:#555555;
  
}

.category {
	font-family: 'Montserrat', sans-serif;
	font-weight:400;
	font-size:14px;	
	margin-right:15px;
	padding-right:15px;
	text-transform:uppercase;
	color:black;
}

.category a {
	color: black;
}

.category a:visited {
	color: black;
}

.category a:link {
	color: black;
}

.category a:hover {
	color: black;
}

.footer_category {
	margin-right:15px;
	padding-right:15px;
	border-right:1px solid #d8d8d8;
}


.footer_category a {
	color: #909090;
}

.footer_category a:visited {
	color: #909090;
}

.footer_category a:link {
	color: #909090;
}

.footer_category a:hover {
	color: #909090;
}


.article_title {
	font-size:24px;
	text-align:center;
	font-weight:bold;
	width:350px;
	margin-top:5px;
	margin-left:0px;
	text-align:left;
	cursor:pointer;
	display:inline-block;
}


.pg_title {
	font-size:24px;
	text-align:center;
	cursor:pointer;
}

.pg_date {
	font-family: 'Garamond','Times New Roman', sans-serif;
	margin-top:10px;
	color:#494949;
}

.app_container_mobile {
	width:100%;
	margin:0 auto;
	text-align:left;
}

.app_container {
	width:100%;
	margin:0 auto;
	text-align:left;
	max-width:955px;
	min-height:350px;
}

.app_container.border {
  box-shadow: 0px 0px 5px #e6e6e6;
  padding-left:20px;
  width:90%;
  max-width:1024px;
  min-width:955px;
}

.header_fixed {
  position:absolute;
  position:fixed;
  top:0px;
  left:0px;
  width:100%;
  min-width:1000px;
  height:45px;
  border-bottom:0px #a1a1a1 solid;
  background-color:white;
  z-index:10000;
  background-color:#3a3a3a;
  box-shadow: 0px 1px 5px #888888;
}
.header_spacer {
  height:45px;
}


.app_container_margin {
	margin-left:10px;
	margin-right:10px;
}

.footer_header {
	border-top:2px solid #747474;
	margin-bottom:30px;
	padding-bottom:10px;
	padding-top:10px;
	border-bottom: 1px solid #747474;
	color:#909090;
}

.headline {
	font-size:30px;
	font-family:Merriweather,"Gilda Display",'Georgia',"times new roman",times,serif;
	font-family: 'Merriweather', serif;
	font-weight:normal;
	border-bottom: 0px solid #bababa;
	margin-bottom:10px;
	margin-top:10px;
	padding-bottom:0px;
	padding-top:10px;
}


.category_headline {
  text-align:center;
	font-size:20px;
	font-weight:200;
	font-family: 'Times New Roman', serif;
	color:#111111;
}

.category_headline a {
	color: #000;
}
.category_headline a:link {
	color: #000;
}
.category_headline a:visited {
	color: #000;
}

.category_headline a:hover {
	color: #000;
	text-decoration:none;
	cursor:pointer;
}


.blurb_frontpage {
	margin-top:10px;
	font-size:15px;
	line-height:20px;
	color:#343434;
}

.category_subline {
	margin-top:5px;
	font-size:13px;
	line-height:15px;
	color:#707070;	
	text-align:center;
}
.category_extra {
	font-family: 'Montserrat', sans-serif;
	margin-top:5px;
	font-size:10px;
	line-height:20px;
	color:#b6b5b5;	
	text-transform:uppercase;
	text-align:center;
}

/* ARTICLE CSS */

.category_state {
  text-align:left;
  text-transform:uppercase;
  color:white;
  font-weight:bold;
  font-family:"sans serif",georgia,"times new roman",times,serif;
  font-family: Ubuntu, sans-serif;
  margin-top:30px;
  font-size:12px;
  margin-left:3px;
  background-color:#4fc49c;
  padding:10px;
  -webkit-font-smoothing:antialiased;
  display:inline-block;
  cursor:pointer;
}

.category_name {
  text-align:left;
  text-transform:uppercase;
  color:white;
  font-weight:bold;
  font-family: Ubuntu, sans-serif;
  font-size:16px;
  margin-left:3px;
  padding:5px;
  -webkit-font-smoothing:antialiased;
  display:inline-block;
  cursor:pointer;
}

.category_state.home {
  background-color:#B8B8B8;
}
.category_state.home:hover {
  background-color:gray;
}

.subcategory_state {
  text-align:left;
  text-transform:uppercase;
  color:black;
  font-family:'Gilda Display', georgia, 'times new roman', times, serif;
  font-size:13px;
  display:inline-block;
  
}

.blurb {
	font-size: 17px;
	line-height:25px;
	color:#333;
	font-family:"times new roman",times,serif;
	min-width:600px;
	margin-right:20px;
}

.article_author {
  font-size:11px;
  color:gray;
  font-family:georgia,"times new roman",times,serif;
  font-family: Ubuntu, sans-serif;
  text-transform:uppercase;
  font-weight:300;
}

.article_author .name {
  color:#797979;
  text-transform:uppercase;
  font-weight:700;
}

.publish_date {
  color:gray;
  text-transform:uppercase;
  font-family:"Gilda Display",georgia,"times new roman",times,serif;
  font-size:11px;
  font-family: Ubuntu, sans-serif;
  font-weight:300;
}

.share_col {
   text-transform:uppercase;
   font-family:arial,helvetica,sans-serif;
   color:gray;
   font-size:11px;
   padding:10px;
   padding-right:0px;
   padding-left:25px;
   width:70px;
   border-bottom:1px #e6e6e6 solid;
   position:relative;
   cursor:pointer;
}

.icon {
  
  position:absolute;
  top:5px;left:0px;
  width:20px;
  height:20px;
  border-radius:50%;
  background-color:black;
  display:inline-block;
  background-repeat:no-repeat;
}

.icon.fb {
  background-image:url("img/icon_fb.png");
  background-size:18px 18px;
  background-color:#3b5998;
  background-position:1px 1px; 
}

.icon.twitter {
  background-image:url("img/icon_twitter.png");
  background-size:16px 16px;
  background-color:#00aced;
  background-position:2px 2px; 
}

.article_content {
	margin-top:0px;
	margin-bottom:10px;
	font-size: 16px;
	line-height:25px;
	color:#333;
	color:rgb(91, 91, 91);
	min-width:480px;
	margin-right:20px;
	font-family:georgia,"times new roman",times,serif;
	
}

.actual_content img {
  width:98%;
}

.actual_content .article_pic img {
  
}

.article_p {
	margin-bottom:15px;
	width:98%;

}

.article_pic  {
	margin-top:10px;
	margin-bottom:10px;
}

.text_red {
  color:#f72903;
}

.text_blue {
  color:#0ebcd9;
}
.text_green {
  color:#4fc49c;
}
.text_purple {
  color:#79519f;
}
.section_lined {
  border-bottom:3px #e5e5e5 solid;
  margin-bottom:10px;
}

.section_bar {
  border-bottom:3px #e5e5e5 solid;
  margin-bottom:10px;
  position:relative;
}

.section_bar.red {
  border-bottom:3px #f72903 solid;
}

.section_bar.blue {
  border-bottom:3px #0ebcd9 solid;
}
.section_bar.green {
  border-bottom:3px #4fc49c solid;
}
.section_bar.purple {
  border-bottom:3px #79519f solid;
}

.section_white_bg_padding {
	padding-left:5px;
	padding-right:5px;
}

.section_rule {
	position:relative;
	z-index:-2;
	top:-30px;
	border-top: 1px solid #696969;
}

.section_rule_red {
	position:relative;
	z-index:-2;
	top:-30px;
	border-top: 1px solid #b8252d;
}

ul {
	margin-top:0px;
	margin-left:10px;
	padding:0px;
}

li {
	list-style-type: square;
	line-height:18px;
	color:#b8252d;
	font-size:12px;
	margin-bottom:8px;
}

li span {
	color:#343434;
}

.mid_section {
	padding-bottom:10px;
	border-bottom:1px solid #e5e5e5;
	margin-bottom:10px;
}

.article_category {
	font-family: 'Montserrat', sans-serif;
	text-transform:uppercase;
	text-align:center;
	font-weight:bold;
	font-size:11px;
}

/* blue */
.tech_color {
	color:#0ebcd9;
}

/* green */
.green_color {
	color:#4fc49c;
}

/* purple */
.purple_color {
	color:#79519f;
}




.red_color {
	color:#f72903;	
}

.white_bg {
	background:#ffffff;	
}

.header_leftad {
	border:1px solid #a1a1a1;
	border-radius:2px;
	padding:10px;
}

.header_leftad_text {
	margin-bottom:5px;
}

.red_action_ticker {
	background:#b8252d;
	color:#fff;
	font-weight:bold;
	padding:4px;
	text-transform:uppercase;
}

.sidebar_title {
	font-family: 'Montserrat', sans-serif;
	font-size:11px;
	text-align:center;
	font-weight:bold;	
	padding-bottom:5px;
	margin-top:10px;
	text-transform:uppercase;
}

.sidebar_td {
	border-left: 0px solid #c4c4c4;
	height:100%;
}

.popular_image {
	width:120px;
	height:80px;
	background:#f7f7f7;
}

.popular_image_large {
	width:150px;
	height:100px;
	background:#f7f7f7;
}

.credits {
	margin-bottom:10px;	
	text-align:left;
	font-family: 'Arial', sans-serif;
	color:#6e6e6e;
	font-size:12px;
}


.date {
	margin-bottom:10px;	
	text-align:left;
	font-family: 'Tinos', sans-serif;
	color:#6e6e6e;
	font-size:12px;
}

.sidebar_xpromo {
	margin-bottom:15px;	
}

.sidebar_pic {
	border:1px solid #cacaca;
	margin-bottom:5px;
}



.sidebar_xpromo_title {
	font-size:18px;
	font-family: 'Garamond', Georgia, Times, serif;
	color:#404040;
	text-align:left;
	font-weight:bold;
}

.subscribe_box {
	background:#e9e9e9;	
	text-align:center;
	border-radius:4px;
	border:1px solid #cecece;
}

.title {
	font-size:22px;
	font-weight:bold;
	font-family: 'Tinos', Georgia, Times, serif;
}


.btn_next {
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	padding:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:16px;
	color:#ffffff;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	border:0px;
	background-color:#f72903;
	position:absolute;
	right:48px;
}

.btn_rightarrow {
  display:inline-block;
  width:0px;
  height:0px;
  border-top:19px solid transparent;
  border-bottom:19px solid transparent;
  border-left:19px solid #f72903;
  position:absolute;
  right:30px;
}


.btn_share {
	padding-top:6px;
	padding-bottom:6px;
	padding-left:10px;
	padding-right:10px;
	padding:15px;
	cursor:pointer;
	border-radius:3px;
	font-size:16px;
	color:#ffffff;
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	text-align:center;
	-webkit-appearance:none; 
	border:0px;
}

.btn_square {
	font-family:'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;
	cursor:pointer;
}

.subscribe_email {
	font-family: 'Lato', Georgia, Times, serif;
	font-size:13px;
	margin-right:5px;
	padding:2px;
	width:170px;
}

.btn_submit {
	background:#e84b26;
}

.btn_subscribe {
	background:#43b84e;
}


.btn_fb {
	background:#405e9f;
	
}

.btn_twitter {
	background: #0fc1f2;
}

.btn_email {
  color:#484848;
  border:1px gray solid;
}

.share_buttons {
	margin-bottom:10px;	
	text-align:center;
}

.errortext {
	color:#dd3737;
	font-style:italic;
}

.video {
	width:97%;
	height:300px;
	margin-top:15px;
	margin-bottom:3px;
}


.video_wrapper {
	position: relative;
	padding-bottom: 56.25%; /* 16:9 */
	padding-top: 25px;
	height: 0;
	margin-top:10px;

}
.video_wrapper iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 98%;
	height: 98%;
}

.quiz_title {
	font-size: 20px;
	font-weight:bold;
	margin-bottom:10px;
}

.quiz_description {
	font-size:16px;
	margin-bottom:10px;
	color:#424242;
	line-height:20px;
}

.quiz_question {
	font-size:17px;
	margin-bottom:10px;
}

.quiz_answers {
	margin-bottom:10px;
	font-size:16px;
	margin-left:10px;
}

.quiz_answer {
	margin-right:10px;
}

.error_message {
	background:#f68c7f;
	padding:10px;
	border:1px solid #a14034; 	
}


.success_message {
	background:#a1d072;
	padding:10px;
	border:1px solid #6da734; 	
}

.mobile_footer_nav {
	padding-top:10px;
	padding-bottom:10px;
	font-family: 'Lato', sans-serif;
	font-size:20px;	
	margin-bottom:3px;
	border-bottom:1px solid #d8d8d8;
	text-align:center;
}


.sticktotop {
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -ms-sticky;
    position: -o-sticky;
    position: sticky;
    top: 0px;
    background:#ffffff;
}

.positionbottom_fixed {
    position: fixed;
    bottom: 0px;
    left:0px;
    border:0px;
    background:#ffffff;
}

.button_x {
	border-radius: 50%;
	width: 25px;
	height: 25px;
	background:#000; 
	color:#fff;
	text-align:center;
	text-decoration:none;
	font-weight:bold;
	border:2px solid #fff;
	font-family: 'Helvetica Neue',arial, sans-serif;
}

.remove_ads {
	font-family: 'Helvetica Neue',arial, sans-serif;	
	background:#fff;
	border-bottom:1px solid #ccc;
	font-size:10px;
	margin-bottom:10px;
}

.author {
	font-size:11px;
	color:#575757;	
}

.photo_credits {
	font-size:11px;
	color:#8a8a8a;	
	text-align:right;	
	width:98%;
	font-family:'Arial';
}

.photo_caption {
	font-size:12px;
	color:#8a8a8a;	
	width:98%;
}

.social_icon {
	text-align:center;
	border-radius:50%;
	width:30px;
	height:30px;
}

.social_icon_image {
	margin-top:4px;
}

.fb_color {
	background:#43609c;
}

.twitter_color {
	background:#55acee;
}

.instagram_color {
	background:#aa7e62;
}

.sfglobe_title {
	color:#dc0707;
	font-family: 'Playfair Display SC', serif;
	font-size:35px;
	font-weight:normal;
  text-rendering: geometricPrecision;
  color:#FCFCFC;
}

.wf-loading body { 	 }
.wf-inactive body { 	 }
.wf-active body { 	 }

/* sfglobe_title 
.wf-loading .sfglobe_title { font-family: Times, serif; }
.wf-inactive .sfglobe_title { font-family: Times, serif; }
.wf-active .sfglobe_title { font-family: 'Playfair Display SC', sans-serif; }
*/

.wf-loading .article_content { font-family: Times, Arial, serif; }
.wf-inactive .article_content { font-family: Times, Arial, serif; }
.wf-active .article_content { font-family: georgia,"times new roman",times,serif; }

/* category */
.wf-loading .category { font-family: Arial, serif; }
.wf-inactive .category { font-family: Arial, serif; }
.wf-active .category { font-family: 'Montserrat', sans-serif; }

/* mobile_footer_nav */
.wf-loading .mobile_footer_nav { font-family: Arial, serif; }
.wf-inactive .mobile_footer_nav { font-family: Arial, serif; }
.wf-active .mobile_footer_nav { font-family: 'Montserrat', Georgia, Times, serif; }

/*article_category*/
.wf-loading .article_category { font-family: Arial, serif; }
.wf-inactive .article_category { font-family: Arial, serif; }
.wf-active .article_category { font-family: 'Montserrat', sans-serif; }


/* pg_date */
.wf-loading .pg_date { font-family: Arial, serif; }
.wf-inactive .pg_date { font-family: Arial, serif; }
.wf-active .pg_date { font-family: 'Lato', Georgia, Times, serif; }


/* sf times */
.wf-loading .pg_title { font-family: Arial, serif; }
.wf-inactive .pg_title { font-family: Arial, serif; }
.wf-active .pg_title { font-family: 'Lato', Georgia, Times, serif; }

/* trending */
.wf-loading .sidebar_title { font-family: Arial, serif; }
.wf-inactive .sidebar_title { font-family: Arial, serif; }
.wf-active .sidebar_title { font-family: 'Montserrat', sans-serif; }


/* category_extra */
.wf-loading .category_extra { font-family: Arial, serif; }
.wf-inactive .category_extra { font-family: Arial, serif; }
.wf-active .category_extra { font-family: 'Montserrat', sans-serif; }

/* category_subheader */
.wf-loading .category_subheader { font-family: Arial, serif; }
.wf-inactive .category_subheader { font-family: Arial, serif; }
.wf-active .category_subheader { font-family: 'Roboto', sans-serif; }


/* headline */
.wf-loading .headline { font-family: Times, serif; }
.wf-inactive .headline { font-family: Times, serif; }
.wf-active .headline{ font-family: 'Merriweather', serif; }


/* category_headline */
.wf-loading .category_headline { font-family: Times, serif; }
.wf-inactive .category_headline { font-family: Times, serif; }
.wf-active .category_headline { font-family: 'Tinos', Times, serif; }


/* footer_header */
.wf-loading .footer_header { font-family: 'Arial', serif; }
.wf-inactive .footer_header { font-family: 'Arial', serif; }
.wf-active .footer_header { font-family: 'Roboto', Georgia, Times, serif; }

/* header_leftad */
.wf-loading .header_leftad { font-family: 'Arial', serif; }
.wf-inactive .header_leftad { font-family: 'Arial', serif; }
.wf-active .header_leftad { font-family: 'Roboto', Georgia, Times, serif; }

/* red_action_ticker */
.wf-loading .red_action_ticker { font-family: 'Arial', serif; }
.wf-inactive .red_action_ticker { font-family: 'Arial', serif; }
.wf-active .red_action_ticker { font-family: 'Roboto', Georgia, Times, serif; }


/* blurb 
.wf-loading .blurb { font-family: 'Arial', serif; }
.wf-inactive .blurb { font-family: 'Arial', serif; }
.wf-active .blurb { font-family: 'Roboto', Georgia, Times, serif; }
*/


/*blurb_frontpage*/
.wf-loading .blurb_frontpage { font-family: 'Arial', serif; }
.wf-inactive .blurb_frontpage { font-family: 'Arial', serif; }
.wf-active .blurb_frontpage{ font-family: 'Roboto', Georgia, Times, serif; }

/*category_subline */
.wf-loading .category_subline { font-family: 'Arial', serif; }
.wf-inactive .category_subline { font-family: 'Arial', serif; }
.wf-active .category_subline { font-family: 'Roboto',serif;  }


/* ul */
.wf-loading ul { font-family: 'Arial', serif; }
.wf-inactive ul { font-family: 'Arial', serif; }
.wf-active ul { font-family: 'Roboto', Georgia, Times, serif; }


/*author*/
.wf-loading .author { font-family: 'Arial', serif; }
.wf-inactive .author { font-family: 'Arial', serif; }
.wf-active .author{ font-family: 'Arial', Georgia, Times, serif; }

/* xpromo text 
.wf-loading .sidebar_xpromo_title { font-family: Georgia, Times, serif; }
.wf-inactive .sidebar_xpromo_title { font-family: Georgia, Times, serif; }
.wf-active .sidebar_xpromo_title { font-family: 'Tinos', Georgia, Times, serif; }
*/
/* buttons 
.wf-loading .btn_share { font-family: Georgia, Times, serif; }
.wf-inactive .btn_share { font-family: Georgia, Times, serif; }
.wf-active .btn_share { font-family: 'Lato', Georgia, Times, serif; }
*/

/* published */ 
.wf-loading .date { font-family: Georgia, Times, serif; }
.wf-inactive .date { font-family: Georgia, Times, serif; }
.wf-active .date { font-family: 'Lato', Georgia, Times, serif; }

.wf-loading .category_state { font-family: sans-serif; }
.wf-inactive .category_state { font-family: sans-serif; }
.wf_active .category_state { font-family: Ubuntu, sans-serif; }

input:focus {
  outline:0;
}



.anchor {
  display:inline-block;
  position:absolute;
  padding-top:105px;
  margin-top:-105px;
}

.comments {
  max-width:698px;
}

</style><script type="text/javascript">
var show_fb_like_prompt = true;
var show_twitter_follow_prompt = true;

Articles = {
  articles: {},
  set: function(id,data) {
    id = id+"";
    Articles.articles[id] = data;
  },
  get: function(id) {
    id = id+"";
    return Articles.articles[id];
  }
};

var end_video_dlg = new DialogWrapper();

var userHasScrolled = false;
var hasPoppedUp = Utils.getCookie('popped_0')=='1';

function getLastOffsetTop(el) {
  if(el) {
    if (el.lastOffsetTop) {
      return el.lastOffsetTop;
    }
    else {
      return el.offsetTop;
    }
  }
  return 0;
}

window.addEventListener('scroll', function() {

  if (!userHasScrolled){
	 	var ajax = new Ajax();
		ajax.responseType = Ajax.JSON;
		var params = {"action":"scrolled"};
		ajax.post("http://sfglobe.com/ajax/action.php", params);
		userHasScrolled = true;
	}
	
	// stick share buttons to page after scrolling past
	
	var is_mobile = "";
	
	if (!is_mobile){
	  var scrollTop = window.pageYOffset;
	  var el = document.getElementById('top_sharebuttons');
	  var el2 = document.getElementById('bottom_xpromo');
	  if(false && el && el2) {
  	  if ((scrollTop > getLastOffsetTop(el)-45) && (scrollTop < el2.offsetTop-300)){
  	  	if (el.style.position != 'fixed') {
  	  		el.lastOffsetTop = el.offsetTop;
  	  		el.style.position = 'fixed';
  	  		el.style.top = '45px';
  	  		//el.style.width = '57%';
  	  		el.style.width = document.getElementById('top_sharebuttons_placeholder').clientWidth+'px';
  	  	}
  	  }
  	  else if ( (scrollTop < getLastOffsetTop(el)-45) || (scrollTop > el2.offsetTop-300) ) {
  	  	if (el.style.position == 'fixed') {
  	  		el.style.position = 'relative';
  	  		el.style.top = '';
  	  		el.style.width = '100%';
  	  	}
  	  }
  	}
  
  
    // fix sidelist_xpromo to screen
    if (document.getElementById('sidelist_xpromo')) {
      var el = document.getElementById('sidelist_xpromo');
      var ph = document.getElementById('sidelist_placeholder');
      
  	  if (scrollTop > getLastOffsetTop(ph)+150){
  	  	if (el.style.position != 'fixed') {
  	  	  el.lastWidth = el.clientWidth;
  	  		el.lastOffsetTop = el.offsetTop;
  	  		el.style.position = 'fixed';
  	  		el.style.top = '45px';
  	  		//el.style.width = '57%';
  	  		el.style.width = el.lastWidth + 'px';
  	  		//el.style.width = document.getElementById('top_sharebuttons_placeholder').clientWidth+'px';
  	  	}
  	  }
  	  else if ( scrollTop < getLastOffsetTop(ph)+150 ) {
  	  	if (el.style.position == 'fixed') {
  	  		el.style.position = 'relative';
  	  		el.style.top = '';
  	  		el.style.width = '100%';
  	  	}
  	  }
    }
	}
  // display popup share prompt after credits
	
  var scrollTop = window.pageYOffset;
  var el = document.getElementById('creditsbox_element');
  var tOffsetTop = totalOffsetTop(el);
  if (scrollTop > tOffsetTop-window.innerHeight+200){
  	if (!hasPoppedUp && typeof showPopUpPrompt =='function') {
  	  
  		setTimeout(function(){
  				showPopUpPrompt();
  			},3000);
  		hasPoppedUp = true;
  		var d = new Date();
  		d.setTime(d.getTime()+86400000);
  		Utils.setCookie('popped_0','1',d);
  	}
  }
});

var totalOffsetTop = function(element) {
    var top = 0, left = 0;
    if(element) {
      do {
          top += element.offsetTop  || 0;
          left += element.offsetLeft || 0;
          element = element.offsetParent;
      } while(element);
    }
    return top;
};

function followIntentToAnalytics (intentEvent) {
	
	//alert('hi1');
  if (!intentEvent) return;


 	if (document.getElementById('twitter_follow_button')){
		document.getElementById('twitter_follow_button').style.display = 'none';
		
		var ajax = new Ajax();
		ajax.responseType = Ajax.JSON;
		var params = {"action":"twitter_follow_button"};
		ajax.post("http://sfglobe.com/ajax/action.php", params);		
		
	} 
	
	if (end_video_dlg){
		end_video_dlg.hide();
	}
  
 	//end_video_dlg.hide();
 	
}

twttr.ready(function (twttr) {
  twttr.events.bind('follow', followIntentToAnalytics);
});

  		
function showErrorMessage(){
	var dlg = new DialogWrapper();
	dlg.showMessage("Error","You must fill out the complete survey to see your results!","Okay");
}

function hideElement(element_name){
	if (document.getElementById(element_name)){
		document.getElementById(element_name).style.display = 'none';
	}	
}


function showElement(element_name){
	if (document.getElementById(element_name)){
		document.getElementById(element_name).style.display = 'block';
	}	
}

function hideAllFBLikes(){
	hideElement('onpage_fblike_button');
	hideElement('mobilebar_fblike_button');
	hideElement('overlay_fblike_button');
	hideElement('mobilebar_sidearrow');
	hideElement('wantmore_fblike');
	show_fb_like_prompt = false;
}

function trackFBLike(success_or_failure){
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"fb_like_button","value":success_or_failure};
	ajax.post("http://sfglobe.com/ajax/action.php", params);	
}

function showTwitterFollowPrompt(){
	var show_dialog = "0";
	
	if (show_dialog == 0 && show_twitter_follow_prompt){
		end_video_dlg.showMessage("Want more stories like this?","<div style='background:#f7f7f7; padding:10px;'>\n\n\n<div style='font-size:16px;margin-bottom:5px;font-weight:normal;'>Follow us on Twitter to get more!<\/div>\n\n<a href=\"http:\/\/twitter.com\/theSFGlobe\" id='twitter_follow_button' class=\"twitter-follow-button\" data-show-count=\"false\" data-size=\"large\">Follow @theSFGlobe<\/a>\n\t\t\n<\/div>","Close");
		end_video_dlg.oncancel = function(){
		}
		
		twttr.ready(function (twttr) {
		 twttr.widgets.load();
		});
	}
	else {
		
	}
}
var hasShared = false;
function showSharePrompt(details, do_share){
  if (do_share) {
    hasShared = true;
  }
	var user_source = "seed";
	if (user_source.search("twt_")!=-1) {
		if (do_share){
			shareArticleOnTwitter(details);
		}
		showTwitterFollowPrompt();
	}
	else {
		if (do_share){
			shareArticleOnFB(details);
		}
		showFBLikePrompt();
		return true;
		showEmailPrompt(function(){
		  showFBLikePrompt();
		});
	}
}

var email_subscribe_dlg = new DialogWrapper();
function showEmailSubscribePrompt(){
  var tzo = new Date().getTimezoneOffset()*60;
  var content = "<div style='margin-bottom:15px'>\n<center>\n<div style='margin-bottom:5px;color:#999999;'>Join the fun! Get our <b>free<\/b> daily digest:<\/div>\n\n<a href=\"mailto:subscribe@sfglobe.com?subject=Yes%2C%20I%20want%20the%20SF%20Globe%20daily%20digest%21&body=%0D%0ABy%20sending%20this%20email%2C%20you%20will%20be%20automatically%20subscribed%20to%20SF%20Globe%27s%20free%20daily%20digest.%20SF%20Globe%20is%20your%20best%20source%20of%20interesting%20stories%20and%20videos%20from%20around%20the%20web.%0D%0A%0D%0A%20Please%20note%20by%20doing%20so%2C%20you%20are%20agreeing%20to%20our%20privacy%20policy%20%28read%20here%3A%20http%3A%2F%2Fsfglobe.com%2Fprivacy.php%29.%20You%20can%20also%20unsubscribe%20at%20anytime.%20\"><input type='button' onclick='trackEmailSubscribe();' class='btn_subscribe_digest' value=\"One-Click Subscribe\" \/><\/a>\n\n<\/center> \n<\/div>".replace("mailto:subscribe@sfglobe.com","mailto:subscribe+"+tzo+"@sfglobe.com");
	email_subscribe_dlg.showMessage("Want more stories like this?",content,"Nevermind");
}

function showEmailSubscribePrompt_Web(){
  var tzo = new Date().getTimezoneOffset()*60;
  var content = "<div style='margin-bottom:15px'>\n<center>\n<div style='margin-bottom:5px;color:#999999;'>Join the fun! Get our <b>free<\/b> daily digest:<\/div>\n\n<a href=\"mailto:subscribe@sfglobe.com?subject=Yes, I want the SF Globe Digest!&body=%0D%0ABy%20sending%20this%20email%2C%20you%20will%20be%20automatically%20subscribed%20to%20SF%20Globe%27s%20free%20daily%20digest.%20SF%20Globe%20is%20your%20best%20source%20of%20interesting%20stories%20and%20videos%20from%20around%20the%20web.%0D%0A%0D%0A%20Please%20note%20by%20doing%20so%2C%20you%20are%20agreeing%20to%20our%20privacy%20policy%20%28read%20here%3A%20http%3A%2F%2Fsfglobe.com%2Fprivacy.php%29.%20You%20can%20also%20unsubscribe%20at%20anytime.%20\"><input type='button' onclick=\"trackEmailSubscribe_Web();\" class='btn_subscribe_digest' value=\"One-Click Subscribe\" \/><\/a>\n\n<\/center> \n<\/div>".replace("mailto:subscribe@sfglobe.com","mailto:subscribe+"+tzo+"@sfglobe.com");
	email_subscribe_dlg.showMessage("Want more stories like this?",content,"Nevermind");
}

function showEmailSubscribePrompt_AfterLike(){
  var tzo = new Date().getTimezoneOffset()*60;
  var content = "<div style='margin-bottom:15px'>\n<center>\n<div style='margin-bottom:5px;color:#999999;'>Join the fun! Get our <b>free<\/b> daily digest:<\/div>\n\n<a href=\"mailto:subscribe@sfglobe.com?subject=Yes, I want this! &body=%0D%0ABy%20sending%20this%20email%2C%20you%20will%20be%20automatically%20subscribed%20to%20SF%20Globe%27s%20free%20daily%20digest.%20SF%20Globe%20is%20your%20best%20source%20of%20interesting%20stories%20and%20videos%20from%20around%20the%20web.%0D%0A%0D%0A%20Please%20note%20by%20doing%20so%2C%20you%20are%20agreeing%20to%20our%20privacy%20policy%20%28read%20here%3A%20http%3A%2F%2Fsfglobe.com%2Fprivacy.php%29.%20You%20can%20also%20unsubscribe%20at%20anytime.%20\"><input type='button' onclick=\"trackEmailSubscribe_AfterLike();\" class='btn_subscribe_digest' value=\"One-Click Subscribe\" \/><\/a>\n\n<\/center> \n<\/div>".replace("mailto:subscribe@sfglobe.com","mailto:subscribe+"+tzo+"@sfglobe.com");
	email_subscribe_dlg.showMessage("Want more stories like this?",content,"Nevermind");
}

function trackEmailSubscribe() {
  var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":'track_email_subscribe'};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
	email_subscribe_dlg.hide();
}

function trackEmailSubscribe_Web() {
  var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":'track_email_subscribe_web'};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
	email_subscribe_dlg.hide();
}

function trackEmailSubscribe_AfterLike() {
  var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":'track_email_subscribe_afterlike'};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
	email_subscribe_dlg.hide();
}

function showSharePrompt_Web(details, do_share){
  if (do_share) {
    hasShared = true;
  }
	var user_source = "seed";
	if (user_source.search("twt_")!=-1) {
		if (do_share){
			shareArticleOnTwitter(details);
		}
		showTwitterFollowPrompt();
	}
	else {
		if (do_share){
			shareArticleOnFB(details);
		}
		showEmailSubscribePrompt_Web();
	}
}


function showSharePrompt_Mobile(details, do_share){
  if (do_share) {
    hasShared = true;
  }
	var user_source = "seed";
	if (user_source.search("twt_")!=-1) {
		if (do_share){
			shareArticleOnTwitter(details);
		}
		showTwitterFollowPrompt();
	}
	else {
		if (do_share){
			shareArticleOnFB(details);
		}
		showEmailSubscribePrompt();
	}
}

function showEmailPrompt(callback) {
	if (callback) {
	  callback();
	}
}

function showFBLikePrompt(){
	var show_dialog = "0";
	
	if (show_dialog == 0 && show_fb_like_prompt){
		//end_video_dlg.showChoice("Want more stories like this?","<div style='background:#f7f7f7; padding:10px;'>\n\n\n<div style='font-size:16px;margin-bottom:5px;font-weight:normal;'>Like us on Facebook to get more!<\/div>\n\n<div id='popup_fblike_button' class=\"fb-like\" data-href=\"http:\/\/www.facebook.com\/thesfglobe\" data-layout=\"button_count\" data-action=\"like\" data-show-faces=\"false\" data-share=\"false\"><\/div>\n\t\t\n\t\t\n<\/div>","Close","Opt-out, I already liked!");
		end_video_dlg.showMessage("Want more stories like this?","<div style='background:#f7f7f7; padding:10px;'>\n\n\n<div style='font-size:16px;margin-bottom:5px;font-weight:normal;'>Like us on Facebook to get more!<\/div>\n\n<div id='popup_fblike_button' class=\"fb-like\" data-href=\"http:\/\/www.facebook.com\/thesfglobe\" data-layout=\"button_count\" data-action=\"like\" data-show-faces=\"false\" data-share=\"false\"><\/div>\n\t\t\n\t\t\n<\/div>","Close");
		end_video_dlg.oncancel = function(){
			// never show
			//trackFBLike(-1);
		}
		FB.XFBML.parse();
	}
	else {
		
	}
	//end_video_dlg.dom.dialog_button_ok.className = 'kfm_button_ignore';
	
	
	
}


</script><script type="text/javascript">


function jsUpdateSize(){
    // Get the dimensions of the viewport
    var width = window.innerWidth ||
                document.documentElement.clientWidth ||
                document.body.clientWidth;
    var height = window.innerHeight ||
                 document.documentElement.clientHeight ||
                 document.body.clientHeight;

    //document.getElementById('jsWidth').innerHTML = width;  // Display the width
    //document.getElementById('jsHeight').innerHTML = height;// Display the height
    
    if (width <= 800){
    	//alert('hi');
    	
    	updatePageSmall();
    }
    else if (width > 800){
    	updatePageBig();
    }
    
};

function updatePageSmall(){
	if (document.getElementById('additional_xpromo')){
		if (document.getElementById('trending_stories_td')){
			document.getElementById('additional_xpromo').innerHTML = document.getElementById('trending_stories_td').innerHTML;
			document.getElementById('additional_xpromo').style.display = 'block';
		}
	}
	
	if (document.getElementById('trending_stories_td')){
		document.getElementById('trending_stories_td').style.display = 'none';
	}

	if (document.getElementById('spacebar_left_td')){
		document.getElementById('spacebar_left_td').style.width = '2%';
	}
	if (document.getElementById('spacebar_right_td')){
		document.getElementById('spacebar_right_td').style.width = '1%';
	}
}

function updatePageBig(){
	if (document.getElementById('additional_xpromo')){
		document.getElementById('additional_xpromo').style.display = 'none';	
	}
	if (document.getElementById('trending_stories_td')){
		document.getElementById('trending_stories_td').style.display = 'block';
	}

	if (document.getElementById('spacebar_left_td')){
		document.getElementById('spacebar_left_td').style.width = '10%';
	}
	if (document.getElementById('spacebar_right_td')){
		document.getElementById('spacebar_right_td').style.width = '10%';
	}
}


var is_mobile = "";
var cohort = Math.round(Math.random())+6;
var tracking = false;
function trackEvent(event) {
  if (!is_mobile && tracking) {
    var ajax = new Ajax();
  	ajax.responseType = Ajax.JSON;
  	var params = {"action":event,"cohort":cohort};
  	ajax.post("http://sfglobe.com/ajax/action_track.php", params);
  }
}





//trackEvent('pageload');
var cid = 0;
function shareArticleOnFB(details) {
	
	/*
  var article = Articles.get(details.article_id);
  if(article) {
    shareonFB(article.headline,article.blurb,article.url, details.article_id, details.tag);
  }
  */
  if (tracking) {
    trackEvent('sharefb_prompt');
  }
  var is_mobile = "";
  
  if(tracking) {
	    FB.ui({
	      'method':'feed',
	      'link':details.og_url
	    },function(response) {
	      //check response
	      if (response && response.post_id) {
	        //alert(response.post_id);
          trackEvent('sharefb_confirm');
	      }
	      else {
	        // did not post
          trackEvent('sharefb_cancel');
	      }
	    });

  }
  else {
  	var width  = 575;
    var height = 400;
    var left   = (window.innerWidth   - width)  / 2;
    var top    = (window.innerHeight - height) / 2;
    var options   = 'status=1' +
                   ',width='  + width  +
                   ',height=' + height +
                   ',top='    + top    +
                   ',left='   + left;  
    window.open(details.fb_url, '_blank',options);
  }
  
  var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"share_fb","article_id":details.article_id, "tag":details.tag, "cohort":0, "cid":0};
	//var params = {"action":"share_fb","article_id":details.article_id, "tag":details.tag, "cohort":0};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
	
	
}

function shareOnReddit(details){
  	var width  = 600;
    var height = 500;
    var left   = (window.innerWidth   - width)  / 2;
    var top    = (window.innerHeight - height) / 2;
    var options   = 'status=1' +
                   ',width='  + width  +
                   ',height=' + height +
                   ',top='    + top    +
                   ',left='   + left;  
    var share_url = 'http://sfglobe.com/?id='+details.article_id+'&src='+details.tag+'_'+details.article_id;
    
    var reddit_url = 'http://www.reddit.com/submit?url='+ encodeURIComponent(share_url);
    
    window.open(reddit_url, '_blank',options);
}


function shareQuizOnFB(details) {
  window.open(details.fb_url, '_blank');
  var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"share_fb","article_id":details.article_id, "tag":details.tag};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
}

function showOverlayLinks(){
	if (document.getElementById('overlay_links')){
		document.getElementById('overlay_links').style.display = 'block';
	}
}

function hideOverlayLinks(){
	if (document.getElementById('overlay_links')){
		document.getElementById('overlay_links').style.display = 'none';
	}	
}


function shareArticleOnTwitter(details){
	var width  = 575;
  var height = 400;
  var left   = (window.innerWidth   - width)  / 2;
  var top    = (window.innerHeight - height) / 2;
  var options   = 'status=1' +
                 ',width='  + width  +
                 ',height=' + height +
                 ',top='    + top    +
                 ',left='   + left;
	window.open(details.twitter_url,'twitter',options);
	
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"share_twitter","article_id":details.article_id, "tag":details.tag};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
}

function shareonFB(article_name, article_caption, article_url, article_id, tag){
	
	if (is_mobile == ''){
		var shareurl = article_url+"&src=share_fb_"+article_id;
	}
	else {
		var shareurl = article_url+"&src=m_share_fb_"+article_id;
	}
	
	FB.ui({
	  method: 'feed',
	  link: shareurl,
	  name: article_name
	  
	}, function(response){
		
		
	});
		
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"share_fb","article_id":article_id,"tag":tag};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
}

function postArticle(){
		
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	var params = {"action":"track_submit_story_click"};
	ajax.post("http://sfglobe.com/ajax/action.php", params);	
	
	if (Account.state){
		var dlg = new DialogWrapper();
		dlg.showMessage("Submit a Story","<div style='background:#f7f7f7; padding:10px;'>\n\nPlease send any links (video, image, etc) and images to\n<a href='mailto:hello@sfglobe.com'>hello@sfglobe.com<\/a>. \n<br \/><br \/>\nBe sure to make it clear who the original copyright holder is to all materials, so we can properly cite credits. Thank you.\n<br \/><br \/>\n\n\n<\/div>","Okay");
	}
	else {
		Account.promptSignup();
	}
}

function unSubscribeEmail(){
	if (document.getElementById('unsubscribe_email')){
		var email = document.getElementById('unsubscribe_email').value;
		var ajax = new Ajax();
		ajax.responseType = Ajax.JSON;
		ajax.ondone = function(data) {
			if (document.getElementById('unsubscribe_message')){
				document.getElementById('unsubscribe_message').innerHTML = "<b>"+"You are now unsubscribed!"+"</b>";
				document.getElementById('unsubscribe_message').className = 'errortext';
			}
		}	
		var params = {"action":"unsubscribe_email","email":email};
		ajax.post("http://sfglobe.com/ajax/action.php", params);
	}
}


function subscribeEmail(){
	var email = document.getElementById('subscribe_email_address').value;
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	ajax.ondone = function(data) {
		if (data){
			if (data.success){
				//document.getElementById('email_subscribe_box').style.display = 'none';
			}
			
			if (data.message && data.message_title){
				if (data.success){
					document.getElementById('subscribe_message').innerHTML = "<b>"+data.message_title+"</b>"+" "+data.message;
					document.getElementById('subscribe_message').className = 'errortext';
				}
				else {
					document.getElementById('subscribe_message').innerHTML = "<b>"+data.message_title+"</b>"+" "+data.message;
					document.getElementById('subscribe_message').className = 'errortext';
				}
				
			}
			
		}
		else {
			document.getElementById('subscribe_message').innerHTML = "Invalid Email. Refresh page to try again.";
			document.getElementById('subscribe_message').className = 'errortext';
		}
	}
	
	var params = {"action":"subscribe_email","email":email};
	ajax.post("http://sfglobe.com/ajax/action.php", params);
}

function xpromo_link_tracker(url,article_id, tag,iteration){
	var params = {"action":"xpromo_link_tracker","article_id":article_id, "tag":tag,"current_id":"0","iteration":iteration};
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	ajax.ondone = function(){
		navigate_wrapper('/?id='+article_id);
	}
	ajax.post("http://sfglobe.com/ajax/action.php", params);	
}

var component_clicked = false;
function component_tracker(url,article_id, tag,cid){
  if (component_clicked) {
    return false;
  }
  component_clicked = true;
	var params = {"action":"component_tracker","article_id":article_id, "tag":tag,"current_id":"0","cid":cid};
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	ajax.ondone = function(){
		navigate_wrapper('/?id='+article_id+'&cid='+cid);
	}
	ajax.post("http://sfglobe.com/ajax/action.php", params);	
}

function nextpromo_link_tracker(url,article_id, tag){
	var params = {"action":"nextpromo_link_tracker","article_id":article_id, "tag":tag};
	var ajax = new Ajax();
	ajax.responseType = Ajax.JSON;
	ajax.ondone = function(){
		navigate_wrapper(url);
	}
	ajax.post("http://sfglobe.com/ajax/action.php", params);	
}


function navigate_wrapper(target) {
  if(typeof top!='undefined') {
    top.location = target;
  }
  else if (document.setLocation) {
    document.setLocation(target);
  }
}

var fb_page_like_callback = function(url, html_element) {
  hideAllFBLikes();
  trackFBLike(1);
  showEmailSubscribePrompt_AfterLike();
  hideElement('mobile_ad_unit');
	if (end_video_dlg){
		end_video_dlg.hide();
	}
}


var fb_page_unlike_callback = function(url, html_element) {
  trackFBLike(0);
}

function listenForLike() {
	FB.Event.subscribe('edge.create', fb_page_like_callback);
	FB.Event.subscribe('edge.remove', fb_page_unlike_callback);
}

if(window.addEventListener){
    window.addEventListener('load',listenForLike,false); //W3C
}
else{
    window.attachEvent('onload',listenForLike); //IE
}

//FBWrapper.onReady(function() {
//});


function removeAds(){
	//alert('remove ads');	
	var dlg = new DialogWrapper();
	dlg.showMessage("Remove Ads","To remove ads, you must like our Facebook page! Once this dialog closes, click the FB like button at the bottom bar of the page where the bouncing arrow is at.","Okay!");
}



DialogWrapper.CANCEL_ON_OUTSIDE = false;
</script><script type="text/javascript">
Account = {
  state: false,
  state_change_listeners:[],
  setState: function(state) {
    Account.state = state;
    for(var i = 0 ; i < Account.state_change_listeners.length ; i++) {
      var listener = Account.state_change_listeners[i];
      setTimeout(listener,0);
    }
  },
  addOnStateChangeListener: function(listener) {
    if(Account.state_change_listeners.indexOf(listener)==-1) {
      Account.state_change_listeners[Account.state_change_listeners.length] = listener;
    }
  },
  removeOnStateChangeListener: function(listener) {
    var idx = Account.state_change_listeners.indexOf(listener);
    if(idx >= 0) {
      Account.state_change_listeners.splice(idx,1);
    }
  },
  promptLogin: function(callback) {
    var content = '<div id=login_prompt></div>';
    var dlg = new DialogWrapper().showChoice(Translations.translate("Login"),content);
    Utils.addClass(dlg.dom.dialog,"login");
    var container = document.getElementById('login_prompt');
    
    var frm = document.createElement('form');
    frm.method = 'POST';
    container.appendChild(frm);
    
    var emailRow = document.createElement('div');
    frm.appendChild(emailRow);
    //emailRow.appendChild(document.createTextNode(Translations.translate("Email")));
    //emailRow.appendChild(document.createElement('br'));
    
    var emailInput = document.createElement('input');
    emailInput.type = 'email';
    emailInput.placeholder = Translations.translate("Email");
    emailInput.className = 'login email';
    emailRow.appendChild(emailInput);
    if(!((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null)))) {
      emailInput.focus();
    }
    
    var passwordRow = document.createElement('div');
    frm.appendChild(passwordRow);
    //passwordRow.appendChild(document.createTextNode(Translations.translate("Password")));
    //passwordRow.appendChild(document.createElement('br'));
    
    var passwordInput = document.createElement('input');
    passwordInput.type = 'password';
    passwordInput.placeholder = Translations.translate("Password");
    passwordInput.className = 'login password';
    passwordRow.appendChild(passwordInput);
    
    var forgotPasswordRow = document.createElement('div');
    frm.appendChild(forgotPasswordRow);
    
    var forgotPasswordLink = document.createElement('a');
    forgotPasswordLink.className = 'login forgotpassword';
    forgotPasswordLink.href = '#';
    forgotPasswordLink.appendChild(document.createTextNode(Translations.translate("Forgot Password?")));
    forgotPasswordLink.onclick = function() {
      dlg.hide();
      Account.promptForgotPassword(callback);
      return false;
    }
    forgotPasswordRow.appendChild(forgotPasswordLink);
    
    var errorRow = document.createElement('div');
    errorRow.className = 'login error';
    errorRow.style.display = 'none';
    frm.appendChild(errorRow);
    
    
    var cancelButton = document.createElement('a');
    cancelButton.href = "#";
    cancelButton.className = 'login close';
    cancelButton.onclick = function() {
      dlg.hide();
      if(typeof callback == 'function') {
        callback(Account.state);
      }
      return false;
    }
    cancelButton.innerHTML = "&times;";
    frm.appendChild(cancelButton);
    
    var submitButton = document.createElement('input');
    submitButton.type = 'submit';
    submitButton.className = 'login submit';
    submitButton.value = Translations.translate("Login");
    frm.appendChild(submitButton);
    
    frm.appendChild(document.createElement('br'));
    var signup = document.createElement('a');
    signup.className = 'login signup';
    signup.href = '#';
    signup.onclick = function() {
      dlg.hide();
      Account.promptSignup(callback);
      return false;
    }
    signup.appendChild(document.createTextNode(Translations.translate("New User?  Sign Up!")));
    frm.appendChild(signup);
    
    frm.onsubmit = function() {
      errorRow.style.display = 'none';
      submitButton.disabled = true;
      Account.login(emailInput.value,passwordInput.value,function(response) {
        if(response && response.account) {
          dlg.hide();
          if(typeof callback == 'function') {
            callback(Account.state);
          }
        }
        else {
          var msg = Translations.translate("Error logging in.  Please check that your email and password are entered correctly.")
          if(response && response.error) {
            msg = response.error;
          }
          errorRow.innerHTML = '';
          errorRow.appendChild(document.createTextNode(msg));
          errorRow.style.display = '';
          submitButton.disabled = false;
        }
      });
      return false;
    }
    
    dlg.dom.dialog_buttons.style.display = 'none';
  },
  promptSignup: function(callback,src) {
    var content = '<div id=signup_prompt></div>';
    var dlg = new DialogWrapper();
    dlg.showChoice(Translations.translate("You need an account to do this. Sign up")+"!",content);
    Utils.addClass(dlg.dom.dialog,"signup");
    var container = document.getElementById('signup_prompt');
    
    var frm = document.createElement('form');
    frm.method = 'POST';
    container.appendChild(frm);
    
    if(false) {
      
      var fbRow = document.createElement('div');
      fbRow.className = 'btn_share btn_fb';
      var fbIcon = document.createElement('img');
      fbIcon.src = AppConfig.HOMEURL+'/img/icon_fb.png';
      fbIcon.width = 16;
      fbIcon.style.marginRight = '4px';
      fbRow.appendChild(fbIcon);
      fbRow.appendChild(document.createTextNode(Translations.translate('Facebook')));
      fbRow.style.marginBottom = '10px';
      
      var prefill = function() {
        var uidString = "me()";
        FB.api("/fql",{
          q:"select uid,email,first_name,last_name,sex from user where uid="+uidString
        },function(fqlResponse) {
          if(fqlResponse && fqlResponse.data && fqlResponse.data.length > 0) {
            var row = fqlResponse.data[0];
            if(row.first_name) {
              firstNameInput.value = row.first_name;
            }
            if(row.last_name) {
              lastNameInput.value = row.last_name;
            }
            if(row.email) {
              emailInput.value = row.email;
              fbRow.style.display = 'none';
              hr.style.display = 'none';
              passwordInput.focus();
            }
            if(row.sex) {
            }
            emailSignupLink.onclick();
          }
        });
      }
      
      fbRow.onclick = function() {
        //FBWrapper.onReady(function() {
        new Ajax().post(AppConfig.HOMEURL+"/ajax/action.php",{action:'fbsignup'});
        FB.login(function(lResponse) {
            if(lResponse && lResponse.authResponse) {
              new Ajax().post(AppConfig.HOMEURL+"/ajax/action.php",{action:'fbauth'});
              prefill();
            }
        },{scope:'email'});
          
        //});
      }
      frm.appendChild(fbRow);
      var hr = document.createElement('div');
      hr.style.borderBottom = '1px solid #cccccc';
      hr.style.marginBottom = '10px';
      frm.appendChild(hr);
    }
    
    
    var emailSignup = document.createElement('div');
    var emailSignupLink = document.createElement('a');
    //emailSignup.appendChild(emailSignupLink);
    emailSignupLink.href = '#';
    emailSignupLink.onclick = function() {
      emailCollapse.style.display = '';
      emailSignup.style.display = 'none';
      if(!((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null)))) {
        if(firstNameInput.value.length == 0) {
          firstNameInput.focus();
        }
        else if (lastNameInput.value.length == 0) {
          lastNameInput.focus();
        }
        else if (emailInput.value.length == 0) {
          emailInput.focus();
        }
        else if (passwordInput.value.length == 0) {
          passwordInput.focus();
        }
      }
      return false;
    }
    emailSignupLink.appendChild(document.createTextNode('Signup with Email'));
    frm.appendChild(emailSignup);
    
    var emailCollapse = document.createElement('span');
    //emailCollapse.style.display = 'none';
    frm.appendChild(emailCollapse);
    
    var firstNameRow = document.createElement('div');
    emailCollapse.appendChild(firstNameRow);
    //firstNameRow.appendChild(document.createTextNode(Translations.translate("First Name")));
    //firstNameRow.appendChild(document.createElement('br'));
    
    var firstNameInput = document.createElement('input');
    firstNameInput.className = 'signup first_name';
    firstNameInput.placeholder = Translations.translate("First Name");
    firstNameRow.appendChild(firstNameInput);
    if(!((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null)))) {
      firstNameInput.focus();
    }
    
    var lastNameRow = document.createElement('div');
    emailCollapse.appendChild(lastNameRow);
    //lastNameRow.appendChild(document.createTextNode(Translations.translate("Last Name")));
    //lastNameRow.appendChild(document.createElement('br'));
    
    var lastNameInput = document.createElement('input');
    lastNameInput.className = 'signup last_name';
    lastNameInput.placeholder = Translations.translate("Last Name");
    lastNameRow.appendChild(lastNameInput);
    
    
    var emailRow = document.createElement('div');
    emailCollapse.appendChild(emailRow);
    //emailRow.appendChild(document.createTextNode(Translations.translate("Email")));
    //emailRow.appendChild(document.createElement('br'));
    
    var emailInput = document.createElement('input');
    emailInput.type = 'email';
    emailInput.className = 'signup email';
    emailInput.placeholder = Translations.translate("Email");
    emailRow.appendChild(emailInput);
    
    var genderRow = document.createElement('div');
    emailCollapse.appendChild(genderRow);
    genderRow.appendChild(document.createTextNode(Translations.translate("Gender")));
    genderRow.appendChild(document.createElement('br'));
    genderRow.style.display = 'none';
    
    
    var maleInput = document.createElement('input');
    maleInput.type = 'radio';
    maleInput.value = 'male';
    genderRow.appendChild(document.createTextNode(Translations.translate('Male')));
    genderRow.appendChild(maleInput);
    
    var femaleInput = document.createElement('input');
    femaleInput.type = 'radio';
    femaleInput.value = 'female';
    genderRow.appendChild(document.createTextNode(Translations.translate('Female')));
    genderRow.appendChild(femaleInput);
    
    
    var passwordRow = document.createElement('div');
    emailCollapse.appendChild(passwordRow);
    //passwordRow.appendChild(document.createTextNode(Translations.translate("Password")));
    //passwordRow.appendChild(document.createElement('br'));
    
    var passwordInput = document.createElement('input');
    passwordInput.type = 'password';
    passwordInput.className = 'signup password';
    passwordInput.placeholder = Translations.translate("Password");
    passwordRow.appendChild(passwordInput);
    
    var errorRow = document.createElement('div');
    errorRow.className = 'login error';
    errorRow.style.display = 'none';
    emailCollapse.appendChild(errorRow);
    
    var submitButton = document.createElement('input');
    submitButton.type = 'submit';
    submitButton.className = 'signup submit';
    submitButton.value = Translations.translate("Sign Up");
    emailCollapse.appendChild(submitButton);
    
    var cancelButton = document.createElement('a');
    cancelButton.href = "#";
    cancelButton.className = 'signup close';
    cancelButton.onclick = function() {
      dlg.hide();
      if(typeof callback == 'function') {
        callback(Account.state);
      }
      return false;
    }
    cancelButton.innerHTML = "&times;";
    frm.appendChild(cancelButton);
    
    frm.appendChild(document.createElement('br'));
    
    var login = document.createElement('a');
    login.href = '#';
    login.onclick = function() {
      dlg.hide();
      Account.promptLogin(callback);
      return false;
    }
    login.appendChild(document.createTextNode(Translations.translate("Already have an account?  Login!")));
    frm.appendChild(login);
    
    frm.onsubmit = function() {
      errorRow.style.display = 'none';
      submitButton.disabled = true;
      var extras = {};
      extras.first_name = firstNameInput.value;
      extras.last_name = lastNameInput.value;
      var gender = maleInput.checked ? maleInput.value : (femaleInput.checked ? femaleInput.value : false);
      if(gender) {
        extras.gender = gender;
      }
      Account.signup(emailInput.value,passwordInput.value,extras,function(response) {
        if(response && response.account) {
          dlg.hide();
          if(typeof callback == 'function') {
            callback(Account.state);
          }
        }
        else {
          var msg = Translations.translate("Error creating account.");
          if(response && response.error) {
            msg = response.error;
          }
          errorRow.innerHTML = '';
          errorRow.appendChild(document.createTextNode(msg));
          errorRow.style.display = '';
          submitButton.disabled = false;
        }
      });
      return false;
    }
    
    dlg.dom.dialog_buttons.style.display = 'none';
    if(src) {
      new Ajax().post(AppConfig.HOMEURL+"/ajax/action.php",{action:'promptSignup',from:src});
    }
  },
  promptForgotPassword: function(callback) {
    var content = '<div id=forgot_password_prompt></div>';
    var dlg = new DialogWrapper().showChoice(Translations.translate("Reset Password"),content);
    Utils.addClass(dlg.dom.dialog,"forgot_password");
    var container = document.getElementById('forgot_password_prompt');
    
    var frm = document.createElement('form');
    frm.method = 'POST';
    container.appendChild(frm);
    
    var emailRow = document.createElement('div');
    frm.appendChild(emailRow);
    //emailRow.appendChild(document.createTextNode(Translations.translate("Email")));
    //emailRow.appendChild(document.createElement('br'));
    
    var emailInput = document.createElement('input');
    emailInput.className = 'forgot_password email';
    emailInput.type = 'email';
    emailInput.placeholder = Translations.translate('Email');
    emailRow.appendChild(emailInput);
    if(!((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null)))) {
      emailInput.focus();
    }
    
    
    var errorRow = document.createElement('div');
    errorRow.className = 'login error';
    errorRow.style.display = 'none';
    frm.appendChild(errorRow);
    
    var submitButton = document.createElement('input');
    submitButton.className = 'forgot_password submit';
    submitButton.type = 'submit';
    submitButton.value = Translations.translate("Send Email");
    frm.appendChild(submitButton);
    
    var cancelButton = document.createElement('a');
    cancelButton.href = "#";
    cancelButton.onclick = function() {
      dlg.hide();
      Account.promptLogin(callback);
      return false;
    }
    cancelButton.innerHTML = "&times;";
    cancelButton.className = 'forgot_password close';
    frm.appendChild(cancelButton);
    
    frm.onsubmit = function() {
      errorRow.style.display = 'none';
      submitButton.disabled = true;
      Account.sendPasswordReset(emailInput.value,function(response) {
        if(response && response.success) {
          var dlg2 = new DialogWrapper().showMessage(Translations.translate("Email Sent!"),Translations.translate("Check your inbox for instructions on resetting your password."),Translations.translate("Ok"));
          dlg2.onconfirm = function() {
            dlg.hide();
            Account.promptLogin(callback);
          }
        }
        else {
          var msg = Translations.translate("Error");
          if(response && response.error) {
            msg = response.error;
          }
          errorRow.innerHTML = '';
          errorRow.appendChild(document.createTextNode(msg));
          errorRow.style.display = '';
          submitButton.disabled = false;
        }
      });
      return false;
    }
    
    dlg.dom.dialog_buttons.style.display = 'none';
  },
  requireLogin: function(callback) {
    if(Account.state) {
      setTimeout(function() {
        callback(Account.state);
      },0);
    }
    else {
      Account.promptLogin(callback);
    }
  },
  handleDomains: function(domains,email,password) {
    if(domains) {
      for(var i = 0 ; i < domains.length ; i++) {
        var domain = domains[i];
        var id = 'js_auth_'+domain;
        var script = document.createElement('script');
        script.src = 'https://'+domain+'/ajax/login.php'+'?email='+encodeURIComponent(email)+'&password='+encodeURIComponent(password)+'&js='+encodeURIComponent(id);
        script.async = true;
        script.id = id;
        document.body.appendChild(script);
      }
    }
  },
  login: function (email,password,callback) {
    var ajax = new Ajax();
    ajax.responseType = Ajax.JSON;
    ajax.ondone = function(response) {
      if(response && response.account) {
        Account.setState(response.account);
        if(response.domains) {
          Account.handleDomains(response.domains,email,password);
        }
      }
      if(typeof callback == 'function') {
        callback(response);
      }
    }
    ajax.post(AppConfig.HOMEURL.replace(/^http\:\/\//,'http://')+"/ajax/login.php",{email:email,password:password,next:window.location.href});
  },
  logout: function() {
    window.location.href = AppConfig.HOMEURL+"/logout.php?next="+encodeURIComponent(window.location.href)+"&"+Math.random();
  },
  signup: function(email,password,params,callback) {
    if(!params) {
      params = {};
    }
    params.email = email;
    params.password = password;
    params.next = window.location.href;
    var ajax = new Ajax();
    ajax.responseType = Ajax.JSON;
    ajax.ondone = function(response) {
      if(response && response.account) {
        Account.setState(response.account);
        if(response.domains) {
          Account.handleDomains(response.domains,email,password);
        }
      }
      if(typeof callback == 'function') {
        callback(response);
      }
    }
    ajax.post(AppConfig.HOMEURL.replace(/^http\:\/\//,'http://')+"/ajax/signup.php",params);
  },
  sendPasswordReset: function(email,callback) {
    var ajax = new Ajax();
    ajax.responseType = Ajax.JSON;
    ajax.ondone = function(response) {
      if(typeof callback == 'function') {
        callback(response);
      }
    }
    ajax.post(AppConfig.HOMEURL+"/ajax/reset_password.php",{email:email});
  },
  sendConfirmationEmail: function() {
    if(Account.state && !Account.state.confirmed) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response && response.success) {
          var dlg = new DialogWrapper().showMessage(Translations.translate('Confirmation Sent!'),Translations.translate('Check your email inbox for instructions on confirming your account.'),Translations.translate('Ok'));
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/send_confirmation_email.php");
    }
  }
}

Comments = {
  HIDE_THRESHOLD: -1,
  votes: {},
  highlightedComment: false,
  setVotes: function(votes) {
    if(typeof votes == 'object') {
      for(var comment_id in votes) {
        Comments.votes[comment_id] = votes[comment_id];
      }
    }
  },
  getVote: function(comment) {
    if(Comments.votes[comment.id]) {
      return Comments.votes[comment.id];
    }
    return 0;
  },
  getAddCommentDom: function(object_id,reply_to,callback) {
    var div = document.createElement('div');
    div.className = 'add_comment';
    if(reply_to) {
      Utils.addClass(div,'reply');
    }
    
    var text_holder = document.createElement('div');
    text_holder.className = 'textarea_holder';
    div.appendChild(text_holder);
    
    var text = document.createElement('textarea');
    text.placeholder = "Write your comment here.";
    text_holder.appendChild(text);
    div.inputElement = text;
    
    var button = document.createElement('input');
    button.type = 'button';
    button.value = Translations.translate('Comment');
    if(reply_to) {
      button.value = Translations.translate('Post');
    }
    div.appendChild(button);
    
    button.onclick = function() {
      if(!Account.state) {
        Account.promptSignup(false,'comment');
        return;
      }
      var content = Utils.trim(text.value);
      text.value = content;
      if(content.length > 0) {
        text.disabled = true;
        Comments.addComment(object_id,content,reply_to,function(response) {
          text.disabled = false;
          if(response && response.comment) {
            text.value = '';
          }
          if(typeof callback == 'function') {
            callback(response);
          }
        });
      }
    }
    return div;
  },
  loadComments: function(object_id,comments,container) {
    
    var commentHolder = document.createElement('span');
    
    container.appendChild(Comments.getAddCommentDom(object_id,false,function(response) {
      if(response && response.comment) {
        if(commentHolder.firstChild) {
          commentHolder.insertBefore(Comments.getCommentDom(response.comment),commentHolder.firstChild);
        }
        else {
          commentHolder.appendChild(Comments.getCommentDom(response.comment));
        }
      }
    }));
    
    var commentDoms = {};
    for(var i = 0 ; i < comments.length ; i++) {
      var comment = comments[i];
      var cDom = Comments.getCommentDom(comment);
      commentDoms[comment.id] = cDom;
      if(comment.reply_to && commentDoms[comment.reply_to] && commentDoms[comment.reply_to].replies) {
        commentDoms[comment.reply_to].replies.appendChild(cDom);
      }
      else {
        commentHolder.appendChild(cDom);
      }
    }
    
    container.appendChild(commentHolder);
    
    Account.addOnStateChangeListener(function() {
      if(Account.state) {
        Comments.loadVotes(object_id,function(response) {
          for(var i = 0 ; i < commentHolder.childNodes.length ; i++) {
            var node = commentHolder.childNodes[i];
            if(node && node.updateComment) {
              node.updateComment();
            }
          }
        });
      }
    });
  },
  getCommentDom: function(comment) {
    var div = document.createElement('div');
    div.className = 'comment';
    div.id = 'comment_'+comment.id;
    
    var anchor = document.createElement('a');
    anchor.className = 'anchor';
    anchor.name = 'c'+comment.id;
    div.appendChild(anchor);
    
    var contentdiv = div;
    for(var i = 0 ; i < comment.indent ; i++) {
      break;
      var ind = document.createElement('div');
      ind.className = 'indent';
      contentdiv.appendChild(ind);
      contentdiv = ind;
    }
    
    Utils.addClass(contentdiv,'comment_inner');
    
    var actualcontent = document.createElement('span');
    contentdiv.appendChild(actualcontent);
    
    var author = document.createElement('span');
    author.className = 'author';
    author.appendChild(document.createTextNode(comment.author ? comment.author.name : Translations.translate('Anonymous')));
    actualcontent.appendChild(author);
    
    
    var vote_options = document.createElement('span');
    vote_options.className = 'vote_options';
    actualcontent.appendChild(vote_options);
    
    var vote = Comments.getVote(comment);
    
    var upvote = document.createElement('span');
    upvote.className = 'upvote';
    upvote.innerHTML = '';
    vote_options.appendChild(upvote);
    if(vote > 0) {
      Utils.addClass(upvote,'voted');
    }
    upvote.onclick = function() {
      Comments.vote(comment.id,Comments.getVote(comment) <= 0 ? 1 : 0,function(response) {
        if(response && response.success) {
          if(Comments.getVote(comment) > 0) {
            Utils.addClass(upvote,'voted');
          }
          else {
            Utils.removeClass(upvote,'voted');
          }
          if(Comments.getVote(comment) < 0) {
            Utils.addClass(downvote,'voted');
          }
          else {
            Utils.removeClass(downvote,'voted');
          }
        }
        if(response && response.comment) {
          updateScore(response.comment.vote_score);
        }
      });
    }
    
    var downvote = document.createElement('span');
    downvote.className = 'downvote';
    downvote.innerHTML = '';
    vote_options.appendChild(downvote);
    if(vote < 0) {
      Utils.addClass(downvote,'voted');
    }
    downvote.onclick = function() {
      Comments.vote(comment.id,Comments.getVote(comment) >= 0 ? -1 : 0,function(response) {
        if(response && response.success) {
          if(Comments.getVote(comment) > 0) {
            Utils.addClass(upvote,'voted');
          }
          else {
            Utils.removeClass(upvote,'voted');
          }
          if(Comments.getVote(comment) < 0) {
            Utils.addClass(downvote,'voted');
          }
          else {
            Utils.removeClass(downvote,'voted');
          }
        }
        if(response && response.comment) {
          updateScore(response.comment.vote_score);
        }
      });
    }
    
    
    var score = document.createElement('span');
    score.className = 'score';
    actualcontent.appendChild(score);
    
    
    var updateScore = function(vote_score) {
      score.innerHTML = '';
      score.appendChild(document.createTextNode(Translations.translate('%1',[vote_score])));
    }
    updateScore(comment.vote_score);
    
    var time = document.createElement('span');
    time.className = 'time';
    time.appendChild(document.createTextNode(Comments.formatUnixTime(comment.time)));
    actualcontent.appendChild(time);
    
    var hide = document.createElement('span');
    hide.className = 'content hidden_content';
    hide.appendChild(document.createTextNode(Translations.translate('Hidden due to downvotes.  Click to view.')));
    contentdiv.appendChild(hide);
    hide.onclick = function() {
      actualcontent.style.display = '';
      hide.style.display = 'none';
    }
    hide.style.display = 'none';
    
    var content = document.createElement('span');
    content.className = 'content';
    //content.innerHTML = Utils.nl2br(Utils.htmlentities(comment.content));
    content.appendChild(document.createTextNode(comment.content));
    actualcontent.appendChild(content);
    
    if(comment.vote_score <= Comments.HIDE_THRESHOLD && (!Account.state || Account.state.id != comment.author.id)) {
      actualcontent.style.display = 'none';
      hide.style.display = '';
    }
    
    var reply = document.createElement('span');
    reply.className = 'reply_to';
    reply.appendChild(document.createTextNode(Translations.translate('reply')));
    actualcontent.appendChild(reply);
    
    
    var liketext = document.createElement('span');
    liketext.onclick = upvote.onclick;
    liketext.className = 'reply_to';
    liketext.style.marginLeft = '10px';
    liketext.appendChild(document.createTextNode(Translations.translate('Like')));
    actualcontent.appendChild(liketext);
    
    var disliketext = document.createElement('span');
    disliketext.onclick = downvote.onclick;
    disliketext.className = 'reply_to';
    disliketext.style.marginLeft = '10px';
    disliketext.appendChild(document.createTextNode(Translations.translate('Dislike')));
    actualcontent.appendChild(disliketext);
    
    var replyHolder = document.createElement('div');
    replyHolder.className = 'replies';
    div.replies = replyHolder;
    actualcontent.appendChild(replyHolder);
    
    var replier = Comments.getAddCommentDom(comment.object,comment.id,function(response) {
      if(response && response.comment) {
        replier.style.display = 'none';
        if(div.parentNode) {
          if(div.nextSibling) {
            div.parentNode.insertBefore(Comments.getCommentDom(response.comment),div.nextSibling);
          }
          else {
            div.parentNode.appendChild(Comments.getCommentDom(response.comment));
          }
        }
      }
    });
    replier.style.display = 'none';
    
    reply.onclick = function() {
      replier.style.display = replier.style.display == 'none' ? '' : 'none';
      if(replier.style.display != 'none') {
        if(replier.inputElement && replier.inputElement.focus) {
          replier.inputElement.focus();
        }
      }
    }
    
    replyHolder.appendChild(replier);
    
    div.updateComment = function() {
      if(Comments.getVote(comment) > 0) {
        Utils.addClass(upvote,'voted');
      }
      else {
        Utils.removeClass(upvote,'voted');
      }
      if(Comments.getVote(comment) < 0) {
        Utils.addClass(downvote,'voted');
      }
      else {
        Utils.removeClass(downvote,'voted');
      }
    }
    
    return div;
  },
  formatUnixTime: function(time) {
    var d = new Date();
    
    var nowTime = d.getTime()/1000;
    var nowYear = d.getFullYear();
    var nowMonth = d.getMonth();
    var nowDay = d.getDay();
    
    d.setTime(time*1000);
    
    var elapsed = Math.max(0,nowTime-time);
    
    var units = [
      {unit:Translations.translate('%1 year ago'),units:Translations.translate('%1 years ago'),time:86400*365},
      {unit:Translations.translate('%1 month ago'),units:Translations.translate('%1 months ago'),time:86400*365/12},
      {unit:Translations.translate('%1 week ago'),units:Translations.translate('%1 weeks ago'),time:86400*365/52},
      {unit:Translations.translate('%1 day ago'),units:Translations.translate('%1 days ago'),time:86400},
      {unit:Translations.translate('%1 hour ago'),units:Translations.translate('%1 hours ago'),time:3600},
      {unit:Translations.translate('%1 minute ago'),units:Translations.translate('%1 minutes ago'),time:60}
    ];
    for(var i = 0 ; i < units.length ; i++) {
      var unit = units[i];
      if(unit) {
        var count = Math.floor(elapsed/unit.time);
        if(count > 0) {
          return Translations.map(count > 1 ? unit.units : unit.unit,[count]);
        }
      }
    }
    return Translations.translate('moments ago');
  },
  checkAnchor: function() {
    var hash = window.location.hash;
    var currentCommentId = false;
    if(hash) {
      var matches = hash.match(/^\#c([0-9]+)$/);
      if(matches && matches.length > 0) {
        currentCommentId = matches[1];
      }
    }
    if(!document.getElementById('comment_'+currentCommentId)) {
      currentCommentId = false;
    }
    if(Comments.highlightedComment != currentCommentId) {
      if(Comments.highlightedComment) {
        var comment = document.getElementById('comment_'+Comments.highlightedComment);
        if(comment) {
          Utils.removeClass(comment,'highlighted');
        }
      }
      Comments.highlightedComment = currentCommentId;
      if(Comments.highlightedComment) {
        var comment = document.getElementById('comment_'+Comments.highlightedComment);
        if(comment) {
          Utils.addClass(comment,'highlighted');
        }
      }
    }
  },
  upvote: function(comment_id,callback) {
    return Comments.vote(comment_id,1,callback);
  },
  downvote: function(comment_id,callback) {
    return Comments.vote(comment_id,-1,callback);
  },
  vote: function(comment_id,score,callback) {
    if(Account.state) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response && response.success) {
          var votes = {};
          votes[comment_id] = score;
          Comments.setVotes(votes);
        }
        if(typeof callback == 'function') {
          callback(response);
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/comment_vote.php",{vote:score,comment:comment_id});
    }
    else {
      Account.promptSignup(false,'vote');
      setTimeout(function() {
        callback(false);
      },0);
    }
  },
  addComment: function(object_id,content,reply_to,callback) {
    if(Account.state) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response && response.comment) {
          var votes = {};
          votes[response.comment.id] = 1;
          Comments.setVotes(votes);
        }
        if(typeof callback == 'function') {
          callback(response);
        }
      }
      var params = {object:object_id,content:content};
      if(reply_to) {
        params.reply_to = reply_to;
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/comment.php",params);
    }
    else {
      Account.promptSignup(false,'comment');
      setTimeout(function() {
        callback(false);
      },0);
    }
  },
  loadVotes: function(object_id,callback) {
    if(Account.state) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response && response.votes) {
          Comments.setVotes(response.votes);
        }
        if(typeof callback == 'function') {
          callback(response);
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/object_votes.php",{object:object_id});
    }
  }
}
setInterval(function() {
  Comments.checkAnchor();
},500);
Account.Notifications = {
  unviewed_count:0,
  view_time:0,
  notifications:[],
  collapseCache:{},
  load: function(callback) {
    var ajax = new Ajax();
    ajax.responseType = Ajax.JSON;
    ajax.ondone = function(response) {
      if(response && response.view_time) {
        Account.Notifications.view_time = response.view_time;
      }
      if(response && response.notifications) {
        Account.Notifications.process(response.notifications);
      }
      if(typeof callback == 'function') {
        callback(response);
      }
    }
    ajax.post(AppConfig.HOMEURL+"/ajax/notifications.php",{method:'get'});
  },
  viewAll: function(callback) {
    if(Account.Notifications.notifications.length > 0) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response) {
          Account.Notifications.unviewed_count = 0;
        }
        if(typeof callback == 'function') {
          callback(response);
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/notifications.php",{method:'view',last:Account.Notifications.notifications[0].id});
    }
    else {
      if(typeof callback == 'function') {
        callback(false);
      }
    }
  },
  readAll: function(callback) {
    if(Account.Notifications.notifications.length > 0) {
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response) {
          Account.Notifications.unviewed_count = 0;
        }
        if(typeof callback == 'function') {
          callback(response);
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/notifications.php",{method:'read',ids:'all'});
    }
    else {
      if(typeof callback == 'function') {
        callback(false);
      }
    }
  },
  process: function(notifications) {
    if(notifications) {
      Account.Notifications.collapseCache = {};
      var processed_notifications = [];
      var ucount = 0;
      for(var i = 0 ; i < notifications.length ; i++) {
        var notification = notifications[i];
        if(notification.time > Account.Notifications.view_time) {
          ucount++;
        }
        switch(notification.type) {
          case 'upvote':
            var cacheKey = 'upvote_'+notification.data.comment;
            var collapseNotification = Account.Notifications.collapseCache[cacheKey];
            var collapse = false;
            if(collapseNotification) {
              var elapsed = collapseNotification.time - notification.time;
              if(elapsed <= 86400) {
                collapse = true;
              }
            }
            if(collapse) {
              if(!collapseNotification.collapsed) {
                collapseNotification.collapsed = [];
              }
              collapseNotification.collapsed[collapseNotification.collapsed.length] = notification;
              if(!notification.read) {
                notification.collapseUnread = true;
              }
              break; //don't add to processed_notifications
            }
            else {
              Account.Notifications.collapseCache[cacheKey] = notification;
            }
          default:
            processed_notifications[processed_notifications.length] = notification;
        }
      }
      Account.Notifications.notifications = processed_notifications;
      Account.Notifications.unviewed_count = ucount;
    }
  },
  render: function(container) {
    container.innerHTML = '';
    
    var notifDoms = [];
    
    var toolbar = document.createElement('div');
    toolbar.className = 'notifications_bar';
    container.appendChild(toolbar);
    
    var notificationsHolder = document.createElement('div');
    notificationsHolder.className = 'notifications';
    container.appendChild(notificationsHolder);
    
    var bottombar = document.createElement('div');
    bottombar.className = 'notifications_footer';
    container.appendChild(bottombar);
    
    var title = document.createElement('div');
    title.className = 'notifications_title';
    title.appendChild(document.createTextNode(Translations.translate('Notifications')));
    toolbar.appendChild(title);
    
    var markRead = document.createElement('div');
    markRead.className = 'notifications_mark';
    markRead.appendChild(document.createTextNode(Translations.translate('Mark as Read')));
    toolbar.appendChild(markRead); 
    
    markRead.onclick = function() {
      Account.Notifications.readAll(function(response) {
        if(response) {
          for(var i = 0 ; i < notifDoms.length ; i++) {
            Utils.removeClass(notifDoms[i],'unread');
          }
        }
      });
    };
    
    var limit = 20;
    var currentContainer = notificationsHolder;
    
    if(Account.Notifications.notifications.length == 0) {
      var nothing = document.createElement('div');
      nothing.className = 'notification no_activity';
      nothing.appendChild(document.createTextNode(Translations.translate('No Recent Activity')));
      currentContainer.appendChild(nothing);
    }
    
    for(var i = 0 ; i < Account.Notifications.notifications.length ; i++) {
      var notification = Account.Notifications.notifications[i];
      if(currentContainer.childNodes.length >= limit) {
        //create load more button and add new container
        var nextSection = document.createElement('div');
        var button = document.createElement('input');
        button.type = 'button';
        button.className = 'load_more';
        button.value = Translations.translate('Load More');
        nextSection.appendChild(button);
        
        var nextContainer = document.createElement('div');
        nextContainer.style.display = 'none';
        nextSection.appendChild(nextContainer);
        
        button.onclick = Account.Notifications._generateEventCallback(function(cont,btn) {
          var currentScroll = container.scrollTop;
          btn.style.display = 'none';
          cont.style.display = '';
          setTimeout(function() {
            container.scrollTop = currentScroll;
          },0);
          return false;
        },nextContainer,button);
        
        currentContainer.appendChild(nextSection);
        currentContainer = nextContainer;
        
      }
      var dom = Account.Notifications.getNotificationDom(notification);
      currentContainer.appendChild(dom);
      notifDoms[notifDoms.length] = dom;
    }
    container.scrollTop = 1;
    container.scrollTop = 0;
  },
  getNotificationDom: function(notification) {
    var div = document.createElement('div');
    div.className = 'notification';
    if(!notification.read || notification.collapseUnread) {
      Utils.addClass(div,'unread');
    }
    
    var icon = document.createElement('div');
    icon.className = 'notification_icon';
    div.appendChild(icon);
    
    if(notification.icon_url) {
      icon.style.backgroundImage = 'url('+notification.icon_url+')';
    }
    
    var content = document.createElement('div');
    content.className = 'notification_content';
    div.appendChild(content);
    
    var time = document.createElement('div');
    time.className = 'notification_time';
    div.appendChild(time);
    time.appendChild(document.createTextNode(Comments.formatUnixTime(notification.time)));
    
    var exerptText = false;
    var exerptLimit = 60;
    var ellipsis = "...";
    switch(notification.type) {
      case 'reply':
        if(notification.reply && notification.reply.author && notification.reply.author.name) {
          content.innerHTML = Translations.translate(Utils.htmlentities('%1 replied to your comment:'),["<span class=name>"+Utils.htmlentities(notification.reply.author.name)+"</span>"]);
        }
        else {
          content.innerHTML = Translations.translate('Someone replied to your comment:');
        }
        content.innerHTML += ' ';
        exerptText = notification.reply.content;
        break;
      case 'upvote':
        if(notification.voter && notification.voter.name) {
          var names = ["<span class=name>"+Utils.htmlentities(notification.voter.name)+"</span>"];
          if(notification.collapsed && notification.collapsed.length > 0) {
            for(var i = 0 ; i < notification.collapsed.length ; i++) {
              var collapsed = notification.collapsed[i];
              if(collapsed.voter && collapsed.voter.name) {
                names[names.length] = "<span class=name>"+Utils.htmlentities(collapsed.voter.name)+"</span>";
              }
            }
          }
          var name = [names[0]];
          if(names.length > 1) {
            if(names.length == 2) {
              name = [names.join(' & ')];
            }
            else if (names.length > 2 && names.length < 4) {
              name = [names.slice(0,names.length-1).join(', ')+', & '+names[names.length-1]];
            }
            else {
              name = [names[0]+' & '+'<span class=name>'+Utils.htmlentities(Translations.translate('%1 others',[names.length-1]))+'</span>'];
            }
          }
          content.innerHTML = Translations.translate(Utils.htmlentities('%1 upvoted your comment:'),name);
        }
        else {
          content.innerHTML = Translations.translate('Someone upvoted your comment:');
        }
        content.innerHTML += ' ';
        exerptText = notification.comment.content;
        break;
    }
    if(exerptText && exerptText.length > 0) {
      var exerpt = document.createElement('span');
      exerpt.className = 'exerpt';
      if(exerptText.length > exerptLimit) {
        exerptText = exerptText.substr(0,exerptLimit-ellipsis.length)+ellipsis;
      }
      exerpt.appendChild(document.createTextNode(exerptText));
      content.appendChild(exerpt);
    }
    
    div.onclick = function() {
      var url = false;
      var notif_ids = [notification.id];
      if(notification.collapsed && notification.collapsed.length > 0) {
        for(var i = 0 ; i < notification.collapsed.length ; i++) {
          notif_ids[notif_ids.length] = notification.collapsed[i].id;
        }
      }
      switch(notification.type) {
        case 'reply':
          if(notification.reply && notification.reply.object) {
            //check if comment is already on page
            var comment_id = notification.reply.id;
            url = '#c'+comment_id;
            if(!document.getElementById('comment_'+comment_id)) {
              url = AppConfig.HOMEURL+'/?id='+notification.reply.object+'&src=notif'+'&notifs='+notif_ids.join(',')+url;
            }
          }
          break;
        case 'upvote':
          if(notification.comment && notification.comment.object) {
            var comment_id = notification.comment.id;
            url = '#c'+comment_id;
            if(!document.getElementById('comment_'+comment_id)) {
              url = AppConfig.HOMEURL+'/?id='+notification.comment.object+'&src=notif'+'&notifs='+notif_ids.join(',')+url;
            }
          }
          break;
      }
      if(url) { 
        if(window.stop) {
          window.stop();
        }
        window.location.href = url;
      }
      var ajax = new Ajax();
      ajax.responseType = Ajax.JSON;
      ajax.ondone = function(response) {
        if(response) {
          Utils.removeClass(div,'unread');
        }
      }
      ajax.post(AppConfig.HOMEURL+"/ajax/notifications.php",{method:'click',ids:JSON.encode(notif_ids)});
    }
    
    return div;
  },
  _generateEventCallback: function() {
    var callback = arguments[0];
    var nextArgs = [];
    for(var i = 1 ; i < arguments.length ; i++) {
      nextArgs[nextArgs.length] = arguments[i];
    }
    return function(event) {
      if(!event) {
        event = window.event;
      }
      var result = callback.apply(null,nextArgs);
      if(result === false) {
        if(event) {
          event.preventDefault();
          event.stopPropagation();
          event.cancelBubble = true;
        }
      }
    }
  }
}
</script><script type="text/javascript">
Account.setState(false);
</script><script type="text/javascript">
	var is_mobile = "";
</script><script type="text/javascript">
var notificationScrollPos = 0;
function toggleNotifications(dom) {
  var scroller = document.getElementById('notifications_dropdown');
  if(!dom.hideFunc) {
    dom.hideFunc = function() {
      if(!Utils.hasClass(dom,'inactive')) {
        //save scroll pos
        if(scroller) {
          notificationScrollPos = scroller.scrollTop;
          scroller.scrollTop = 0;
        }
      }
      Utils.addClass(dom,'inactive');
      Utils.removeEventListener(window,'click',dom.hideFunc);
    }
  }
  if(true || Account.Notifications.notifications.length > 0) {
    if(!Utils.hasClass(dom,'inactive')) {
      //save scroll pos
      if(scroller) {
        notificationScrollPos = scroller.scrollTop;
        scroller.scrollTop = 0;
      }
    }
    Utils.toggleClass(dom,'inactive');
  }
  else {
    Utils.addClass(dom,'inactive');
  }
  if(Utils.hasClass(dom,'inactive')) { //hidden
    Utils.removeEventListener(window,'click',dom.hideFunc);
  }
  else {
    if(scroller) {
      scroller.scrollTop = notificationScrollPos;
    }
    setTimeout(function() {
      Utils.addEventListener(window,'click',dom.hideFunc);
    },500);
    //ajax to mark as read
    if(Account.Notifications.unviewed_count > 0) {
      Account.Notifications.viewAll(function(response) {
        if(response) {
          var unread_holder = document.getElementById('unread_count');
          if(unread_holder) {
            unread_holder.style.display = 'none';
          }
        }
      });
    }
    var ajax = new Ajax();
    ajax.responseType = Ajax.JSON;
    ajax.post(AppConfig.HOMEURL+"/ajax/action.php",{action:'notif_open'});
  }
  return false;
}
function toggleActive(dom,button) {
  if (typeof(dom) == 'string') {
    var dom = document.getElementById(dom);
  }
  
  if (dom.className.match(/inactive/g)) {
    dom.mouseHover = false;
    dom.onmouseover = function() {
      dom.mouseHover = true;
    }
    dom.onmouseout = function() {
      dom.mouseHover = false;
    }
    if (!dom.toggleFunc) {
      dom.toggleFunc = function() {
        if (!dom.mouseHover) {
          toggleActive(dom,button);
        }
      };
    }
    // turn on stuff
    setTimeout(function(){
      Utils.addEventListener(document.body,'click',dom.toggleFunc);
    },10);
    dom.className = dom.className.replace( /(?:^|\s)inactive(?!\S)/g , ' active' );
    if (button) {
      button.className = button.className.replace( /(?:^|\s)inactive(?!\S)/g , ' active' );
    }
  }
  else if (dom.className.match(/active/g)) {
    dom.mouseHover = false;
    Utils.removeEventListener(document.body,'click',dom.toggleFunc);
    dom.className = dom.className.replace(/\sactive/,' inactive');
    if (button) {
      button.className = button.className.replace(/\sactive/,' inactive');
    }
  }
}
function clickTrack(actionname,url) {
  var ajax = new Ajax()
  ajax.post(AppConfig.HOMEURL+"/ajax/action.php",{action:actionname});
  ajax.ondone = function() {
    if (url) {
      navigate_wrapper(url);
    }
  }
  return false;
}
</script>
<div class="header_fixed" style="text-align:center;">
 
  <div class="login_state" style="position:absolute;top:0px;left:50px;">
    <a onclick="return clickTrack('hhot','http://sfglobe.com/?show=hot');" href="http://sfglobe.com/?show=hot"><div style="background-color:red;font-weight:bold;" class="button">Hot Stories</div></a>
    <a onclick="return clickTrack('hrising','http://sfglobe.com/?show=trending');" href="http://sfglobe.com/?show=trending"><div class="button">Rising</div></a>
    <a onclick="return clickTrack('hnew','http://sfglobe.com/?show=new');" href="http://sfglobe.com/?show=new"><div class="button">New</div></a>
    <a onclick="postArticle();return clickTrack('hsubmit');"><div class="button">+Submit</div></a>
    
	
    <div id="sectionsButton" onclick="toggleActive('sectionsContent',this);" class="status sections inactive" style="display:inline-block;display:none;cursor:pointer;width:25px;margin-top:13px;padding:4px;padding-top:0px;padding-bottom:0px;">
      <hr>
      <hr>
      <hr>
    </div>
    
    <div id="sectionsContent" class="content sections inactive">
        <div onclick="navigate_wrapper('http://sfglobe.com/?cat=News');" class="category_name News" style="display:block;margin-top:5px;position:relative;">
    News
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=Entertainment');" class="category_name Entertainment" style="display:block;margin-top:5px;position:relative;">
    Entertainment
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=Life');" class="category_name Life" style="display:block;margin-top:5px;position:relative;">
    Life
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=People');" class="category_name People" style="display:block;margin-top:5px;position:relative;">
    People
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=Culture');" class="category_name Culture" style="display:block;margin-top:5px;position:relative;">
    Culture
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=Tech');" class="category_name Tech" style="display:block;margin-top:5px;position:relative;">
    Tech
  </div>  <div onclick="navigate_wrapper('http://sfglobe.com/?cat=Science');" class="category_name Science" style="display:block;margin-top:5px;position:relative;">
    Science
  </div>
    </div>
  </div>
  <a onclick="return clickTrack('hlogo','http://sfglobe.com/?show=logo');" href="http://sfglobe.com/?show=logo"><div class="article_title">
		<div class="sfglobe_title" style="font-size:23px;width:350px;text-align:center;">The San Francisco Globe</div>
  </div></a>
	
	<div id="login_state" class="login_state" style="position:absolute;top:0px;right:10px;"></div>
</div>
<div class="header_spacer"></div><div id="need_confirmation" class="yellowbox" style="display:none;">
  <table style="width:100%;height:100%;border:0px none;" border="0" cellspacing="0" cellpadding="0">
  <tbody><tr><td valign="center">
	<b><span id="confirm_name"></span>, go to <span id="confirm_email"></span> to complete the sign-up process.</b> 
	
	<span style="margin-left:40px"><a href="#" onclick="Account.sendConfirmationEmail();return false;">Resend Email</a></span>
	</td></tr>
	</tbody></table>
</div><script type="text/javascript">
	var updateLogin = function() {
	  var container = document.getElementById('login_state');
	  if(container) {
      if(Account.state) {
        //var resend_html = "<a href='#' class='status send_confirmation' onclick='Account.sendConfirmationEmail();toggleActive(\"settingsContent\");return false;'>"+Utils.htmlentities(Translations.translate('Send Confirmation Email'))+"</a>";
        var confirm_alert = document.getElementById('need_confirmation');
        if(Account.state.confirmed) {
          //resend_html = '';
          if(confirm_alert) {
            confirm_alert.style.display = 'none';
          }
        }
        else {
          var nameHolder = document.getElementById('confirm_name');
          if(nameHolder) {
            nameHolder.innerHTML = Utils.htmlentities(Account.state.first_name);
          }
          var emailHolder = document.getElementById('confirm_email');
          if(emailHolder) {
            emailHolder.innerHTML = Utils.htmlentities(Account.state.email);
          }
          if(confirm_alert) {
            confirm_alert.style.display = '';
          }
        }
        container.innerHTML = "\
        <table><tr>\
        <td valign=top>\
        <div id=notifications class='status notifications inactive' onclick='return toggleNotifications(this);' style='display:none;'>\
        <div class='notifications notifications_icon'>&nbsp;</div><div class='notifications unread_count' id='unread_count'></div>\
        <div id='notifications_dropdown'></div>\
        </div>\
        </td>\
        <td valign=top>\
      <div class='status profile'>\
        <div class='name'>"+Utils.htmlentities(Account.state.first_name)+"</div>\
      </div>\
    </td><td valign=top>\
      <div id='settingsButton' class='status settings inactive' onclick=\"toggleActive('settingsContent',this);\">\
        <div class='downarrow'></div>\
      </div>\
    </td></tr></table>\
    <div id='settingsContent' class='content settings inactive'>\
    <a href='settings.php' class='status link'>"+Utils.htmlentities(Translations.translate('Settings'))+"</a>\
    <a href='profile.php' class='status link'>"+Utils.htmlentities(Translations.translate('Profile'))+"</a>\
    <a href='#' class='status link logout' onclick='Account.logout();return false;'>"+Utils.htmlentities(Translations.translate('Logout'))+"</a>\
    \
    </div>\
        ";
        Account.Notifications.load(function(response) {
          var unread_holder = document.getElementById('unread_count');
          if(unread_holder) {
            var ucount = Account.Notifications.unviewed_count;
            unread_holder.innerHTML = ucount;
            if(ucount > 0) {
              unread_holder.style.display = 'block';
            }
            else {
              unread_holder.style.display = 'none';
            }
          }
          var dropdown = document.getElementById('notifications_dropdown');
          if(dropdown) {
            Account.Notifications.render(dropdown);
          }
          var notifications = document.getElementById('notifications');
          if(notifications) {
            notifications.style.display = '';
          }
        });
      }
      else {
        container.innerHTML = "\
        <table><tr><td valign=top>\
      <div class='status login' onclick='Account.promptLogin();return false;'>\
        <div class='login'>"+Utils.htmlentities(Translations.translate('Login'))+"</div> \
      </div>\
    </td><td valign=top>\
      <div class='status signup inactive' onclick='Account.promptSignup(false,\"header\");return false;'>\
        <div class='signup'>"+Utils.htmlentities(Translations.translate('Sign up'))+"</div>\
      </div>\
    </td></tr></table>\
        ";
      }
    }
  }
  Account.addOnStateChangeListener(updateLogin);
  updateLogin();
  
  var updateWelcome = function() {
    //return false;
    if (document.getElementById('welcomebox')) {
      var welcomebox = document.getElementById('welcomebox');
      var welcomespacer = document.getElementById('welcomespacer');
      if(Account.state) {
        // if logged in, remove welcome boxes
        welcomebox.style.display = 'none';
        welcomespacer.style.display = 'none';
      }
      else {
        welcomebox.style.display = 'block';
        welcomespacer.style.display = 'block';
      }
    }
  }
  Account.addOnStateChangeListener(updateWelcome);
  updateWelcome();
</script><div class="app_container border"><div class="app_container_margin" style="text-align:left;padding-top:20px;padding-bottom:20px;"><br><br><meta http-equiv="Content-type" content="text/html" charset="UTF-8">

<div style="text-align:right;margin-bottom:20px;">
<a href="?lang=eng&amp;src=This application">English</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=fr&amp;src=This application">Français</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=es&amp;src=This application">Español</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=it&amp;src=This application">Italiano</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=port&amp;src=This application">Português</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=ger&amp;src=This application">Deutsch</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=dan&amp;src=This application">Dansk</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=dutch&amp;src=This application">Nederlands</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=swed&amp;src=This application">Svenska</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=nor&amp;src=This application">Norsk</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=polish&amp;src=This application">Polski</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=ch&amp;src=This application">中文</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=jp&amp;src=This application">日本語</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=kor&amp;src=This application">한국의</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=indo&amp;src=This application">Indonesia</a>&nbsp;&nbsp;&nbsp;
<a href="?lang=russian&amp;src=This application">русский</a>&nbsp;&nbsp;&nbsp;


</div>


<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="Generator" content="Microsoft Word 12 (filtered)">

<style>

</style>





<div class="Section1">

<p class="MsoNormal" align="center" style="text-align:center"><b><u>PRIVACY POLICY</u></b></p>

<p class="MsoNormal">&nbsp;</p>

<p class="MsoNormal">This application (collectively, "This application" or
"we"), under parent company K-Factor Media LLC, respects the privacy rights of our online users and is
committed to protecting the personal information collected about or provided by
you. We have adopted this Online Privacy Policy ("Privacy Policy")
to guide how we store, collect, manage and use the personal information you
provided in connection with the Service .<br>
<br>
</p>

<p class="MsoNormal">Please note that this Privacy Policy applies only to
information submitted and collected by This application through use of the Service in any way whether on the
Social Networking Site (as defined in the Terms of Use) or otherwise online, but does not apply to information that may be collected
offline or collected through any other method including your use of any web
site This application's affiliated entities may operate. Moreover, this Privacy
Policy applies to the Service, but <b>not</b> to websites maintained by other
companies or organizations to which we may provide links. When you link to
these websites, this Privacy Policy no longer applies. We are therefore not
responsible for the content or activities provided or created on such sites.<br>
<br>
<em>By using and accessing the Service, you
signify your assent to our Online Privacy Policy. If you do not agree to this
Privacy Policy, please do not use the Service. We reserve the right to make changes
to this Privacy Policy. If we make a material change to this Privacy Policy, we
will notify you by posting the change in this Privacy Policy and, if necessary,
give you additional choices regarding such change. Please check back from time
to time to ensure that you are aware of these changes. Your continued use of the
Service will signify your acceptance of these changes.</em></p>



<p class="MsoNormal"><em><u><span style="font-style:normal">Information Collected
</span></u></em></p>



<p class="MsoNormal">In order to give you the best experience in use of the
Service, This application may collect information about you from your account on the Social
Networking Site, but only if you voluntarily provide it to us, in accordance
with the policies and terms of the Social Networking Site. Additionally, we
may obtain information from you through your Service registration, your access and participation in
message boards, comments, etc on the Service; your email of a question to our customer service
desk; or your purchase of a virtual product of any type. Further, we may ask
you for personal information (such as name, phone number, or email address) if you choose to
sign up for any particular Service we offer (such as a newsletter or reminder
service). In all such cases, the information provided will not be disclosed to
third parties and will be used solely for the purpose of providing you with the
Service.</p>



<p class="MsoNormal">The types of personal information collected in conjunction
with the activities listed above will vary depending on the activity. The
requested information may include: (i) your name, (ii) mailing address, (iii)
telephone number, (iv) email address, and, for those purchasing products or
services online, credit card and billing information; (v) information about
the identity of your friends.<br>
<br>
For some activities, This application may also ask you to provide other non-personal
information such as: (i) your age or date of birth; (ii) your gender; (iii)
your game and platform preferences; (iv) information about the hardware you may
own and/or games you may have recently purchased; (v) your interests, websites,
friend information and fan pages; and, (vi) other service-related
information (collectively referred to as "demographic information"). If
demographic information is collected for an activity that also requires
personal information, This application may combine your demographic information with
your personal information. Before providing the Service any email addresses or phone numbers of your friends, you should obtain their consent. </p>


<p class="MsoNormal">You may provide us with another person's email address or phone number to
invite that person to participate in the Service, or to provide you with information for use on the Service. This application may but is not
obligated to use this information to contact the person to join the Service and
in all events will do so only with your express permission. In addition, we may help connect
you to your friends who already use our Service based on such information.</p>


<p class="MsoNormal"><a name="howdoessegause"><u>Use of Information collected.</u></a></p>

<p class="MsoNormal">
The information you provide to This application will be used for the following reasons:
</p>
<ul>
  <li> to ensure that content from our site is presented to you in the most effective manner and to personalize your visit to our site;
  </li><li> to enable us to continuously enhance the Service, to serve advertising, and to provide to you information, products or services which we feel may be of interest to you (which also helps keep our service free)
</li></ul>

<p class="MsoNormal">This application will only use the personal information collected
about you from Social Networking Site for the operation of the Service in
accordance with the policies and terms of the social network. This application does
not rent, lease, loan, sell, voluntarily distribute or redistribute your
personal information to any unaffiliated third parties.</p>


<p class="MsoNormal">This application may use your email address or other personal
information to send you a newsletter, marketing or advertising materials, or service
announcements that tell you about updates to our Privacy Policy, changes in
pricing, changes to our online service or customer service policies, and other
related service changes. This application will not voluntarily disclose this personal
information to unaffiliated third parties for any other purpose. Information
collected either directly from you or from the Social Networking Site is solely
used in the operation of the Service. For example, personal and/or demographic
information collected through one of the activities set forth <b><span style="color:#333333">above</span></b> may be used for our internal
demographic studies, so we can constantly improve the online products and
services we provide you and better meet your needs. Additionally, we may use
information that we collected to ensure that someone who is cheating is
excluded, and to enforce our rights under our Terms of Service.<br>
<br>
</p>

<p class="MsoNormal">No matter what method we use to collect information and no
matter how we use that information, we will only collect the information deemed
reasonably necessary to fulfill your online requests and our legitimate
business objectives, and such information will not be provided to any third
parties.</p>


<p class="MsoNormal">Consistent with This application's Copyright and Intellectual
Property Policy and in its sole discretion, we reserve the right to remove any
of your personal information or content from the Service if we receive a notice
of intellectual property infringement or other complaint.<br>
<br>
Warning <b>Note about Message Boards</b><br>
Note that whenever you give out personal information in public areas such as on
our message board, that information can be collected and used by people you do
not know. While we strive to protect those who wish to participate in these
activities, we cannot guarantee the security and privacy of any information
that you post in these areas and you acknowledge this fact.<br>
<br>

<u>Other Disclosure of Your Personal Information</u></p>

<p class="MsoNormal">Notwithstanding any other terms of this Privacy Policy, we
may disclose personal information in the good faith belief that we are required
to do so by law, including but not limited to disclosure to law enforcement or
other government officials in connection with an investigation of fraud,
intellectual property infringements, or other activity that is illegal or may
expose you or us to legal liability.<br>
<br>
In addition, in the event of a merger, acquisition, reorganization, bankruptcy,
or other similar event, customer information may be transferred to This application's
successor or assign, if permitted by and done in accordance with applicable
law.<br>
<br>
We may also share aggregate information about our visitors to our Service. For
example, we may say a particular game title's audience is X% female and Y%
male. This data is used to customize the content and advertising of our Service
to deliver better experience for our visitors. It can also help to tailor our
products and services to meet the needs of our customers.<br>
<br>
We may send to your web browser, directly or in directly, advertisements you
see when you visit our Service. However, we may allow other companies, called
third party ad servers, to serve advertisements within our Service. This
Privacy Policy does not apply to, and cannot control the activities of, these
other companies. If you want to prevent a third party ad server from sending
or reading cookies on your computer, you must visit the company's web sites
individually and opt-out.</p>


<p class="MsoNormal"><a name="providepersonal"><u>Not Providing Information</u></a></p>


<p class="MsoNormal">If you choose not to submit personal information when
requested, you may not be able to use many of the features the Service offers.</p>


<p><u>Passive Means of Information Collection (Cookies, IP addresses, etc.)</u></p>

<p class="MsoNormal"><b>Cookies</b><br>
We may use cookies in the operation of the Service. A "cookie" is a
small bit of record-keeping information that sites often store on a user's
computer. Cookies are typically used to quickly identify a user's computer and
to "remember" things about the user's visit. For example, we may use
cookies to keep track of your preferences and your username and password. Information
contained in a cookie may be linked to your personal information for this
purpose. You can disable cookies or set your browser to alert you when cookies
are being sent to your computer, although this may affect your ability to use
many of the features of the Service.<br>
<br>
<b>IP Addresses</b><br>
An Internet Protocol (IP) address is a number that is used by computers on the
network to identify your computer every time you log on to the Internet. Although
we do not generally collect IP addresses, we may collect and use your IP address
when we feel it is necessary to protect our service, websites, customers, or
others.<br>
<br>
If you use the Service, we may collect other unique numbers associated
with a computer's identity on a network.<br>
<br>
</p>

<p class="MsoNormal"><b>Log Files</b><br>
Other information that may be passively collected by This application is in the form of
logs - files that record website activity, including how many "hits"
a particular web page is getting (a.k.a. "navigational data"). These
entries are generated anonymously, and enable us to gather statistics about
users' browsing habits, assess overall website activity, track interest in
advertised sales, and maintain website security. We also use the log file
entries for our internal marketing and demographic studies, so we can
constantly improve the online services we provide you. Log files are used
internally only, and may be combined with data collected via cookies to help us
aggregate behavior patterns of registered users.</p>


<p><u>Privacy Policy and Third Party Web Sites, Links, Advertisements and Services</u></p>

<p class="MsoNormal">You should be aware that while you are using our Service,
you may be directed to other sites that are beyond our control and for which we
are not responsible. Additionally, third parties provide advertisements and
offer other products and services to you when you are using our Service, which
may receive your IP address or other technology such as cookies, web beacons
and the like. By using the Service, you consent to such use by third parties
of your personal information, which is subject to the privacy policies of these
third parties.</p>


<p class="MsoNormal">You should consult the privacy policies of these third
parties for more detailed information.</p>

<p class="MsoNormal"><u>California</u><u> Privacy Rights</u></p>

<p class="MsoNormal"><strong>Your California Privacy Rights</strong><br>
Since 2005, California Civil Code Section 1798.83 permits customers who are California residents to request certain information regarding our disclosure of personal
information to third parties for their direct marketing purposes. For inquires about this issue, please <a href="mailto:privacy[at]kfactormedia.com">email us</a>.



</p><p class="MsoNormal"><u>Ask a Question about Privacy Policy</u></p>


<p class="MsoNormal">If you have any questions, complaints, or comments regarding
this Privacy Policy or our information collection practices, please contact our
Privacy Policy Administrator at:<br>
K-Factor Media LLC<br>
Attention: Privacy Policy<br>
P.O. Box 606<br>
San Francisco, CA 94104-0606

</p><p class="MsoNormal"><a name="under13"><u>Policy Regarding Children Under 13</u></a></p>

<p class="MsoBodyText">We do not knowingly collect personal information such as
name and email address from children under 13. From time to time, certain
portions of our Service may allow all users (including children under 13) to
disclose a limited amount of personal information without first telling us
their age or parental permission. In the event that we learn that we have
collected personal information from a child under the age of thirteen, we will
delete the information as quickly as possible.<br>
<br>
</p>

<p class="MsoBodyText">We recognize the importance of safeguarding the privacy of
children and encourage parents to check and monitor their children's use of
online activities regularly.</p>


<p class="MsoBodyText"><u>Policy Regarding Children Over 13</u></p>


<p class="MsoBodyText">We request that any person under the age of majority in their
jurisdiction ask the permission of their parents before providing any
information to us or anyone else over the Internet.</p>


</div>





</div></div><div class="footer_wrapper" style="z-index:1000;background-color:white;position:relative;padding-bottom:30px;">
<div class="footer_header" style="margin-bottom:0px;">	<span style="margin-right:20px">© 2014 The San Francisco Globe</span> 	<span class="footer_category"><a href="http://sfglobe.com/about.php" target="_blank">About Us</a></span>
	<span class="footer_category"><a href="http://sfglobe.com/terms.php" target="_blank">Terms</a></span>
	<span class="footer_category"><a href="http://sfglobe.com/privacy.php" target="_blank">Privacy</a></span>
	<span class="footer_category" style="border:0px"><a href="http://sfglobe.com/contact.php" target="_blank">Contact</a></span>
	<span class="footer_category" style="border:0px;font-size:10px;">#173007360</span></div>
</div><script type="text/javascript">
  if(typeof FB != 'undefined' && FB.Canvas && FB.Canvas.setAutoGrow) {
    FB.Canvas.setAutoGrow();
  }
  else {
    window.fbAsyncInit = function() {
      FB.Canvas.setAutoGrow();
    }
  }
</script>



</body></html>