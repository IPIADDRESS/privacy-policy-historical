<!--The following is the downloaded HTML source of the romwe.com privacy policy that was archived on 2019-05-20.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20190520144716id_/https%3A//us.romwe.com/Privacy-Security-Policy-a-488.html) for the most accurate reproduction.-->

<!DOCTYPE html><html lang="en"><head>
    
        <title>Privacy &amp; Cookie Statement | ROMWE</title>
    
    
        <meta name="description" content="Privacy &amp; Cookie Statement  | ROMWE">
    
    
        <meta name="keywords" content="Privacy &amp; Cookie Statement  | ROMWE">
    
    
    <meta charset="UTF-8" data-lang="us">
    

    <!-- share & earn meta -->
    

     <!-- 评论分享 -->
     

    <link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <!-- Standard iPad -->
    <link rel="apple-touch-icon" sizes="72x72" href="//romwe.ltwebstatic.com/rw_dist/images/touch-icon-ipad-72-6c7f069935.png">
    <link rel="apple-touch-icon" sizes="120x120" href="//romwe.ltwebstatic.com/rw_dist/images/touch-icon-ipad-120-adcd25d644.png">
    <!-- Retina iPad -->
    <link rel="apple-touch-icon" sizes="144x144" href="//romwe.ltwebstatic.com/rw_dist/images/touch-icon-ipad-144-204b4c56d1.png">

    
<link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_249772_fjy4jdqhi85.css">


<link rel="stylesheet" type="text/css" href="//romwe.ltwebstatic.com/rw_dist/css/romwe-ba793c8678.css">


 
    <link rel="stylesheet" type="text/css" href="//romwe.ltwebstatic.com/rw_dist/theme/us/us-b70f8f24bb.css">



    <link type="text/css" href="//count.romwe.com/none.css" rel="stylesheet">
    <script async="" src="https://s.pinimg.com/ct/core.js"></script><script id="facebook-jssdk" src="//connect.facebook.net/en_US/sdk.js"></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script async="" src="//romwe.ltwebstatic.com/rw_dist/js/sdk_analysis-815eab917b.js"></script><script async="" src="https://cdn.branch.io/branch-latest.min.js"></script><script id="scarab-js-api" async="" src="https://recommender.scarabresearch.com/js/14E90776A136245E/scarab-v2.js"></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-NM88FN"></script><script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/libs/jquery/jquery.min.js"></script>
    

<link rel="stylesheet" type="text/css" href="//romwe.ltwebstatic.com/rw_dist/css/other-3e7f31d38f.css">

<script>
	//页面信息
	var SaPageInfo = {
			page_id: 19,
			page_name:'page_article',
			page_param:{article_id:'488'},
			start_time: new Date().getTime()
	};
    
    $(document).on('click', '.concat_faq', function(){
        var sadata_effect = $.extend(SaPageInfo, {
            page_param: '',
            activity_name: 'click_faq',
            activity_param: {
                ent1: 'contact'
            }
        })

        sa('send', sadata_effect)
    })
</script>

<script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/libs/jquery/jquery.min.js"></script>
    <script>

		window.C_Module = {
			cache: {},
			define: function(name, opts) {
				if (!this.cache[name]) {
					this.cache[name] = opts || {}
				}
				else {
					for (var key in opts) {
						this.cache[name][key] = opts.key
					}
				}
			},

			remove: function(name) {
				if (!this.cache[name]) return
				this.cache[name] = null
				return this.cache
			},

			require: function(name) {
				if (!this.cache[name]) return
				return this.cache[name]
			},

			init: function(names, opt) {
				var fnObj = {}, stack = []
				if (Object.prototype.toString.call(names) === '[object Array]' || Object.prototype.toString.call(names) === '[object String]') {
					stack = stack.concat(names)
				}
				else {
					stack = Object.keys(this.cache)
				}
				for (var i = 0, l = stack.length; i < l; i++) {
					if (!this.cache[stack[i]] || !this.cache[stack[i]]['initialize']) continue
					fnObj = this.cache[stack[i]]['initialize'](opt)
					Object.keys(fnObj).forEach(function(item) {
						fnObj[item]()
					})
				}
			},
		}
    </script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NM88FN');</script>
<!-- End Google Tag Manager -->
    <script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o);
    m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  var PageGroup = PageGroup || 'other';
  var PageGroupEmarsys = PageGroupEmarsys || 'other';
  var GB_ga_getCookie = function(objName){/*获取指定名称的cookie的值*/
    var arrStr = document.cookie.split("; ");
    for(var i = 0;i < arrStr.length;i ++){
      var temp = arrStr[i].split("=");
      if(temp[0] == objName) return unescape(temp[1]);
    }
  }
  ;
  ~ function () {
    var matched = document.cookie.match(/rw_gap_id=(\S+)(?:(?:;\s)|$)/) || '';
    var userID = window.analysisUserId = matched && matched[1];

    ga('create', 'UA-56523842-1', 'auto', {
      'name': 'rwus'
    });
    ga('require', 'linkid', 'linkid.js');

    ga('rwus.require', 'ec');
    ga('rwus.set', 'contentGroup1', PageGroup);
    ga(function () {
      var clientID = ga && ga.getByName && ga.getByName('rwus') && ga.getByName('rwus').get('clientId') || '';
      ga('rwus.set', 'dimension1', clientID);
    });
    ga('rwus.set', 'dimension2', userID);

    // ga分流维度 上传type_id
    

    // abt info
    

    

    ga('rwus.set', 'dimension16', GB_ga_getCookie("cookieId")||"");
    if(typeof SaPageInfo == 'object'){
      ga('rwus.set', 'dimension17', (GB_ga_getCookie("cookieId")||"")+','+(SaPageInfo.page_name ||'noPageName')+(SaPageInfo.start_time || 'noTime'));
    }else{
      ga('rwus.set', 'dimension17', 'noDefinedSaPageInfo');
    }
    

    ga('rwus.send', 'pageview');

  }();

  
    var ScarabQueue = ScarabQueue || [];
    (function (subdomain, id) {
      var lang = {
        en: '1F542F7522AA01B3',
        us: '14E90776A136245E',
        fr: '1204911E0DEAF144',
        es: '120F91DC149D7D53',
        uk: '1B1B4DB0BD97D990'
      }['us'] || '1F542F7522AA01B3'

      if (document.getElementById(id)) return;
      var js = document.createElement('script');
      js.id = id;
      js.async = 1;
      js.src = subdomain + '.scarabresearch.com/js/'+ lang +'/scarab-v2.js';
      var fs = document.getElementsByTagName('script')[0];
      fs.parentNode.insertBefore(js, fs);
    })('https:' == document.location.protocol ? 'https://recommender' : 'http://cdn', 'scarab-js-api');
  

  var GB_ga_currentRate = 0;

  var GB_ga_transformPrice = function(val, isNoCache) {
    if(isNoCache) {
      return (val/1).toFixed(2)
    } else {
      if(typeof(GB_ga_currentRate) != 'undefined' && GB_ga_currentRate) {
          return (val/GB_ga_currentRate).toFixed(2)
      } else {
          return (val/1).toFixed(2)
      }
    }
  }
  function GBGaSend(params) {
    var payload = ['rwus.send', 'event']
    for (var key in params) {
      if (typeof params[key] !== 'undefined') {
        payload.push(params[key])
      }
    }
    ga.apply(null, payload)
  }

  
</script>

    
<script>
    var branchKeyForTest = 'key_test_ieVp0UB2pPrHJEdz2gOj3kderBph61Oa';
    var branchKeyForProduct = 'key_live_jdQe6OzZaJwKQDpy6dBHDalfCwki01AY';
    // load Branch
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "), 0);
    // init Branch
    branch.init(branchKeyForProduct);
    window.branch = branch;
    var branchEvent = window.branchEvent = {
        addToCart: function(event_and_custom_data, content_items, errCallback) {
            this.logEvent('ADD_TO_CART', event_and_custom_data, content_items, errCallback);
        },
        addToWishlist: function(event_and_custom_data, content_items, errCallback) {
            this.logEvent('ADD_TO_WISHLIST', event_and_custom_data, content_items, errCallback);
        },
        viewCart: function(event_and_custom_data, content_items, errCallback) {
            this.logEvent('VIEW_CART', event_and_custom_data, content_items, errCallback);
        },
        initiatePurchase: function(event_and_custom_data, content_items, errCallback) {
            this.logEvent('INITIATE_PURCHASE', event_and_custom_data, content_items, errCallback);
        },
        purchase: function(event_and_custom_data, content_items, errCallback) {
            this.logEvent('PURCHASE', event_and_custom_data, content_items, errCallback);
        },
        logEvent: function(event_type, event_and_custom_data, content_items, errCallback) {     
            if(!content_items) content_items = [];
            branch.logEvent(
                event_type,
                event_and_custom_data,
                content_items,
                function(err) {
                    errCallback && errCallback(err);
                }
            );
        }
    };
</script>

</head>
<body>
<script>
if (navigator.userAgent.toLowerCase().match(/phone|pad|pod|iphone|ipod|ios|ipad|android/)) {
	if (document.body.clientWidth <= 980) {
		document.getElementById("viewport").setAttribute('content','');
	}
	window.addEventListener("onorientationchange" in window ? "orientationchange": "resize", function() {
		setTimeout(function() {
			if (document.body.clientWidth <= 980) {
				document.getElementById("viewport").setAttribute('content','');
			} else {
				document.getElementById("viewport").setAttribute('content','width=device-width, initial-scale=1, maximum-scale=1, maximum-scale=1, user-scalable=no');
			}
		}, 500)
	}, false);
}
</script>
<script>
  // 服务器输出的全局变量
  var gbCommonInfo = {
    USE_ABT: true,
    lang: 'us',
    forceHttp: 'https://us.romwe.com',
    host: 'https://us.romwe.com',
    langPath: '',
    SiteUID: 'rwus',
    forceHttp: 'https://us.romwe.com',
    GB_cssRight: false,
    SITE_DISCOUNT_OFF: ["en","us","in","uk","au","ar","ca"],
    location_list: [{"country":"Afghanistan","value":"AF"},{"country":"Algeria","value":"DZ"},{"country":"Andorra","value":"AD"},{"country":"Angola","value":"AO"},{"country":"Anguilla","value":"AI"},{"country":"Antigua and Barbuda","value":"AG"},{"country":"Argentina","value":"AR"},{"country":"Aruba","value":"AW"},{"country":"Australia","value":"AU","host":"au.romwe.com","lang":"au"},{"country":"Austria","value":"AT"},{"country":"Azerbaijan","value":"AZ"},{"country":"Bahamas","value":"BS"},{"country":"Bahrain","value":"BH","host":"ar.romwe.com","lang":"ar"},{"country":"Bangladesh","value":"BD"},{"country":"Barbados","value":"BB"},{"country":"Belarus","value":"BY"},{"country":"Belgium","value":"BE"},{"country":"Belize","value":"BZ"},{"country":"Benin","value":"BJ"},{"country":"Bermuda","value":"BM"},{"country":"Bhutan","value":"BT"},{"country":"Bolivia","value":"BO"},{"country":"Botswana","value":"BW"},{"country":"Brazil","value":"BR"},{"country":"Brunei Darussalam","value":"BN"},{"country":"Bulgaria","value":"BG"},{"country":"Burkina Faso","value":"BF"},{"country":"Burundi","value":"BI"},{"country":"Cambodia","value":"KH"},{"country":"Cameroon","value":"CM"},{"country":"Canada","value":"CA","host":"ca.romwe.com","lang":"ca"},{"country":"Cape Verde","value":"CV"},{"country":"Cayman Islands","value":"KY"},{"country":"Central African Republic","value":"CF"},{"country":"Chad","value":"TD"},{"country":"Chile","value":"CL"},{"country":"Colombia","value":"CO"},{"country":"Comoros","value":"KM"},{"country":"Congo","value":"CG"},{"country":"Cook Islands","value":"CK"},{"country":"Costa Rica","value":"CR"},{"country":"Croatia (local name: Hrvatska)","value":"HR"},{"country":"Cuba","value":"CU"},{"country":"Cyprus","value":"CY"},{"country":"Czech Republic","value":"CZ"},{"country":"Denmark","value":"DK"},{"country":"Djibouti","value":"DJ"},{"country":"Dominica","value":"DM"},{"country":"Dominican Republic","value":"DO"},{"country":"East Timor","value":"TL"},{"country":"Ecuador","value":"EC"},{"country":"Egypt","value":"EG","host":"ar.romwe.com","lang":"ar"},{"country":"El Salvador","value":"SV"},{"country":"Equatorial Guinea","value":"GQ"},{"country":"Eritrea","value":"ER"},{"country":"Estonia","value":"EE"},{"country":"Ethiopia","value":"ET"},{"country":"Faroe Islands","value":"FO"},{"country":"Fiji","value":"FJ"},{"country":"Finland","value":"FI"},{"country":"France","value":"FR","host":"fr.romwe.com","lang":"fr"},{"country":"French Guiana","value":"GF"},{"country":"Gabon","value":"GA"},{"country":"Gambia","value":"GM"},{"country":"Georgia","value":"GE"},{"country":"Germany","value":"DE","host":"de.romwe.com","lang":"de"},{"country":"Gibraltar","value":"GI"},{"country":"Greece","value":"GR"},{"country":"Greenland","value":"GL"},{"country":"Grenada","value":"GD"},{"country":"Guadeloupe","value":"GP"},{"country":"Guam","value":"GU"},{"country":"Guinea","value":"GN"},{"country":"Guinea-Bissau","value":"GW"},{"country":"Guyana","value":"GY"},{"country":"Haiti","value":"HT"},{"country":"Honduras","value":"HN"},{"country":"Hong Kong","value":"HK"},{"country":"Hungary","value":"HU"},{"country":"Iceland","value":"IS"},{"country":"India","value":"IN","host":"www.romwe.co.in","lang":"in"},{"country":"Indonesia","value":"ID"},{"country":"Ireland","value":"IE"},{"country":"Israel","value":"IL"},{"country":"Italy","value":"IT","host":"it.romwe.com","lang":"it"},{"country":"Jamaica","value":"JM"},{"country":"Japan","value":"JP"},{"country":"Jordan","value":"JO"},{"country":"Kazakhstan","value":"KZ"},{"country":"Kenya","value":"KE"},{"country":"Kuwait","value":"KW","host":"ar.romwe.com","lang":"ar"},{"country":"Kyrgyzstan","value":"KG"},{"country":"Lao People's Democratic Republic","value":"LA"},{"country":"Latvia","value":"LV"},{"country":"Lebanon","value":"LB"},{"country":"Lesotho","value":"LS"},{"country":"Liberia","value":"LR"},{"country":"Liechtenstein","value":"LI"},{"country":"Lithuania","value":"LT"},{"country":"Luxembourg","value":"LU"},{"country":"Macau","value":"MO"},{"country":"Madagascar","value":"MG"},{"country":"Malawi","value":"MW"},{"country":"Malaysia","value":"MY"},{"country":"Maldives","value":"MV"},{"country":"Mali","value":"ML"},{"country":"Malta","value":"MT"},{"country":"Martinique","value":"MQ"},{"country":"Mauritius","value":"MU"},{"country":"Mayotte","value":"YT"},{"country":"Mexico","value":"MX","host":"mx.romwe.com","lang":"mx"},{"country":"Micronesia","value":"FM"},{"country":"Moldova","value":"MD"},{"country":"Monaco","value":"MC"},{"country":"Mongolia","value":"MN"},{"country":"Montenegro","value":"ME"},{"country":"Montserrat","value":"MS"},{"country":"Morocco","value":"MA"},{"country":"Mozambique","value":"MZ"},{"country":"Myanmar","value":"MM"},{"country":"Namibia","value":"NA"},{"country":"Nauru","value":"NR"},{"country":"Nepal","value":"NP"},{"country":"Netherlands","value":"NL"},{"country":"Netherlands Antilles","value":"AN"},{"country":"New Caledonia","value":"NC"},{"country":"New Zealand","value":"NZ","host":"au.romwe.com","lang":"au"},{"country":"Nicaragua","value":"NI"},{"country":"Nigeria","value":"NG"},{"country":"Norfolk Island","value":"NF"},{"country":"Norway","value":"NO"},{"country":"Oman","value":"OM","host":"ar.romwe.com","lang":"ar"},{"country":"Panama","value":"PA"},{"country":"Papua New Guinea","value":"PG"},{"country":"Paraguay","value":"PY"},{"country":"Peru","value":"PE"},{"country":"Philippines","value":"PH"},{"country":"Poland","value":"PL"},{"country":"Portugal","value":"PT"},{"country":"Puerto Rico","value":"PR"},{"country":"Qatar","value":"QA","host":"ar.romwe.com","lang":"ar"},{"country":"Reunion","value":"RE"},{"country":"Russian Federation","value":"RU"},{"country":"Rwanda","value":"RW"},{"country":"Saint Lucia","value":"LC"},{"country":"Samoa","value":"WS"},{"country":"San Marino","value":"SM"},{"country":"Saudi Arabia","value":"SA","host":"ar.romwe.com","lang":"ar"},{"country":"Senegal","value":"SN"},{"country":"Serbia","value":"RS"},{"country":"Seychelles","value":"SC"},{"country":"Sierra Leone","value":"SL"},{"country":"Singapore","value":"SG"},{"country":"Slovakia (Slovak Republic)","value":"SK"},{"country":"Slovenia","value":"SI"},{"country":"Solomon Islands","value":"SB"},{"country":"Somalia","value":"SO"},{"country":"South Africa","value":"ZA"},{"country":"South Korea","value":"KR"},{"country":"Spain","value":"ES","host":"es.romwe.com","lang":"es"},{"country":"Sri Lanka","value":"LK"},{"country":"Sudan","value":"SD"},{"country":"Suriname","value":"SR"},{"country":"Swaziland","value":"SZ"},{"country":"Sweden","value":"SE"},{"country":"Switzerland","value":"CH"},{"country":"Taiwan","value":"TW"},{"country":"Tajikistan","value":"TJ"},{"country":"Tanzania","value":"TZ"},{"country":"Thailand","value":"TH"},{"country":"Togo","value":"TG"},{"country":"Trinidad and Tobago","value":"TT"},{"country":"Turkey","value":"TR"},{"country":"Turks and Caicos Islands","value":"TC"},{"country":"Uganda","value":"UG"},{"country":"United Arab Emirates","value":"AE","host":"ar.romwe.com","lang":"ar"},{"country":"United Kingdom","value":"GB","host":"uk.romwe.com","lang":"uk"},{"country":"United States","value":"US","host":"us.romwe.com","lang":"us"},{"country":"Uzbekistan","value":"UZ"},{"country":"Vanuatu","value":"VU"},{"country":"Vatican City State (Holy See)","value":"VA"},{"country":"Vietnam","value":"VN"},{"country":"Virgin Islands (U.S.)","value":"VI"},{"country":"Wallis And Futuna Islands","value":"WF"},{"country":"Western Sahara","value":"EH"},{"country":"Zambia","value":"ZM"},{"country":"Zimbabwe","value":"ZW"}],
    keywords: "",
    PUBLIC_CDN: '//romwe.ltwebstatic.com',
    currency: 'USD',
    firstCouponSite: {"id":"165396","coupon":"rwu10","info":"10%","register_img1":"","register_img2":"","ip_img":"","site_from":"rwus","add_time":"2019-01-10 00:00:00","last_update_time":"2019-01-10 00:00:00","is_del":"0","language":"","registerImgConf":{"id":"2","left_copy":"","left_colour_off":"","left_colour_on":"","register_img":"images2_rw/romwe.com/15553213012844587795.jpg","register_success_img":"","input_copy":"Enter your email address","button_colour":"#f9554d","button_copy":"REGISTER","button_copy_colour":"#FFFFFF","is_show_perfer":"0","prefer_copy_colour":"","prefer_option":null,"title":"","site_from":"rwus","add_time":"2018-04-12 17:06:25","last_update_time":"2019-04-15 17:41:41","is_del":"0","language":"en","input_copy_colour":"#cccccc"}},
    layout_center_nav_type: {"us":"new"},
    dailyObj: {"us":{"2019-05-20":"05-20-2019","2019-05-18":"05-18-2019","2019-05-17":"05-17-2019","2019-05-16":"05-16-2019","2019-05-15":"05-15-2019","2019-05-14":"05-14-2019","2019-05-13":"05-13-2019"}},
    GDPR_SITE: ["uk","fr","de","es","it","en"],
    language: {
      // 券包
      RW_PC_KEY_3139: "{0} OFF",
      RW_PC_KEY_3101: "Successfully Received",
      RW_PC_KEY_3085: "Collect all",
      RW_PC_KEY_3137: "For Order Over {0}",
      RW_PC_KEY_3100: "For All Product",
      RW_PC_KEY_3089: "Free Shipping",
      lang_cart_coupon_get_now: "Get Now",
      lang_cart_coupon_received: "Received",
      lang_cart_coupon_failed: "Failed",
      lang_cart_coupon_invalid: "Invalid",
      lang_cart_coupon_expired: "Expired",
      lang_cart_coupon_tips: "Please use coupon/code before --/--/--",
      lang_member_ok: "OK",
      lang_category_percent_free: "Buy [num] Get 1 Free",
      lang_category_percent_sale: "Buy [limit_buy_front] Get 1 [num] Off",
      lang_category_percent_sale_all: "",
      RW_PC_KEY_3340: "The coupon has been credited to MY ACCOUNT",
      RW_PC_KEY_3105: "My Coupons",
      RW_PC_KEY_3341: "Got it",
      //   搜索关键词
      lang_login_search: "Search title/sku/content",
      cancel: "Cancel",
      header_keyword: "Please enter a keyword !",
      suggested_search: "Suggested Search",
      in: "in",
      clear: "clear",
      recent_search: "recent search",
      hot_search: "hot Searched",
      you_dont_explored: "You haven't explored it yet",
      // 促销中心三期
      RW_PC_KEY_3347: ",less {0} pieces",
      RW_PC_KEY_3346: ",less {0}",
      RW_PC_KEY_3206: "Return coupons",
      RW_PC_KEY_3204: "Gifts rewarded",
      RW_PC_KEY_3203: "Buy more save more",
      RW_PC_KEY_3200: "Promotion",
      string_key_338: "Add",
      RW_PC_KEY_3114: "Add-on items",
      RW_PC_KEY_3124: "Order over {0} can purchase items at {1}",
      RW_PC_KEY_3125: "Order over {0} now, can purchase items at {1}",
      RW_PC_KEY_3115: "Pick",
      RW_PC_KEY_3116: "Repick",
      RW_PC_KEY_3126: "Order over {0}",
      RW_PC_KEY_3127: "{0} off over {1}+",
      RW_PC_KEY_3128: "{0} off over {1}+ items",
      RW_PC_KEY_3129: "{0} off on order {1}+",
      RW_PC_KEY_3130: "{0} off on order {1}+ items",
      RW_PC_KEY_3131: "Order over {0}+ now, get {1} off",
      RW_PC_KEY_3132: "Order over {0}+ items now, get {1} off",
      RW_PC_KEY_3133: "{0} for {1} items",
      RW_PC_KEY_3134: "{0} for per {1} items",
      RW_PC_KEY_3135: "Get {0} items for {1}",
      RW_PC_KEY_3136: "Get {0} items for {1},{2} for {3} items",
      RW_PC_KEY_3374: "2nd {0} 3rd {1}",
      RW_PC_KEY_3373: "2nd {0} off 3rd {1} off",
      RW_PC_KEY_3371: "2nd {0} off",
      RW_PC_KEY_3372: "2nd {0}",
      RW_PC_KEY_3368: "Buy {0} Get {1} coupons",
      RW_PC_KEY_3370: "Buy {0} Get free shipping coupons",
      RW_PC_KEY_3367: "One for free",
      lang_cart_discount_free: "Buy {0} Get Gift",
      lang_category_percent_sale_all: "Buy {0} get {1} off",
      RW_PC_KEY_3471: "Buy {0} Get 1 {1}% off",
      lang_cart_free_gift: "FREE GIFT",
      lang_member_free: "Free",
      lang_goods_off: "off",
      lang_member_returned_select_size: "Select size",
      lang_goods_please_select_size: "Please Select Size",
      lang_goods_word_color: "Color:",
      lang_goods_added: "ADDED",
      lang_goods_addBag: "ADD TO BAG",
      lang_one_free: "one free",
    }
  }
</script>

<script>
    function transformImg(img) {
        var img = img || '';
        img = img.replace('http:', '').replace('https:', '')
        return /^\/\/.*/.test(img) ? img : '//img.romwe.com/' + img
    }

    function percentNum(val, symbol) {
        if(val) {
          var _symbol = symbol ? symbol : '%'
          return 'us' == 'ar' ? _symbol + val : val + _symbol
        } else {
          return val
        }
    }

    function GB_ROMWE_transform_webp_img(img) {
        return img.indexOf('//img.ltwebstatic.com') !== -1 || img.indexOf('//img.romwe.com') !== -1 ?
            transformImg(img).replace(/\b(.jpg|.png)\b/, ".webp") :
            transformImg(img);
    }

    var GB_ROMWE_support_webp = -1; // -1: 未请求完, 1: 支持, 0: 不支持
    function GB_ROMWE_check_webp_feature(feature, callback) {
        if (GB_ROMWE_support_webp === -1) {
            var kTestImages = {
                lossy: "UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",
                lossless: "UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",
                alpha: "UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",
                animation: "UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"
            };
            var img = new Image();
            img.onload = function () {
                var result = (img.width > 0) && (img.height > 0);
                GB_ROMWE_support_webp = 1;
                callback(feature, result);
            };
            img.onerror = function () {
                GB_ROMWE_support_webp = 0;
                callback(feature, false);
            };
            img.src = "data:image/webp;base64," + kTestImages[feature];
        } else {
            if (GB_ROMWE_support_webp === 1) {
                callback(feature, true);
            } else if (GB_ROMWE_support_webp === 0) {
                callback(feature, false);
            }
        }
    }
    GB_ROMWE_check_webp_feature('lossless', function () { })

    function gb_romwe_preload_images(imgArr, callback) {
        var imgObjs = [];
        for (var i = 0; i < imgArr.length; i++) {
            imgObjs[i] = new Image();
            imgObjs[i].src = imgArr[i];
            imgObjs[i].onload = function () {
                callback();
            }
            imgObjs[i].onerror = function () {
                callback();
            }
        }
    }

    var getABTInfoByPosKey = (function () {
        var ABTInfo = {};
        var ABTCookie = '';
        var ABTInfoEmpty = {poskey:'',abtexp:'',abtbranch:''};
        return function(_posKey,_abt){
            if(_abt){
                return {
                    'poskey':_abt.poskey||'',
                    'abtexp':_abt.abtexp||'',
                    'abtbranch':_abt.abtbranch||'',
                    'p':_abt.p||'',
                    'type':_abt.type||'',
                }
            }
            if(!_posKey){
                return ABTInfoEmpty;
            }
            if(_posKey == "refreshCookie"){//指令 刷新
                ABTCookie = '';
                ABTInfo = {};
                return;
            }
            if(!ABTCookie){
                //get cookie
                ABTCookie = ROMWE_W.getCookie('abt-info');
                if(!ABTCookie){
                    return ABTInfoEmpty;
                }
                //解析成 ABTInfo
                var ABTArray = ABTCookie.split('|');
                for(var i = 0;i<ABTArray.length;i++){
                    var item = ABTArray[i].split('~');
                    if(item.length>=3){//合法
                        ABTInfo[item[0]] = {
                            poskey : item[0],
                            abtexp : item[1],
                            abtbranch : item[2],
                            p: (item[4]||'').replace(/`/g,'|'),
                            type: item[3]||'',
                        }
                    }
                }
            }
            return ABTInfo[_posKey] ? ABTInfo[_posKey] : ABTInfoEmpty;
        }
    })();
    /*
    *price:沒有格式的本地价格
    *currencyTitle:币种 比如：'EUR', 'RUB', 'TRY', 'VND',传了可以不传currency
    *currency:货币对象，传了可以不传currencyTitle
    */
    var GB_transform_price_symbol = (function(){
        var formatConfig = {
            'USD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'EUR':{'decimalPlace':2,'decimalPoint':',','thousandPoint':'.'},
            'GBP':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'RUB':{'decimalPlace':0,'decimalPoint':'','thousandPoint':' '},
            'INR':{'decimalPlace':0,'decimalPoint':'','thousandPoint':','},
            'AUD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'MXN':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'TWD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'ILS':{'decimalPlace':0,'decimalPoint':'','thousandPoint':','},
            'HKD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'IDR':{'decimalPlace':0,'decimalPoint':'','thousandPoint':'.'},
            'THB':{'decimalPlace':0,'decimalPoint':'','thousandPoint':','},
            'VND':{'decimalPlace':0,'decimalPoint':'','thousandPoint':'.'},
            'TRY':{'decimalPlace':2,'decimalPoint':',','thousandPoint':'.'},
            'BRL':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'SAR':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'CAD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'CHF':{'decimalPlace':2,'decimalPoint':',','thousandPoint':'.'},
            'KWD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'AED':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'QAR':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'OMR':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'BHD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'CNY':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'JPY':{'decimalPlace':0,'decimalPoint':'','thousandPoint':','},
            'NOK':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'SEK':{'decimalPlace':0,'decimalPoint':'','thousandPoint':' '},
            'DKK':{'decimalPlace':2,'decimalPoint':',','thousandPoint':'.'},
            'PLN':{'decimalPlace':2,'decimalPoint':',','thousandPoint':'.'},
            'ARS':{'decimalPlace':0,'decimalPoint':'','thousandPoint':'.'},
            'SGD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'NZD':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':','},
            'default':{'decimalPlace':2,'decimalPoint':'.','thousandPoint':''},
        };
        return function(price,currencyTitle,currency){
            price = Number(price);
            if(isNaN(price)){
                return price;
            }
            if(!currency){
                //console.log('no currency')
                if(!currencyTitle){
                    //console.log('no currencyTitle')
                    currencyTitle = ROMWE_W.getCookie('currency') || ROMWE_W.getCookie('default_currency')||'USD';
                    if(!currencyTitle){
                        return price;
                    }
                }
                var currencies = {"USD":{"currency_id":"2","code":"USD","symbol_left":"$","symbol_right":"","decimal_place":"2","value":"1.00000000","date_modified":"2019-05-20 11:22:53","status":"0","default":"1","country_flag":"images2_rw/currency/USD.jpg","dec_point":".","thousands_sep":",","title":"US$"},"EUR":{"currency_id":"3","code":"EUR","symbol_left":"","symbol_right":"€","decimal_place":"2","value":"0.90090100","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/EUR.jpg","dec_point":",","thousands_sep":".","title":"€"},"GBP":{"currency_id":"1","code":"GBP","symbol_left":"£","symbol_right":"","decimal_place":"2","value":"0.79032600","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/GBP.jpg","dec_point":".","thousands_sep":",","title":"￡"},"CAD":{"currency_id":"10","code":"CAD","symbol_left":"CA$","symbol_right":"","decimal_place":"2","value":"1.35814200","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/CAD.jpg","dec_point":".","thousands_sep":",","title":"C$"},"BRL":{"currency_id":"21","code":"BRL","symbol_left":"R$","symbol_right":"","decimal_place":"2","value":"4.09910000","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/BRL.jpg","dec_point":",","thousands_sep":"","title":"R$"},"MXN":{"currency_id":"14","code":"MXN","symbol_left":"$MXN","symbol_right":"","decimal_place":"2","value":"19.30501900","date_modified":"2019-05-20 11:22:53","status":"0","default":"0","country_flag":"images2_rw/currency/MXN.jpg","dec_point":".","thousands_sep":",","title":"Mex.＄"}};
                currency = currencies[currencyTitle];
                if(!currency){
                    return price;
                }
            }else{
                if(currency.code){
                    currencyTitle = currency.code;//以currency里的货币为准，但没啥用
                }
            }
            //console.log('GB_transform_price_symbol:')
            //console.log(currency)
            var formatObj = {
                decimalPlace: typeof currency.decimal_place != 'undefined' &&  currency.decimal_place !==null  ? Number(currency.decimal_place) : 2,
                decimalPoint: typeof currency.dec_point != 'undefined' && currency.dec_point !==null ? currency.dec_point : '.',
                thousandPoint: typeof currency.thousands_sep != 'undefined' && currency.thousands_sep !==null ? currency.thousands_sep : '',
            }
            if(['VND','IDR'].indexOf(currencyTitle)>=0){
                price = (price/100).toFixed(0)*100;
            }
            price = price.toFixed(formatObj.decimalPlace);//保留位数
            var priceArr = price.toString().split('.');
            price = priceArr[0].split('');
            for(var i = 1;i<price.length-2;i++){
                if((price.length - i)%3 == 0){
                    price.splice(i,0,formatObj.thousandPoint);
                    i++;
                }
            }
            //拼接千分号
            price = price.join('')+(priceArr.length == 2 ? formatObj.decimalPoint+priceArr[1] : '');
            //拼接左右符号
            price = currency.symbol_left+price+currency.symbol_right;
            //console.log('GB_transform_price_symbol:'+currencyTitle+';'+price)
            return price
        }
    })();
    var gbExposeTraceid
    ;!function() {
        var traceidComponents = {}

        //购物流程 traceid 追踪
        gbExposeTraceid = function(type, payload) {
            try {
                var traceids = JSON.parse(sessionStorage.getItem('saTraceids'))
                if(!traceids) {
                    traceids = {}
                }
                var defaultTraceid = 'rpc`' + Date.now() + '`'+ (ROMWE_W.getCookie('cookieId') || '')
                var traceid =''
                if(type == 'setComponent') {
                    if(!traceidComponents[payload.componentName]) {
                        traceid = payload.traceid || defaultTraceid
                        if(payload.params){
                            traceid +='`'+payload.params
                        }
                        traceidComponents[payload.componentName] = traceid
                    }else{
                        traceid = traceidComponents[payload.componentName]
                    }
                } else if(type == 'getComponent') {
                    if(!traceidComponents[payload.componentName]){
                        traceidComponents[payload.componentName] = defaultTraceid
                    }
                    traceid = traceidComponents[payload.componentName]
                } else if(type == 'setProduct') {
                    traceid = payload.traceid || defaultTraceid
                    if(payload.params){
                        traceid +='`'+payload.params
                    }
                    traceids[payload.goods_id] = traceid
                } else if(type == 'getProduct') {
                    traceid = traceids[payload.goods_id]
                }
                sessionStorage.setItem('saTraceids', JSON.stringify(traceids))
                return traceid
            } catch (error) {
                console.log(error);
            }
        }
    }()
  
</script>

<!-- 快速注册弹框的背景图加载前置 -->

    
        <img style="display: none" src="//img.romwe.com/images2_rw/romwe.com/15553213012844587795.jpg">
    


<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NM88FN"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- 首页头部 -->
<header class="c-header" id="scroll-top-tag">
    
        <div class="j-config-top-banners">
            <template v-for="(itemData, index) in propData">
                <!-- 将j-act-anchor分离 方便index.html埋点时候取得banner -->
                <div class="j-act-anchor-no-use">
                    <a v-if="itemData.content.props.items[0].beginTime <= currentTime &amp;&amp; itemData.content.props.items[0].endTime >= currentTime &amp;&amp; !isTimeEndArray[index] || isPreview" class="j-config-top-banner config-top-banner config-active" @mouseenter="hanldeOverBanner(index)" @mouseleave="hanldeOutBanner(index)" :href="getImageItemUrl(itemData.content.props.items[0], index)" @click="clickBanner(index, itemData.content.props.items[0])">
                        <div class="config-wrap" :style="{background: 'transparent url(' + transformImg(itemData.content.props.items[0].imgSrc) + ') center 0px / 1920px 48px'}">
                            <div class="config-wrap-center">
                                <div class="count-time" v-if="itemData.content.props.items[0].timeOption !== '0'">
                                    <span v-if="timeArray[index]" class="number" :style="{color: itemData.content.props.items[0].timeNumColor}">{{timeArray[index].hour}}</span>
                                    <em v-if="timeArray[index]" class="text" :style="{color: itemData.content.props.items[0].timeTextColor}">H</em>
                                    <span v-if="timeArray[index]" class="number" :style="{color: itemData.content.props.items[0].timeNumColor}">{{timeArray[index].minute}}</span>
                                    <em v-if="timeArray[index]" class="text" :style="{color: itemData.content.props.items[0].timeTextColor}">M</em>
                                    <span v-if="timeArray[index]" class="number" :style="{color: itemData.content.props.items[0].timeNumColor}">{{timeArray[index].second}}</span>
                                    <em v-if="timeArray[index]" class="text" :style="{color: itemData.content.props.items[0].timeTextColor}">S</em>
                                </div>
                            </div>
                            <i class="iconfont icon-del" v-show="showDelArray[index]" @click="handleClose($event, index)"></i>
                        </div>
                    </a>
                </div>
            </template>
        </div>
    
    
        

<div class="c-header2 j-c-header2">
    <div class="c-header-fixed0 j-header-fixed header-height j-header-height">
        <div class="header-nav">
            <div class="container-header-fluid2 header-wrap j-header-wrap">
                <div class="header-logo">
                    <a href="https://us.romwe.com">
                        <img src="//romwe.ltwebstatic.com/rw_dist/images/romwe-logo-4567bd7ee6.png">
                    </a>
                </div>
                <div class="header-left">
                    
                    <div class="first-cate-ctn">
                        
                            <a title="GIRLS" class="j-nav-first-cate j-nav-first-cate-0 first-cate  cate-active" href="https://us.romwe.com/?&amp;ici=us_tab01" style="width: 50% " data-index="0" data-name="GIRLS" data-channel_type="2">
                                GIRLS
                            </a>
                        
                            <a title="GUYS" class="j-nav-first-cate j-nav-first-cate-1 first-cate " href="https://us.romwe.com/guys?icn=Guys-HomePage&amp;ici=us_tab02" style="width: 50% " data-index="1" data-name="GUYS" data-channel_type="3">
                                GUYS
                            </a>
                        
                    </div>
                    
                </div>
                <div class="header-right she-text-right">
                    <ul class="free-ship j-free-shipping"></ul>

<div class="header-right-dropdown-ctn">
    <a data-login="0" href="https://us.romwe.com/user/auth/login?direction=nav" class="j-ipad-prevent-a j-header-login">
        <i class="iconfont icon--gerenzhongxinx"></i>
        <span class="cart-num j-header-username">Sign in/Register</span>
    </a>
    <div class="header-right-dropdown user-dropdown j-head-member-info" :class="{'welcome': !isLogin}" v-cloak="">
        <template v-if="!isLogin">
            <ul class="other-login">
                <li class="login">
                    <a href="https://us.romwe.com/user/auth/login?direction=signinnav" data-id="login"><button class="rw-btn-red rw-btn-xs j-header-signinnav">Sign In</button></a>
                    <div class="custom-login">
                        <a href="https://us.romwe.com/user/auth/login?direction=fbnav" class="j-header-fbnav" data-id="login"><i class="iconfont icon-fb"></i></a>
                        <a href="https://us.romwe.com/user/auth/login?direction=googlenav" class="j-header-googlenav" data-id="login"><i class="iconfont icon-google-glass"></i></a>
                    </div>
                </li>
                <li class="register">
                    <a href="https://us.romwe.com/user/auth/login?direction=registernav" data-id="register"><button class="rw-btn-black rw-btn-xs j-header-registernav">Register</button></a>
                    <a href="https://us.romwe.com/user/auth/login?direction=nav" data-id="register"><p>GET 10% OFF!</p></a>
                </li>
            </ul>
            <ul class="dropdown-list">
                <li>
                    <i class="iconfont icon--myorderx1"></i>
                    <a href="https://us.romwe.com/user/orders/list" data-id="MyOrders">My Orders</a>
                </li>
                <li>
                    <i class="iconfont icon--myaccountx1"></i>
                    <a href="https://us.romwe.com/user/account_setting" data-id="MyAccount">My ACCOUNT</a>
                </li>
            </ul>
        </template>
        <template v-else="">
            <a class="member-coupons" href="https://us.romwe.com/user/coupon" data-id="MyCoupons">
                <i class="iconfont icon--couponx1"></i>
                <em>My Coupons</em>
                <span class="ticket-nopenum j-coupons-number rw-hide"></span>
            </a>
            <a href="https://us.romwe.com/user/points" data-id="MyPoints">
                <i class="iconfont icon--Romwepointx1"></i>
                <em>My Points</em>
            </a>
            <a href="https://us.romwe.com/user/orders/list" data-id="MyOrders">
                <i class="iconfont icon--myorderx1"></i>
                <em>My Orders</em>
            </a>
            <a href="https://us.romwe.com/user/account_setting" data-id="MyAccount">
                <i class="iconfont icon--myaccountx1"></i>
                <em>My ACCOUNT</em>
            </a>
            <a href="https://us.romwe.com/user/share_earn" data-id="shareEarn" class="j-operate-shareearn rw-hide">
                <i class="iconfont icon--ShareEarnx1"></i>
                <em>Share &amp; Earn</em>
            </a>
            <a class="member-ticket" href="https://us.romwe.com/user/tickets" data-id="MyTickets">
                <i class="iconfont icon--mysupportcebianlanx1"></i>
                <em>My Tickets</em>
                <span class="ticket-nopenum j-ticket-nopenum rw-hide"></span>
            </a>
            <a class="header-menu-signout" href="https://us.romwe.com/user/auth/logout" data-id="SignOut">
                <em>Sign Out</em>
            </a>
        </template>
    </div>
</div>

<div class="header-right-dropdown-ctn j-message-info">
    <a href="https://us.romwe.com/user/message">
        <i class="iconfont icon--zhanneixinx1"></i>
        <em class="cart-num she-v-cloak-display-none" v-cloak=""> {{ messageNum }} </em>
    </a>
</div>

<!-- 收藏夹 -->
<div class="header-right-dropdown-ctn j-wishlist-info">
    <a href="https://us.romwe.com/user/wishlist">
        <i class="iconfont icon--shoucangx"></i>
        <em class="cart-num she-v-cloak-display-none" v-cloak=""> {{ whislistNum }} </em>
    </a>
</div>

<!-- 购物车 -->
<div class="header-right-dropdown-ctn header-right-no-relative fast-cart-wrap j-bag-hover">
    <a class="j-ipad-prevent-a bag-box bag-add-num animated" href="https://us.romwe.com/cart">
        <i class="iconfont icon--bagx"></i>
        <span class="cart-num j-header-cart-num">0</span>
    </a>
    <!-- 有商品 -->
<div class="hbag-box j-hbag-box">
	<template v-if="info.carts.length">
		<!-- 优惠券提示语 -->
		<div class="cart-coupon" v-if="cartCouponsInfo">
			<div class="coupon-msg">
				<div class="rw-icon-tip">
					<div class="icon-font counpon-text" v-if="+info.totalPrice.amount < +cartCouponsInfo.min_order">
						<!-- 货币在前面的 -->
						<span v-if="cartCouponsInfo.currencyInfo.symbol_left">
							{{"Spend&nbsp;{0}&nbsp;more to get&nbsp;a coupon!".replace('{0}', cartCouponsInfo.currencyInfo.symbol_left + (cartCouponsInfo.min_order - info.totalPrice.amount).toFixed(2))}}
						</span>
						<!-- 货币在后面的 -->
						<span v-if="cartCouponsInfo.currencyInfo.symbol_right">
							{{"Spend&nbsp;{0}&nbsp;more to get&nbsp;a coupon!".replace('{0}', (cartCouponsInfo.min_order - info.totalPrice.amount).toFixed(2) + cartCouponsInfo.currencyInfo.symbol_right)}}
						</span>
					</div>	
					<div class="icon-font counpon-text" v-else="">You've got a coupon</div>
					<em class="tip-bottom-right coupon-content">
						<div class="coupon-code-row" v-if="+info.totalPrice.amount >= +cartCouponsInfo.min_order">CODE: <span class="couponCode">{{cartCouponsInfo.coupon}}</span></div>
						<!-- 展示现金或者折扣百分比的 -->	
						<div class="cash-or-discount iconfont" v-if="cartCouponsInfo.is_member_free_ship_coupon == 0 &amp;&amp; cartCouponsInfo.is_free_ship_coupon == 0">
							<!-- 为1是现金,2,5是折扣 -->
							<div class="coupon-cash" v-if="cartCouponsInfo.coupon_type_id == 1">
								{{"{0} Off Order of {1}+".replace('{1}', cartCouponsInfo.range_list[0].min_order_symbol).replace('{0}', cartCouponsInfo.range_list[0].price_symbol)}}
							</div>
							<div class="coupon-discount" v-if="cartCouponsInfo.coupon_type_id == 2 || cartCouponsInfo.coupon_type_id == 5">
								{{"Extra {0} Off Order of {1}+".replace('{1}', cartCouponsInfo.range_list[0].min_order_symbol).replace('{0}', cartCouponsInfo.range_list[0].price_symbol)}}
							</div>
						</div>
						<!-- 展示免邮的 -->
						<div class="free-delivery" v-else="">
							{{"Free Shipping on an Order of {0}+".replace('{0}', cartCouponsInfo.range_list[0].min_order_symbol)}}
						</div>
					</em>
				</div>
			</div>
		</div>
        <!--买赠-->
        <!--
		<div class="free-gift" v-show="buyGift">
			<i class="iconfont icon-gift1"></i>
			<a href='/cart'>Click here </a>to get one free gift
		</div>
		-->
		<p class="cart-title rw-hidden">{{ ROMWE_W.template(info.carts.length, '{0} items in Bag') }}:</p>

		<goods-list :info="info" :range-list="rangeList" @delete="handleDel" @quantity="handleQuantity"></goods-list>

		<div class="full-gift-money-tip" v-if="!!full_gifts_tips">
			<i class="iconfont icon-romwe-free-new"></i>
			<span class="tip-letter" v-html="full_gifts_tips"></span>
		</div>
		<template v-if="shipShow">
			<p class="free-tip" v-html="title"></p>
			<!-- <p class="free-tip" v-if="price.amountWithSymbol" v-html="ROMWE_W.template(price.amountWithSymbol, title, 'Add &lt;strong&gt;{0}&lt;/strong&gt; of items to enjoy FREE {1}.')"></p>
			<p class="free-tip" v-else>YAY!Your order shipping Free!</p> -->
		</template>

		<div class="sub-price">
			<div class="retail rw-clearfix">
				<span class="rw-fl">Retail Price:</span>
				<span class="rw-fr">{{info.originPrice.amountWithSymbol}}</span>
			</div>
			<div class="subtotal rw-clearfix">
				<span class="rw-fl">Sub Total:</span>
				<span class="rw-fr">{{info.totalPrice.amountWithSymbol}}</span>
			</div>

			
		</div>
		<div class="operate-btn">
			
				<a href="javascript:;" class="rw-btn-red rw-btn-block j-checkout" @click="handleCheckLogin">CHECKOUT</a>
			
				<!--<a href="https://us.romwe.com/checkout/place_order" class="rw-btn-red rw-btn-block">CHECKOUT</a>-->
			
			<a href="https://us.romwe.com/cart" class="bag-link j-bag-link">View my bag</a>
			<span class="full-gift-tip" v-show="fullGift">Find free gift</span>
		</div>

	</template>

	<template v-else="">
		<div class="hbag-empty">
			<img src="//romwe.ltwebstatic.com/rw_dist/images/bag_empty-8974e80881.png">
			<p class="empty-des">Your bag is empty!</p>
		</div>
	</template>

	<add-buys :opt="info" ref="addBuys" @toparents="updateCom"></add-buys>
</div>

<script type="text/x-template" id="goods-list-template">
    <ul class="cart-list">
		<li :class="['c-addbag', {'first-item': false}, {'bag-normal': item.sortType == 'normal'}, {'bag-title': item.sortPromotion%100 == 0}, {'bag-no-normal': item.sortType != 'normal'}, 'rw-clearfix']"  :data-sku="item.product.goods_sn" :data-spu="item.product.productRelationID" v-for="(item, index) in info.carts">

			<promotion-tpl :item="item" :position="'title'" :page="'bag'" :range-list="rangeList"></promotion-tpl>
			
			<div class="item-left rw-fl">
				<img :src="transformImg(item.product.goods_img)">

                <div :class="['sold-out-mask', 'sold-out', 'rw-hidden', 'j-sold-out-' + item.id]">
					<div class="sold-out-inner">
						<i class="iconfont icon--Soldoutx"></i>
						<p>Sold Out</p>
					</div>
                </div>

                <div :class="['sold-out-mask', 'out-of-stock', {'rw-hidden': !out_stock[item.id]}]">
					<div class="sold-out-inner">
						<i class="iconfont icon--Soldoutx"></i>
						<p>Sold Out</p>
					</div>
                    <!-- <span>out of stock</span> -->
                </div>

				<div :class="['sold-out-mask', 'out-of-stock', {'rw-hidden': !limit_qty[item.id]}]">
					<div class="sold-out-inner">
						<p>limit quantity</p>
					</div>
                </div>

			</div>
			<div class="item-right rw-fl">
				<p class="good-name rw-text-overflow"><a :href="getGoodsUrl(item.product.goods_url_name, item.product.goods_id, item.product.cat_id)" target="_blank">{{item.product.goods_name}}</a></p>
				<p class="good-price">
					<!-- 已废弃 -->
<!-- 闪购 -->
<i class="svg-icon svg-flashsale" v-show="item.currentIds['10']"></i>
<!-- 限时折扣 -->
<i class="svg-icon svg-limited" v-show="item.currentIds['3']"></i>
<!-- 手机专享 -->
<i class="svg-icon svg-apponly" v-show="item.currentIds['8']"></i>

					<span class="p-dis" :class="{'c-font-red': item.isRedGift == 1 && item.unitPrice.amountWithSymbol !== item.product.retailPrice.amountWithSymbol}" >
						{{item.unitPrice.amountWithSymbol}}
					</span>
					<template v-if="item.product.unit_discount != 0">
						<del>{{item.product.retailPrice.amountWithSymbol}}</del>
					</template>
				</p>

				<promotion-tpl :item="item" :page="'bag'"></promotion-tpl>

				<p class="d-item good-size" v-if="item.goodsAttr">
					<span class="key">Size:</span>
					<span class="val">{{item.goodsAttr | goodsize}}</span>
					<template v-if="item.attr_value_location">
						<template v-for="locationsize in item.attr_value_location.size_rule_list">
							<span class="key" v-if="locationsize.name == item.attr_value_en">({{locationsize.correspond	}})</span>
						</template>
					</template>
				</p>
				<p class="d-item good-color" v-if="item.product.color_image" style="display: none;">
					<span class="key">Color:</span>
					<span class="val">
                        <img :src="transformImg(item.product.color_image)">
                    </span>
				</p>
				<p class="rw-clearfix">
					<span class="good-qty">
						<div class="c-opt-qty qty-xs">
							<template v-if="item.active_type == 3">
								<span>{{item.quantity}}</span>
							</template>
							<template v-else>
								<span :class="['opt-qty-span', 'iconfont', 'icon-minus', {'disabled': item.quantity == 1}]" @click="handleQuantity(index, 'reduce', $event)"></span>
								<input class="opt-qty-input" type="text" name="qty" :value="item.quantity" min="1" @blur="handleQuantity(index, 'change', $event)" />
								<span class="opt-qty-span iconfont icon-plus" @click="handleQuantity(index, 'increase', $event)"></span>
							</template>
						</div>
					</span>
					<span class="good-total">
						<span class="key">Total :</span>
						<span class="val">{{item.totalPrice.amountWithSymbol}}</span>
					</span>
				</p>
			</div>
			<div class="good-delete" @click="handleDel(item.id)">
				<i class="iconfont icon-delete"></i>
			</div>
			<div class="goods-footer-tips item-left rw-fl" v-if="item.return_flag && item.return_flag != 0">
				<i class="iconfont icon-tishi"></i>
				<span>Final sales can&#39;t be returned.</span>
			</div>
		</li>
	</ul>
</script>

</div>


<!-- 客服 -->
<div class="header-right-dropdown-ctn header-right-no-relative header-right-no-relative j-customer-show-header" style="display: none;">
    <a href="javascript:;" class="header-help">
        <i class="iconfont icon--kefux"></i>
    </a>
    <div class="header-right-dropdown">
        
        <ul class="menu-help j-customer-vue">
            <template v-for="item in bannerNav">
                <li v-if="item._selected">
                    <div class="help-title">
                        <a href="javascript:;" class="online j-online-help" :class="{'dis-active': !departmentStatusRetrieved}" v-if="item.type == 'online' " @click="addDepartment">
                            <i class="iconfont icon--mysupportcebianlanx1"></i><em v-if="offLine">{{item.data.offline.title}}</em><em v-else="">{{item.data.title}}</em>
                        </a>
                        <a href="https://us.romwe.com/user/tickets/submit-ticket" class="sub-ticket j-sub-ticket" v-if="item.type === 'ticket' ">
                            <i class="iconfont icon--submitaticketx"></i><em>{{item.data.title}}</em>
                            <span class="j-ticket-nopenum rw-hide"></span>
                        </a>
                        <a class="sub-ticket j-sub-faq" target="_blank" href="https://us.romwe.com/faq/index" v-if="item.type == 'selfhelp' ">
                            <i class="iconfont icon--faqx"></i><em>{{item.data.title}}</em>
                        </a>
                        <a class="sub-ticket" href="mailto:947362214@qq.com" v-if="item.type === 'email' ">
                            <i class="iconfont icon-romwe_Email"></i><em>{{item.data.title}}</em>
                        </a>
                        <a class="sub-ticket" v-if="item.type === 'phone' ">
                            <i class="iconfont icon-romwe_CALL"></i><em>{{item.data.title}}</em>
                        </a>
                         <a class="sub-ticket" v-if="item.type === 'bothub' " target="_blank" href="javascript:;" @click="bothubGa">
                            <i class="iconfont icon--mymessagex" style="color: #333333 !important;font-weight: 400;"></i><em>{{item.data.title}}</em>
                        </a>
                    </div>
                    <span class="customer-span">
                        <template v-if="offLine &amp;&amp; item.type === 'online'">
                            {{item.data.offline.desc}}
                        </template>
                        <template v-else="">
                            {{item.data.desc}}
                        </template>
                    </span>
                </li>
            </template>
        </ul>
    </div>
</div>

<!-- 语言&货币 -->
<div class="header-right-dropdown-ctn header-right-no-relative j-global-dd-wrap">
    <a href="javascript:;">
        <i class="iconfont icon--yuyan"></i>
    </a>
    <div class="c-header-dropdown global-dropdown j-header-location-dropdown">

        <div class="global-title">
            Location
        </div>
        <div class="global-s-drop-ctn j-global-s-drop-ctn j-global-s-drop-ctn-1">
            <span class="j-cur-country-sim">
                
            </span>
            <i class="iconfont icon--downx1"></i>
            <ul class="global-s-drop j-global-s-drop j-global-s-drop-1 j-header-country-ctn" style="display: none">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-AR" data-country="Argentina" data-country-sim="AR" data-host="www.romwe.com">
                            Argentina
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                        <li class="j-change-country j-country-AU" data-country="Australia" data-country-sim="AU" data-host="au.romwe.com" data-lang="au">
                            Australia
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-BH" data-country="Bahrain" data-country-sim="BH" data-host="ar.romwe.com" data-lang="ar">
                            Bahrain
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-CA" data-country="Canada" data-country-sim="CA" data-host="ca.romwe.com" data-lang="ca">
                            Canada
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-FR" data-country="France" data-country-sim="FR" data-host="fr.romwe.com" data-lang="fr">
                            France
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-DE" data-country="Germany" data-country-sim="DE" data-host="de.romwe.com" data-lang="de">
                            Germany
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-IN" data-country="India" data-country-sim="IN" data-host="www.romwe.co.in" data-lang="in">
                            India
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-IT" data-country="Italy" data-country-sim="IT" data-host="it.romwe.com" data-lang="it">
                            Italy
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-KW" data-country="Kuwait" data-country-sim="KW" data-host="ar.romwe.com" data-lang="ar">
                            Kuwait
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-MX" data-country="Mexico" data-country-sim="MX" data-host="mx.romwe.com" data-lang="mx">
                            Mexico
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-OM" data-country="Oman" data-country-sim="OM" data-host="ar.romwe.com" data-lang="ar">
                            Oman
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-QA" data-country="Qatar" data-country-sim="QA" data-host="ar.romwe.com" data-lang="ar">
                            Qatar
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-SA" data-country="Saudi Arabia" data-country-sim="SA" data-host="ar.romwe.com" data-lang="ar">
                            Saudi Arabia
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-ES" data-country="Spain" data-country-sim="ES" data-host="es.romwe.com" data-lang="es">
                            Spain
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li class="j-change-country j-country-AE" data-country="United Arab Emirates" data-country-sim="AE" data-host="ar.romwe.com" data-lang="ar">
                            United Arab Emirates
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                        <li class="j-change-country j-country-GB" data-country="United Kingdom" data-country-sim="GB" data-host="uk.romwe.com" data-lang="uk">
                            United Kingdom
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                        <li class="j-change-country j-country-US" data-country="United States" data-country-sim="US" data-host="us.romwe.com" data-lang="us">
                            United States
                            <i class="iconfont icon-check"></i>
                        </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </div>

        
        <div class="global-title">
            Currency
        </div>
        <div class="global-s-drop-ctn j-global-s-drop-ctn j-global-s-drop-ctn-2">
            <span class="flag-img j-flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/USD.jpg)"></span>
            <span class="j-currency-title">
                USD
            </span>
            <i class="iconfont icon--downx1"></i>
            <ul class="global-s-drop j-global-s-drop j-global-s-drop-2 j-header-currencies-ctn" style="display: none">
                
                    <li class="j-change-currency j-change-currency-USD active" data-currency="USD">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/USD.jpg)"></div>
                        <span>USD</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
                    <li class="j-change-currency j-change-currency-EUR " data-currency="EUR">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/EUR.jpg)"></div>
                        <span>EUR</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
                    <li class="j-change-currency j-change-currency-GBP " data-currency="GBP">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/GBP.jpg)"></div>
                        <span>GBP</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
                    <li class="j-change-currency j-change-currency-CAD " data-currency="CAD">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/CAD.jpg)"></div>
                        <span>CAD</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
                    <li class="j-change-currency j-change-currency-BRL " data-currency="BRL">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/BRL.jpg)"></div>
                        <span>BRL</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
                    <li class="j-change-currency j-change-currency-MXN " data-currency="MXN">
                        <div class="flag-img" style="background-image: url(//img.romwe.com/images2_rw/currency/MXN.jpg)"></div>
                        <span>MXN</span>
                        <i class="iconfont icon-check"></i>
                    </li>
                
            </ul>
        </div>

        
        <div class="global-international">
            <a href="javascript:;" id="txt_lang" class="j-header-to-www-site">International Site</a>
        </div>
        
    </div>
</div>

                </div>
            </div>
            <div class="c-nav2">
                
                <div class="nav2-ctn j-nav2-ctn j-nav2-ctn-0" style="display: table-cell;">
                    <div class="nav2-ctn2">
                    <div class="nav2-ctn3">
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child0 ">
                        <a title="New" style="color: ;" href="https://us.romwe.com/daily-new.html?icn=dailynew&amp;ici=us_tab01navbar01" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">New</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child1 ">
                        <a title="Clothing" style="color: ;" href="https://us.romwe.com/Clothing-c-914.html?&amp;ici=us_tab01navbar02" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Clothing</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child2 ">
                        <a title="Swimwears" style="color: ;" href="https://us.romwe.com/Beachwear-c-918.html?&amp;ici=us_tab01navbar03" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Swimwears</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child3 ">
                        <a title="Denim" style="color: ;" href="https://us.romwe.com/Denim-c-809.html?&amp;ici=us_tab01navbar04" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Denim</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child4 ">
                        <a title="Intimates &amp; Sleepwears" style="color: ;" href="https://us.romwe.com/Lingerie---Loungewear-c-917.html?&amp;ici=us_tab01navbar05" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Intimates &amp; Sleepwears</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child5 ">
                        <a title="Shoes &amp; ACC" style="color: ;" href="https://us.romwe.com/category/Shoes-Bags-ACC-sc-00801015.html?&amp;ici=us_tab01navbar06" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Shoes &amp; ACC</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab0child6 ">
                        <a title="Sale" style="color: ;" href="javascript:;" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Sale</span>
                            
                        </a>
                    </div>
                    
                    </div>
                    </div>
                </div>
                
                <div class="nav2-ctn j-nav2-ctn j-nav2-ctn-1" style="display: none;">
                    <div class="nav2-ctn2">
                    <div class="nav2-ctn3">
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab1child0 ">
                        <a title="New" style="color: ;" href="https://us.romwe.com/New-in-Men-vc-38986.html?&amp;ici=us_tab02navbar01" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">New</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab1child1 ">
                        <a title="Clothing" style="color: ;" href="https://us.romwe.com/Men-Clothing-c-848.html?&amp;ici=us_tab02navbar02" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Clothing</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab1child2 ">
                        <a title="Shoes &amp; Accessories" style="color: ;" href="https://us.romwe.com/category/Guys--Accessories--Shoes-sc-00801139.html?&amp;ici=us_tab02navbar03" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Shoes &amp; Accessories</span>
                            
                        </a>
                    </div>
                    
                    <div class="nav2-sec-ctn j-nav2-sec-ctn j-sa-nav2-sec-ctn j-nav2-render-tab1child3 ">
                        <a title="Sale" style="color: ;" href="https://us.romwe.com/Men-all-on-sale-vc-40934.html?&amp;ici=us_tab02navbar04" class="  j-ipad-prevent-a j-category-title cate-sec ">
                            <span class="cate-sec-in j-cate-sec-in">Sale</span>
                            
                        </a>
                    </div>
                    
                    </div>
                    </div>
                </div>
                
                <div class="nav-arrow-ctn j-nav-arrow-ctn" style="display: none;">
                    <i class="iconfont icon-arrownew-right j-nav-arrow-prev"></i>
                    <i class="iconfont icon-arrownew-left j-nav-arrow-next"></i>
                </div>
                <div class="search-ctn">
                    <div class="j-header-search-container rw-hide"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="header-mask j-header-mask"></div>
</div>

<script>
    (function() {
        var setCookie = function(name, val, expires, domain) {
            /*setCookie start*/
            var __CurrentMainDomain__ = (function() {
                var hostnameArray = location.hostname.split('.')
                return '.' + hostnameArray.slice(-2).join('.')
            })()

            //domain = domain || __CurrentMainDomain__;
            var text = String(encodeURIComponent(val))
            var date = new Date()
            date.setTime(date.getTime() + Number(expires) * 1000)
            text += '; expires=' + date.toUTCString()
            // domain
            text += '; path=/'
            if (typeof domain != 'undefined' && domain != '') {
                text += '; domain=' + __CurrentMainDomain__
            }

            document.cookie = name + '=' + text
        }
        var getCookie = function(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) {
                return decodeURIComponent(parts.pop().split(";").shift())
            } else {
                return undefined;
            }
        }
        if (location.pathname == '/') {
            setCookie('cate_active_name', 0, 3600 * 24 * 30)
            setCookie('cate_channel_type', $('.j-nav-first-cate-0').data('channel_type'), 3600 * 24 * 30)
        }
        var cate_active_name = getCookie('cate_active_name')
        if (cate_active_name && document.querySelector('.j-nav-first-cate-' + cate_active_name) && document.querySelector('.j-nav2-ctn-' + cate_active_name)) {
            document.querySelector('.j-nav-first-cate-' + cate_active_name).className += ' cate-active'
            document.querySelector('.j-nav2-ctn-' + cate_active_name).style.display = 'table-cell'
        } else if (document.querySelector('.j-nav-first-cate-0') && document.querySelector('.j-nav2-ctn-0')) {
            document.querySelector('.j-nav-first-cate-0').className += ' cate-active'
            document.querySelector('.j-nav2-ctn-0').style.display = 'table-cell'
        }
    })()
</script>

    
</header>


<div class="container-fluid-1420">
  <div class="c-article col-md-10 col-xs-10 col-sm-10 col-md-offset-1 col-sm-offset-1">
    <ul class="c-breadcrumb">
		    <li>
		        <a href="https://us.romwe.com">Home</a>
		    </li>
		    <li>
		        Privacy &amp; Cookie Statement
		    </li>
		</ul>
    <h3>Privacy &amp; Cookie Statement</h3>
    <div><p><style type="text/css">
.ps-content{text-align:left; line-height:24px; clear:both; font-size: 14px;}
.ps-big{ font-size:18px; font-weight:700; color:#000; text-decoration:underline;}
.ps-big0{ font-size:16px; font-weight:700; color:#000; line-height:40px;}
.ps-new{font-size:16px; font-weight:700; color:#000; line-height:40px;}
.ps-big a{ text-decoration:none; color:#000;}
.ps-big a:hover{ text-decoration:underline; color:#d10000;}
.ps-list li, .ps-list1 li{ list-style:disc; margin-left:4%;}
.ps-list1{ line-height:30px; color:#000; }
.ps-list a{ text-decoration:none; color:#000;}
.ps-list a:hover{ text-decoration:underline; color:#d10000;}
#ps-t1{ margin-top:20px;}
#ps-t2, #ps-t3, #ps-t4, #ps-t5, #ps-t6, #ps-t7, #ps-t8, #ps-t9, #ps-t10, #ps-t11{ clear:both; padding-top:20px;}
.ps-ud{text-decoration:underline; color:#000; font-weight:700;}
.ps-ic{float:left; width:1%; margin-left:2%; margin-top:3px;}
.ps-ti{float:left; text-align:left; width:96%; margin-left:1%; margin-bottom:20px;}
.ps-note{ color:#d10000;}
</style></p>
<div class="ps-content">
<div class="ps-big"><a href="#ps-bigti1">PRIVACY STATEMENT</a><br>
<a href="#ps-bigti2">COOKIE STATEMENT</a></div>
<p>Click on the lined words above to go to a specific statement.</p>
<p>&nbsp;</p>
<div id="ps-bigti1">
<div class="ps-big0">1.PRIVACY STATEMENT</div>
<p><strong>Last Modified:</strong>&nbsp;[April 26th, 2018]</p>
<p>This Privacy Statement explains how ZoeTop Business Co., Limited (collectively, "Romwe," "we," "us," or "our") collect, use, share and process your information.</p>
<p>&nbsp;</p>
<div class="ps-new">Quick Links</div>
<p>Click on the links below to go to a specific section of this Privacy Statement.</p>
<p>&nbsp;</p>
<ul class="ps-list">
    <li><a href="#ps-t1"><strong>Collection and Use of Personal Data</strong></a></li>
    <li><a href="#ps-t2"><strong>Cookies and Similar Technologies</strong></a></li>
    <li><a href="#ps-t3"><strong>Disclosure of Personal Data</strong></a></li>
    <li><a href="#ps-t4"><strong>Your Rights</strong></a></li>
    <li><a href="#ps-t5"><strong>Closing Accounts</strong></a></li>
    <li><a href="#ps-t6"><strong>Third-Party Websites and Services</strong></a></li>
    <li><a href="#ps-t7"><strong>Data Security, Integrity, and Retention</strong></a></li>
    <li><a href="#ps-t8"><strong>Children</strong></a></li>
    <li><a href="#ps-t9"><strong>Data Transfers, Storage, and Processing Globally</strong></a></li>
    <li><a href="#ps-t10"><strong>Changes to This Privacy Statement</strong></a></li>
    <li><a href="#ps-t11"><strong>Contact Us</strong></a></li>
</ul>
<p>&nbsp;</p>
<div id="ps-t1">
<div class="ps-new">1.1 Collection and Use of Personal Data</div>
<p>Personal data is information that can be used to directly or indirectly identify you.  Personal data also includes anonymous data that is linked to information that can be used to directly or indirectly identify you.  Personal data does not include data that has been irreversibly anonymized or aggregated so that it can no longer enable us, whether in combination with other information or otherwise, to identify you.<br>
<br>
Here is a description of the types of personal data we may collect and how we may use it:<br>
<br>
<span class="ps-ud">1.1.1 What Personal Data We Collect </span><br>
<br>
Depending on the products and services you use, we collect different kinds of personal data from or about you.</p>
<ul class="ps-list">
    <li><strong>Data you provide:</strong>  We collect the personal data you provide when you use our products and services or otherwise interact with us, such as when you create an account, <a href="#ps-t11" style=" text-decoration:underline;">Contact Us</a>, participate in an online survey, use our online help or online chat tool.</li>
    <li><strong>Data about payments:</strong>  If you make a purchase, we collect personal data in connection with the purchase.  This data includes your payment data, such as your credit or debit card number and other card information, and other account and authentication information, as well as billing, shipping, and contact details.</li>
    <li><strong>Data about use of our services and products:</strong> When you visit our websites, we may collect data about the type of device you use, your device's unique identifier, the IP address of your device, your operating system, the type of Internet browser that you use, usage information, diagnostic information, and location information from or about the computers, phones, or other devices on which you install or access our products or services.  Where available, our services may use GPS, your IP address, and other technologies to determine a device's approximate location to allow us to improve our products and services.</li>
</ul>
<p><span class="ps-ud">1.1.2 How We Use Your Personal Data</span><br>
<br>
Generally speaking, we use personal data to provide, improve, and develop our products and services, to communicate with you, to offer you targeted advertisements and services, and to protect us and our customers.<br>
<br>
ZoeTop Business Co., Limited, processes and determines how to process your personal data as data controller for the following purposes:</p>
<p>&nbsp;</p>
<ul class="ps-list">
    <li><strong>Providing, improving, and developing our products and services:</strong>  We use personal data to help us provide, improve, and develop our products, services, and advertising.  This includes using personal data for purposes such as data analysis, research, and audits. Such processing is based on our legitimate interest in offering you products and services and for business continuity.  If you enter a contest, or other promotion, we may use the personal data you provide to administer those programs.  Some of these activities have additional rules, which may contain further data about how we use personal data, so we encourage you to read those rules carefully before participating.</li>
    <li><strong>Communicating with you:</strong>  Subject to your prior express consent, we may use personal data to send you marketing communications in relation to Romwe own products and services, communicate with you about your account or transactions, and inform you about our policies and terms.  If you no longer wish to receive email communications for marketing purposes, please Contact Us to opt-out.  We also may use your data to process and respond to your requests when you <a href="#ps-t11" style=" text-decoration:underline;">contact us</a>.  Subject to your prior express consent, we may share your personal data with third party partners who may send you marketing communications in relation to their products and services.</li>
    <li><strong>Offering and measuring targeted advertisements and services:</strong>  Subject to your prior express consent, we may use personal data to personalize your experience with our products and services and on third-party websites and applications and to determine the effectiveness of our promotional campaigns.<br>
    <br>
    <span class="ps-note"><strong>NOTE:</strong></span> For any of the uses of your data described above that require your prior express consent, note that you may withdraw your consent by <a href="#ps-t11" style=" text-decoration:underline;">contacting ZoeTop Business Co., Limited</a>.</li>
    <li><strong>Promoting safety and security:</strong>  We use personal data to help verify accounts and user activity, as well as to promote safety and security, such as by monitoring fraud and investigating suspicious or potentially illegal activity or violations of our terms or policies. Such processing is based on our legitimate interest in helping ensure the safety of our products and services.</li>
</ul>
<div id="ps-t2">
<div class="ps-new">1.2 Cookies and Similar Technologies</div>
<p>We use cookies and similar technologies to provide, protect, and improve our products and services, such as by personalizing content, offering and measuring advertisements, understanding user behavior, and providing a safer experience. <br>
<br>
You can remove or reject cookies using your browser or device settings, but in some cases doing so may affect your ability to use our products and services.<br>
<br>
Please read our <a href="#ps-bigti2" style=" text-decoration:underline;">Cookie Statement</a> to learn more about how we use cookies and the choices you have.</p>
</div>
<div id="ps-t3">
<div class="ps-new">1.3 Disclosure of Personal Data</div>
<p>We make certain personal data available to strategic partners that work with us to provide our products and services or help us market to customers.  Personal data will only be shared by us with these companies in order to provide or improve our products, services, and advertising; it will not be shared with third parties for their own marketing purposes without your prior express consent.<br>
<br>
<span class="ps-ud">1.3.1 Service Providers</span><br>
<br>
We share personal data with companies that provide services on our behalf, such as website hosting, email services, marketing, sponsoring of sweepstakes, contests, and other promotions, auditing, fulfilling customer orders, data analytics, providing customer service, and conducting customer research and satisfaction surveys.  These companies are obligated to protect your data and may be located wherever we operate.<br>
<br>
<span class="ps-ud">1.3.2 Corporate Affiliates and Corporate Business Transactions</span><br>
<br>
We may share personal data with all ZoeTop Business Co., Limited-affiliated companies.  In the event of a merger, reorganization, acquisition, joint venture, assignment, spin-off, transfer, or sale or disposition of all or any portion of our business, including in connection with any bankruptcy or similar proceedings, we may transfer any and all personal data to the relevant third party.  <br>
<br>
<span class="ps-ud">1.3.3 Legal Compliance and Security</span><br>
<br>
It may be necessary—by law, legal process, litigation, and/or requests from public and governmental authorities within or outside your country of residence—for us to disclose personal data.  We may also disclose personal data if we determine that for purposes of national security, law enforcement, or other issues of public importance, disclosure is necessary or appropriate.<br>
<br>
We may also disclose personal data if we determine in good faith that disclosure is reasonably necessary to protect our rights and pursue available remedies, enforce our terms and conditions, investigate fraud, or protect our operations or users.<br>
<br>
<span class="ps-ud">1.3.4 Legal Basis For The Processing of Personal Data from EEA Residents</span><br>
<br>
It may be necessary—by law, legal process, litigation, and/or requests from public and governmental authorities within or outside your country of residence—for us to disclose personal data.  We may also disclose personal data if we determine that for purposes of national security, law enforcement, or other issues of public importance, disclosure is necessary or appropriate.<br>
<br>
If you reside within the European Economic Area (EEA), our processing of your personal data will be legitimized as follows: Whenever we require your consent for the processing of your personal data such processing will be justified pursuant to Article 6(1) lit. (a) of the General Data Protection Regulation (EU) 2016/679 ("GDPR"). If the processing of your personal data is necessary for the performance of a contract between you and us or for taking any pre-contractual steps upon your request, such processing will be based on GDPR Article 6(1) lit. (b). Where the processing is necessary for us to comply with a legal obligation, we will process your data on basis of GDPR Article 6(1) lit. (c), and where the processing is necessary for the purposes of our legitimate interests, such processing will be made in accordance with GDPR Article 6(1) lit. (f).</p>
</div>
<div id="ps-t4">
<div class="ps-new">1.4 Your Rights</div>
<p>We take reasonable steps to ensure that your personal data is accurate, complete, and up to date.  You have the right to access, correct, or delete the personal data that we collect.  You are also entitled to restrict or object, at any time, to the further processing of your personal data.  You have the right to receive your personal data in a structured and standard format.  You may lodge a complaint with the competent data protection authority regarding the processing of your personal data. <br>
<br>
To protect the privacy and the security of your personal data, we may request data from you to enable us to confirm your identity and right to access such data, as well as to search for and provide you with the personal data we maintain.  There are instances where applicable laws or regulatory requirements allow or require us to refuse to provide or delete some or all of the personal data that we maintain.<br>
<br>
You may <a href="#ps-t11" style=" text-decoration:underline;">Contact Us</a> to exercise your rights.  We will respond to your request in a reasonable timeframe, and in any event in less than 30 days.</p>
</div>
<div id="ps-t5">
<div class="ps-new">1.5 Closing Accounts</div>
<p>Please <a href="#ps-t11" style=" text-decoration:underline;">contact Romwe</a> to close your account in relation to the following uses of your personal data:</p>
<ul class="ps-list1">
    <li>providing, improving, and developing our products and services;</li>
    <li>communicating with you;</li>
    <li>sharing your personal data with third party partners for marketing communications;</li>
    <li>offering and measuring targeted advertisements and services; or</li>
    <li>promoting safety and security.</li>
</ul>
Please <a href="#ps-t11" style=" text-decoration:underline;">contact Romwe</a> to close your account in relation to the use of your personal data for the provision of products and services you requested.<br>
<br>
If you close your account, we have no obligation to retain your data, and we may delete any or all of your data without liability.  However, we may retain data related to you if we believe it may be necessary to prevent fraud or future abuse, if required by law, or for legitimate purposes, such as analysis of non-personal data, account recovery, auditing our records, and enforcing our rights and obligations under our agreements.
<p>&nbsp;</p>
</div>
<div id="ps-t6">
<div class="ps-new">1.6 Third-Party Websites and Services</div>
<p>Our websites, products, and services may contain links to or the ability for you to access third-party websites, products, and services.  We are not responsible for the privacy practices employed by those third parties, nor are we responsible for the information or content their products and services contain.  This Privacy Statement applies solely to data collected by us through our products and services.  We encourage you to read the privacy policies of any third party before proceeding to use their websites, products, or services.</p>
</div>
<div id="ps-t7">
<div class="ps-new">1.7 Data Security, Integrity, and Retention</div>
<p>We use reasonable technical, administrative, and physical security measures designed to safeguard and help prevent unauthorized access to your data, and to correctly use the data we collect.  For example, access to your personal data is restricted to our employees, contractors, and agents who need access to such data to perform their assigned job duties.<br>
<br>
It is important that you take precautions to protect against unauthorized access to your Romwe products, account credentials, and computer or other devices.  If you feel that the security of your account or personal data has been compromised, please immediately <a href="#ps-t11" style=" text-decoration:underline;">Contact Us</a>.  Please be aware that, despite our best efforts, no security system is impenetrable.  In the event of a security breach, we will promptly notify you and the proper authorities if required by law. <br>
<br>
We will retain your personal data for as long as it is necessary to fulfill the purposes outlined in this Privacy Statement, unless a longer retention period is required or permitted by law.</p>
</div>
<div id="ps-t8">
<div class="ps-new">1.8 Children</div>
<p>Our products and services are intended for adults.  Accordingly, we do not knowingly collect, use, or disclose data from children under 16.  If we learn that we have collected the personal data of a child under 16, or the equivalent minimum age depending on the jurisdiction,  we will take steps to delete the data as soon as possible.  Please immediately <a href="#ps-t11" style=" text-decoration:underline;">Contact Us</a> if you become aware that a child under 16 has provided us with personal data.</p>
</div>
<div id="ps-t9">
<div class="ps-new">1.9 Data Transfers, Storage, and Processing Globally</div>
<p>When we share your personal data with our partners, Romwe-affiliated companies, and service providers, your personal data may be transferred to and/or made accessible from countries out of the European Economic Area.  In such circumstances, we will enter into model contractual clauses as adopted by the European Commission, or rely on alternative legal bases such as the Privacy Shield, where applicable, or binding corporate rules where our partners or service providers have adopted such internal policies approved by European data protection authorities.</p>
</div>
<div id="ps-t10">
<div class="ps-new">1.10 Changes to this Privacy Statement</div>
<p>We may periodically change this Privacy Statement to keep pace with new technologies, industry practices, and regulatory requirements, among other reasons.  We expect most such changes to be minor.  Any non-material changes will take effect immediately upon posting of an updated Privacy Statement.<br>
<br>
However, there may be cases where changes to the Privacy Statement may be more significant.  In such cases, we will first provide a more prominent notice.<br>
<br>
Your continued use of the our products and services after the effective date of the Privacy Statement means that you accept the revised Privacy Statement.  If you do not agree to the revised Privacy Statement, please refrain from using our products or services and <a href="#ps-t11" style=" text-decoration:underline;">Contact Us</a> to close any account you may have created.</p>
</div>
<div id="ps-t11">
<div class="ps-new">1.11 Contact Us</div>
<p>If you have any questions regarding this Privacy Statement or its implementation, here is how you can reach us:<br>
<br>
In relation to the use of your personal data for the following purposes: <a href="mailto:data.@romwe.com"><span class="ps-note">data@romwe.com</span></a></p>
<ul class="ps-list1">
    <li>providing, improving, and developing our products and services;</li>
    <li>communicating with you;</li>
    <li>sharing your personal data with third party partners for marketing communications;</li>
    <li>offering and measuring targeted advertisements and services;</li>
    <li>promoting safety and security.</li>
</ul>
In relation to the use of your personal data for the provision of products and services you requested: <a href="mailto:data.@romwe.com"><span class="ps-note">data@romwe.com</span></a>
<p>&nbsp;</p>
</div>
</div>
<p>&nbsp;</p>
<div id="ps-bigti2">
<div class="ps-big0">2.COOKIE STATEMENT</div>
<p><strong>Last Modified:</strong>&nbsp;[April 26th, 2018]</p>
<p>This Cookie Statement applies to all ZoeTop Business Co., Limited affiliates, brands, websites, products, and services (collectively, "Romwe," "we," "us," or "our") and explains how we use cookies on our websites and online services and the choices you have.</p>
<p>&nbsp;</p>
<div class="ps-new">Quick Links</div>
<p>Click on the links below to go to a specific section of this Cookie Statement.</p>
<p>&nbsp;</p>
<ul class="ps-list">
    <li><a href="#ps-c1"><strong>Definition of "Cookies"</strong></a></li>
    <li><a href="#ps-c2"><strong>Types of Cookies</strong></a></li>
    <li><a href="#ps-c3"><strong>Cookies Placed by Third Parties</strong></a></li>
    <li><a href="#ps-c4"><strong>Controlling and Opting-Out of Cookies</strong></a></li>
    <li><a href="#ps-c5"><strong>Do Not Track</strong></a></li>
</ul>
<p>&nbsp;</p>
<div class="ps-new" id="ps-c1">2.1 Definition of "Cookies"</div>
<p>Cookies are small pieces of text used to store information on web browsers.  Cookies are widely used to store and receive identifiers and other information on computers, phones, and other devices.  We also use other technologies, including data we store on your web browser or device, identifiers associated with your device, and other software, for similar purposes.  In this Cookie Statement, we refer to all of these technologies as "cookies."</p>
<p>&nbsp;</p>
<div class="ps-new" id="ps-c2">2.2 Types of Cookies</div>
<p>We use cookies to provide, protect, and improve our products and services, such as by personalizing content, offering and measuring advertisements, understanding user behavior, and providing a safer experience.  We describe below the various types of cookies we use and the purposes they perform.  Please note that the specific cookies we may use vary depending on the specific websites and services you use.</p>
<p>&nbsp;</p>
<div>
<ul class="ps-list1">
    <li><strong>Essential cookies:</strong>  These cookies are strictly necessary to provide you with our websites and services and to enable essential features, such as providing shopping cart or live chart functionality.  If you disable these cookies, we will not be able to fulfill your request.</li>
    <li><strong>Performance and functionality cookies:</strong>  These cookies collect information about how you use our websites and services and allow us to remember the choices you make while browsing.  The information these cookies collect allows us to optimize our websites and make them easier for you to use, and it does not personally identify you.  If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</li>
    <li><strong>Analytics and customization cookies:</strong>  These cookies collect information we use in aggregate form to help us understand how our websites and services are being used and how effective our marketing campaigns are, and help us customize our websites.  If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</li>
    <li><strong>Advertising cookies:</strong>  These cookies collect information about your browsing or shopping history and are used to make advertising messages more relevant to you.  They perform functions like preventing the same advertisement from continuously reappearing, ensuring that advertisements are properly displayed, and in some cases selecting advertisements that are based on your interests.  We may share this information with third parties to help create and deliver advertising personalized to you and your interests.  If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</li>
    <li><strong>Social networking cookies:</strong> These cookies are used to enable you to share pages and content on our websites and services through third-party social networking and other websites.  These cookies may also be used for advertising purposes.</li>
</ul>
<p>&nbsp;</p>
<div class="ps-new" id="ps-c3">2.3 Cookies Placed by Third Parties</div>
<p>You may also encounter cookies on our websites that are placed by third parties.  For example, when you buy our products online, our e-commerce vendor may use cookies and other technologies.  We may also allow third parties to place cookies on our websites to track information about your online activities and/or across third-party sites or online services, including to send you targeted advertisements based on that information, which may include the remarketing of our products and services that you have viewed on our websites and on third-party websites.<br>
<br>
This Cookie Statement does not apply to the cookies, applications, technologies or websites that are owned by and/or operated by third parties, or such third parties' practices, even if they use or access our technology to store or collect information.  To understand how third parties use cookies, please review their privacy policies.</p>
<p>&nbsp;</p>
<div class="ps-new" id="ps-c4">2.4 Controlling and Opting-Out of Cookies</div>
<p>Your browser or device may offer settings that allow you to choose whether browser cookies are set and to delete them. If you don’t change your browser settings and continue to use our website, we will assume that you consent to us using cookie and continuing to download cookies onto your device. If you choose to disable cookies by changing your Browser Settings, our Website and its features may not necessarily work in the same way or produce the same personalized experience.<br>
<br>
For more information about these controls and to update your cookie preferences, visit your browser "Preferences" or "Tools" menu. For further details on configuring Cookies in your browser, see the "Help" menu in the browser itself.</p>
<p>&nbsp;</p>
<div class="ps-new" id="ps-c5">2.5 Do Not Track</div>
<p>Some browsers include the ability to transmit "Do Not Track" signals.  We do not process or respond to "Do Not Track" signals.  Instead, we adhere to the standards described in our <a href="#ps-bigti1" style="text-decoration:underline;">Privacy Statement</a> and this Cookie Statement.</p>
</div>
</div>
</div>
</div></div>
  </div>
</div>

<script src="//romwe.ltwebstatic.com/rw_dist/libs/babel-polyfill/polyfill.min.js"></script>


<script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/libs/vue/vue.min.js?v=12"></script>
<script src="//romwe.ltwebstatic.com/rw_dist/libs/ejs.min.js"></script>


<script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/js/common-a154d22b04.js"></script>
<script>
	//sa临时代理
    ;(function (_win, _doc, _src, _fun, _script, _scriptBef) {
        if(typeof _win[_fun] != 'function'){
            _win[_fun] = function () {
                if(!_win[_fun].waitingCommands){
                    _win[_fun].waitingCommands = []
                }
                _win[_fun].waitingCommands.push(arguments)
            };
            _script = _doc.createElement('script'),_scriptBef = _doc.getElementsByTagName('script')[0];
            _script.async = 1;
            _script.src = _src;
            _scriptBef.parentNode.insertBefore(_script, _scriptBef)
        }
    })(window, document, '//romwe.ltwebstatic.com/rw_dist/js/sdk_analysis-815eab917b.js', 'sa');
    ;// sdk_analysis config文件
  	(function(){
  		var globalSetting = {
  			homeSite:'romwe',
  			deviceType:'pc',
  			currency:{cookieKey:'currency',cookieKeyDefault:'default_currency',cookieValueDefault:'USD'},
  			country:{cookieKey:'country'},
  			email:{cookieKey:'userinfo[email]'},
  			userId:{cookieKey:'memberId'},
			cookieId:{cookieKey:'cookieId'},
			sessionId:{cookieKey:'sessionID_rw'},
  		}
  		if(typeof sa != 'undefined'){
  			sa('set', 'init', globalSetting);
  		}
  	})();
</script>
<script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/js/product_recommend-ea6ecc9950.js"></script>

<!-- 快速注册 -->

    
    <style type="text/css">
        .c-new-quick-register-inner .quick-inner .quick-btn button {
            background: #f9554d;
            color: #FFFFFF;
            border-color: #f9554d;
        }

        
            .c-new-quick-register-inner .quick-inner .quick-input input::-webkit-input-placeholder {
                color: #cccccc;
            }
            .c-new-quick-register-inner .quick-inner .quick-input input:-moz-placeholder {
                color: #cccccc;
            }
            .c-new-quick-register-inner .quick-inner .quick-input input::-moz-placeholder {
                color: #cccccc;
            }
            .c-new-quick-register-inner .quick-inner .quick-input input:-ms-input-placeholder {
                color: #cccccc;
            }
            .c-new-quick-register-inner .quick-inner .quick-input input {
                color: #cccccc;
            }
        

        
    </style>



<script type="text/x-template" id="vue-new-quick-register">
    <div class="c-new-quick-register-inner us-site">
        <!-- 修复google 自动填充页面第一个input bug,ps:无法用display:none和visibility:hidden解决此问题 -->
        <input type="text" style="width:0;height:0;border:0;position:absolute;opacity:0" placeholder="勿删" />
        <template v-if="firstCouponSite && firstCouponSite.registerImgConf && firstCouponSite.registerImgConf.register_img">
            <img :src="transformImg(firstCouponSite.registerImgConf.register_img)">
        </template>
        <div class="quick-footer">
            <template v-if="firstCouponSite && firstCouponSite.registerImgConf && firstCouponSite.registerImgConf.is_show_perfer && firstCouponSite.registerImgConf.is_show_perfer != '0'">
                <div class="quick-prefer">
                    <p class="prefer-title"> {{firstCouponSite.registerImgConf.title}} </p>
                    <div class="prefer-input c-form-group j-prefer-select">
                        <span v-for="(key, value) in firstCouponSite.registerImgConf.prefer_option">
                            <label>
                                <input type="checkbox" :name="value" :value="key" class="rw-checkbox">
                                <span class="rw-checkbox-s quick-checkbox"></span>
                            </label>
                            {{key}}
                        </span>
                    </div>
                </div>
            </template>
            <div class="quick-inner">
                <div class="quick-input">
                    <template v-if="firstCouponSite && firstCouponSite.registerImgConf && firstCouponSite.registerImgConf.input_copy">
                        <input type="email" :placeholder="firstCouponSite.registerImgConf.input_copy" v-model.trim='email' @focus="focusInput" @blur="blurTips" @click="email_input_click">
                    </template>
                    <template v-else>
                        <input type="email" placeholder="Enter your email address" v-model.trim='email' @focus="focusInput" @blur="blurTips" @click="email_input_click">
                    </template>
                    <!-- <i :class="['iconfont', {'icon-warn': errorTipShow}]"></i> -->
                </div>
                <div class="quick-btn" @click="quickRegister">
                    <button class="rw-btn-black rw-btn-xs j-quick-submit">
                        <template v-if="firstCouponSite && firstCouponSite.registerImgConf && firstCouponSite.registerImgConf.button_copy">
                            <div class="j-quick-submit" v-show="!loading"> {{firstCouponSite.registerImgConf.button_copy}} </div>
                        </template>
                        <template v-else>
                            <div v-show="!loading">REGISTER</div>
                        </template>
                        <div class="la-line-scale" v-show="loading"><div></div> <div></div> <div></div> <div></div> <div></div></div>
                    </button>
                </div>
                <div :class="['text-error', 'j-error-'+from]" v-show="errorTipShow" v-html="htmlDecode(errorTips)"></div>
                <div class="g-recaptcha" data-sitekey="6LcONjEUAAAAALw5UtyWsT3pbnTNhEyda_VWb66-" data-callback="romwe_verified_callback" data-expired-callback="romwe_expired_callback" style="display: none;"></div>
            </div>
        </div>
    </div>
</script>

<script type="text/javascript">
    Vue.component('new-quick-register', {
        template: "#vue-new-quick-register",
        props: {
            from: '',
        },
        data: function(){
            return {
                firstCouponSite: gbCommonInfo.firstCouponSite,
                lang: gbCommonInfo.lang,
                email: '',
                loading: false,
                errorTipShow: false,
                errorTips: '',
                isRegistering: false,
            }
        },
        mounted: function(){
            var self = this;
            $(document).on('click', '.j-error-'+self.from + ' .j-login-with-email', function(){
                self.loginWithEmailGa('ClickLoginWithThisEmail');
                window.location.href='/user/auth/login?quickRegisterEmail='+self.email;
            })
        },
        methods: {
            transformImg: transformImg,
            htmlDecode: ROMWE_W.htmlDecode,
            email_input_click:function(){
                ga('rwus.send', {
                    hitType: 'event',
                    eventCategory: '注册弹窗',
                    eventAction: 'EditEmail',
                })
            },
            focusInput: function(){
                this.errorTips = "";
                this.errorTipShow = false;
            },
            blurTips: function() {
                if(!this.email.length){
                    this.errorTips = "Please enter an email address.";
                    this.errorTipShow = true;
                }else if (this.email.length && !pattern.test(this.email)) {
                    this.errorTips = "The email you entered is invalid. Please check your email and try again.";
                    this.errorTipShow = true;
                } else {
                    this.errorTips = "";
                    this.errorTipShow = false;
                }
            },
            registerGa: function(val, failMsg) {
                var statusLabel = val ? 'Success': 'Fail-';
                var msg = '';
                if (failMsg) {
                  msg = val ? '' : failMsg;
                }
                ga('rwus.send', {
                    hitType: 'event',
                    eventCategory: "注册弹窗",
                    eventAction: 'ClickPopUpsRegister',
                    eventValue: val,
                    eventLabel: statusLabel + msg,
                })
            },
            biQuickRegisterResult: function(status, reason){
                var privacy;
                if($('.j-check-agree').length && $('.j-check-agree').is(':visible') && $('.j-check-agree .j-quickregister-agree').is(':checked')){
                  privacy = 1
                }else{
                  privacy = 0
                }
                var sadata_quickregister = {
                    activity_name: "click_quick_register_result",
                    activity_param: {
                      privacy_policy: privacy,
                      status: status,
                      failure_reason: reason,
                      abtest: sadata_qucik_register_expose && sadata_qucik_register_expose.activity_param && sadata_qucik_register_expose.activity_param.abtest || ''
                    }
                }
                sa("send", sadata_quickregister);
            },
            loginWithEmailGa: function(action){
                ga('rwus.send', {
                    hitType: 'event',
                    eventCategory: "注册弹窗",
                    eventAction: action,
                })
            },
            quickRegister: function(){
                var self = this;
                if(self.isRegistering) return
                //bi
                sa("send", {
                    'activity_name': 'click_quick_register', 
                    'activity_param': {
                        abtest: sadata_qucik_register_expose && sadata_qucik_register_expose.activity_param && sadata_qucik_register_expose.activity_param.abtest || ''
                    }
                })
                var email = self.email
                var rec = ''
                var $recaptcha = $('#g-recaptcha-response')
                if($recaptcha && $recaptcha.val() != ''){
                  rec = $recaptcha.val();
                }

                if(email.length == 0 ) {
                    self.registerGa(0, "Please enter an email address.");
                    self.biQuickRegisterResult('failure', 'empty_email');
                    self.errorTips = "Please enter an email address.";
                    self.errorTipShow = true;
                }else if (!pattern.test(email)) {
                    self.registerGa(0, "The email you entered is invalid. Please check your email and try again.");
                    self.biQuickRegisterResult('failure', 'incorrect_email_format');
                    self.errorTips = "The email you entered is invalid. Please check your email and try again.";
                    self.errorTipShow = true;
                }else{
                    //隐私政策
                    if(self.lang == "us" && _gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1) {
                        if(!ROMWE_W.getCookie('keepPrivacy')) {
                            privacy_vue.usarticleshow=true;
                            gb_gdprRegister('PopUps','');
                            self.biQuickRegisterResult('failure', 'other');
                            return
                        }
                    }

                    self.loading = true;

                    var prefer = [];
                    if(self.firstCouponSite && self.firstCouponSite.registerImgConf && self.firstCouponSite.registerImgConf.is_show_perfer && self.firstCouponSite.registerImgConf.is_show_perfer != '0'){
                        var preferenceCheckbox = $('.j-prefer-select input:checkbox:checked');
                        preferenceCheckbox.each(function(index,checkbox){
                            prefer.push(parseInt(checkbox.name));
                        })
                    }
                    var dat = { email: email, prefer: prefer };
                    if(rec != '') dat.g_recaptcha_response = rec;

                    self.isRegistering = true;

                    $.ajax({
                        type: 'POST',
                        url: '/user/auth/quickRegister',
                        contentType: 'application/json',
                        data:  JSON.stringify(dat),
                        success: function(data){
                            self.isRegistering = false;
                            self.loading = false;
                            if (data.code == 0) {
                                gb_gdprRegister('Subscribe-register','AgreePrivacyPolicy');
                                self.biQuickRegisterResult('success', '');
                                if(ROMWE_W.getCookie('keepPrivacy') == 1) {
                                  $.post('/user/account_setting/showAgreeClause', {}, function(res){})
                                }
                                self.registerGa(1)
                                self.errorTips = '';
                                self.errorTipShow = false;
                                ROMWE_W.setCookie('needBindFirstCoupon', 1);
                                if(typeof newQuickRegisterSuc != 'undefined'){
                                    newQuickRegisterSuc.email = self.email;
                                    newQuickRegisterSuc.quickRegisterSuc = true;
                                    if(self.from == 'popups' && typeof newQuickRegister != 'undefined'){
                                        newQuickRegister.quickRegisterShow = false;
                                    }else if(self.from =='side' && typeof newQuickRegisterSide != 'undefined'){
                                        newQuickRegisterSide.slideRegisterShow = false;
                                        newQuickRegisterSide.tipsShow = true;
                                        newQuickRegisterSide.slideShow = false;
                                    }
                                }
                            } else if(data.code == 400503) {
                                self.errorTips = "The Email has been used by others. Please specify another Email. &lt;span class=&#39;link j-login-with-email&#39;&gt;Login with this Email&lt;/span&gt;.";
                                self.errorTipShow = true;
                                self.loginWithEmailGa('ShowkLoginWithThisEmail');
                            } else if (data.code == 400517  || data.code == 400522) {
                                self.errorTips = "We&#39;re so sorry to inform you that your IP is limited to register more . For further help, please &lt;a onclick=&#39;zenDeskComponent.activeOnlineHelp()&#39; style=&#39;color:#00F;&#39; href=&#39;javascript:void(0)&#39;&gt;contact us&lt;/a&gt; !";
                                self.errorTipShow = true;
                            }else if(data.code == 1404){
                                ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_quick_exprie);
                                $('.g-recaptcha').show();
                                grecaptcha.reset();
                                $('.j-quick-submit').prop('disabled', true)
                            }else if(data.code == 1403){
                                ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_quick_exprie);
                                $('.g-recaptcha').show();
                                grecaptcha.reset();
                                $('.j-quick-submit').prop('disabled', true)
                                $('.signup-verification-error').show();
                            }else {
                                self.errorTips = "Failed";
                                self.errorTipShow = true;
                            }
                            //埋点
                            if(data.code != 0){
                              self.registerGa(0, data.msg);
                              if(data.code == 400503){
                                self.biQuickRegisterResult('failure', 'registered_email');
                              }else if(data.code == 400517  || data.code == 400522){
                                self.biQuickRegisterResult('failure', 'IP_limit_error');
                              }else{
                                self.biQuickRegisterResult('failure', 'other');
                              }
                            }
                        },
                        error: function(){
                          self.biQuickRegisterResult('failure', 'network_error');
                        }
                    });
                }
            },
        }
    })
</script>

<div class="c-new-quick-register j-new-quick-register" v-cloak="">
    <modal-vue :show="quickRegisterShow" :force="true" @ok="close" @cancel="close">
        <div slot="title"></div>
        <new-quick-register :from="'popups'"></new-quick-register>
        <div slot="footer"></div>
    </modal-vue>
</div>

<!-- 侧边栏快速注册 -->
<div class="c-new-quick-register-side j-new-quick-register-side" v-cloak="">
    <div v-show="slideRegisterShow">
        <div class="quick-register-tip" v-show="tipsShow" @click="sliderOut">
            <i class="iconfont icon-arrowdown"></i>
            <template v-if="firstCouponSite &amp;&amp; firstCouponSite.info">
                <div class="des">{{firstCouponSite.info}} OFF</div>
            </template>
            <template v-else="">
                <div class="des">10% OFF</div>
            </template>
        </div>
        <div :class="['quick-register-slide', 'us-slide', 'rw-clearfix', {'slide-out': slideShow}]">
            <div class="quick-register-out" @click="slideIn">
                <i class="iconfont icon-arrowdown"></i>
                <template v-if="firstCouponSite &amp;&amp; firstCouponSite.registerImgConf &amp;&amp; firstCouponSite.registerImgConf.left_copy">
                    <div :class="['des', {'with-prefer': firstCouponSite &amp;&amp; firstCouponSite.registerImgConf &amp;&amp; firstCouponSite.registerImgConf.is_show_perfer &amp;&amp; firstCouponSite.registerImgConf.is_show_perfer != '0'}]"> {{firstCouponSite.registerImgConf.left_copy}} </div>
                </template>
                <template v-else="">
                    <div :class="['des', {'with-prefer': firstCouponSite &amp;&amp; firstCouponSite.registerImgConf &amp;&amp; firstCouponSite.registerImgConf.is_show_perfer &amp;&amp; firstCouponSite.registerImgConf.is_show_perfer != '0'}]">Get Extra 10% Off</div>
                </template>
            </div>
            <div class="quick-register-in">
                <new-quick-register :from="'side'"></new-quick-register>
            </div>
        </div>
    </div>
</div>

<!-- success -->
<div class="c-new-quick-register-success j-new-quick-register-success" v-cloak="">
    <modal-vue :show="quickRegisterSuc" :force="true" @ok="closeSuc" @cancel="closeSuc">
        <div slot="title"></div>
        <div class="regiter-success-inner">
            <div class="suc-title">Register Successfully!</div>
            <div class="suc-des">We have sent the password to your email <span class="email"> {{email}} </span>. You can log in directly with this account password next time.</div>
            <div class="suc-btn">
                <button class="rw-btn-red" @click="closeSuc">Got it!</button>
            </div>
        </div>
        <div slot="footer"></div>
    </modal-vue>
</div>



<script>
  window.handleImageJump = function (data, vueComponent) {
    var ids = {
      real: [],
      virtual: [],
      itemPicking: [],
    }
    var skus = []
    var checkType = function (type, value) {
      switch (type) {
        case 'real':
          ids.real.push(value)
          break;
        case 'virtual':
          ids.virtual.push(value)
          break;
        case 'sku':
          skus.push(value)
          break;
        case 'itemPicking':
          ids.itemPicking.push(value)
          break;          
      }
    }
    data.forEach(function (val) {
      val.operations.forEach(function (operation) {
        var comp = operation.content
        if (comp.type === 'IMAGE_COMPONENT') {
          comp.props.items && comp.props.items.forEach(function (item) {
            if (item.hrefTarget) {
              checkType(item.hrefType, item.hrefTarget)
            }
          })
          comp.hotZoneData && comp.hotZoneData.forEach(function (hotZone) {
            var props = hotZone.props
            if (props.hrefTarget) {
              checkType(props.hrefType, props.hrefTarget)
            }
          })
        }
        if (['IMAGE_CAROUSEL_COMPONENT', 'TOP_BANNER_COMPONENT'].indexOf(comp.type) > -1) {
          comp.props.items && comp.props.items.forEach(function (item) {
            if (item.hrefTarget) {
              checkType(item.hrefType, item.hrefTarget)
            }
          })
        }
        // 组合的结构要特殊处理
        if (comp.type === 'IMAGE_GROUP_COMPONENET') {
          comp.props.items && comp.props.items[0].carouselItems.forEach(function (item) {
            if (item.hrefTarget) {
              checkType(item.hrefType, item.hrefTarget)
            }
          })
          comp.props.items && comp.props.items[0].imageItems.forEach(function (item) {
            if (item.hrefTarget) {
              checkType(item.hrefType, item.hrefTarget)
            }
          })
        }
      });
    })
    // 数组去重
    function unique(a) {
      var res = [];

      for (var i = 0, len = a.length; i < len; i++) {
        var item = a[i];

        (res.indexOf(item) === -1) && res.push(item);
      }

      return res;
    }

    for (var key in ids) {
      ids[key] = unique(ids[key])
    }
    skus = unique(skus)
    function getUrl(key, detail) {
      var type = key.split('_')[0]
      if (Object.prototype.toString.call(detail) === '[object Object]') {
        switch (type) {
          case 'real':
            return "https://us.romwe.com/" + (detail.cat_url_name && detail.cat_url_name.replace(/%/g, '')) + '-c-' + detail.cat_id + '.html'
          case 'virtual':
            return "https://us.romwe.com/" + (detail.url_virtual_category_name && detail.url_virtual_category_name.replace(/%/g, '')) + '-vc-' + detail.virtual_category_id + '.html'
          case 'itemPicking':
            return "https://us.romwe.com/" + (detail.select_name && detail.select_name.replace(/%/g, '')) + '-sc-' + detail.sc_url_id + '.html'
        }
      } else {
        return 'javascript:;'
      }
    }
    var cateInfos = {};
    var goodsList = {};
    // 两个接口都返回结果后再一次性改变vueComponent.cateInfo的值，避免频繁watch导致无法及时更新视图
    var shouldSetValue = false;
    if (ids.real.length || ids.virtual.length ||  ids.itemPicking.length) {
      $.get('/c-index/getCateInfo', { ids: ids }, function (data) {
        data && Object.keys(data).forEach(function (key) {
          // 选品数据在 itemPickIds 对象中
          if (key === 'itemPickIds') {
            data[key] && Object.keys(data[key]).forEach(function (pickKey) {
              cateInfos[pickKey] = getUrl(pickKey, data[key][pickKey])
            })
          }          
          cateInfos[key] = getUrl(key, data[key]);
          if (shouldSetValue) {
            vueComponent.$set(vueComponent, 'cateInfo', cateInfos);
          }
        });
        shouldSetValue = true;
      })
    } else {
      shouldSetValue = true;
    }

    if (skus.length) {
      $.ajax({
        type: 'POST',
        dataType: 'json',
        traditional: true,
        url: '/c-index/getItemBySKU',
        data: {
          sku: skus,
        },
        success: function (data) {
          if (data && data.code != 0) return;
          this.products = (data.info && data.info.products) || [];
          this.products.forEach(function (item) {
            var key = 'sku_' + item.goods_sn;
            var url = ROMWE_W.getGoodsUrl(item.goods_url_name, item.goods_id, item.cat_id);
            cateInfos[key] = "https://us.romwe.com" + url
            goodsList[key] = item.goods_id
          })
          if (shouldSetValue) {
            vueComponent.$set(vueComponent, 'cateInfo', cateInfos);
            vueComponent.$set(vueComponent, 'goodsList', goodsList);
          }
          shouldSetValue = true;
        }.bind(this)
      })
    } else {
      shouldSetValue = true;
    }
  }
</script>
<script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/assets/common-chunks.46aa7a.js?c781f3ad2580a1b36289"></script><script type="text/javascript" src="//romwe.ltwebstatic.com/rw_dist/assets/common-fb992f.js?c781f3ad2580a1b36289"></script>

    <!-- topbanner的html写在header.html里 方便做动画 -->
<script type="text/javascript">
    var configTopBanner = new Vue({
        el: '.j-config-top-banners',
        data: {
            propData: [],
            timeArray: [],
            timer: [],
            showDelArray: [],
            currentTime: 0,
            isTimeEndArray: [], // 倒计时是否结束
            cateInfo: {},
            itemCateType: {},
            isPreview: false,
            resContent: {}, // topBanner返回的数据
            lang: '',
            site: '',
            tagId: '',
            abt_poskey:'ccc_romwe_pc_topbanner',
            eid:'',
            bid:'',
            mapToStyle: {
                BANNER_WITH_TIME: '1', // topbanner
                BANNER_WITHOUT_TIME: '2',
            },
            act_id: {
                default: '1',
                item: '2',
                other: '3'
            },
            mapToHrefType: {
                virtual: 1,
                real: 2,
                realOne: 2,
                realTwo: 3,
                itemPicking: 4,
                activity: 6,
                sku: 7,
                webLink: 10,
                noJump: 11,
                flashBuy: 12,
                signPage: 13,
                special: 21,
                survey: 27,
            },
            saName: '',
            gaName: '',
            iciParam: '',
            config_top_bannerNew:"",
            abtData:{
                expid:'' ,
                id:'',
                param:''
            },
            gaValue: {
                noTarget: '', // 没有跳转时ga埋点字段
            },
        },
        watch: {
            cateInfo: function (newVal) {
                Object.keys(this.itemCateType).forEach((function (type) {
                    this.itemCateType[type] = this.cateInfo[type]
                }).bind(this))
            }
        },
        created: function () {
            var _this = this
            if(typeof window._abt_server_provider != 'undefined' && _abt_server_provider.getAbtResult){
                _abt_server_provider.getAbtResult({poskey:'ccc_romwe_pc_topbanner'}).then(function(data){
                    _this.abtData = data
                    _this.fetchTopBannerData()
                }).catch(function(err){
                    _this.fetchTopBannerData()
                })
            }else{
                _this.fetchTopBannerData()
            }
            this.config_top_bannerNew = 'config_top_bannerNew'

        },
        mounted: function () {

            window.addEventListener('scroll', function () {
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop
                if (scrollTop > 0) {
                    if ($('.j-config-top-banner').hasClass('config-active')) {
                        $('.j-config-top-banner').removeClass('config-active')
                    }
                } else {
                    $('.j-config-top-banner').addClass('config-active')
                }
            })
        },
        methods: {
            getCategoryParam: function (categoryType, categoryList, type) {
                var catIdsArray = []
                var queryString = ''
                categoryList && categoryList.forEach(function (item) {
                    if (categoryType == '2' && item.val) {
                        catIdsArray.push(item.romwe_cat_id)
                    }
                })
                if(type === 'daily'){
                    queryString = catIdsArray.length ? '&daily_cat_ids=' + decodeURIComponent(catIdsArray.join('_')) : ''
                } else {
                    queryString =  catIdsArray.length ? '&cat_ids=' + decodeURIComponent(catIdsArray.join(',')) : ''
                }               
                return catIdsArray.length ? '&cat_ids=' + decodeURIComponent(catIdsArray.join(',')) : ''
            },
            fetchTopBannerData: function (isExpired) {

                var _this = this
                // 初始化, 不然到期后由于只展示未过期的,第一个会影响第二个
                _this.isTimeEndArray = []
                // 传一个content_ids,区分预览与否的
                function getQueryByName(url, name) {
                    var reg = new RegExp('[?&]' + name + '=([^&#]+)');
                    var query = url.match(reg);
                    return query ? query[1] : null;
                }
                var content_ids = getQueryByName(location.href, 'content_ids')
                var scene_key = getQueryByName(location.href, 'advert_scene_key')
                var tag = getQueryByName(location.href, 'tag')
                var eid = _this.abtData.expid || ''
                var bid = _this.abtData.id || ''
                var p = _this.abtData.param || ''
                var _now = new Date()
                var reqUrl = '/config_top_banner?eid=' + eid +'&bid=' + bid + '&p=' + p
                var subfixKey
                if (isExpired) {
                    subfixKey = _now.getDate() + '_' + _now.getHours() + '_' + _now.getMinutes()
                    reqUrl += '&subfixKey=' + subfixKey
                }

                var url = !content_ids ? reqUrl : '/config_top_banner?content_ids=' + content_ids + '&scene_key=' + scene_key + '&tag=' + tag +'&eid=' + eid +'&bid=' + bid + '&p=' + p
                $.get(url, function (res) {
                    _this.isPreview = res.isPreview
                    _this.site = res.site
                    _this.lang = res.lang
                    _this.tagId = res.tagId
                    _this.eid = res.eid
                    _this.bid = res.bid
                    var propData = []
                    var end_time = res.content && (+res.content.end_time * 1000)
                    var start_time = res.content && (+res.content.start_time * 1000)
                    res.content && res.content.content && res.content.content.forEach(function (val) {
                        val.content.props.items[0].endTime = end_time
                        val.content.props.items[0].beginTime = start_time
                        propData = propData.concat(val)
                    })
                    // abt分流 ga埋点
                    ga('rwus.set', 'dimension18', 'ccc_romwe_pc_topbanner&'+res.topbanner_abt_branch);

                    // 获取当前时间
                    _this.currentTime = res.zzz * 1000
                    /* 只显示没有倒计时以及还没有过期的topbanner */
                    _this.propData = propData.filter(function (perData) {
                        return perData.content.props.items[0].endTime > _this.currentTime || perData.content.props.items[0].timeOption == '0'
                    })
                    _this.propData && _this.propData.forEach((function (data) {
                        var item = data.content.props.items[0]
                        var type = item.hrefType.split('_')[0] + '_' + item.hrefTarget
                        _this.$set(_this.itemCateType, type, 'javascript:;')
                    }))
                    /* 参数改成数组结构，以符合旧的结构 */
                    if (res.content && res.content.content) handleImageJump([{
                        operations: res.content.content
                    }], _this)
                    _this.resContent = res.content
                    _this.setGaParams()
                    _this.setSaParams()
                    _this.propData.forEach(function (data, index) {
                        // 曝光topBanner
                        _this.biView(data, index)

                        var val = data.content.props.items[0]
                        // 给初始值,避免报错
                        if (val.beginTime <= _this.currentTime && val.endTime > _this.currentTime) {
                            if (val.timeOption === '1') {
                                // 真实倒计时
                                _this.startTimer(index, val.endTime)
                            } else if (val.timeOption === '2') {
                                // 人工设置的倒计时
                                _this.startLoopTimer(index, val.beginTime, val.endTime, val.timeDuration)
                            }
                        }
                    })
                    _this.$nextTick(function () {
                        if (ROMWE_W && ROMWE_W.product && ROMWE_W.product._sideSmartScroll) {
                            GB_RW_banner_length = $(".j-act-anchor-no-use").length;
                            ROMWE_W.product._sideSmartScroll();           // list侧边栏滑动
                        }
                    })
                })
            },
            transformImg: transformImg,
            getImageItemUrl: function (item, index) {
                var returnValue = 'javascript:;'
                var ici = this.iciParam + (+index + 1) + '-1'
                if (item.hrefType === 'noJump') {
                    returnValue = 'javascript:;'
                } else if (item.hrefType === 'webLink') {
                    var url = ''
                    if (item.hrefTarget.indexOf('ici') > -1) {
                        url = item.hrefTarget
                    } else if (item.hrefTarget.indexOf('?') > -1) {
                        url = item.hrefTarget + '&' + ici
                    } else {
                        url = item.hrefTarget + '?' + ici
                    }
                    returnValue = url
                } else if (item.hrefType === 'activity'
                    && item.activityURL
                    && this.site
                    && this.lang
                    && item.activityURL[this.site + '_' + this.lang]) {
                    returnValue = item.activityURL[this.site + '_' + this.lang] + '?' + ici
                } else if (['real', 'realOne', 'realTwo', 'virtual', 'sku', 'itemPicking'].indexOf(item.hrefType) > -1) {
                    var type = item.hrefType.split('_')[0] + '_' + item.hrefTarget
                    returnValue = (this.itemCateType[type] || 'javascript:;') + '?' + ici
                } else if (item.hrefType === 'special') {
                    if (item.hrefType2 === 'dailyNew') {
                        returnValue = '/daily-new.html?' + ici + this.getCategoryParam(item.categoryType, item.categoryList, 'daily')
                    } else if (item.hrefType2 === 'discountList') {
                        returnValue = '/promo-discount.html?' + ici
                    } else if (item.hrefType2 === 'BackInStock') {
                        returnValue = '/back-in-stock.html?' + ici
                    } else if (item.hrefType2 === 'comingSoon') {
                        returnValue = '/coming-soon?' + ici
                    } else if (item.hrefType2 === 'lightningDeal') {
                        returnValue = '/lightning-deals.html?' + ici + this.getCategoryParam(item.categoryType, item.categoryList)
                    }
                } else if (item.hrefType === 'survey') {
                    returnValue = '/survey/' + item.hrefTarget
                }
                return returnValue
            },
            hanldeOverBanner: function (index) {
                Vue.set(this.showDelArray, index, true)
            },
            hanldeOutBanner: function (index) {
                Vue.set(this.showDelArray, index, false)
            },
            handleClose: function (e, index) {
                e.preventDefault()
                e.stopPropagation()
                $('.j-config-top-banners >div:nth-child(' + (index + 1) + ') > a').animate({ height: 0 }, 10);
            },
            updateTime: function (timeDuration) {
                if (!timeDuration) timeDuration = 0
                var temp = parseInt(timeDuration / 1000)
                var hour = parseInt(temp / 3600)
                var minute = parseInt(temp % 3600 / 60)
                var second = temp % 3600 % 60
                hour = hour < 10 ? '0' + hour : hour.toString()
                minute = minute < 10 ? '0' + minute : minute.toString()
                second = second < 10 ? '0' + second : second.toString()

                return {
                    hour: hour,
                    minute: minute,
                    second: second,
                }
            },
            updateLoopTime: function (timeDuration) {
                if (!timeDuration) timeDuration = 0
                var temp = parseInt(timeDuration / 1000)
                var hour = parseInt(temp / 3600)
                var minute = parseInt(temp % 3600 / 60)
                var second = temp % 3600 % 60
                hour = hour < 10 ? '0' + hour : hour.toString()
                minute = minute < 10 ? '0' + minute : minute.toString()
                second = second < 10 ? '0' + second : second.toString()
                return {
                    hour: hour,
                    minute: minute,
                    second: second,
                }
            },
            startTimer: function (index, endTime) {
                var _this = this
                var timeCount = endTime - this.currentTime
                this.timer[index] = setInterval(function () {
                    _this.timeArray[index] = _this.updateTime(timeCount)
                    _this.timeArray = _this.timeArray.slice()
                    timeCount -= 1000
                    if (timeCount <= 0) {
                        // 倒计时结束,清楚timer
                        _this.isTimeEndArray[index] = true
                        clearInterval(_this.timer[index])
                        _this.fetchTopBannerData(true)
                    }
                }, 1000)
            },
            startLoopTimer: function (index, beginTime, endTime, timeDuration) {
                var _this = this
                var timeCount = timeDuration * 3600 * 1000
                var gapBetweenNowAndEnd = endTime - _this.currentTime
                var gapBetweenBeginAndNow = _this.currentTime - beginTime
                // 减去在这个段位内已经经过的时间
                timeCount = timeCount - gapBetweenBeginAndNow % (timeDuration * 3600 * 1000)
                this.timer[index] = setInterval(function () {
                    _this.timeArray[index] = _this.updateLoopTime(timeCount)
                    _this.timeArray = _this.timeArray.slice()
                    timeCount -= 1000
                    gapBetweenNowAndEnd -= 1000
                    // 倒计时完之后,再循环开始
                    if (timeCount <= 0) {
                        timeCount = timeDuration * 3600 * 1000
                    }
                    if (gapBetweenNowAndEnd <= 0) {
                        // 倒计时结束,清楚timer
                        _this.isTimeEndArray[index] = true
                        clearInterval(_this.timer[index])
                        _this.fetchTopBannerData(true)
                    }
                }, 1000)
            },
            clickBanner: function (pitId, topbannerData) {
                var _this = this
                var type = topbannerData.timeOption + '' === '0' ? 'BANNER_WITHOUT_TIME' : 'BANNER_WITH_TIME'
                // 异步调用, 保证其他页面脚本加载完之后再执行此函数,就会包含页面信息
                sa('send', {
                    activity_name: 'click_top_banner',
                    activity_param: {
                        spm: this.saName + (+pitId + 1) + '`' + this.mapToStyle[type] + '`' + this.tagId + '`1`0`0`' + this.mapToHrefType[topbannerData.hrefType],
                        act_id: '',
                        content_list: topbannerData.hrefTarget,
                        abtest: this.abtest
                    }
                }, { beacon: 1 })
                ga('rwus.ec:addPromo', { name: this.gaName + '&' + (topbannerData.hrefTarget || topbannerData.hrefType2 || this.gaValue.noTarget), position: +pitId + 1 + '-1' })
                ga('rwus.ec:setAction', 'promo_click')
                GBGaSend({
                    category: 'Banner',
                    action: 'clickBanner',
                    label: this.gaName + '&' + (topbannerData.hrefTarget || topbannerData.hrefType2 || this.gaValue.noTarget)
                })
            },
            /* 设置ga参数 */
            setGaParams: function () {
                if (this.resContent && this.resContent.content) {
                    var comp = this.resContent.content[0]
                    this.gaName = this.resContent.scene_name + '&0&0-0&' + (comp.oper_name || '0') + '&' + comp.oper_id + '&' + this.tagId
                    this.iciParam = 'ici=' + this.resContent.scene_name + '_0_0-0_' + (comp.oper_name || '0') + '_' + comp.oper_id + '_'  + this.tagId + '_'
                }
            },
            setSaParams: function () {
                if (this.resContent && this.resContent.content) {
                    var data = this.propData[0] || {}
                    this.saName = (typeof SaPageInfo === 'object' && SaPageInfo && SaPageInfo.page_id) + '`0`' + this.resContent.scene_id + '_' + this.resContent.module + '`0`0`' + data.oper_id + '`'
                    this.abtest =  this.abt_poskey + '`'+ (this.eid || '-') + '`' + (this.bid || '-')
                }
            },
            // 曝光
            biView: function (perBanner, index) {
                var _this = this
                var itemData = perBanner.content.props.items[0]
                var type = itemData.timeOption + '' === '0' ? 'BANNER_WITHOUT_TIME' : 'BANNER_WITH_TIME'
                $(function() {
                    setTimeout(function() {
                        // 异步调用, 保证其他页面脚本加载完之后再执行此函数,就会包含页面信息
                        sa('send', {
                            activity_name: 'expose_top_banner',
                            activity_param: {
                                spm: _this.saName + (+index + 1) + '`' + _this.mapToStyle[type] + '`' + _this.tagId + '`1`0`0`' + _this.mapToHrefType[itemData.hrefType],
                                act_id: '',
                                content_list: itemData.hrefTarget,
                                abtest: _this.abtest
                            }
                        })
                        ga('rwus.ec:addPromo', { name: _this.gaName + '&' + (itemData.hrefTarget || itemData.hrefType2 || _this.gaValue.noTarget), position: +index + 1 + '-1' })
                        GBGaSend({
                            category: 'Banner',
                            action: 'ViewBanner',
                            label: _this.gaName + '&' + (itemData.hrefTarget || itemData.hrefType2 || _this.gaValue.noTarget)
                        })
                    }, 100)
                })
            },
        }
    })
</script>


<script type="text/x-template" id="vue-modal-temp">
 	<transition name="vue-fade" appear>
		<div class="c-modal-wrap" v-show="show">
			<div class="rw-mask" :class="{'rw-opacity0': isMaskHide}"></div>
			<div class="c-modal" @mousedown="clickMask($event)">
				<div class="modal-dialog j-modal-dialog" :class="styleClass" ref="dialog">
					<transition name="vue-slide-fade">
						<div v-show="show" class="modal-content" :class="{'popus-content':minuspad}" :style="{backgroundImage: backgroundimg}">

							<div class="modal-header">
								<slot name="closer">
									<i class="iconfont icon-close rw-close" @click="cancel('close')"></i>
								</slot>
								<div class="modal-title">
									<slot name="title">
	                                </slot>
								</div>
							</div>
							<div class="modal-body">
								<slot></slot>
							</div>
							<div class="modal-footer">
								<slot name="footer">
									<div class="modal-btn">
										<button v-if="twobtn" class="rw-btn-white j-btn-cancel" :class="cancelclass" @click="cancel('btn')">{{canceltext}}</button>
			                            <button class="rw-btn-red j-btn-ok" :class="okclass" @click="ok">{{oktext}}</button>
									</div>
		                        </slot>
							</div>
						</div>
					</transition>
				</div>
			</div>
		</div>
	</transition>
</script>

<script type="text/javascript">
	(function() {

		var shareData = {
			counter: 0
		};
		Vue.component('modal-vue', {
		    template: '#vue-modal-temp',
		    props: {
		        show: {type: Boolean, default: false},

		        large: {type: Boolean, default: false},
		        full: {type: Boolean, default: false},
		        relativeheight: {type: Boolean, default: false},
		        vertical: {type: Boolean, default: true},
		        twobtn: {type: Boolean, default: true},
		        isquickv: {type: Boolean, default: false},
		        backgroundimg: {type: String, default: ''},
				minuspad: {type:Boolean,default:false},
		        duration: {type: Number, default: 500},

		         // 为true时无法通过点击遮罩层关闭modal
		        force: {type: Boolean, default: false},

		        oktext: {type: String, default: 'OK'},
		        canceltext: { type: String, default: 'Cancel'},

		        okclass: {type: String, default: 'rw-btn-red-s'},
				cancelclass: {type: String, default: 'rw-btn-white-s'},
				scroll: {type: Boolean, default: true},
				shoplook: {type: Boolean, default: false},
		    },
		    data: function() {
		    	return {
		    		shareData: shareData,
		    		isMaskHide: false,
		    	}
		    },
		    computed: {
		        styleClass: function() {
		            return {
		            	'c-quickv': this.isquickv,
		            	'vertical-center': this.vertical,
		                'modal-lg': this.large,
		                'modal-full': this.full,
						'modal-relative-height': this.relativeheight,
						'modal-shoplook': this.shoplook,
		            }
		        }
		    },
		    mounted: function() {
		        if (this.show && !this.vertical) {
		            document.body.className += ' modal-open';
				}
		    },
		    beforeDestroy: function() {
		        document.body.className = document.body.className.replace(/\s?modal-open/, '');
		    },
		    watch: {
		        show: function(value) {
		            var self = this;

		            if (value) {
		            	self.shareData.counter ++;
		            	if (!this.vertical) {
		            		document.body.className += ' modal-open';
						}
						if(!this.scroll){
							document.body.className += ' modal-open';
						}
		            } else {
		                window.setTimeout(function() {
		                	self.shareData.counter --;
		                	self.isMaskHide = false;
		                    document.body.className = document.body.className.replace(/\s?modal-open/, '');
		                    ROMWE_W.removeUnScroll();
		                }, self.duration || 0);
		            }

		            if (self.shareData.counter > 1) {
		            	// self.isMaskHide = true;
		            }

		        }
		    },
		    methods: {
		        ok: function() {
		            this.$emit('ok');
		        },
		        cancel: function(opt) {
		            this.$emit('cancel', opt);
		        },
		        clickMask: function(e) {
		            if (!this.force && !this.isInTree(e.target)) {
		                this.cancel('mask');
		            }
		        },
				isInTree: function(target) {
					return this.$refs.dialog.contains(target)
				}
		    }
		});
	})();

</script>



<script src="//romwe.ltwebstatic.com/rw_dist/libs/addressAutocomplete/jquery.autocomplete.min.js"></script>

<script type="text/javascript">
	var global_wishlist_id
	var _global_checkout_qiucklogin
	var _global_blackfriday_quicklogin
	var _global_fbgiveaway_quicklogin
	var _ga_global_state_quicklogin = {
		_is_adding_wishlist: false,
		_is_save_later: false,
		loginType: '',
		_is_going_blackfirday: false,
		_is_going_fbgiveaway: false,
	}
	var _gb_passwordSafetyExp = /^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/
</script>
<script type="text/javascript">
	if(typeof(ROMWE_W)!='undefined' && typeof(ROMWE_W.isMobile) == 'function' && ROMWE_W.isMobile()) {
	  $(document).bind('touchstart', function(e) {
	  	if($('.bag-box-hover').length) {
	  		if($(e.target).closest('.j-hbag-box').length == 0) {
	  			if($('.c-modal-wrap').length && $('.c-modal-wrap').css('display') != 'none') {
	  			} else {
	  				$('.bag-box-hover').removeClass('bag-box-hover');
	  			}
	  		}
	  	}

	  	if($('.category-hover').length) {
	  		if($(e.target).closest('.c-navbar').length == 0) {
	  			$('.category-hover').removeClass('j-prevent').removeClass('nav-acitve').removeClass('category-hover');
	  		}
	  	}
	  });

	  $('.j-category-title').on('click', function(e) {
  		if(!$(this).hasClass('j-prevent') && $(this).hasClass('category-hover')) {
  			e.preventDefault();
  			$(this).addClass('j-prevent');
  		}	
  	  });
	}
</script>
<div class="c-uptt j-uptt"> 
    <i class="iconfont icon-up"></i>
    <div>TOP</div>
</div>

<script type="text/javascript">
	$(document).on('click','.j-uptt',function(){
	// $('.j-uptt').click(function(event) {
		$('html,body').stop().animate({
            scrollTop: 0
        }, 500);
	});

	$(window).scroll(function() {
		var st = $(document).scrollTop();
		if (st<= parseInt(window.innerHeight/2) ) {
			$('.j-uptt').removeClass('rw-show');
		} else if (st>0 && !$('.j-uptt').hasClass('rw-show')) {
			$('.j-uptt').addClass('rw-show');
		}
	})
</script>

    <!-- 登录页不加载登录注册弹窗 -->
    
<div class="n-quick-login j-quick-login" v-cloak="">
    <modal-vue :show="state.quickLogin" @cancel="quickLoginClose" :vertical="false">
        <div class="quick-login-wrap" slot="title">
            <div class="quick-login-tab j-single-tab rw-none">
                welcome back
            </div>
            <div class="quick-login-tab j-double-tab">
                <span @click="tab = 'signin'" :class="{'active': tab == 'signin'}">Sign In</span>
                <span @click="tab = 'signup'" :class="{'active': tab == 'signup'}">Register</span>
            </div>
        </div>
        <div class="quick-login-wrap">
            <div class="quick-signin j-quick-new-signin" :class="{'rw-none': tab != 'signin'}">
                <form>
                    <div class="c-form-group">
                        <label class="rw-label" for="inputError">Email</label>
                        <div class="input-icon">
                            <input type="text" class="rw-input j-login-email" placeholder="Your Email Address">
                        </div>
                        <p class="text-error rw-none j-email-tips"></p>
                    </div>
                    <div class="c-form-group">
                        <label class="rw-label text-capital" for="inputError">Password</label>
                        <div class="input-icon">
                            <input type="password" class="rw-input j-login-pw" placeholder="your password">
                            <i class="iconfont rw-i" autocomplete="password"></i>
                        </div>
                        <p class="text-error rw-none j-pass-tips">Please enter your password.</p>
                        <p class="text-error rw-none j-login-tips">The email address or password is incorrect!</p>
                    </div>
                </form>
                
                    <p class="n-forget-pass j-forget-pw-quicklogin"><a href="javascript:void(0);">Forgot password?</a></p>
                    <button class="rw-btn-red rw-btn-block j-login-quicklogin">
                        <div class="j-login-signin">Sign In</div>
                        <div class="la-line-scale rw-none"><div></div> <div></div> <div></div> <div></div> <div></div></div>
                    </button>
                    <div class="n-line">
                        <b class="col-xs-4"></b>
                        <span class="col-xs-4">Or</span>
                        <b class="col-xs-4"></b>
                    </div>
                    <div class="custom-login">
                        <i class="iconfont icon-fb j-fb-quicklogin"></i>
                        <i class="iconfont icon-google-glass j-google-quicklogin" id="customBtn" ref="googleLogin"></i>
                    </div>
                    <div class="quick-banner" v-if="bannerInfo &amp;&amp; bannerInfo.b_img">
                        <img :src="transformImg(bannerInfo.b_img)">
                    </div>
            </div>
            <div class="quick-register j-quick-new-register" :class="{'rw-none': tab != 'signup'}">
                <form>
                    <div class="c-form-group">
                        <label class="rw-label" for="inputError">Email</label>
                        <div class="input-icon">
                            <input type="text" class="rw-input j-signup-email" onfocus="signupTimeRecord()" placeholder="Your Email Address">
                            <i class="iconfont rw-i"></i>
                        </div>
                        <p class="text-error j-newemail-tips rw-none">The email address or password is incorrect!</p>
                    </div>
                    <div class="c-form-group">
                        <label class="rw-label text-capital" for="inputError">Password</label>
                        <div class="input-icon">
                            <input type="password" class="rw-input j-signup-pw" v-model.trim="inputRegisterPsd" placeholder="your password" @focus="foucsCheckexg('inputRegisterPsd')" @keyup="delayCheckexg('inputRegisterPsd')" onkeyup="this.value=this.value.replace(/\s+/g,'')" autocomplete="password">
                            <i class="iconfont rw-i"></i>
                        </div>
                        <p class="text-error rw-none j-regs-pass">Your password must contain at least 6 characters.</p>
                    </div>              

                    <div class="normal-tips" :class="{'rw-hide':safety.focusAll}">
                        <div class="normal-info" :class="{'rw-hide':safety.hideAll}">
                            <p>Your Password must contain</p>
                            <div :class="{'normal-red' :safety.showAll}">
                                <p :class="{'tips-greenp':safety.showFir}">· 8 characters minimum</p>
                                <p :class="{'tips-greenp':safety.showSec}">· At least one letter</p>
                                <p :class="{'tips-greenp':safety.showThi}">· At least one number</p>
                            </div>
                        </div>
                    </div>
                    <div class="c-form-group last-item">
                        <label class="rw-label" for="inputError">Confirm Password:</label>
                        <div class="input-icon">
                            <input type="password" class="rw-input j-signup-cpw" placeholder="Confirm Password" onkeyup="this.value=this.value.replace(/\s+/g,'')" autocomplete="password">
                            <i class="iconfont rw-i"></i>
                        </div>
                        <p class="text-error rw-none j-regs-cpass">Your password must contain at least 6 characters.</p>
                    </div>
                    <div class="c-form-group">
                        <div id="recaptcha-quick"></div>
                        <p class="text-error rw-none signup-verification-error">Verification has failed. Please try again.</p>
                    </div>
                    
                </form>    
                    <button class="rw-btn-black rw-btn-block j-signup-quicklogin">
                        <div class="j-create-account">Create Account</div>
                        <div class="la-line-scale rw-none"><div></div> <div></div> <div></div> <div></div> <div></div></div>
                    </button>
                    <p class="get-discount">GET 10% OFF!</p>
                    <div class="c-form-group n-prefer-select j-prefer-select" v-if="preferOptions.length">
                        <label class="rw-label">Which store do you prefer?</label>
                        <div class="prefer-item" v-for="item in preferOptions">
                            <label>
                                <input type="checkbox" v-bind:name="item.id" v-bind:value="item.name" class="rw-checkbox">
                                <span class="rw-checkbox-l"></span>
                            </label>
                            {{item.name}}
                        </div>
                    </div>
            </div>
        </div>
    <div slot="footer"></div>
    </modal-vue>
</div>
<div class="j-login-container" v-if="state.fblogin" v-cloak=""> 
    <modal-vue :show="state.fblogin" :twobtn="false" :oktext="'Submit'" @ok="ok()" @cancel="fbloginClose()">
        <div slot="title">
            MAILBOX BINDING
        </div>

        <div class="c-form-group">
            <label class="rw-label" for="inputError">Your account needs an email binding</label>
            <div class="input-icon">
                <input type="email" class="rw-input" placeholder="" v-model.trim="state.email">
                <i class="iconfont rw-i"></i>
            </div>
            <p class="text-error j-fblogin-tips"></p>
        </div>
    </modal-vue>
</div>
<script src="//romwe.ltwebstatic.com/rw_dist/libs/mailAutoComplete/mailAutoComplete.js"></script>
<!-- es 站快捷登录 购物车页 -->
<script>
	var lang = "us";
	if (['es'].indexOf(lang) > -1 && window.location.pathname == '/cart') {
		$('.j-double-tab').addClass('rw-none')
		$('.j-single-tab').removeClass('rw-none')
	}
</script>
<script>
  var analysisModule = {
    //fb埋点
		regSuccess: function() {
			if (typeof doFbq === 'function') {
				doFbq('CompleteRegistration')
			}
		},
	}

	// GA登陆埋点
	function loginGa(val, failMsg) {
		var msg = failMsg ? failMsg : ''
		if (_ga_global_state_quicklogin.loginType == 'Checkout') {
			signRegisterGa('Sign in - Checkout', val, msg)
		}
		else {
			signRegisterGa('Sign in - Other', val, msg)
		}
	}

	function registerGa(val, failMsg) {
		var msg = failMsg ? failMsg : ''
		var queryString = window.location.search
		if (_ga_global_state_quicklogin.loginType == 'Checkout') {
			signRegisterGa('Register - Checkout', val, msg)
		}
		else {
			signRegisterGa('Register - Other', val, msg)
		}
	}

	function signRegisterGa(loginType, val, failMsg) {
		var _statusLabel = val ? 'Success' : 'Fail-'
		var msg = ''
		if (failMsg) {
			msg = val ? '' : failMsg
		}
		if (typeof (ga) == 'function') {
			ga('rwus.send', {
				hitType: 'event',
				eventCategory: '登录注册页',
				eventAction: loginType,
				eventValue: val,
				eventLabel: _statusLabel + msg,
			})
		}
	}

	function qvSignClickGa(type, label) {
		var loginType = 'Click' + type
		var loginLabel = type + ' - ' + label
		var queryString = new String(window.location.search)

		if (typeof (ga) == 'function') {
			ga('rwus.send', {
				hitType: 'event',
				eventCategory: '登录注册页',
				eventAction: loginType,
				eventLabel: loginLabel,
			})
		}
	}

	function qvOtherLoginGa(type, val, label) {
		var loginType = type + ' - Sign in'
		var loginLabel = type + ' - ' + label
		var queryString = new String(window.location.search)

		if (typeof (ga) == 'function') {
			ga('rwus.send', {
				hitType: 'event',
				eventCategory: '登录注册页',
				eventAction: loginType,
				eventLabel: loginLabel,
				eventValue: val,
			})
		}
	}

	function gaquickloginOpen(label) {
		ga('rwus.send', {
			hitType: 'event',
			eventCategory: '登录注册页',
			eventAction: 'PopUps',
			eventLabel: label,
		})
	}

	function gaquickloginClose(label) {
		ga('rwus.send', {
			hitType: 'event',
			eventCategory: '登录注册页',
			eventAction: 'ClosePopUps',
			eventLabel: label,
		})
	}

	function preferenceSelect(label) {
		ga('rwus.send', {
			hitType: 'event',
			eventCategory: '登录注册页',
			eventAction: 'SelectPreference',
			eventLabel: label,
		})
	}

	function gaquickloginCheckout(callback, type) {
		if (typeof(ga) == 'function') {
			if (typeof(cart_module) != 'undefined' && cart_module.shopping_bag && cart_module.shopping_bag.info) {
				cart_module.shopping_bag.info.carts.forEach(function(item) {
					var gaParams = {
						id: item.product.productRelationID || item.product.goods_sn,
						category: item.product.cat_id,
						quantity: item.quantity,
						name: item.product.goods_sn,
						price: GB_ga_transformPrice(item.unitPrice.amount),
						variant: item.attr.attr_value,
					}
					ga('rwus.ec:addProduct', gaParams)
				})

				ga('rwus.ec:setAction', 'checkout', { step: 2 })


			}
			else {
				var plist = C_Module.require('shopping-cart-list')
				if (plist && plist.cartVue && plist.cartVue.source && plist.cartVue.source) {
					var carts = plist.cartVue.source
					carts.forEach(function(item) {
						var gaParams = {
							id: item.product.productRelationID || item.product.goods_sn,
							category: item.product.cat_id,
							quantity: item.quantity,
							name: item.product.goods_sn,
							price: GB_ga_transformPrice(item.unitPrice.amount, 1),
							variant: item.attr.attr_value,
						}
						if (item.attr && item.attr_vlaue) {
							item.variant = item.attr.attr_value
						}
						ga('rw.ec:addProduct', gaParams)
					})

					ga('rw.ec:setAction', 'checkout', { step: 2 })

					ga('rw.send', {
						hitType: 'event',
						eventCategory: '购物车页',
						eventAction: 'Checkout',
						eventValue: 1,
						eventLabel: 'Success',
					})
				}
			}
			if (!type) {
				loginGa(1)
			}

		}

		if (typeof(callback) == 'function') {
			callback()
		}
	}

	// 点击 facebook 登录按钮
	$(document).on('click', '.j-fb-quicklogin', function() {
		if (_ga_global_state_quicklogin.loginType == 'Checkout') {
			qvSignClickGa('Facebook', 'Checkout')
		}
		else {
			qvSignClickGa('Facebook', 'Other')
    }
    if(typeof GB_bi_login != 'undefined'){
      GB_bi_login.biSignInThirdParty('facebook');
    }
	})
	$(document).on('click', '.j-google-quicklogin', function() {
		if (_ga_global_state_quicklogin.loginType == 'Checkout') {
			qvSignClickGa('Google', 'Checkout')
		}
		else {
			qvSignClickGa('Google', 'Other')
    }
    if(typeof GB_bi_login != 'undefined'){
      GB_bi_login.biSignInThirdParty('google');
    }
	})
</script>
<script>
  $('.quick-recaptcha').remove();//删除快速登录验证码
  var querys = window.location.search.slice(1).split('&').reduce(function(obj, search) { var arr = search.split('='); obj[arr[0]] = decodeURIComponent(arr[1]); return obj }, {})
  if(querys.action == 'show') {
    $('.j-login-container').hide()
    $('.j-forget-pw-form').show()
  }
  // refresh
  function myrefresh(){
      window.location.reload();
  }
  // Check email & password
  function checkpostEmail(email) {
    var posttips = $('.j-post-emailtip'),
        pwemail = $('.j-fg-pw-email')
    if(!email.length) {
      posttips.removeClass('rw-none');
      posttips.text('Please enter an email address.');
      pwemail.next().addClass('icon-warn');
      return false
    } else if(!pattern.test(email)) {
      posttips.removeClass('rw-none');
      posttips.text('Please enter a valid email address. For example johkyte@example.com.');
      pwemail.next().addClass('icon-warn');
      return false
    } else {
      posttips.addClass('rw-none');
      pwemail.next().removeClass('icon-warn');
      return true
    }
  }
  function checkEmail(email,selector, type, iconClass) {
    var type = type || 'sign-up'
    var icon = iconClass ? '<i class="iconfont '+ iconClass + '"></i> ' : '';
    if(!email.length) {
      selector.removeClass('rw-none');
      selector.html(icon+'Please enter an email address.');
      if (type == 'sign-in') {
        loginGa(0, 'Please fill in the mailbox')
      } else {
        registerGa(0, 'Please fill in the mailbox')
      }
      return false
    } else if(!pattern.test(email)) {
      selector.removeClass('rw-none');
      selector.html(icon+'The email you entered is invalid. Please check your email and try again.');
      if (type == 'sign-in') {
        loginGa(0, 'Mailbox validation failure')
      } else {
        registerGa(0, 'Mailbox validation failure')
      }
      return false
    } else {
      selector.addClass('rw-none');
      return true
    }
  }
  function checkPw(pw,selector,text, type) {
    type = type || 'sign-up'
    if(!pw.length) {
      selector.removeClass('rw-none');
      selector.text(text);
      if (type == 'sign-in') {
        loginGa(0, 'Please enter the password')
      } else {
        registerGa(0, 'Please enter the password')
      }
      return false
    }else if(pw.length < 6) {
      selector.removeClass('rw-none');
      selector.text('Your password must contain at least 6 characters.');
      if (type == 'sign-in') {
        loginGa(0, 'Password validation failure')
      } else {
        registerGa(0, 'Password validation failure')
      }
      return false
    } else if (type != 'sign-in' && !_gb_passwordSafetyExp.test(pw)) {
      selector.removeClass('rw-none');
      selector.text('Your password must be at least 8 characters long and include at least one letter and one number.');
      registerGa(0)
      return false
    } else {
      return true
    }
  }
  var romwe_verified_callback = function(){
    $('.j-signup').prop('disabled', false)
  }
  var romwe_expired_callback = function(){
    $('.j-signup').prop('disabled', true)
  }

  function quicklogin_operate(type) {
      quickLogin.state.quickLogin = false
      $.ajax({
        type: 'POST',
        url: '/user/auth/getUserInfo',
        success: function(data) {
          var username = data.username
          var hi = "Hello "
          var loginURL = "https://us.romwe.com/user/auth/login?direction=nav"
          var loginPrompt = "Sign in/Register"
          if (username != null){
            $('.j-header-username').text(hi + ' ' + username)
            $('.j-header-login').prop('href', "https://us.romwe.com/user/index")
            $('.j-operate-item').removeClass('rw-hide')
            if(typeof GB_headerOrderVue != 'undefined'){
              GB_headerOrderVue.isLogin = true;
            }
          } else {
            $('.j-header-username').text(loginPrompt)
            $('.j-header-login').prop('href', loginURL)
            $('.j-operate-item').addClass('rw-hide')
          }
        }
      })

      $.get('/user/wishlist', {}, function(res) {
          var wishcount = res.count;
          if(wishcount > 99){
              $('.j-wishlist-info').find('em').html("99+")
          }else{
              $('.j-wishlist-info').find('em').html(wishcount)
          }
      })
      // wishlist
      if(global_wishlist_id) {
          $.getJSON('/user/wishlist/add', {goods_id: global_wishlist_id}, function(data) {
              if(data.data) {
                  if(data.data.code == 0 || data.data.code == 400401) {
                      console.log(global_wishlist_id)
                      if (window.branchEvent) {
												window.branchEvent.addToWishlist({
													sku: global_wishlist_id,
													quantity: 1
												});
											}
                  }
              }
          });
      }
      // checkout
      if(_global_checkout_qiucklogin == true) {
        gaquickloginCheckout(function() {
          window.sessionStorage && window.sessionStorage.setItem('page_from', 'login')
          window.location = 'https://us.romwe.com/checkout/place_order'
        },type)
      }

      if(_global_blackfriday_quicklogin == true) {
        window.location = 'https://us.romwe.com/World-Cup-2018.html'
      }

      if(_global_fbgiveaway_quicklogin == true){
        window.location = 'https://us.romwe.com/Independence-Day-2018.html'
      }
      if('us' == 'uk'){
        if(typeof(quickLogin.successCallback)!="undefined") quickLogin.successCallback.addWishList();
        loginAfterHandle();
      }
  }

  $(document).on('focus','.j-quick-new-register input',function(){
      $(this).next().removeClass('icon-warn');
      $(this).parent().siblings('p').addClass('rw-none');
  })

  $(document).on('focus','.j-quick-new-signin input',function(){
      $(this).next().removeClass('icon-warn');
      $(this).parent().siblings('p').addClass('rw-none');
  })


  $(document).on('click','.j-login-save',function(e){
    var showFrom = $(this).data('to')
    if(showFrom){
      quickLogin.showFrom = showFrom;
    }else{
      quickLogin.showFrom = "";
    }
  })

  function loginAfterHandle(){
    //list
    if(typeof GB_ROMWE_goods_list != 'undefined'){
      if(quickLogin.showFrom == 'listsave' && GB_ROMWE_goods_list.cacheHandleDom){
        GB_ROMWE_goods_list.add_wish(GB_ROMWE_goods_list.cacheHandleDom)
      }
    }

    //cart
    if(quickLogin.showFrom == 'cartsave' && C_Module.require('shopping-cart-list') && C_Module.require('shopping-cart-list').cartVue && C_Module.require('shopping-cart-list').cartVue.cacheIndex != null){
      C_Module.require('shopping-cart-list').cartVue.$refs.cartlist.handleSave(C_Module.require('shopping-cart-list').cartVue.$refs.cartlist.id,C_Module.require('shopping-cart-list').cartVue.cacheIndex)
    }
  }

  var pattern= /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,6}|[0-9]{1,3})(\]?)$/
  $(function() {
    if(ROMWE_W.getCookie('signup_recaptcha') && ROMWE_W.getCookie('signup_recaptcha') == 0){
      $('.g-recaptcha').show();
      $('.j-signup').prop('disabled', true)
    }
    $('.j-login-container input,.j-forget-pw-form input').focus(function(){
      $(this).next().removeClass('icon-warn');
      $(this).parent().siblings('p').addClass('rw-none');
    })

    $('.j-login-email').blur(function(){
      checkEmail($('.j-login-email').val(),$('.j-email-tips'), 'sign-in')
    })
    $('.j-login-pw').blur(function(){
      var passText = 'Please enter your password.'
      checkPw($('.j-login-pw').val(),$('.j-pass-tips'),passText, 'sign-in')
    })

    // Sign in
     $(document).on('click', '.j-login-quicklogin', function() {
      if(typeof GB_bi_login != 'undefined'){
        GB_bi_login.biClickLoginRegister('popup_login_signin');
      }
      var $loginEmail = $('.j-login-email')
      var $loginPw = $('.j-login-pw')
      var email = $loginEmail.val()
      var pw = $loginPw.val()
      var $emailtips = $('.j-email-tips')
      var $passtips = $('.j-pass-tips')
      var passText = 'Please enter your password.'
      if( email == '' && pw == '' ){
          $loginEmail.next().addClass('icon-warn');
          $loginPw.next().addClass('icon-warn');
          $emailtips.removeClass('rw-none');
          $passtips.removeClass('rw-none');
          if(typeof GB_bi_login != 'undefined'){
            GB_bi_login.biSignInResult('failure', 'empty_email');
          }
      }
      if (checkEmail(email,$emailtips, 'sign-in') && checkPw(pw,$passtips,passText, 'sign-in')) {
        $('.j-login-signin').addClass('rw-none').next().removeClass('rw-none')
        $.ajax({
          type: 'POST',
          url: '/user/auth/login',
          data: {
            email: email,
            password: pw
          },
          success: function(data) {
            if (data.code == 0) {
              if(ROMWE_W.getCookie('keepPrivacy') == 1) {
                $.post('/user/account_setting/showAgreeClause', {}, function(res){})
              }
              if(_global_checkout_qiucklogin != true) {
                loginGa(1)
              }
              if(typeof GB_bi_login != 'undefined'){
                GB_bi_login.biSignInResult('success', '');
              }
              if(typeof saLogin != 'undefined'){
                saLogin.clickSign();
              }
              quicklogin_operate()
              
				        typeof pintrk_login_success === 'function' && pintrk_login_success('track', 'signup')
              
            } else if(data.code == 300206) {
              window.location = 'https://us.romwe.com/user/auth/logout'
            }else {
              loginGa(0, data.msg)
              $('.j-login-tips').removeClass('rw-none');
              $('.j-login-signin').removeClass('rw-none').next().addClass('rw-none')
            }

            if(data.code != 0 && typeof GB_bi_login != 'undefined'){
              if(data.code == 400504){
                GB_bi_login.biSignInResult('failure', 'unmatched_password_and_email');
              }else{
                GB_bi_login.biSignInResult('failure', 'other');
              }
            }

          },
          error: function() {
            if(typeof GB_bi_login != 'undefined'){
              GB_bi_login.biSignInResult('failure', 'network_error');
            }
          }
        })
        // 保存用户邮箱
        window.localStorage.setItem('_user_login_email', email)
      }else{
          var error_tips;
          if(!email.length){
            
          }else if(!pattern.test(email)){
            error_tips = "incorrect_email_format"
          }else if(!pw.length){
            error_tips = "empty_password"
          }else if(pw.length < 6){
            error_tips = "password_less_than_6_characters"
          }
          if(typeof GB_bi_login != 'undefined' && error_tips){
            GB_bi_login.biSignInResult('failure', error_tips);
          }
      }
    })

    var g_shein_exprie = 60* 60 *24
    $('.j-signup-email').blur(function(){
      checkEmail($('.j-signup-email').val(),$('.j-newemail-tips'), 'sign-up')
    })
    $('.j-signup-cpw').blur(function(){
      if(!$('.j-signup-cpw').val().length) {
        $('.j-regs-cpass').removeClass('rw-none').text('Your passwords do not match, please try again.');
      }else if($('.j-signup-cpw').val() != $('.j-signup-pw').val()) {
        $('.j-regs-cpass').removeClass('rw-none').text('Your passwords do not match, please try again.');
      }else {
        $('.j-regs-cpass').addClass('rw-none').text('');
      }
    })
    // Sign up
    $(document).on('click', '.j-signup-quicklogin', function() {
      if(typeof GB_bi_login != 'undefined'){
        GB_bi_login.biClickLoginRegister('popup_login_register');
      }
      $('.j-privacytips').text('')
      var $signupEmail = $('.j-signup-email')
      var $signupPw = $('.j-signup-pw')
      var $signupCpw = $('.j-signup-cpw')
      var $signup = $('.j-signup')
      var email = $signupEmail.val()
      // var pw = $signupPw.val()
      var pw = quickLogin.inputRegisterPsd
      var cpw = $signupCpw.val()
      var $newemailtips = $('.j-newemail-tips')
      var $regspass = $('.j-regs-pass')
      var $regscpass = $('.j-regs-cpass')
      var passText = 'Your password must contain at least 6 characters.'
      if($('#g-recaptcha-response').length && PageGroup && PageGroup != '购物车页') {
        var $recaptcha = $('#g-recaptcha-response-1')
      }else {
         var $recaptcha = $('#g-recaptcha-response')
      }
      var preferenceCheckbox = $('.j-prefer-select input:checkbox:checked');
      var preferenceData = [];
      preferenceCheckbox.each(function(index,checkbox){
        preferenceData.push(parseInt(checkbox.name));
        preferenceSelect(checkbox.value);
      })
      if( email == '' && pw == '' && cpw == '' ){
          // registerGa(0)
          $signupEmail.next().addClass('icon-warn');
          // $signupPw.next().addClass('icon-warn');
          $signupCpw.next().addClass('icon-warn');
          $newemailtips.removeClass('rw-none').text("The email address or password is incorrect!");
          // $regspass.removeClass('rw-none');
          $regscpass.removeClass('rw-none').text('Your password must contain at least 6 characters.');

          if(typeof GB_bi_login != 'undefined'){
            GB_bi_login.biRegisterResult('failure', 'empty_email');
          }

          if(!_gb_passwordSafetyExp.test(pw)){
            quickLogin.safety.focusAll = 0
            quickLogin.safety.hideAll = 0
            quickLogin.safety.showAll = 1
            registerGa(0,'Please fill in the mailbox')//邮箱为空时无论密码填什么都发此埋点
            return false;
          }
      }else {
        // registerGa(0)
        if(pw != cpw){
          $signupCpw.next().addClass('icon-warn')
          $regscpass.removeClass('rw-none').text('Your passwords do not match, please try again.');
        }
        var quick_register_eventLabel;
        var error_reason;
        if(!pattern.test(email)){
          if(!email.length){
            error_reason = "empty_email"
          }else{
            error_reason = "incorrect_email_format"
          }
        } else if (!_gb_passwordSafetyExp.test(pw) || !_gb_passwordSafetyExp.test(cpw)) {
          quick_register_eventLabel = "Password format is incorrect";
          if(!pw.length){
            error_reason = "empty_password"
          }else if(!_gb_passwordSafetyExp.test(pw)){
            error_reason = "invalid_password"
          }else{
            error_reason = "confirm_password_inconsis"
          }
        } else if (pw != cpw) {
          quick_register_eventLabel = "The password and the confirmation you typed do not match";
          error_reason = "confirm_password_inconsis"
        }
        if(quick_register_eventLabel){
          registerGa(0,quick_register_eventLabel)
        }
        if(typeof GB_bi_login != 'undefined' && error_reason){
          GB_bi_login.biRegisterResult('failure', error_reason);
        }
      }

      if (checkEmail(email,$newemailtips) && quickLogin.checkregPw(pw) && pw === cpw) {
        var signipUserData = {
          email: email,
          password: pw,
          password_confirm: cpw,
          prefer: preferenceData
        }
        if($recaptcha && $recaptcha.val() != ''){
          signipUserData.g_recaptcha_response = $recaptcha.val();
        }

          // 验证隐私政策是否勾选
        

          if(_gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1 && true) {
              if(!ROMWE_W.getCookie('keepPrivacy')) {
                privacy_vue.usarticleshow=true;
                if(!$('.j-privacy-checkbox').is(':checked')) {
                  $('.j-create-account').removeClass('rw-none').next().addClass('rw-none')
                  if(typeof GB_bi_login != 'undefined'){
                    GB_bi_login.biRegisterResult('failure', 'other');
                  }
                  return
                }
              }
            }else if(true && !_gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1){

            }else {
              if(!ROMWE_W.getCookie('keepPrivacy')) {
                $('.j-footer-check-item .j-check-privacy').removeClass('rw-hide');
                  if(!$('.j-quickregister-agree').is(':checked')) {
                    $('.j-privacytips').text("Please agree to the Privacy Policy")
                    if(typeof GB_bi_login != 'undefined'){
                      GB_bi_login.biRegisterResult('failure', 'other');
                    }
                    return
                  }else {
                    $('.j-privacytips').text('')
                  }
              }else {
                $('.j-footer-check-item .j-check-privacy').addClass('rw-hide');
              }
            }
          



        $('.j-create-account').addClass('rw-none').next().removeClass('rw-none')

        signipUserData.register_type = 'email'
        dataVisorCb(signipUserData, function(json) {
          $.ajax({
            type: 'POST',
            url: '/user/auth/signup',
            contentType: 'application/json',
            data:  JSON.stringify(json),
            success: function(data) {
              if (data.code == 0) {
                clearInterval(signupTimeTag);
                //同步订阅
                if(gbCommonInfo.GDPR_SITE.indexOf(gbCommonInfo.lang) > -1){
                  if($('.j-footer-check-item .j-register-agreesub').is(':checked')){
                    ROMWE_W.bindSubscribe(email);
                  }
                }
                if(gbCommonInfo.lang == 'us' && ROMWE_W.getCookie('keepSubscribe')){
                    ROMWE_W.bindSubscribe(email);
                }

                if(typeof saLogin != 'undefined'){
                  saLogin.clickRegist(preferenceData || []);
                }
                registerGa(1)

                if(typeof GB_bi_login != 'undefined'){
                  GB_bi_login.biRegisterResult('success', '');
                }
                // 保存用户邮箱
                window.localStorage.setItem('_user_login_email', email)
                // 埋点代码开始
                analysisModule.regSuccess()
                // 埋点代码结束

                $.post('/user/auth/login', {
                  email: email,
                  password: pw
                }, function(data) {
                  if(data.code == 0) {
                    if(ROMWE_W.getCookie('keepPrivacy') == 1) {
                      $.post('/user/account_setting/showAgreeClause', {}, function(res){})
                    }
                    quicklogin_operate('signup')
                    ROMWE_W.bindFirstCoupon();
                      
                        typeof pintrk_login_success === 'function' && pintrk_login_success('track', 'signup')
                      
                  } else if(data.code == 300206) {
                    window.location = 'https://us.romwe.com/user/auth/logout'
                  }

                })
              } else if(data.code == 300206) {
                window.location = 'https://us.romwe.com/user/auth/logout'
              }else if(data.code == 400503) {
                registerGa(0, data.msg)
                $('.j-create-account').removeClass('rw-none').next().addClass('rw-none')
                $newemailtips.removeClass('rw-none').text("Sorry, this email has been used, try another one.");
              } else if(data.code == 400517 || data.code == 400522) {
                registerGa(0, data.msg)
                $('.j-create-account').removeClass('rw-none').next().addClass('rw-none')
                $newemailtips.removeClass('rw-none').html("We're so sorry to inform you that your IP is limited to register more . For further help, please <a onclick='zenDeskComponent.activeOnlineHelp()' style='color:#00F;' href='javascript:void(0)'>contact us</a> !");
              }else if(data.code == 1404){
                registerGa(0, data.msg)
                ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_exprie);
                $('.g-recaptcha').show();
                //grecaptcha.reset();
                quickLogin.$nextTick(function(){
                    grecaptcha.render(document.getElementById('recaptcha-quick'), {
                      'sitekey' : '6LcONjEUAAAAALw5UtyWsT3pbnTNhEyda_VWb66-'
                    });
                  });
                $signup.prop('disabled', true)
                $('.j-create-account').removeClass('rw-none').next().addClass('rw-none')
              }else if(data.code == 1403){
                registerGa(0, data.msg)
                ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_exprie);
                $('.g-recaptcha').show();
                // grecaptcha.reset();
                quickLogin.$nextTick(function(){
                    grecaptcha.render(document.getElementById('recaptcha-quick'), {
                      'sitekey' : '6LcONjEUAAAAALw5UtyWsT3pbnTNhEyda_VWb66-'
                    });
                  });
                $signup.prop('disabled', true)
                $('.j-create-account').removeClass('rw-none').next().addClass('rw-none')
                $('.signup-verification-error').show();
              }

              if(data.code != 0 && typeof GB_bi_login != 'undefined'){
                if(data.code == 400503){
                  GB_bi_login.biRegisterResult('failure', 'registered_email');
                }else if(data.code == 400517 || data.code == 400522){
                  GB_bi_login.biRegisterResult('failure', 'IP_limit_error');
                }else{
                  GB_bi_login.biRegisterResult('failure', 'other');
                }
              }

            },
            error: function() {
              if(typeof GB_bi_login != 'undefined'){
                GB_bi_login.biRegisterResult('failure', 'network_error');
              }
            }
          })
        })
        
        // 订阅邮箱
        // if ($('.j-login-subscribe').prop('checked')) {
        //   $.ajax({
        //     type: 'POST',
        //     url: '/user/auth/subscribe',
        //     data: {
        //       email: email
        //     },
        //     success: function(data) {}
        //   })
        // }
      }
    })

    $(".j-login-email,.j-signup-email").mailAutoComplete();

    $(document).on('click','.j-forget-pw-quicklogin',function(){
   // $('.j-forget-pw-quicklogin').click(function(){
     ga('rwus.send', {
        hitType: 'event',
        eventCategory: "登录注册页",
        eventAction: 'ClickForgotYourPassword'
      })
      location.href = 'https://us.romwe.com/user/auth/login?from=quicklogin';
    })

    if(ROMWE_W.getQueryString('from') === 'quicklogin') {
      $('.j-login-container-page').hide()
      $('.j-forget-pw-form').show()
    }
    // fb 登录
    // $('.j-fb-login').click(function() {
    $(document).on('click', '.j-fb-quicklogin', function() {
      fbLoginBegin('login')
      signupTimeRecord();
    })
  });
  // Facebook 登录
  var fbuid, fbtoken;
  function fbLogin(fbUid,fbToken,fbEmail, email_source){
    email_source = email_source || 0
    dataVisorCb({
      email: fbEmail,
      facebook_id:fbUid,
      fbtoken:fbToken,
      invite_agency: 0,
      email_source: email_source,
      register_type: 'facebook'
    }, function(json) {
      $.ajax({
        url: '/user/auth/fblogin',
        type: 'POST',
        data: JSON.stringify(json),
        contentType: 'application/json',
        success: function(data){
          if(data.code == 0){
            clearInterval(signupTimeTag);
            if(_ga_global_state_quicklogin.loginType == 'Checkout') {
              qvOtherLoginGa('Facebook', 1, 'Checkout')
            }else {
              qvOtherLoginGa('Facebook', 1, 'Other')
            }
            if(data.info && data.info.member && typeof GB_bi_login != 'undefined'){
              if(data.info.member.isRegister){
                GB_bi_login.biSignInThirdParty('facebook', 'register');
                // 埋点代码开始
                analysisModule.regSuccess()
              }else{
                GB_bi_login.biSignInThirdParty('facebook', 'login');
              }
            }
          }else{
            if(_ga_global_state_quicklogin.loginType == 'Checkout') {
                qvOtherLoginGa('Facebook', 0, 'Checkout')
            }else {
              qvOtherLoginGa('Facebook', 0, 'Other')
            }
          }
          if(data.code == 0){
            quicklogin_operate('Facebook')
            if(facebookLogin){
              facebookLogin.fbloginClose()
            }
          } else if(data.code == 400507){
            facebookLogin.fbloginOpen('facebook')
          } else {
            alert('Please try later')
          }
        },
        error: function(xhr, text, error){
          var data = JSON.parse(xhr.responseText)
          data.msg && alert(data.msg)
          if(_ga_global_state_quicklogin.loginType == 'Checkout') {
              qvOtherLoginGa('Facebook', 0, 'Checkout')
          }else {
            qvOtherLoginGa('Facebook', 0, 'Other')
          }
        }
      })
    })
      
  }
  function fbLoginBegin(status, to_url) {
    FB.login(function(response) {
        if (response.authResponse) {
            //var fbuid = response.authResponse.userID;
            fbtoken = response.authResponse.accessToken;
            facebook_fan = 0;
            $("#foot_facebook_share").show();
            FB.api('/me?fields=email,name', function(response) {
              fbuid = response['id'];
              var fbEmail = '';
              if(typeof(response['email']) != 'undefined' && response['email'] !='undefined' && response['email'] ){
                  fbEmail=response['email'];
              }
              fbLogin(fbuid,fbtoken,fbEmail,0,to_url);
            });
        } else {
          if(_ga_global_state_quicklogin.loginType == 'Checkout') {
              qvOtherLoginGa('Facebook', 0, 'Checkout')
          }else {
            qvOtherLoginGa('Facebook', 0, 'Other')
          }
          alert('Please try later')
            return;
        }
  }, {
            scope : 'email,user_likes'
      }  );
    }

  //google 登陆
  function googleLogin(google_id, email, id_token){
    if(!email){
      facebookLogin.fbloginOpen('google')
    }else{
      dataVisorCb({
        email: email, 
        google_id: google_id,
        id_token: id_token,
        register_type: 'google'
      }, function(json) {
        $.ajax({
          type: 'POST',
          url: '/user/auth/googleLogin',
          data: JSON.stringify(json),
          contentType: 'application/json',
          success: function(data) {
            if(data.code == 0){
                clearInterval(signupTimeTag);
                if(_ga_global_state_quicklogin.loginType == 'Checkout') {
                    qvOtherLoginGa('Google', 1, 'Checkout')
                }else {
                  qvOtherLoginGa('Google', 1, 'Other')
                }

                if(data.info && data.info.member && typeof GB_bi_login != 'undefined'){
                  if(data.info.member.isRegister){
                    GB_bi_login.biSignInThirdParty('google', 'register');
                    // 埋点代码开始
                    analysisModule.regSuccess()
                  }else{
                    GB_bi_login.biSignInThirdParty('google', 'login');
                  }
                }

                /* if(typeof cb == 'function'){
                  cb();
                } */
                quicklogin_operate('Google')
                if(facebookLogin){
                  facebookLogin.fbloginClose()
                }
            } else {
              if(_ga_global_state_quicklogin.loginType == 'Checkout') {
                  qvOtherLoginGa('Google', 0, 'Checkout')
              }else {
                qvOtherLoginGa('Google', 0, 'Other')
              }
              alert('Please try later')
            }
          }
        })
      })
    }
  }


    //ga ec start
  ;+function(){
    var _redirection = ROMWE_W.queryString.parse(location.search).redirection
    var _direction = ROMWE_W.queryString.parse(location.search).direction
    _direction = decodeURIComponent(_direction)
    _redirection = decodeURIComponent(_redirection)
    if(_redirection.indexOf('checkout') > -1) {
      cart_module.cartFn.push(function(data) {
        // ga('set', '&cu', 'USD')
        data.info.carts.forEach(function(item) {
          var gapItem = {
            id: item.product.productRelationID||item.product.goods_sn,
            name: item.product.goods_sn,
            category: item.product.cat_id,
            variant: item.attr.attr_value,
            price: GB_ga_transformPrice(item.unitPrice.amount, 1),
            quantity: item.quantity,
          };
          if(item.attr.attr_value) {
            gapItem.variant = item.attr.attr_value
          }
          ga('rwus.ec:addProduct', gapItem);
        })
        ga('rwus.ec:setAction', "checkout",{step:2});
        // ga('rwus.send', {
        //   hitType: 'event',
        //   eventCategory: 'Sign',
        //   eventAction: 'Load',
        //   eventLabel: 'Check'
        // })
      })
    }
  }()
  //ga ec start
</script>

<script type="text/javascript">
	var facebookLogin = new Vue({
		el: '.j-login-container',
		data: {
			state: {
				fblogin: false,
				email: '',
			},
			loginType: '',
			preferOptions: [],
			tab: 'signin',
		},
		methods: {
			fbloginOpen: function(type) {
				this.state.fblogin = true
				this.loginType = type
			},

			fbloginClose: function() {
				this.state.fblogin = false
			},
			ok: function() {
				// this.state.fblogin = false;
				var email = this.state.email
				if (!email.length || !pattern.test(email)) {
					$('.j-fblogin-tips').text('email has been used by others')
				}
				else {
					if (this.loginType == 'google') {
						googleLogin(googleuid, email)
					}
					else if (this.loginType == 'facebook') {
						fbLogin(fbuid, fbtoken, email, 1)
					}
				}
			},
		},
	})
	
</script>
<script type="text/javascript">
	var _user_login_email = window.localStorage.getItem('_user_login_email') || ''
	setTimeout(function() {
		if ($('.j-login-email').val()) return

		$('.j-login-email').val(_user_login_email)
	}, 500)
</script>
<script>
    var signupTime = 0,
        signupTimeTag;
        
    function signupTimeRecord() {
        if(signupTime == 0){
            signupTimeTag = setInterval(function() {
                signupTime = signupTime+100;
            }, 100)
        }
    }
    function dataVisor() {
        return {
            register_country: ROMWE_W.getCookie('country_tag_outdated')||'',
            resolution: window.screen.width*(window.devicePixelRatio||1) + 'X' + window.screen.height*(window.devicePixelRatio||1),
            batterystate: '',
            batterylevel: '',
            register_TimeLong: signupTime  //注册时长
        };
    }
    function dataVisorCb(data, cb) {
        var biData = dataVisor()
        biData.register_type =  data.register_type;
        
        if(navigator && navigator.getBattery){
            try{
                navigator.getBattery().then(function (battery) {
                    // 设备电池信息
                    biData.batterystate = battery.charging?'Charging':'Unplugged'; //获取设备是否在充电
                    biData.batterylevel = battery.level*100+'%';  //电池电量
                    data.biData = biData
                    cb(data)
                });
            }catch(e) {
                data.biData = biData
                cb(data)
            }
            
        }else {
            data.biData = biData
            cb(data)
        }
    }
    
  </script>
<script>
    var saLogin = {
        clickSign: function(){
        sa('send',{'activity_name':'click_signin','activity_param':''});
        },
        clickRegist: function(prepferences){
        var preferences = '';
        if(prepferences && prepferences.length){
            for(var i = 0;i<prepferences.length;i++){
            preferences += prepferences[i]+',';
            }
            if(preferences.length>0){preferences = preferences.substring(0,preferences.length-1)}
        }
        sa('send',{'activity_name':'click_register','activity_param':{style_preference:preferences}});
        },
        bindEvent:function(){},
        load:function(){
            //进入页面
            if(typeof SaPageInfo != 'undefined'&& SaPageInfo.page_id == 15){
                sa('set','setPageData',SaPageInfo);
                sa('send','pageEnter',{start_time:new Date().getTime()});
                //退出页面
                window.onbeforeunload = function(){sa('send','pageLeave',{end_time:new Date().getTime()});};
            }
        },
        ready:function(){
            this.bindEvent();
        }
    };
    saLogin.load();
    $(function(){
        saLogin.ready();
    });

    var GB_bi_login = {
        biClickLoginRegister: function(ac_name){
            if(typeof SaPageInfo != 'undefined' && (SaPageInfo.page_id == 8 || SaPageInfo.page_id == 15)){
                var sadata_click
                sadata_click = $.extend({}, SaPageInfo, {
                    activity_name: 'click_' + ac_name,
                    activity_param: "",
                })
                if(SaPageInfo.page_id == 8){
                    sadata_click = $.extend({}, sadata_click, {
                        activity_param: {
                            trigger: 'page_cart',
                        },
                    }) 
                }
                sa("send", sadata_click)
            }
        },
        biExposeLoginRegister: function(ac_name){
            if(typeof SaPageInfo != 'undefined' && (SaPageInfo.page_id == 8 || SaPageInfo.page_id == 15)){
                var sadata_expose = $.extend({}, SaPageInfo, {
                    activity_name: 'expose_' + ac_name,
                })
                if(SaPageInfo.page_id == 8){
                   sadata_expose = $.extend({}, sadata_expose, {
                        activity_param: {
                            trigger: 'page_cart',
                        },
                   }) 
                }
                sa("send", sadata_expose)
            }
        },
        biSignInResult: function(status, reason){
            if(typeof SaPageInfo != 'undefined' && (SaPageInfo.page_id == 8 || SaPageInfo.page_id == 15)){
                var sadata_sign, ac_name, ac_param;
                ac_name = SaPageInfo.page_id == 8 ? 'click_popup_login_signin_result' : 'click_signin_result'
                ac_param = {
                    status: status,
                    failure_reason: reason,
                }
                if(SaPageInfo.page_id == 8){
                    ac_param = $.extend({}, ac_param, {
                        trigger: 'page_cart',
                    })
                }
                sadata_sign = $.extend({}, SaPageInfo, {
                    activity_name: ac_name,
                    activity_param: ac_param,
                })
                sa("send", sadata_sign)
            }
        },
        biRegisterResult: function(status, reason){
            if(typeof SaPageInfo != 'undefined' &&(SaPageInfo.page_id == 8 || SaPageInfo.page_id == 15)){
                var sadata_register, ac_name, ac_param;
                ac_name = SaPageInfo.page_id == 8 ? 'click_popup_login_register_result' : 'click_register_result'
                var is_preference, sa_preference = "", privacy, receive;
                if($('.j-prefer-select .prefer-item').length){
                    is_preference = 1;
                }else{
                    is_preference = 0;
                }
                var preferenceCheckbox = $('.j-prefer-select input:checkbox:checked');
                preferenceCheckbox.each(function(index,checkbox){
                    sa_preference = sa_preference + checkbox.name + '-' + checkbox.value + ', '
                })
                if($('.j-footer-check-item').length && $('.j-footer-check-item').is(':visible') && $('.j-footer-check-item .j-quickregister-agree').is(':checked')){
                    privacy = 1;
                }else{
                    privacy = 0;
                }
                if($('.j-footer-check-item').length && $('.j-footer-check-item').is(':visible') && $('.j-footer-check-item .j-register-agree').is(':checked')){
                    receive = 1;
                }else{
                    receive = 0;
                }
                ac_param = {
                    privacy_policy: privacy,
                    email_receive: receive,
                    styleperference_show: is_preference,
                    styleperference: sa_preference,
                    status: status,
                    failure_reason: reason,
                }
                if(SaPageInfo.page_id == 8){
                    ac_param = $.extend({}, ac_param, {
                        trigger: 'page_cart',
                    })
                }
                sadata_register = $.extend({}, SaPageInfo, {
                    activity_name: ac_name,
                    activity_param: ac_param,
                })
                sa("send", sadata_register)
            }
        },
        biForgotPwPage: function(ac_name, status, reason){
            var forgotPwInfo = {
                page_id: '504', 
                page_name: 'page_forgot_pw',
                page_param:'',
                start_time: new Date().getTime(),
            }
            var sadata_pw;
            if(status){
                sadata_pw = $.extend({}, forgotPwInfo, {
                    activity_name: 'click_' + ac_name,
                    activity_param: {
                        status: status,
                        failure_reason: reason ? reason : '',
                    }
                })
            }else if(ac_name){
                sadata_pw = $.extend({}, forgotPwInfo, {
                    activity_name: 'click_' + ac_name,
                    activity_param: "",
                })
            }
            if(sadata_pw){
                sa("send", sadata_pw)
            }
        },
        biSignInThirdParty: function(name, type){
            if(typeof SaPageInfo != 'undefined' && (SaPageInfo.page_id == 8 || SaPageInfo.page_id == 15)){
                var sadata_third, ac_name, ac_param;
                if(SaPageInfo.page_id == 8){
                    ac_name = type ? 'click_popup_login_signin_third_party_result' : 'click_popup_login_signin_third_party';
                }else{
                    ac_name = type ? 'click_signin_third_party_result' : 'click_signin_third_party';
                }
                var ac_param = {
                    third_party: name,
                }
                if(SaPageInfo.page_id == 8){
                    ac_param = $.extend({}, ac_param, {
                        trigger: 'page_cart',
                    })
                }
                if(type){
                    ac_param = $.extend({}, ac_param, {
                        type: type,
                    })
                }
                sadata_third = $.extend({}, SaPageInfo, {
                    activity_name: ac_name,
                    activity_param: ac_param,
                })
                sa("send", sadata_third)
            }
        }
    }
</script>


<!-- footer -->
<!-- 修复google 自动填充页面第一个input bug,ps:无法用display:none和visibility:hidden解决此问题 -->
<input type="text" style="width:0;height:0;border:0;position:absolute;opacity:0" placeholder="勿删">
<footer class="c-footer container-fluid">
    <div class="footer-email">
        <div class="">
            <div class="item">
                <i class="iconfont icon-email"></i>
            </div>
            <div class="c-form-group">
                <div class="input-icon">
                    <input type="text" class="rw-input-s j-footer-subscribe" placeholder="Your Email Address">
                </div>
                <p class="text-error j-footer-errormsg"></p>
            </div>
            <button class="rw-btn-red rw-btn-xs j-subscribe-submit">
                <div class="j-footer-submit">SUBSCRIBE</div>
                <div class="la-line-scale la-sm rw-none"><div></div> <div></div> <div></div> <div></div> <div></div></div>
            </button>
            
        </div>
    </div>
    <div class="footer-list row rw-clearfix">
        <div class="col-md-10 col-xs-12 col-md-offset-1">
            <div class="col-md-6 col-xs-6">
                <div class="col-md-4 col-xs-4 info">
                    <h5>ABOUT</h5>
                    <ul>
                        <li><a href="https://us.romwe.com/About-Us-a-117.html">About Us</a></li>
                        <li><a href="https://us.romwe.com/affiliate-a-427.html">Affiliate</a></li>
                        <li><a href="https://us.romwe.com/contact-us.html">Contact Us</a></li>
                        
                    </ul>
                </div>
                <div class="col-md-4 col-xs-4 info">
                    <h5>HELP</h5>
                    
                    <ul>
                        <!-- <li><a target="_blank" href="https://help.romwe.com/hc/en-nz">FAQ</a></li> -->
                        <li><a target="_blank" class="rw-footer-faq" href="https://us.romwe.com/faq/index">FAQ</a></li>
                        <li><a href="https://us.romwe.com/Free-Shipping-a-471.html">Shipping</a></li>
                        <li><a href="https://us.romwe.com/Return-Policy-a-281.html">Return</a></li>
                        <li><a href="https://us.romwe.com/size-guid-a-466.html">Size guide</a></li>
                        <li><a href="https://us.romwe.com/How-to-order-a-276.html">How to Order</a></li>
                    </ul>
                </div>
                <div class="col-md-4 col-xs-4 info">
                    <h5>My Account</h5>
                    <ul>
                        <li><a href="https://us.romwe.com/user/wishlist">Wishlist</a></li>
                        <li><a href="https://us.romwe.com/How-to-track-my-order-a-477.html">Track Your Order</a></li>
                        <li><a href="https://us.romwe.com/user/orders/list">Order history</a></li>
                        <!-- <li><a href="https://us.romwe.com/read-policy-a-453.html">Fashion Blog Program</a></li> -->
                        <li><a href="https://us.romwe.com/member-image-list-outfit.html">Outfit</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-xs-6">
                <div class="row">
                    <div class="col-md-5 col-xs-5 app">
                        <h5>APP</h5>
                        <div class="link-app">
                            <span>
                                <a class="iconfont icon-app j-apple-app"></a> /
                                <a class="iconfont icon-andrio j-andriod-app"></a>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-7 col-xs-7 share">
                        <div class="link-share">
                            <img src="//romwe.ltwebstatic.com/rw_dist/images/rw-logo-8add85128c.png">
                            <div>
                                <a href="https://www.instagram.com/romwe_fashion/" class="iconfont icon-inst"></a> /
                                <a href="https://business.facebook.com/Romwe.official/" class="iconfont icon-fb"></a> /
                                <a href="https://twitter.com/ROMWESHOP" class="iconfont icon-tww"></a> /
                                <a href="https://www.pinterest.com/Official_Romwe/" class="iconfont icon-pint"></a> /
                                <a href="https://www.youtube.com/user/romweshop" class="iconfont icon-youtub"></a> /
                                <a href="http://romwe-fashion.tumblr.com/" class="iconfont icon-tmb"></a> /
                                <a href="https://www.snapchat.com/add/romwe_official" class="iconfont icon-snapchat"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright">© 2009-2019, ROMWE All Rights Reserved.</div>
    <div class="footer-notice">
        <a href="https://us.romwe.com/Privacy-Security-Policy-a-488.html">Privacy &amp; Security Policy</a>
        <span>/</span>
        <a href="https://us.romwe.com/terms-and-conditions-a-399.html">Terms &amp; Conditions</a>
        <span>/</span>
        <a href="https://us.romwe.com/copyright-notice-a-379.html">Copyright Notice</a>
		
    </div>
</footer>
<script>
    ;(function() {
        $('.j-apple-app').click(function(){
        if(false){
            window.location.href = 'https://itunes.apple.com/fr/app/romwe-shopping-fashion-clothing/id1080248000?mt=8'
        }else if(false){
            window.location.href = 'https://itunes.apple.com/es/app/romwe-shopping-fashion-clothing/id1080248000?mt=8'
        }else if(false){
            window.location.href = 'https://itunes.apple.com/de/app/romwe-shopping-fashion-clothing/id1080248000?mt=8'
        }else{
            window.location.href = 'https://itunes.apple.com/us/app/romwe-shopping-fashion-clothing/id1080248000?mt=8'
        }
        });
        $('.j-andriod-app').click(function(){
        if(false){
            window.location.href = 'https://play.google.com/store/apps/details?id=com.romwe&hl=fr'
        }else if(false){
            window.location.href = 'https://play.google.com/store/apps/details?id=com.romwe&hl=es'
        }else if(false){
            window.location.href = 'https://play.google.com/store/apps/details?id=com.romwe&hl=de'
        }else{
            window.location.href = 'https://play.google.com/store/apps/details?id=com.romwe'
        }
        })
    })();
</script>

<div id="imgcontainer" style="display:none"><img src="/image/cookieId.html?cookieid=AF97CE21_8D63_9F94_82DC_90F373945B29" style="display:none;"></div>
<script>
  $System={Math:{},DS:{},Type:{}};$System.Type.TypeUtil=function(){throw new Error("$System.Type.TypeUtil is a static class.")};$System.Type.TypeUtil.isString=function(a){return((typeof(a)=="string")||((typeof a=="object")&&(a instanceof String)))};$System.Type.TypeUtil.isDate=function(a){return((typeof a=="object")&&(a instanceof Date))};$System.Type.TypeUtil.isRegExp=function(a){return((typeof a=="object")&&(a instanceof RegExp))};$System.Type.TypeUtil.isArray=function(a){return((typeof a=="object")&&(a instanceof Array))};$System.Type.TypeUtil.isNumber=function(a){return !isNaN(a)};$System.Type.TypeUtil.isBoolean=function(a){return((typeof(a)=="boolean")||((typeof a=="object")&&(a instanceof Boolean)))};$System.Type.TypeUtil.isFunction=function(a){return((typeof a=="function")||((typeof a=="object")&&(a instanceof Function)))};$System.Type.TypeUtil.isInteger=function(a){return($System.Type.TypeUtil.isNumber(a)&&(Math.round(a)==a))};$System.Type.TypeUtil.isFloat=function(a){if($System.Type.TypeUtil.isString(a)){return false}return($System.Type.TypeUtil.isNumber(a)&&(Math.round(a)!=a))};$System.Type.TypeUtil.isError=function(a){return((typeof a=="object")&&(a instanceof Error))};$System.DS.HashTable=function(){this.o={};for(key in this.o){delete this.o[key]}this.size=0};$System.DS.HashTable.prototype.getSize=function(){return this.size};$System.DS.HashTable.prototype.set=$System.DS.HashTable.prototype.add=function(a,b){if(!(a in this.o)){this.size++}this.o[a]={v:b}};$System.DS.HashTable.prototype.get=function(a){if(a in this.o){return this.o[a]["v"]}return null};$System.DS.HashTable.prototype.hasThisKey=function(a){return(a in this.o)};$System.DS.HashTable.prototype.getKeyListByValue=function(b){var a=[];for(key in this.o){if(this.o[key]["v"]==b){a.push(key)}}return a};$System.DS.HashTable.prototype.remove=function(a){if(a in this.o){this.size--;delete this.o[a]["v"];delete this.o[a]}};$System.DS.HashTable.prototype.removeAll=function(){for(key in this.o){delete this.o[key]["v"];delete this.o[key]}this.size=0};$System.DS.HashTable.prototype.getO=function(){return this.o};$System.DS.HashTable.prototype.join=function(e,d){var b=new Array();for(key in this.o){b.push(key+e+this.get(key))}return b.join(d)};$System.DS.HashTable.dispose=function(a){a.dispose();a=null};$System.DS.HashTable.prototype.dispose=function(){this.removeAll()};$System.Math.IntUtil=function(){throw new Error("$System.Math.IntUtil is a static class.")};$System.Math.IntUtil.dec2Bin=function(a){return a.toString(2)};$System.Math.IntUtil.hexNumArray=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");$System.Math.IntUtil.dec2Hex=function(a){return a.toString(16).toUpperCase()};$System.Math.IntUtil.numHexArray={"0":"0","1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9",A:"10",B:"11",C:"12",D:"13",E:"14",F:"15"};$System.Math.IntUtil.hex2Dec=function(a){return parseInt(a,16)};$System.Math.IntUtil.bin2Dec=function(a){return parseInt(a,2)};$System.Math.IntUtil.binHexArray={"0000":"0","0001":"1","0010":"2","0011":"3","0100":"4","0101":"5","0110":"6","0111":"7","1000":"8","1001":"9","1010":"A","1011":"B","1100":"C","1101":"D","1110":"E","1111":"F"};$System.Math.IntUtil.bin2Hex=function(b){var g=0;while(b.charAt(g)=="0"){g++}if(g>0){b=b.substring(g,b.length)}var d,e=[],f=$System.Math.IntUtil.binHexArray,a=b.length;for(d=a;d>3;d=d-4){e.push(f[b.substring(d-4,d)])}e.push(f[$System.Math.IntUtil.fillZero(b.substring(d-4,d),4)]);return e.reverse().join("")};$System.Math.IntUtil.hexBinArray={"0":"0000","1":"0001","2":"0010","3":"0011","4":"0100","5":"0101","6":"0110","7":"0111","8":"1000","9":"1001",A:"1010",B:"1011",C:"1100",D:"1101",E:"1110",F:"1111"};$System.Math.IntUtil.hex2Bin=function(d){var h=0;while(d.charAt(h)=="0"){h++}if(h>0){d=d.substring(h,d.length)}var e=d.split(""),a=e.length,f=[],g=$System.Math.IntUtil.hexBinArray;for(var b=0;b<a;b++){f.push(g[e[b]])}return f.join("")};$System.Math.IntUtil.fillZero=function(d,f,e){if(d==""&&!e){return""}c=f-d.length;var b="";for(var a=0;a<c;a++){b="0"+b}return b+d};$System.Math.IntUtil.__GUIDPool=new $System.DS.HashTable();$System.Math.IntUtil.__GUIDCheckAndAdd=function(a){if(!$System.Math.IntUtil.__GUIDPool.hasThisKey(a)){$System.Math.IntUtil.__GUIDPool.set(a,true);return true}else{return false}};$System.Math.IntUtil.genGUIDV4=function(){var g=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*($System.Math.IntUtil.hex2Dec("FFFFFFFF")+1)));var f=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*65536));var i=$System.Math.IntUtil.fillZero($System.Math.IntUtil.dec2Bin(Math.floor(Math.random()*65536)),16);var e=$System.Math.IntUtil.bin2Hex(i.substr(0,12)+"0100");var h=$System.Math.IntUtil.fillZero($System.Math.IntUtil.dec2Bin(Math.floor(Math.random()*256)));var d=$System.Math.IntUtil.bin2Hex(h.substr(0,5)+"01"+h.substr(7,1));var b=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*256));var a=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*($System.Math.IntUtil.hex2Dec("FFFFFFFFFFFF")+1)));g=$System.Math.IntUtil.fillZero(g,8);f=$System.Math.IntUtil.fillZero(f,4);e=$System.Math.IntUtil.fillZero(e,4);d=$System.Math.IntUtil.fillZero(d,2);b=$System.Math.IntUtil.fillZero(b,2);a=$System.Math.IntUtil.fillZero(a,12);var j=g+"_"+f+"_"+e+"_"+d+b+"_"+a;if($System.Math.IntUtil.__GUIDCheckAndAdd(j)){return j}else{return $System.Math.IntUtil.genGUIDV4()}};$System.Math.IntUtil.fillRnd=function(b,e,d){if(b==""&&!d){return""}c=e-b.length;var a="";if(c>0){a=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*($System.Math.IntUtil.hex2Dec("FFFFFFFFFFFF")+1)));a=a.substring(0,c)}return a+b};$System.Math.IntUtil.genGUID=function(){var g=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*($System.Math.IntUtil.hex2Dec("FFFFFFFF")+1)));var f=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*65536));var i=$System.Math.IntUtil.fillZero($System.Math.IntUtil.dec2Bin(Math.floor(Math.random()*65536)),16);var e=$System.Math.IntUtil.bin2Hex(i.substr(0,12)+"0100");var h=$System.Math.IntUtil.fillZero($System.Math.IntUtil.dec2Bin(Math.floor(Math.random()*256)));var d=$System.Math.IntUtil.bin2Hex(h.substr(0,5)+"01"+h.substr(7,1));var b=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*256));var a=$System.Math.IntUtil.dec2Hex(Math.floor(Math.random()*1000000000000));g=$System.Math.IntUtil.fillZero(g,8);f=$System.Math.IntUtil.fillZero(f,4);e=$System.Math.IntUtil.fillZero(e,4);d=$System.Math.IntUtil.fillZero(d,2);b=$System.Math.IntUtil.fillZero(b,2);a=$System.Math.IntUtil.fillRnd(a,12);var j=a+"_"+f+"_"+e+"_"+d+b+"_"+g;if($System.Math.IntUtil.__GUIDCheckAndAdd(j)){return j}else{return $System.Math.IntUtil.genGUID()}};
  function getCookie(objName){ /*获取指定名称的cookie的值*/
    var arrStr = document.cookie.split("; ");
    for(var i = 0;i < arrStr.length;i ++){
    var temp = arrStr[i].split("=");
    if(temp[0] == objName) return unescape(temp[1]);}
  }
  function setCookie(objName, objValue, expires, domain) {
    var date = new Date();
    date.setTime(date.getTime() + Number(expires) * 1000);
    if (domain === true) {
      document.cookie = objName + "=" + objValue + "; path=/;expires = " + date.toGMTString() + "; domain = .romwe.com" 
    } else if (typeof domain === 'string') {
      document.cookie = objName + "=" + objValue + "; path=/;expires = " + date.toGMTString() + "; domain = " + domain
    }else{
      document.cookie = objName + "=" + objValue + "; path=/;expires = " + date.toGMTString() +";"
    }
  };
  function getQueryString(name) {
      //get url query params
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
      var r = window.location.search.substr(1).match(reg);
      if (r != null) return unescape(r[2]); return null;
  }

  var lang = 'us'
  var isCookieEnabled = navigator.cookieEnabled || ("cookie" in document && (document.cookie.length > 0 ||(document.cookie = "test").indexOf.call(document.cookie, "test") > -1));
  if(isCookieEnabled){
    var cookieId=getCookie('cookieId');
    if(!cookieId){
        cookieId=$System.Math.IntUtil.genGUIDV4();
        if(typeof(lang)!="undefined" && (lang=="in")){
          setCookie('cookieId',cookieId,10*365*24*60*60,null);
        }else{
          setCookie('cookieId',cookieId,10*365*24*60*60,true);
        }
    }
    var queryStr = document.location.search
    if (queryStr.indexOf('url_from=shareasale.com') > -1 && ROMWE_W.queryString.parse(queryStr)['sscid']) {
        ROMWE_W.setCookie('sscid', ROMWE_W.queryString.parse(queryStr)['sscid'], 30 * 24 * 60 * 60)
    }

    var cookiediv=document.getElementById("imgcontainer");
    cookiediv.innerHTML="<img src='/image/cookieId.html?cookieid="+cookieId+"' style='display:none;'>";
  }
</script>

    <div class="c-privacy-module j-privacy-module" v-cloak="">
    <div class="" v-if="!isLogin &amp;&amp; !cancelprivacy &amp;&amp; !keepprivacy">
        
    </div>
    <!-- 隐私政策弹框 -->
    <modal-vue class="privacy-modal-wrap" :show="articleshow" :twobtn="false" :large="true" :oktext="&quot;Confirm&quot;" @ok="confrimFun" @cancel="closeArticle">
    <div slot="title">Privacy Policy</div>
    <div class="privacy-con" v-if="articleInnerCon" v-html="articleInnerCon"></div>

    </modal-vue>

    
    <div v-show="initialcoutry">
        <modal-vue class="privacy-modal-wrap" :show="usarticleshow" :twobtn="false" :large="true" @ok="confirmprivacy" @cancel="closeconfrimprivacy">
            <div slot="title">Privacy Policy</div>
            <div class="privacy-con">
                
    <div>
        <p style=" margin:0pt"><span style="font-weight:bold; text-transform:uppercase">PRIVACY STATEMENT</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Last Modified:</span><span style="">&nbsp;</span><span style=""> [</span><span style="">April 20th, 2018</span><span style="">]</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">This Privacy Statement explains how </span><span style="text-decoration:underline">ZoeTop Business Co., Limited</span><span style=""> (collectively, “ROMWE,” “we,” “us,” or “our”) collect, use, share and process your information. </span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Quick Links </span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">Click on the links below to go to a specific section of this Privacy Statement.</span><a name="_ftnref1"></a><a href="#_ftn1"><span style="font-size:7.33pt; vertical-align:super">[1]</span></a></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Collection and Use of Personal Data</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Cookies and Similar Technologies</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Disclosure of Personal Data</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Your Rights </span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Closing Accounts</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Third-Party Websites and Services</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Data Security, Integrity, and Retention</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Children</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Data Transfers, Storage, and Processing Globally </span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Changes to This Privacy Statement</span></li>
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" font-weight:bold">Contact Us</span></li>
        </ul>
        <p style=" margin:0pt"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Collection and Use of Personal Data</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Personal data is information that can be used to directly or indirectly identify you.&nbsp; Personal data also includes anonymous data that is linked to information that can be used to directly or indirectly identify you.&nbsp; Personal data does not include data that has been irreversibly anonymized or aggregated so that it can no longer enable us, whether in combination with other information or otherwise, to identify you.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Here is a description of the types of personal data we may collect and how we may use it:</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="text-decoration:underline">What Personal Data We Collect </span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">Depending on the products and services you use, we collect different kinds of personal data from or about you.</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Data you provide</span><span style=" ">:&nbsp; We collect the personal data you provide when you use our products and services or otherwise interact with us, such as when you create an account, </span><span style=" text-decoration:underline">Contact Us</span><span style=" ">,</span><a name="_ftnref2"></a><a href="#_ftn2"><span style=" font-size:7.33pt; vertical-align:super">[2]</span></a><span style=" "> participate in an online survey, use our online help or online chat tool. </span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Data about payments</span><span style=" ">:&nbsp; If you make a purchase, we collect personal data in connection with the purchase.&nbsp; This data includes your payment data, such as your credit or debit card number and other card information, and other account and authentication information, as well as billing, shipping, and contact details.</span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Data about use of our services and products</span><span style=" ">: When you visit our websites, we may collect data about the type of device you use, your device’s unique identifier, the IP address of your device, your operating system, the type of Internet browser that you use, usage information, diagnostic information,</span><span style=" "> and location information from or about the computers, phones, or other devices on which you install or access our products or services.&nbsp; Where available, our services may use GPS, your IP address, and other technologies to determine a device’s approximate location</span><span style=" "> to allow us to improve our products and services. </span></li>
        </ul>
        <p style="margin:0pt; padding-left:18pt; text-align:justify; text-indent:-18pt"><span style=" ">&nbsp;</span></p>
        <p style="margin:0pt; padding-left:18pt; text-align:justify; text-indent:-18pt"><span style=" text-decoration:underline">How We Use Your Personal Data</span></p>
        <p style="margin:0pt; padding-left:18pt; text-align:justify; text-indent:-18pt"><span style=" ">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">Generally speaking, we use personal data to provide, improve, and develop our products and services, to communicate with you, to offer you targeted advertisements and services, and to protect us and our customers.</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">ZoeTop Business Co., Limited, processes and determines how to process your personal data as data controller for the following purposes: </span></p>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Providing, improving, and developing our products and services</span><span style=" ">:&nbsp; We use personal data to help us provide, improve, and develop our products, services, and advertising.&nbsp; This includes using personal data for purposes such as data analysis, research, and audits. Such processing is based on our legitimate interest in offering you products and services and for business continuity.&nbsp; If you enter a contest, or other promotion, we may use the personal data you provide to administer those programs.&nbsp; Some of these activities have additional rules, which may contain further data about how we use personal data, so we encourage you to read those rules carefully before participating.</span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Communicating with you</span><span style=" ">:&nbsp; Subject to your prior express consent, we may use personal data to send you marketing communications in relation to ROMWE own products and services, communicate with you about your account or transactions, and inform you about our policies and terms.&nbsp; If you no longer wish to receive email communications for marketing purposes, please </span><span style=" text-decoration:underline">Contact Us</span><a name="_ftnref3"></a><a href="#_ftn3"><span style=" font-size:7.33pt; vertical-align:super">[3]</span></a><span style=" "> to opt-out.&nbsp; We also may use your data to process and respond to your requests when you contact us.&nbsp; Subject to your prior express consent, we may share your personal data with third party partners who may send you marketing communications in relation to their products and services.</span></li>
        </ul>
        <p style="margin:0pt; text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Offering and measuring targeted advertisements and services</span><span style=" ">:&nbsp; Subject to your prior express consent, we may use personal data to personalize your experience with our products and services and on third-party websites and applications and to determine the effectiveness of our promotional campaigns.&nbsp; </span></li>
        </ul>
        <p style="margin:0pt; padding-left:18pt; text-align:justify; text-indent:-18pt"><span style=" ">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style=" ">For any of the uses of your data described above that require your prior express consent, note that you may withdraw your consent by </span><span style=" text-decoration:underline">contacting ZoeTop Business Co., Limited.</span><a name="_ftnref4"></a><a href="#_ftn4"><span style=" font-size:7.33pt; vertical-align:super">[4]</span></a><span style=" "> </span></p>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Promoting safety and security</span><span style=" ">:&nbsp; We use personal data to help verify accounts and user activity, as well as to promote safety and security, such as by monitoring fraud and investigating suspicious or potentially illegal activity or violations of our terms or policies. Such processing is based on our legitimate interest in helping ensure the safety of our products and services.</span></li>
        </ul>
        <p style="margin:0pt; text-align:justify"><span style=" ">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Cookies and Similar Technologies</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We use cookies and similar technologies to provide, protect, and improve our products and services, such as by personalizing content, offering and measuring advertisements, understanding user behavior, and providing a safer experience.&nbsp; </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">You can remove or reject cookies using your browser or device settings, but in some cases doing so may affect your ability to use our products and services.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Please read our </span><span style="text-decoration:underline">Cookie Statement</span><a name="_ftnref5"></a><a href="#_ftn5"><span style="font-size:7.33pt; vertical-align:super">[5]</span></a><span style=""> to learn more about how we use cookies and the choices you have. </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Disclosure of Personal Data</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We make certain personal data available to strategic partners that work with us to provide our products and services or help us market to customers.&nbsp; Personal data will only be shared by us with these companies in order to provide or improve our products, services, and advertising; it will not be shared with third parties for their own marketing purposes without your prior express consent.&nbsp; </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="text-decoration:underline">Service Providers</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">We share personal data with companies that provide services on our behalf, such as website hosting, email services, marketing, sponsoring of sweepstakes, contests, and other promotions, auditing, fulfilling customer orders, data analytics, providing customer service, and conducting customer research and satisfaction surveys.&nbsp; These companies are obligated to protect your data and may be located wherever we operate.</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="text-decoration:underline">Corporate Affiliates and Corporate Business Transactions</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">We may share personal data with all ZoeTop Business Co., Limited-affiliated companies.&nbsp; In the event of a merger, reorganization, acquisition, joint venture, assignment, spin-off, transfer, or sale or disposition of all or any portion of our business, including in connection with any bankruptcy or similar proceedings, we may transfer any and all personal data to the relevant third party.&nbsp; </span></p>
        <p style="margin:0pt; text-align:justify"><span style="">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="text-decoration:underline">Legal Compliance and Security </span></p>
        <p style="margin:0pt; text-align:justify"><span style="">It may be necessary—by law, legal process, litigation, and/or requests from public and governmental authorities within or outside your country of residence—for us to disclose personal data.&nbsp; We may also disclose personal data if we determine that for purposes of national security, law enforcement, or other issues of public importance, disclosure is necessary or appropriate.</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">We may also disclose personal data if we determine in good faith that disclosure is reasonably necessary to protect our rights and pursue available remedies, enforce our terms and conditions, investigate fraud, or protect our operations or users.</span></p>
        <p style="margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="text-decoration:underline">Legal Basis For The Processing of Personal Data from EEA Residents </span></p>
        <p style="margin:0pt"><span style="">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">If you reside within the European Economic Area (EEA), our processing of your personal data will be legitimized as follows: Whenever we require your consent for the processing of your personal data such processing will be justified pursuant to Article 6(1) lit. (a) of the General Data Protection Regulation (EU) 2016/679 (“GDPR”). If the processing of your personal data is necessary for the performance of a contract between you and us or for taking any pre-contractual steps upon your request, such processing will be based on GDPR Article 6(1) lit. (b). Where the processing is necessary for us to comply with a legal obligation, we will process your data on basis of GDPR Article 6(1) lit. (c), and where the processing is necessary for the purposes of our legitimate interests, such processing will be made in accordance with GDPR Article 6(1) lit. (f).</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Your Rights</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We take reasonable steps to ensure that your personal data is accurate, complete, and up to date.&nbsp; You have the </span><span style="">right to access, correct, or delete the personal data that we collect.</span><a href="mailto:privacy@wdc.com"></a><span style="">&nbsp; You are also entitled to restrict or object, at any time, to the further processing of your personal data.&nbsp; You have the right to </span><span style="">receive your personal data in a structured and standard format.&nbsp; You may lodge a complaint with the competent data protection authority regarding the processing of your personal data.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">To protect the privacy and the security of your personal data, we may request data from you to enable us to confirm your identity and right to access such data, as well as to search for and provide you with the personal data we maintain.&nbsp; There are instances where applicable laws or regulatory requirements allow or require us to refuse to provide or delete some or all of the personal data that we maintain.</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">You may </span><span style="text-decoration:underline">Contact Us</span><a name="_ftnref6"></a><a href="#_ftn6"><span style="font-size:7.33pt; vertical-align:super">[6]</span></a><span style=""> to </span><span style="">exercise your rights.&nbsp; We will respond to your request in a reasonable timeframe,</span><span style=""> and in any event in less than 30 days. </span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Closing Accounts</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Please </span><span style="text-decoration:underline">contact ROMWE</span><a name="_ftnref7"></a><a href="#_ftn7"><span style="font-size:7.33pt; vertical-align:super">[7]</span></a><span style=""> to close your account in relation to the following uses of your personal data:</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" ">providing, improving, and developing our products and services;</span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" ">communicating with you;&nbsp;&nbsp; </span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" ">sharing your personal data with third party partners for marketing communications; </span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-indent:0pt"><span style=" ">offering and measuring targeted advertisements and services; or</span></li>
            <li style=" margin:0pt 0pt 8pt 28.06pt;  text-indent:0pt"><span style=" ">promoting safety and security. </span></li>
        </ul>
        <p style=" margin:0pt"><span style="">Please </span><span style="text-decoration:underline">contact ROMWE</span><a name="_ftnref8"></a><a href="#_ftn8"><span style="font-size:7.33pt; vertical-align:super">[8]</span></a><span style=""> to close your account in relation to the use of your personal data for the provision of </span><span style=" ">products and services you requested.</span></p>
        <p style=" margin:0pt"><span style=" ">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">If you close your account, we have no obligation to retain your data, and we may delete any or all of your data without liability.&nbsp; However, we may retain data related to you if we believe it may be necessary to prevent fraud or future abuse, if required by law, or for legitimate purposes, such as analysis of non-personal data, account recovery, auditing our records, and enforcing our rights and obligations under our agreements.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Third-Party Websites and Services</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Our websites, products, and services may contain links to or the ability for you to access third-party websites, products, and services.&nbsp; We are not responsible for the privacy practices employed by those third parties, nor are we responsible for the information or content their products and services contain.&nbsp; This Privacy Statement applies solely to data collected by us through our products and services.&nbsp; We encourage you to read the privacy policies of any third party before proceeding to use their websites, products, or services.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Data Security, Integrity, and Retention</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We use reasonable technical, administrative, and physical security measures designed to safeguard and help prevent unauthorized access to your data, and to correctly use the data we collect.&nbsp; For example, access to your personal data is restricted to our employees, contractors, and agents who need access to such data to perform their assigned job duties.&nbsp; </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">It is important that you take precautions to protect against unauthorized access to your ROMWE products, account credentials, and computer or other devices.&nbsp; If you feel that the security of your account or personal data has been compromised, please immediately </span><span style="text-decoration:underline">Contact Us</span><span style="">.</span><a name="_ftnref9"></a><a href="#_ftn9"><span style="font-size:7.33pt; vertical-align:super">[9]</span></a><span style=""> </span><span style=""> Please be aware that, despite our best efforts, no security system is impenetrable.&nbsp; In the event of a security breach, we will promptly notify you and the proper authorities if required by law. </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We will retain your personal data for as long as it is necessary to fulfill the purposes outlined in this Privacy Statement, unless a longer retention period is required or permitted by law.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Children</span></p>
        <p style="margin:0pt; text-align:justify"><span style="">Our products and services are intended for adults.&nbsp; Accordingly, we do not knowingly collect, use, or </span><span style="">disclose data from children under </span><span style="font-weight:bold">16</span><span style="">.&nbsp; If we learn that we have collected the personal data of a child under </span><span style="">16</span><span style="">, or the equivalent minimum age depending on the jurisdiction,&nbsp; we will take steps to delete the data as soon as possible.&nbsp; Please immediately </span><span style="text-decoration:underline">Contact Us</span><a name="_ftnref10"></a><a href="#_ftn10"><span style="font-size:7.33pt; vertical-align:super">[10]</span></a><span style=""> if you become aware that a child under </span><span style="">16</span><span style=""> has </span><span style="">provided us with personal data. </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Data Transfers, Storage, and Processing Globally </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">When we share your personal data with our partners, ROMWE-affiliated companies, and service providers, your personal data may be transferred to and/or made accessible from countries out of the European Economic Area.&nbsp; In such circumstances, we will enter into model contractual clauses as adopted by the European Commission, or rely on alternative legal bases such as the Privacy Shield, where applicable, or binding corporate rules where our partners or service providers have adopted such internal policies approved by European data protection authorities. </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Changes to this Privacy Statement</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We may periodically change this Privacy Statement to keep pace with new technologies, industry practices, and regulatory requirements, among other reasons.&nbsp; We expect most such changes to be minor.&nbsp; Any non-material changes will take effect immediately upon posting of an updated Privacy Statement.&nbsp; However, there may be cases where changes to the Privacy Statement may be more significant.&nbsp; In such cases, we will first provide a more prominent notice.</span><a name="_ftnref11"></a><a href="#_ftn11"><span style="font-size:7.33pt; vertical-align:super">[11]</span></a></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Your continued use of the our products and services after the effective date of the Privacy Statement means that you accept the revised Privacy Statement.&nbsp; If you do not agree to the revised Privacy Statement, please refrain from using our products or services and </span><span style="text-decoration:underline">Contact Us</span><a name="_ftnref12"></a><a href="#_ftn12"><span style="font-size:7.33pt; vertical-align:super">[12]</span></a><span style=""> to close any account you may have created.&nbsp; </span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="font-weight:bold">Contact Us</span><a name="_ftnref13"></a><a href="#_ftn13"><span style="font-size:7.33pt; font-weight:bold; vertical-align:super">[13]</span></a></p>
        <p style=" margin:0pt; text-align:justify"><span style="">If you have any questions regarding this Privacy Statement or its implementation, here is how you can reach us:</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">In relation to the use of your personal data for the following purposes: </span><span style="color: rgb(255,0,0); ">data@romwe.com</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" ">providing, improving, and developing our products and services;</span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" ">communicating with you;&nbsp;&nbsp; </span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" ">sharing your personal data with third party partners for marketing communications; </span></li>
            <li style=" margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" ">offering and measuring targeted advertisements and services;</span></li>
            <li style=" margin:0pt 0pt 8pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" ">promoting safety and security. </span></li>
        </ul>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">In relation to the use of your personal data for the provision of products and services you requested:</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="color: rgb(255,0,0); ">data@romwe.com</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt"><span style="">&nbsp;</span></p>
        <p style=" margin:0pt 0pt 8pt">
            <br style="page-break-before:always; clear:both">
        </p>
        <p style=" margin:0pt; text-align:center"><span style="font-weight:bold; text-transform:uppercase">Cookie Statement</span><a name="_ftnref14"></a><a href="#_ftn14"><span style="font-size:7.33pt; font-weight:bold; text-transform:uppercase; vertical-align:super">[14]</span></a></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Last Modified:</span><span style="">&nbsp;</span><span style=""> [Insert date]</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">This Cookie Statement applies to all ZoeTop Business Co., Limited affiliates, brands, websites, products, and services (collectively, “ROMWE,” “we,” “us,” or “our”) and explains how we use cookies on our websites and online services and the choices you have.&nbsp; </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Definition of “Cookies”</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Cookies are small pieces of text used to store information on web browsers.&nbsp; Cookies are widely used to store and receive identifiers and other information on computers, phones, and other devices.&nbsp; We also use other technologies, including data we store on your web browser or device, identifiers associated with your device, and other software, for similar purposes.&nbsp; In this Cookie Statement, we refer to all of these technologies as “cookies.” </span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Types of Cookies</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">We use cookies to provide, protect, and improve our products and services, such as by personalizing content, offering and measuring advertisements, understanding user behavior, and providing a safer experience.&nbsp; We describe below the various types of cookies we use and the purposes they perform.&nbsp; Please note that the specific cookies we may use vary depending on the specific websites and services you use.</span><a name="_ftnref15"></a><a href="#_ftn15"><span style="font-size:7.33pt; vertical-align:super">[15]</span></a></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Essential cookies</span><span style=" ">:&nbsp; These cookies are strictly necessary to provide you with our websites and services and to enable essential features, such as providing shopping cart or live chart functionality.&nbsp; If you disable these cookies, we will not be able to fulfill your request.&nbsp; </span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Performance and functionality cookies</span><span style=" ">:&nbsp; These cookies collect information about how you use our websites and services and allow us to remember the choices you make while browsing.&nbsp; The information these cookies collect allows us to optimize our websites and make them easier for you to use, and it does not personally identify you.&nbsp; If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Analytics and customization cookies</span><a name="_ftnref16"></a><a href="#_ftn16"><span style=" font-size:7.33pt; font-weight:bold; vertical-align:super">[16]</span></a><span style=" ">:&nbsp; These cookies collect information we use in aggregate form to help us understand how our websites and services are being used and how effective our marketing campaigns are, and help us customize our websites.&nbsp; If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Advertising cookies</span><a name="_ftnref17"></a><a href="#_ftn17"><span style=" font-size:7.33pt; font-weight:bold; vertical-align:super">[17]</span></a><span style=" ">:&nbsp; These cookies collect information about your browsing or shopping history and are used to make advertising messages more relevant to you.&nbsp; They perform functions like preventing the same advertisement from continuously reappearing, ensuring that advertisements are properly displayed, and in some cases selecting advertisements that are based on your interests.&nbsp; We may share this information with third parties to help create and deliver advertising personalized to you and your interests.&nbsp; If you disable or opt-out of these cookies, you may not be able to use certain features of our websites and services, and it may reduce the support or information that we can provide you.</span></li>
        </ul>
        <p style=" text-align:justify"><span style=" ">&nbsp;</span></p>
        <ul type="disc" style="margin:0pt; padding-left:0pt">
            <li style="margin:0pt 0pt 0pt 28.06pt;  text-align:justify; text-indent:0pt"><span style=" font-weight:bold">Social networking cookies</span><a name="_ftnref18"></a><a href="#_ftn18"><span style=" font-size:7.33pt; font-weight:bold; vertical-align:super">[18]</span></a><span style=" ">:&nbsp; These cookies are used to enable you to share pages and content on our websites and services through third-party social networking and other websites.&nbsp; These cookies may also be used for advertising purposes.</span></li>
        </ul>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Cookies Placed by Third Parties</span><a name="_ftnref19"></a><a href="#_ftn19"><span style="font-size:7.33pt; font-weight:bold; vertical-align:super">[19]</span></a></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">You may also encounter cookies on our websites that are placed by third parties.&nbsp; For example, when you buy our products online, our e-commerce vendor may use cookies and other technologies.&nbsp; We may also allow third parties to place cookies on our websites to track information about your online activities and/or across third-party sites or online services, including to send you targeted advertisements based on that information, which may include the remarketing of our products and services that you have viewed on our websites and on third-party websites.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">This Cookie Statement does not apply to the cookies, applications, technologies or websites that are owned by and/or operated by third parties, or such third parties’ practices, even if they use or access our technology to store or collect information.&nbsp; To understand how third parties use cookies, please review their privacy policies.</span></p>
        <p style="margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style="margin:0pt; text-align:justify"><span style="font-weight:bold">Controlling and Opting-Out of Cookies</span></p>
        <p style="margin:0pt; text-align:justify"><span style="font-weight:bold">&nbsp;</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="">Your browser or device may offer settings that allow you to choose whether browser cookies are set and to delete them.&nbsp; For more information about these controls and to exercise your cookie preferences, visit your browser or device's help material.&nbsp; If you choose to reject cookies, as noted above, you may not be able to use certain features of our websites and services.</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:bold">Do Not Track</span></p>
        <p style=" margin:0pt; text-align:justify"><span style="font-weight:normal">Some browsers include the ability to transmit “Do Not Track” signals.&nbsp; We do not process or respond to “Do Not Track” signals.&nbsp; Instead, we adhere to the standards described in our </span><span style="font-weight:normal; text-decoration:underline">Privacy Statement</span><a name="_ftnref20"></a><a href="#_ftn20"><span style="font-size:7.33pt; vertical-align:super">[20]</span></a><span style="font-weight:normal"> and this Cookie Statement.</span></p>
        <p style=" margin:0pt 0pt 8pt; text-align:center"><span style="">***</span></p>
    </div>
            </div>
            <div class="select-con">
                <div class="check-item">
                    <label class="rw-checkbox-new"><input type="checkbox" class="j-privacy-checkbox1" name="privacy"> <i></i></label>
                    I agree to the Privacy Policy.
                </div>
                <div class="check-item">
                    <label class="rw-checkbox-new"><input type="checkbox" name="subscrib" class="j-subscrib-checkbox1"> <i></i></label>
                    I'd like to receive exclusive offers and news by Email or SMS.
                </div>
                <p class="error-text" v-html="confrimerror"></p>
            </div>
        </modal-vue>
    </div>
    
</div>
<script type="text/javascript">
    var _gb_privacyEurCountry = [13, 21, 33, 56, 54, 57, 58, 68, 73, 74, 82, 85, 98, 104, 106, 116, 122, 123, 131, 150, 172, 173, 177, 192, 193, 198, 206, 225]
    var site = window.location.hostname.split('.')[0]
    var gb_keep_privacy;
    var gb_privacy_obj = {
        gb_footer_subscib: false,
        gb_login_privacy: false,
        gb_login_facebook_privacy: false
    }
    if("us" == 'us'){
      var country_id = ROMWE_W.getCookie('countryId')
      if(ROMWE_W.getCookie('countryId') == undefined) {
          $.ajax({
              type: "POST",
              url: '/judgeIP',
              success: function(res) {
                  if (res.code != 0) return
                  country_id = res.info.location.country_id
                  country_id = ROMWE_W.setCookie('countryId',country_id,365*24*3600)
              }
          })
      }
    }
    function gb_gdprRegister(action,label) {
        if(typeof(ga) == 'function'){
            ga('rwus.send',{
                hitType: 'event',
                eventCategory: 'GDPR-Register',
                eventAction: action,
                eventLabel: label
            })
        }
    }
    var privacy_vue = new Vue({
        el: '.j-privacy-module',
        data: {
            privacyshow: false,
            articleshow: false,
            errorShow: false,
            cancelprivacy: '',
            keepprivacy: '',
            articleCon: '',
            articleInnerCon: '',
            isLogin:ROMWE_W.getCookie("memberId"),
            // isprivacycheck: false,
            usarticleshow:false,
            confrimerror: '',
            //initialcoutry: _gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1?true: false,
            initialcoutry: true,
            initialPopup: ROMWE_W.getCookie('no_pop_up_' + site) != 1 && (location.href.indexOf('ref=m') > -1 || location.href.indexOf('ref=www') > -1),
            acceptText:ROMWE_W.htmlDecode("I Accept")
        },
        created: function() {
            this.cancelprivacy = ROMWE_W.getCookie('cancelPrivacy') == 1;
            this.keepprivacy = ROMWE_W.getCookie('keepPrivacy') == 1;
            if(this.initialcoutry && true){
                $('.j-footer-check-item').addClass('rw-hide')
                $('.j-check-agree').addClass('rw-hide')
                // quickRegister.state.isshowPrivacy = false
            }else{
                $('.j-footer-check-item').removeClass('rw-hide')
                $('.j-check-agree').removeClass('rw-hide')
                // quickRegister.state.isshowPrivacy = true
            }
            if(ROMWE_W.getCookie('keepPrivacy')) {
                $('.j-footer-privacy-item').addClass('rw-hide')
            }
            // ga埋点 欢迎弹框
            if(!this.isLogin && !this.cancelprivacy && !this.keepprivacy && !this.initialPopup && false && !this.privacyshow) {
                gb_gdprRegister('AutoPopUps','welcome');
            }
        },
        methods: {
            quickregcalback: function() {
                var hide_q_r = ROMWE_W.getCookie('hide_q_r')
                var self = this
                if(false) {
                    if (!ROMWE_W.getCookie("memberId") && hide_q_r != 1 && window.location.href.indexOf('user/auth/login') < 0  && (ROMWE_W.getCookie('keepPrivacy') || ROMWE_W.getCookie('cancelPrivacy'))) {
                    quickRegister.state.quickRegister = true
                    sa("send", {'activity_name': 'expose_quick_register'})
                    }
                }else {
                    if (!ROMWE_W.getCookie("memberId") && hide_q_r != 1 && window.location.href.indexOf('user/auth/login') < 0 && typeof(popus)!="undefined" && popus.state && popus.state.popus == false && (ROMWE_W.getCookie('keepPrivacy') || ROMWE_W.getCookie('cancelPrivacy'))) {
                    quickRegister.state.quickRegister = true
                    sa("send", {'activity_name': 'expose_quick_register'})
                    }
                }
                if(this.keepprivacy) {
                    quickRegister.state.isshowPrivacy = this.keepprivacy
                }
            },
            acceptcancel: function() {
                ROMWE_W.setCookie('cancelPrivacy', '1', 3600);
                this.privacyshow = true
                this.cancelprivacy = ROMWE_W.getCookie('cancelPrivacy')
                this.quickregcalback()
                // ga 关闭弹窗按钮
                gb_gdprRegister('ClosePopUps','welcome');
            },
            acceptok: function() {
                ROMWE_W.setCookie('keepPrivacy', '1', 3600*24*365);
                this.privacyshow = true
                this.keepprivacy = ROMWE_W.getCookie('keepPrivacy')
                this.quickregcalback()
                //ga 同意隐私政策
                gb_gdprRegister('AgreePrivacyPolicy','welcome');
                if($('.j-footer-check-item').length){
                    $('.j-footer-check-item').hide();
                }
            },
            showPrivacyFun: function(e) {
                var self = this
                var $target = $(e.target)
                $.get('/article/privacy',{},function(res){
                    if(res.info && res.info.article) {
                        self.articleCon = res.info.article
                        self.articleInnerCon = res.info.article && res.info.article.content && res.info.article.content.replace(/http:/g,"");
                    }
                    self.articleshow = true
                })
                // ga 点击隐私政策详情
                if($target.parents('.j-ga-quick-register').data('gaflag') == 'quickreg') {
                    gb_gdprRegister('ClickPrivacyPolicy','快速注册');
                }else if($target.parents('.j-ga-footer-subscrib').data('gaflag') == 'subscrib') {
                    gb_gdprRegister('ClickPrivacyPolicy','email');
                    gb_privacy_obj.gb_footer_subscib = true
                }else if($target.parents('.j-ga-login-privacy').data('gaflag') == 'loginreg') {
                    gb_privacy_obj.gb_login_privacy = true
                    gb_gdprRegister('ClickPrivacyPolicy','login');
                    if(typeof GB_bi_login != 'undefined'){
                        GB_bi_login.biClickLoginRegister('privacy_policy');
                    }
                }else if($target.parents('.j-ga-facebook-privacy').data('gaflag') == 'facebookreg') {
                    gb_gdprRegister('ClickPrivacyPolicy','第三方登录');
                    gb_privacy_obj.gb_login_facebook_privacy = true
                }else if(!this.isLogin && !this.cancelprivacy && !this.keepprivacy && !this.initialPopup && false){
                    gb_gdprRegister('ClickPrivacyPolicy','welcome');
                }else if(this.initialPopup) {
                    gb_gdprRegister('ClickPrivacyPolicy','site change');
                }
                
            },
            closeArticle: function() {
                ROMWE_W.setCookie('cancelPrivacy', '1', 3600);
                this.articleshow = false
                // ga 关闭弹窗按钮
                if(!this.isLogin && !this.cancelprivacy && !this.keepprivacy && !this.initialPopup && false){
                    gb_gdprRegister('ClosePopUps','welcome');
                }else if(this.initialPopup) {
                    gb_gdprRegister('ClosePopUps','site change');
                }
            },
            confrimFun: function() {
                ROMWE_W.setCookie('keepPrivacy', '1', 3600*24*365);
                this.articleshow = false
                this.privacyshow = true
                this.quickregcalback()
                // this.isprivacycheck = true
                if($('.j-quickregister-agree').length) {
                    $('.j-quickregister-agree').prop('checked',true)
                }
                if($('.j-popus-privacy').length) {
                    $('.j-popus-privacy').find('button').prop('disabled',true)
                }
                
                if($('.j-footer-check-item .j-check-agree').length) {
                    $('.j-footer-check-item .j-register-footer-agree').prop('checked',true)
                }
                if($('.j-subscribe-privacy-input').length && !$('.j-subscribe-privacy-input').prop('checked')) {
                    $('.j-subscribe-privacy-input').click();
                    $('.j-subscribe-privacytips').hide();
                }
                // ga 同意隐私政策
                if(!this.isLogin && !this.cancelprivacy && !this.keepprivacy && !this.initialPopup && false){
                    gb_gdprRegister('Confirm','welcome');
                }else if(this.initialPopup) {
                    gb_gdprRegister('Confirm','site change');
                }else if(!this.isLogin && ROMWE_W.getCookie('hide_q_r') != 1 && window.location.href.indexOf('user/auth/login') < 0 && !this.initialPopup && (this.cancelprivacy || this.keepprivacy)) {
                    gb_gdprRegister('Confirm','快速注册');
                }else if(gb_privacy_obj.gb_footer_subscib) {
                    gb_privacy_obj.gb_footer_subscib = false
                    gb_gdprRegister('Confirm','email');
                }else if(gb_privacy_obj.gb_login_privacy) {
                    gb_privacy_obj.gb_login_privacy = false
                    gb_gdprRegister('Confirm','login');
                }else if(gb_privacy_obj.gb_login_facebook_privacy) {
                    gb_gdprRegister('Confirm','第三方登录');
                    gb_privacy_obj.gb_login_facebook_privacy = false
                }
            },
            confirmprivacy: function() {
                if($('.j-privacy-checkbox1').is(':checked') && !$('.j-subscrib-checkbox1').is(':checked')) {
                    gb_gdprRegister('continue','AgreePrivacyPolicy');
                }else if($('.j-privacy-checkbox1').is(':checked') && $('.j-subscrib-checkbox1').is(':checked')) {
                    gb_gdprRegister('continue','AgreePrivacyPolicy/E-mail Subscriptions');
                    ROMWE_W.setCookie('keepSubscribe', '1', 3600*24*365);
                }
                if(!$('.j-privacy-checkbox1').is(':checked')) {
                    this.usarticleshow = true
                    this.confrimerror = "Please agree to the Privacy Policy"
                }else {
                    ROMWE_W.setCookie('keepPrivacy', '1', 3600*24*365);
                    this.usarticleshow = false
                }
            },
            closeconfrimprivacy: function() {
                this.usarticleshow = false
                gb_gdprRegister('ClosePopUps','');
            }
        }
    })

    $(document).on('click','.j-footer-check-item .j-check-agree > a',function(e){
        privacy_vue.showPrivacyFun(e)
    })

    $(document).on('click','.j-quickregister-agree',function() {
        if($(this).is(':checked')) {
            ROMWE_W.setCookie('keepPrivacy', '1', 3600*24*365)
        }else {
            ROMWE_W.setCookie('keepPrivacy', '0', 0)
        }
    })

    $(document).on('click','.j-register-footer-agree',function() {
        if($(this).is(':checked')) {
            ROMWE_W.setCookie('keepPrivacy', '1', 3600*24*365)
        }else {
            ROMWE_W.setCookie('keepPrivacy', '0', 0)
        }
    })

    $(document).on('click','.j-privacy-checkbox1',function() {
        if($(this).is(':checked')) {
            gb_gdprRegister('AgreePrivacyPolicy','');
        }else {
        }
    })

    $(document).on('click','.j-subscrib-checkbox1',function() {
        if($(this).is(':checked')) {
            gb_gdprRegister('E-mail Subscriptions','');
        }
    })

    if(ROMWE_W.getCookie('keepPrivacy')) {
        $('.j-footer-check-item .j-check-agree').addClass('rw-hide');  // 订阅
        $('.j-footer-check-item .j-check-privacy').addClass('rw-hide');  // 注册
        $('.j-login-find-more').addClass('rw-hide')   // facebook
    }else {
        $('.j-footer-check-item .j-check-agree').removeClass('rw-hide');
        $('.j-footer-check-item .j-check-privacy').removeClass('rw-hide');
        $('.j-login-find-more').removeClass('rw-hide')
    }

</script>


    <div class="c-popup j-popup-us" v-cloak="">
    <modal-vue :show="state.popus" :minuspad="true">   
        <div slot="closer">
            
        </div>
        <div slot="title"></div>
        <div class="popup-us rw-text-center">
            <h3>WELCOME TO ROMWE U.S.&nbsp;SITE!</h3>
            <h5>WHY BUY FROM US?</h5>
            <div class="popup-info">
                <p style="font-weight: bold;">Free shipping on order $49+</p>
                <p>10% OFF YOUR FIRST ORDER OVER $29</p>
            </div>
            <button class="rw-btn-black" @click="shopNow">SHOP NOW &gt;&gt;</button>
            <p class="return-pop">Shipping elsewhere?Visit our ROMWE's <a href="javascript:;" @click="returnToInternationalSite">international site!</a> </p>
            <img class="popus-bg" src="//romwe.ltwebstatic.com/rw_dist/images/popus-icon-538afea45c.png">
        </div>
        <div slot="footer"></div>
    </modal-vue>
</div>

<script type="text/javascript">
var langs = ['es', 'fr', 'us', 'de', 'es']
var site = window.location.hostname.split('.')[0]
var __CurrentMainDomain__ = (function () {
  var hostnameArray = location.hostname.split('.');
  return "." + hostnameArray.slice(-2).join('.');
})();

function setCookie(name, val, expires, domain) {
  //domain = domain || __CurrentMainDomain__;
  var text = String(encodeURIComponent(val));
  var  date = new Date();
  date.setTime(date.getTime() + Number(expires)*1000);
  text += '; expires=' + date.toUTCString();
  // domain
   text += '; path=/';
  if (typeof (domain) != "undefined" && domain != "") {
    text += '; domain='+__CurrentMainDomain__;
  }
 
  document.cookie = name + '=' + text;
}
function getCookie(objName){ /*获取指定名称的cookie的值*/
  var arrStr = document.cookie.split("; ");
  for(var i = 0;i < arrStr.length;i ++){
  var temp = arrStr[i].split("=");
  if(temp[0] == objName) return unescape(temp[1]);}
}

var initialPopup = getCookie('no_pop_up_' + site) != 1 &&
    (location.href.indexOf('ref=m') > -1 || location.href.indexOf('ref=www') > -1)
  var popus = new Vue({
    el: '.j-popup-us',
    data: {
      state: {
        popus: false,
      },
    },
    methods: {
        shopNow: function() {
            setCookie('no_pop_up_' + site, "1", 3600*24*30, 1)
            setCookie("jump_to_" + site, "1", 3600*24*30, 1)
            this.state.popus = false
            if(typeof newQuickRegister != 'undefined'){
              newQuickRegister.quickRegisterShow = true;
            }
        },
        returnToInternationalSite: function() {
            setCookie("mobileJump", "0", 1);
            setCookie('nginx_jump', '1', 3600*24, 1)
            setCookie('jump_to_' + site, '0', 3600*24, 1)
            setCookie('ipcountry', '0', 3600*24, 1)
            var index = langs.indexOf(site)
            if (index === -1) return

            var url = location.protocol + '//' + 'www.romwe.com' + location.pathname + location.search
            if (url.indexOf('?') > -1)
              url += '&ref=' + site + '&rep=pop&ret=www&mobileJump=0'
            else
              url += '?ref=' + site + '&rep=pop&ret=www&mobileJump=0'

            url += location.hash
            window.location = url
        },
    }
  });
</script>



    <script>
	; (function () {
		var __CurrentMainDomain__ = (function () {
			var hostnameArray = location.hostname.split('.');
			return "." + hostnameArray.slice(-2).join('.');
		})();

		function setCookie(name, val, expires, domain) {
			//domain = domain || __CurrentMainDomain__;
			var text = String(encodeURIComponent(val));
			var date = new Date();
			date.setTime(date.getTime() + Number(expires) * 1000);
			text += '; expires=' + date.toUTCString();
			// domain
			text += '; path=/';
			if (typeof (domain) != "undefined" && domain != "") {
				text += '; domain=' + __CurrentMainDomain__;
			}

			document.cookie = name + '=' + text;
		}

		function jumpToMx() {
			//jump to mx
			// setCookie('es_to_mx', 1, 3600 * 24 * 30, true);
			var thisURL = (document.URL);//获取当前页面链接
			var newURL = ''
			newURL = location.protocol + '//' + location.host.replace('es.', 'mx.') + location.pathname + location.search
			newURL.indexOf('?') < 0 ? newURL += '?' : newURL += '&';
			location.href = newURL + 'ref=es&ret=mx&es_to_mx=1';
		}

		// es跳mx
		var blang = (navigator.language || navigator.browserLanguage).toLowerCase();
		var lang = 'us';
		if (lang === 'es' && blang.indexOf('es') > -1) {
			var country = getCookie('country');
			if (/es_to_mx=0/.test(location.href)) {
				// 跳回来之后设置cookie,防止下次西班牙站点还会跳
				setCookie('es_to_mx', '0', 3600*24)
            }
            var es_to_mx = getCookie('es_to_mx');   
			// 为0说明1天内不需要跳转
			if (es_to_mx !== '0') {
				if (!country) {
					$.ajax({
						type: "POST",
						url: "/judgeIP",
						success: function (res) {
							if (0 == res.code) {
								country = res.info.location.country;
								setCookie('country', country, 3600 * 24 * 30, true);
								if (country.toLowerCase() === 'mx') {
									jumpToMx();
								}
							}
						}
					});
				} else if (country.toLowerCase() === 'mx') {
					jumpToMx();
				}
			}
		}
	}())
</script>


  
<script type="text/javascript" data-id="ga_nav">
	var GB_ga_nav = {
		ga_click_search: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickSearch'
		        });
		    }
		},
		ga_edit_search: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'EditSearch'
		        });
		    }
		},
		ga_cancel_search: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'CancleSearch'
		        });
		    }
		},
		ga_goto_search: function (val) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'GoToResult',
	                eventLabel: val
	            });
			}
			if(typeof sa != 'undefined' && val){
				sa('send',{'activity_name':'click_top_site_search','activity_param':{search_content:val}}, { beacon: 1 });
			}
		},
		ga_language: function (val) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'SelectLanguage',
	                eventLabel: val
	            });
			}
			if(typeof sa != 'undefined' && val){
				sa('send',{'activity_name':'click_top_site_sub_site','activity_param':{sub_site:val}});
			}
		},
		ga_currency: function (val) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'SelectCurrency',
	                eventLabel: val
	            });
			}
			if(typeof sa != 'undefined' && val){
				sa('send',{'activity_name':'click_top_site_money_type','activity_param':{money_type:val}});
			}
		},
		ga_shippingInfo: function (val,url) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'ClickShippingInfo',
	                eventLabel: val
	            });
			}
			if(typeof sa != 'undefined' && url){
				sa('send',{'activity_name':'click_top_site_activity','activity_param':{activity_content:url}});
			}
		},
		ga_logo: function (val) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'ClickRomweLogo',
	                eventLabel: val
	            });
		    }
		},
		ga_account_nologin: function (val) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
	                hitType: 'event',
	                eventCategory: '导航栏',
	                eventAction: 'Sign in/Register',
	                eventLabel: val
	            });
		    }
		},
		ga_account_login: function (val) {
			if(typeof(ga) == 'function') {
		        // ga('rwus.send',{
	            //     hitType: 'event',
	            //     eventCategory: '导航栏',
	            //     eventAction: 'My Account',
	            //     eventLabel: val
	            // });
		    }
		},
		ga_online_service: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickOnlineService'
		        });
		    }
		},
		ga_online_aticket: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickSubmitATicket'
		        });
		    }
		},
		ga_click_wishlist: function ($this) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickWishlist'
		        });
		    }
			if(typeof sa != 'undefined'){
				var param = $this.find('em').text().trim() ||'';
      			sa('send',{'activity_name':'click_top_site_collect','activity_param':{collect_count:param}});
			}
		},
		ga_click_bag: function ($this) {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickBag'
		        });
		    }
			if(typeof sa != 'undefined'){
				var param = $this.find('.j-header-cart-num').text().trim() ||'';
				sa('send',{'activity_name':'click_top_site_bag','activity_param':{bag_goods_count:param,type:1}});
			}
		},
		ga_click_faq: function () {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickFAQ'
		        });
		    }
		},
		ga_click_category: function (val) {
			if(typeof(ga) == 'function') {
		        // ga('rwus.send',{
		        //     hitType: 'event',
		        //     eventCategory: '导航栏',
		        //     eventAction: 'SelectCategory',
		        //     eventLabel: val
		        // });
		    }
		},
		ga_click_item: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '快捷购物车',
		            eventAction: 'ClickItems'
		        });
		    }
		},
		ga_click_view: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '快捷购物车',
		            eventAction: 'ClickViewBag'
		        });
			}
			if(typeof sa != 'undefined'){
				var param = $('.j-header-cart-num').text().trim() ||'';
				sa('send',{'activity_name':'click_top_site_bag','activity_param':{bag_goods_count:param,type:2}});
			}
		},
		ga_click_signin: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'Sign in/Register',
		            eventLabel: 'ClickSignin'
		        });
		    }
		},
		ga_click_register: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'Sign in/Register',
		            eventLabel: 'ClickRegister'
		        });
		    }
		},
		ga_click_google: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'Sign in/Register',
		            eventLabel: 'ClickGoogle'
		        });
		    }
		},
		ga_click_fb: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'Sign in/Register',
		            eventLabel: 'ClickFacebook'
		        });
		    }
		},
		ga_click_message: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickMyMessage'
		        });
		    }
		},
		menuHover:function(_item){
			var name = _item.find('.j-category-title').text()||'';
			if(name[name.length-1] == '/'){name = name.substring(0,name.length-1)}
			var url = _item.find('.j-category-title').attr('href');
			var pitPos = _item.prevAll().length+1;
			sa('send',{'activity_name':'expose_navigation_menu','activity_param':{navbar_hole:pitPos,navbar_content:name,navbar_url:url}});
			this.bannerHover(_item);
		},
		bannerHover:function(_item){
			var name = _item.find('.j-category-title').text()||'';
			if(name[name.length-1] == '/'){name = name.substring(0,name.length-1)}
			var pitPos = _item.prevAll().length+1;
			var banners = '';
			var banner_urls = '';
			_item.find('.info-pic-inner a').each(function(index){
				banners += (index+1)+'`'+$(this).next().text().trim()+',';
				banner_urls += (index+1)+'`'+$(this).attr('href')+',';
			})
			if(banners.length>0){
				banners = banners.substring(0,banners.length-1);
				sa('send',{'activity_name':'expose_navigation_banner','activity_param':{navbar_hole:pitPos,navbar_content:name,banner:banners,banner_url:banner_urls}});
			}
		},
		// signout
		ga_click_nav_signout: function() {
			if(typeof(ga) == 'function') {
		        ga('rwus.send',{
		            hitType: 'event',
		            eventCategory: '导航栏',
		            eventAction: 'ClickSignOut',
		        });
		    }
		}
	}

	// 导航栏文案信息点击
    $(document).on('click', '.j-free-shipping a', function() {
    	GB_ga_nav.ga_shippingInfo($(this).text().trim(),$(this).attr('href'))
    })

    // logo点击
    $(document).on('click', '.header-pos .logo1 a', function() {
    	if(typeof(PageGroup) != 'undefined') {
    		GB_ga_nav.ga_logo(PageGroup)
    	} else {
    		GB_ga_nav.ga_logo('other')
    	}
    })

    // login点击
    $(document).on('click', '.j-header-login', function() {
    	if($(this).data('login') == 1) {
    		GB_ga_nav.ga_account_login('ClickMyAccount')
			if(typeof sa != 'undefined'){
				sa('send',{'activity_name':'click_top_site_account','activity_param':{account_content:1+'`'+'user'}});
			}
    	} else {
    		GB_ga_nav.ga_account_nologin('ClickSign in/Register')
			if(typeof sa != 'undefined'){
				sa('send',{'activity_name':'click_top_site_account','activity_param':{account_content:1+'`'+'login/register'}});
			}
    	}
	})
	
	$(document).on('click', '.j-ga-nav-signout a', function() {
		GB_ga_nav.ga_click_nav_signout();
	})

    // account点击
    $(document).on('click', '.j-welcome .j-head-member-info a', function() {
    	// if($('.j-header-login').data('login') == 1) {
    	// 	GB_ga_nav.ga_account_login('Click' + $(this).data('id'))
    	// } else {
    	// 	GB_ga_nav.ga_account_nologin('Click' + $(this).data('id'))
		// }
		var index = 0;
		var self = this;
		$('.j-head-member-info li').each(function(idx,item){
			if(item == $(self).closest("li").get(0)){
				index = idx+2;
			}
		});
		var name = $(this).data('id')||'';
		if(typeof sa != 'undefined'){
			sa('send',{'activity_name':'click_top_site_account','activity_param':{account_content:index+'`'+name}});
		}
	})
    // online点击
    $(document).on('click', '.j-online-help', function() {
    	GB_ga_nav.ga_online_service()
    }).on('click', '.j-sub-ticket', function() {
    	GB_ga_nav.ga_online_aticket()
    }).on('click', '.j-sub-faq', function() {
    	GB_ga_nav.ga_click_faq()
    })

    // 搜索框input点击
    $(document).on('click', '.j-header-search input', function() {
    	GB_ga_nav.ga_edit_search()
    })

    // wishlist/cart点击
    $(document).on('click', '.j-wishlist-info', function() {
    	GB_ga_nav.ga_click_wishlist($(this))
    }).on('click', '.j-bag-hover .bag-box', function() {
    	GB_ga_nav.ga_click_bag($(this))
    }).on('click', '.j-bag-hover .j-hbag-box .good-name a', function() {
    	GB_ga_nav.ga_click_item()
    }).on('click', '.j-bag-hover .j-hbag-box .bag-link', function() {
    	GB_ga_nav.ga_click_view()
    }).on('click','j-bag-hover .j-checkout',function(){
	})

    $(document).on('click', '.j-header-signinnav', function() {
    	GB_ga_nav.ga_click_signin()
    })
    $(document).on('click', '.j-header-registernav', function() {
    	GB_ga_nav.ga_click_register()
    })
    $(document).on('click', '.j-header-googlenav', function() {
    	GB_ga_nav.ga_click_google()
    })
    $(document).on('click', '.j-header-fbnav', function() {
    	GB_ga_nav.ga_click_fb()
    })

    // 导航菜单分类点击
    $(document).on('click', '.j-navbar-list a', function() {
		GB_ga_nav.ga_click_category($(this).text().replace('/', '').trim())

		var href = $(this).attr('href')
		if(href.indexOf('javascript:;') == -1) {
			var vcRegx = /.+-vc-(\d+).+/
			var cRegx = /.+-c-(\d+).+/
			var cat_id = vcRegx.exec(href) || cRegx.exec(href)
			var e_l_n = ''

			if(cat_id) {
				cat_id = cat_id[1]
				e_l_n = cat_id
			}
		}
		//sa三级栏目上报逻辑
		var name = $(this).text().trim()||'';
		if(!name){
			name = $(this).next().text().trim()||'';
		}
		if(name[name.length-1] == '/'){name = name.substring(0,name.length-1)}
		var param = '';
		var url = $(this).attr('href');
		if($(this).parent().hasClass('j-navbar-list')){//一级分类
			var pitPos = $(this).parent().prevAll().length+1;
			sa('send',{'activity_name':'click_navigation_menu','activity_param':{navbar_hole:pitPos,navbar_content:name,navbar_url: url}});
		}else{
			var topMenuDom = $(this).parents('.j-navbar-list').find('.j-category-title');
			var pitPos_topMenu = topMenuDom.parent().prevAll().length+1;
			var name_topMenu = topMenuDom.text().trim()||'';
			if(name_topMenu[name_topMenu.length-1] == '/'){name_topMenu = name_topMenu.substring(0,name_topMenu.length-1)}
			if($(this).parent().hasClass('info-pic-inner')){//下拉框右侧banner
			var pitPos = $(this).parent().prevAll().length+1;
			sa('send',{'activity_name':'click_navigation_banner','activity_param':{navbar_hole:pitPos_topMenu,navbar_content:name_topMenu,banner:pitPos+'`'+name,banner_url:url}});
			}else if($(this).parent().get(0).tagName == 'H4'){//二级分类
			var pitPos = $(this).parent().prevAll().filter('h4:not(".other-line")').length+1;
			sa('send',{'activity_name':'click_navigation_menu','activity_param':{navbar_hole:pitPos_topMenu,navbar_content:name_topMenu,first_menu_hole:pitPos,first_menu_content: name,first_menu_url:url}});
			}else{//三级分类
			var prevSiblings = $(this).parent().prevAll().filter(':not(".other-line")');
			var pitPos = 1;
			//得到三级分类位置
			for(var i = 0; i <= prevSiblings.length-1;i++){
				if(prevSiblings[i].tagName == 'H4'){
					pitPos = i+1;
					break;
				}
			}
			//得到二级分类位置
			var pitPos_secMenu = $(prevSiblings[i]).prevAll().filter('h4:not(".other-line")').length+1;
			var name_secMenu = $(prevSiblings[i]).find('a').text().trim()||'';
			sa('send',{'activity_name':'click_navigation_menu','activity_param':{navbar_hole:pitPos_topMenu,navbar_content:name_topMenu,first_menu_hole:pitPos_secMenu,first_menu_content:name_secMenu,second_menu_hole: pitPos,second_menu_content: name,second_menu_url:url}});
			}
		}
    })
	//导航栏hover
	$('.c-navbar .j-navbar-list').hover(function(e){
      clearTimeout(GB_ga_nav.hoverTimeout);
      var item = $(this);
      GB_ga_nav.hoverTimeout = setTimeout(function(){GB_ga_nav.menuHover(item);},1000);
    },function(){
      clearTimeout(GB_ga_nav.hoverTimeout);
    });

	$(document).on('click','.j-head-message',function() {
		GB_ga_nav.ga_click_message();
	})
</script>


<script type="text/javascript">

  var __CurrentMainDomain__ = (function () {
    var hostnameArray = location.hostname.split('.');
    return "." + hostnameArray.slice(-2).join('.');
  })();
  function setCookie(name, val, expires, domain) {
    //domain = domain || __CurrentMainDomain__;
    var text = String(encodeURIComponent(val));
    var  date = new Date();
    date.setTime(date.getTime() + Number(expires)*1000);
    text += '; expires=' + date.toUTCString();
    // domain
      text += '; path=/';
    if (typeof (domain) != "undefined" && domain != "") {
      text += '; domain='+__CurrentMainDomain__;
    }

    document.cookie = name + '=' + text;
  }
  var romwe_verified_callback = function(){
      $('.j-quick-submit').prop('disabled', false)
  }
  var romwe_expired_callback = function(){
      $('.j-quick-submit').prop('disabled', true)
  }
  var g_shein_quick_exprie = 60* 60 *24
  if(ROMWE_W.getCookie('signup_recaptcha') && ROMWE_W.getCookie('signup_recaptcha') == 0){
    $('.g-recaptcha').show();
    $('.j-signup').prop('disabled', true)
  }

  if(ROMWE_W.getCookie('needBindFirstCoupon') == 1 && ROMWE_W.getCookie("memberId")){
    ROMWE_W.bindFirstCoupon();
    ROMWE_W.delCookie('needBindFirstCoupon');
  }


var sadata_qucik_register_expose = {
  'activity_name': 'expose_quick_register',
}
if(typeof SaPageInfo != 'undefined'){
  sadata_qucik_register_expose = $.extend({}, SaPageInfo, sadata_qucik_register_expose)
}

if($('.j-quick-register').length){
  var quickRegister = new Vue({
    el: '.j-quick-register',
    data: {
      state: {
        quickRegister: false,
        email: '',
        errorTip: false,
        isRegistering: false,
        isshowPrivacy: ROMWE_W.getCookie('keepPrivacy'),
        // isprivacycheck: privacy_vue.isprivacycheck,
      },
      message:'',
      privacytips: ''
    },
    watch: {
      'state.quickRegister': function(val) {
        if (val) {
          ga('rwus.send', {
            hitType: 'event',
            eventCategory: "注册弹窗",
            eventAction: 'AutoPopUps'
          })
        } else {
          ga('rwus.send', {
            hitType: 'event',
            eventCategory: "注册弹窗",
            eventAction: 'ClosePopUps'
          })
        }
      }
    },
    methods: {
      quickRegisterOpen: function() {
        this.state.quickRegister = true;
      },
      quickRegisterClose: function() {
        this.state.quickRegister = false;
        $.get('/closeQuickRegister', function() {})
      },
      registerGa: function(val, failMsg) {
        var statusLabel = val ? 'Success': 'Fail-';
        var msg = '';
        if (failMsg) {
          msg = val ? '' : failMsg;
        }
        ga('rwus.send', {
          hitType: 'event',
          eventCategory: "注册弹窗",
          eventAction: 'ClickPopUpsRegister',
          eventValue: val,
          eventLabel: statusLabel + msg
        })
      },
      email_input_click:function(){
          ga('rwus.send', {
              hitType: 'event',
              eventCategory: '注册弹窗',
              eventAction: 'EditEmail',
          })
      },
      blurTips: function() {
          if (this.state.email.length && !pattern.test(this.state.email)) {
              this.message = 'The email you entered is invalid. Please check your email and try again.'
          } else {
              this.message = ''
          }
      },
      ok: function() {
          if (this.state.isRegistering) return
          //bi
          sa("send", {
            'activity_name': 'click_quick_register',
            'activity_param': {
              abtest: sadata_qucik_register_expose && sadata_qucik_register_expose.activity_param && sadata_qucik_register_expose.activity_param.abtest || ''
            }
          })

          var self = this
          var email = this.state.email
          var rec = ''
          var $recaptcha = $('#g-recaptcha-response')
          if($recaptcha && $recaptcha.val() != ''){
            rec = $recaptcha.val();
          }

          if(email.length == 0 ) {
            self.registerGa(0, 'Please enter an email address.')
            self.biQuickRegisterResult('failure', 'empty_email');
            self.state.errorTip = true,
            this.message ='Please enter an email address.'
            self.privacytips = ''
          }else if (!pattern.test(email)) {
           // alert('非法邮箱')
            self.registerGa(0, 'The email you entered is invalid. Please check your email and try again.')
            self.biQuickRegisterResult('failure', 'incorrect_email_format');
            self.state.errorTip = true,
            this.message ='The email you entered is invalid. Please check your email and try again.'
            self.privacytips = ''
          } else {
            // 验证隐私政策是否勾选
            
              if(true && _gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1) {
                  if(!ROMWE_W.getCookie('keepPrivacy')) {
                    privacy_vue.usarticleshow=true;
                    gb_gdprRegister('PopUps','');
                    self.biQuickRegisterResult('failure', 'other');
                    return
                  }
              }else if(true && !_gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1){

              }else {
                if(!self.state.isshowPrivacy) {
                    if(!$('.j-quickregister-agree').is(':checked')) {
                      self.privacytips = "Please agree to the Privacy Policy"
                      self.message = ''
                      if(typeof(ga) == 'function'){
                        ga('rwus.send', {
                            hitType: 'event',
                            eventCategory: '注册弹窗',
                            eventAction: 'ClickPopUpsRegister',
                            eventLabel: 'Fail-Please agree to our Privacy Policy',
                            eventValue: 0
                        })
                      }
                      self.biQuickRegisterResult('failure', 'other');
                      return
                    }else {
                      self.privacytips = ''
                    }
                }
              }
            

            $('.j-quick-submit').addClass('rw-none').next().removeClass('rw-none')

            var prefer = [];
            
              var preferenceCheckbox = $('.j-prefer-select input:checkbox:checked');
              preferenceCheckbox.each(function(index,checkbox){
                prefer.push(parseInt(checkbox.name));
              })
            
            var dat = { email: email, prefer: prefer };
            if(rec != '') dat.g_recaptcha_response = rec;
            this.state.isRegistering = true;
            $.ajax({
              type: 'POST',
              url: '/user/auth/quickRegister',
              contentType: 'application/json',
              data:  JSON.stringify(dat),
              success: function(data){
                self.state.isRegistering = false
                if (data.code == 0) {
                  
                    gb_gdprRegister('Subscribe-register','AgreePrivacyPolicy');
                  

                  self.biQuickRegisterResult('success', '');

                  if(ROMWE_W.getCookie('keepPrivacy') == 1) {
                    $.post('/user/account_setting/showAgreeClause', {}, function(res){})
                  }
                  self.registerGa(1)
                  self.state.quickRegister = false;
                  self.state.errorTip = false,
                  ROMWE_W.setCookie('needBindFirstCoupon', 1)
                  window.location.reload()
                } else if(data.code == 400503) {
                  self.registerGa(0, data.msg)
                  self.state.errorTip = true,
                  self.message ='The Email has been used by others. Please specify another Email.'
                  $('.j-quick-submit').removeClass('rw-none').next().addClass('rw-none')
                } else if (data.code == 400517  || data.code == 400522) {
                  self.registerGa(0, data.msg)
                  self.state.errorTip = true,
                  self.message ="We're so sorry to inform you that your IP is limited to register more . For further help, please <a onclick='zenDeskComponent.activeOnlineHelp()' style='color:#00F;' href='javascript:void(0)'>contact us</a> !"
                  $('.j-quick-submit').removeClass('rw-none').next().addClass('rw-none')
                }else if(data.code == 1404){
                  self.registerGa(0, data.msg)
                  ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_quick_exprie);
                  $('.g-recaptcha').show();
                  grecaptcha.reset();
                  $('.j-quick-submit').prop('disabled', true)
                  $('.j-quick-submit').removeClass('rw-none').next().addClass('rw-none')
                }else if(data.code == 1403){
                  self.registerGa(0, data.msg)
                  ROMWE_W.setCookie('signup_recaptcha', 0, g_shein_quick_exprie);
                  $('.g-recaptcha').show();
                  grecaptcha.reset();
                  $('.j-quick-submit').prop('disabled', true)
                  $('.j-quick-submit').removeClass('rw-none').next().addClass('rw-none')
                  $('.signup-verification-error').show();
                }else {
                  self.registerGa(0, data.msg)
                  self.state.errorTip = true,
                  this.message ='Failed'
                  //alert('fail')
                }

                if(data.code != 0){
                  if(data.code == 400503){
                    self.biQuickRegisterResult('failure', 'registered_email');
                  }else if(data.code == 400517  || data.code == 400522){
                    self.biQuickRegisterResult('failure', 'IP_limit_error');
                  }else{
                    self.biQuickRegisterResult('failure', 'other');
                  }
                }

              },
              error: function(){
                self.biQuickRegisterResult('failure', 'network_error');
              }
            });
          }
      },
      quickshowPrivacy: function(e) {
        privacy_vue.showPrivacyFun(e);
      },
      biQuickRegisterResult: function(status, reason){
        var privacy;
        if($('.j-check-agree').length && $('.j-check-agree').is(':visible') && $('.j-check-agree .j-quickregister-agree').is(':checked')){
          privacy = 1
        }else{
          privacy = 0
        }
        var sadata_quickregister = {
          activity_name: "click_quick_register_result",
          activity_param: {
            privacy_policy: privacy,
            status: status,
            failure_reason: reason,
            abtest: sadata_qucik_register_expose && sadata_qucik_register_expose.activity_param && sadata_qucik_register_expose.activity_param.abtest || ''
          }
        }
        sa("send", sadata_quickregister)
      },
    }
  });
}

//us站快速注册
window._quickRegisterEventCneter_ = new Vue()
if($('.j-new-quick-register').length){
    var newQuickRegister = new Vue({
        el: '.j-new-quick-register',
        data: {
            quickRegisterShow: false,
        },
        watch: {
            quickRegisterShow: function(val) {
                if (val) {
                    ga('rwus.send', {
                      hitType: 'event',
                      eventCategory: "注册弹窗",
                      eventAction: 'AutoPopUps'
                    })
                } else {
                    ga('rwus.send', {
                      hitType: 'event',
                      eventCategory: "注册弹窗",
                      eventAction: 'ClosePopUps'
                    })
                    saRegisterSend('click_quick_register_close')
                }
            }
        },
        methods: {
            close: function(){
                this.quickRegisterShow = false;
                $.get('/closeQuickRegister', function() {})
                if(typeof newQuickRegisterSide != 'undefined'){
                    newQuickRegisterSide.slideRegisterShow = true;
                }
            },
        }
    })
}

if($('.j-new-quick-register-side').length){
    var newQuickRegisterSide = new Vue({
        el: '.j-new-quick-register-side',
        data: {
            firstCouponSite: gbCommonInfo.firstCouponSite,
            slideRegisterShow: false,
            tipsShow: true,
            slideShow: false,
        },
        mounted: function() {
          this.initEvent()
        },
        methods: {
            initEvent: function() {
              var self = this;
              $(document).click(function(e) {
                  if (!$(e.target).is('.j-new-quick-register-side *')) {
                    self.slideShow = false;
                    setTimeout(function(){
                      self.tipsShow = true;
                    }, 600);
                  }
              })
            },
            sliderOut: function(){
                this.tipsShow = false;
                this.slideShow = true;
                ga('rwus.send', {
                    hitType: 'event',
                    eventCategory: "注册弹窗",
                    eventAction: 'ClickPopUps',
                })
                saRegisterSend('click_quick_register_spread')
                saRegisterSend('expose_quick_register')
            },
            slideIn: function(){
                this.slideShow = false;
                var self = this;
                setTimeout(function(){
                  self.tipsShow = true;
                }, 600);
                saRegisterSend('click_quick_register_shrink')
                $.get('/closeQuickRegister', function() {})
            },
            sliderShow: function(){ // abt us站弹框新交互
                this.slideRegisterShow = true;
                this.slideShow = true;
                ga('rwus.send', {
                    hitType: 'event',
                    eventCategory: "注册弹窗",
                    eventAction: 'AutoPopUps',
                })
                setTimeout(function(){
                  sa("send", sadata_qucik_register_expose)
                }, 1000)
            },
        }
    })
}

if($('.j-new-quick-register-success').length){
    var newQuickRegisterSuc = new Vue({
      el: '.j-new-quick-register-success',
      data: {
        quickRegisterSuc: false,
        email: '',
      },
      watch: {
          quickRegisterSuc: function(val){
              var self  =  this;
              if(val){
                  setTimeout(function(){
                      if(self.quickRegisterSuc){
                        self.quickRegisterSuc = false;
                        window.location.reload();
                     }
                  }, 10000)
              }
          }
      },
      methods: {
          closeSuc: function(){
              self.quickRegisterSuc = false;
              window.location.reload()
          }
      }
    })
}

function saRegisterSend(name) {
  if(gbCommonInfo.lang != 'us') return
  var data = {
    'activity_name': name,
    'activity_param': sadata_qucik_register_expose.activity_param
  }
  if(typeof SaPageInfo != 'undefined'){
    data = $.extend({}, SaPageInfo, data)
  }
  sa("send", data)
}
//us站快速注册完

</script>



  <!-- 登录页不加载登录注册弹窗 -->
<script>
  if($('.j-quick-login').length){
  var quickLogin = new Vue({
    el: '.j-quick-login',
    data: {
      state: {
        quickLogin: false,
      },
      preferOptions:[],
      tab: 'signin',
      bannerInfo: "",
      showFrom: "",
      safety: {
          showFir: 0,
          showSec: 0,
          showThi: 0,
          showAll: 0,
          hideAll: 0,
          focusAll: 0,
      },
      inputRegisterPsd: ''
    },
    methods: {
      quickLoginClose: function() {
        this.state.quickLogin = false;
        _global_checkout_qiucklogin = false;
        if(_ga_global_state_quicklogin._is_adding_wishlist == true) {
          gaquickloginClose('Sign/Register-AddToWishlist');
          _ga_global_state_quicklogin._is_adding_wishlist = false
        }
        if(_ga_global_state_quicklogin.loginType == 'Checkout') {
          gaquickloginClose('Sign/Register-ClickCheckout');
          _ga_global_state_quicklogin.loginType = ''
        }
        if(_ga_global_state_quicklogin._is_save_later == true) {
          gaquickloginClose('Sign/Register-SaveForLater');
          _ga_global_state_quicklogin._is_save_later = false
        }
        if(_ga_global_state_quicklogin._is_going_blackfirday == true) {//black friday && Anniversary && world cup
          _ga_global_state_quicklogin._is_going_blackfirday = false
        }
        if(_ga_global_state_quicklogin._is_going_fbgiveaway == true){//fb giveaway && easter day
          _ga_global_state_quicklogin._is_going_fbgiveaway = false
        }
      },
      quickshowPrivacy: function(e) {
        privacy_vue.showPrivacyFun(e);
      },
      googleLoginInit: function(){
        var self = this;
        function startApp() {
            gapi.load('auth2', function(){
              auth2 = gapi.auth2.init({
                // client_id: '355742883988-c7v9lavb001f4svlkh93rav27269a060.apps.googleusercontent.com',
                client_id: '442372174610-26n0t29eca68mq1vrjtan11loi2ft2a5.apps.googleusercontent.com',
                cookiepolicy: 'single_host_origin',
              });
              attachSignin(self.$refs.googleLogin);
              $(self.$refs.googleLogin).one('click', function() {
                if(typeof signupTimeRecord != "undefined"){
                  signupTimeRecord()
                }
              })
            });
        }
        function attachSignin(element) {
          auth2.attachClickHandler(element, {},
            function(googleUser) {
              var profile = googleUser.getBasicProfile();
              var id_token = googleUser.getAuthResponse().id_token;
              googleuid = profile.getId();
              googleLogin(googleuid, profile.getEmail(), id_token)
            }, function(error) {
              if(_ga_global_state_quicklogin.loginType == 'Checkout') {
                  qvOtherLoginGa('Google', 0, 'Checkout')
              }else {
                qvOtherLoginGa('Google', 0, 'Other')
              }
              alert('Please try later')
            });
        }
        var st_count = 100;
        function startAppInterval(){
            st_count--;
            if(typeof(gapi)!="undefined"){
                startApp();
                if(itervalGoogle)clearInterval(itervalGoogle)
            }else if(st_count<0) clearInterval(itervalGoogle);
        }
        var itervalGoogle = setInterval(function(){
                startAppInterval();
            },500)
        startAppInterval();
      },
      transformImg: function(img) {
        var img = img || '';
        img = img.replace('http:', '').replace('https:', '')
        return /^\/\/.*/.test(img) ? img : '//img.romwe.com/' + img
      },
      checkregPw: function(pw) {
          if(!_gb_passwordSafetyExp.test(pw)) {
              this.safety.showAll = 1
              return false
          }else {
              return true
          }
      },
      checkexg: function(pwd) {
          var self = this
          var pwdexp = /^(?=.*[0-9])(?=.*[a-zA-Z])/
          self[pwd]=self[pwd].replace(/\s+/g,'')

          if(self[pwd].length >= 8) {
              self.safety.showFir = 1
          }else {
              self.safety.showFir = 0
          }
          if(/[a-zA-Z]{1,}/.test(self[pwd])) {
              self.safety.showSec = 1
          }else {
              self.safety.showSec = 0
          }
          if(/[0-9]{1,}/.test(self[pwd])) {
              self.safety.showThi = 1
          }else {
              self.safety.showThi = 0
          }
          if(!_gb_passwordSafetyExp.test(self[pwd])) {
              self.safety.showAll = 1
          }
          var timer = setInterval(function(){
              clearInterval(timer);
              if(self.safety.showFir==1 && self.safety.showSec ==1 && self.safety.showThi ==1) {
                  self.safety.hideAll = 1
                  self.safety.focusAll = 1
              }else {
                  self.safety.hideAll = 0
                  self.safety.focusAll = 0
              }
          },200)
      },
      foucsCheckexg: function(pwd) {
        if(!_gb_passwordSafetyExp.test(this[pwd])) {
          this.safety.focusAll = 0
          this.safety.hideAll = 0
          this.safety.showAll = 1
        }
      },
      blurCheckexg: function(pwd) {
        if(_gb_passwordSafetyExp.test(this[pwd])) {
          this.safety.focusAll = 1
          this.safety.hideAll = 1
          this.safety.showAll = 0
        }else {

        }
      },
      delayCheckexg: function(pwdval) {
          var self = this
          self.checkexg(pwdval)
      },
    },
    created:function(){
      var self = this
      $.ajax({
          type: 'POST',
          dataType: 'json',
          data: {},
          url: '/user/auth/getPreferOptions',
          success: function success(res) {
            if(res.code == 0 && res.info && res.info.result && res.info.result.length){
              self.preferOptions = res.info.result;
            }
            self.googleLoginInit();
          }
      });
      $.ajax({
          type: 'get',
          dataType: 'json',
          data: {},
          url: '/getQuickLoginBanner',
          success: function success(res) {
            if(res.code == 0 && res.info && res.info.banner && res.info.banner[0]){
              self.bannerInfo = res.info.banner[0];
            }
          }
      });
    }
  })
}
</script>

<script>
  window.V_Comp = {}
  var pattern= /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,6}|[0-9]{1,3})(\]?)$/
  ;(function() {
    var currencies = {"USD":{"currency_id":"2","code":"USD","symbol_left":"$","symbol_right":"","decimal_place":"2","value":"1.00000000","date_modified":"2019-05-20 11:22:53","status":"0","default":"1","country_flag":"images2_rw/currency/USD.jpg","dec_point":".","thousands_sep":",","title":"US$"},"EUR":{"currency_id":"3","code":"EUR","symbol_left":"","symbol_right":"€","decimal_place":"2","value":"0.90090100","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/EUR.jpg","dec_point":",","thousands_sep":".","title":"€"},"GBP":{"currency_id":"1","code":"GBP","symbol_left":"£","symbol_right":"","decimal_place":"2","value":"0.79032600","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/GBP.jpg","dec_point":".","thousands_sep":",","title":"￡"},"CAD":{"currency_id":"10","code":"CAD","symbol_left":"CA$","symbol_right":"","decimal_place":"2","value":"1.35814200","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/CAD.jpg","dec_point":".","thousands_sep":",","title":"C$"},"BRL":{"currency_id":"21","code":"BRL","symbol_left":"R$","symbol_right":"","decimal_place":"2","value":"4.09910000","date_modified":"2019-05-20 11:22:52","status":"0","default":"0","country_flag":"images2_rw/currency/BRL.jpg","dec_point":",","thousands_sep":"","title":"R$"},"MXN":{"currency_id":"14","code":"MXN","symbol_left":"$MXN","symbol_right":"","decimal_place":"2","value":"19.30501900","date_modified":"2019-05-20 11:22:53","status":"0","default":"0","country_flag":"images2_rw/currency/MXN.jpg","dec_point":".","thousands_sep":",","title":"Mex.＄"}}

    var analysisFun = {
      emailEdit: function() {
        if(typeof ga === 'function') {
          ga('rwus.send',{
              hitType: 'event',
              eventCategory: 'Footer',
              eventAction: 'EditEmail'
          })
        }
      },
      emailSub: function(val) {
        if(typeof ga === 'function') {
          ga('rwus.send',{
              hitType: 'event',
              eventCategory: 'Footer',
              eventAction: 'Subscribe'
          })
        }
      }
    }
    function checkSameCookie(objName){
        var arrStr = document.cookie.split("; "),count=0;
        for (var i = 0; i < arrStr.length; i++) {
          var temp = arrStr[i].split("=");
          if (temp[0] == objName) {
            count++
          }
        }
        return count>1;
    }

    $(document).on('click', '.j-welcome .j-head-order-dropdown li.j-operate-shareearn', function(){
      if(typeof(ga) == 'function'){
            ga('rwus.send', {
                hitType: 'event',
                eventCategory: '导航栏',
                eventAction: 'ClickShare&Earn'
            })
        }
    })

    // 动态设置登录用户名, 货币
      $.ajax({
        type: 'POST',
        url: '/user/auth/getUserInfo',
        success: function(data) {
          var hi = "Hello "
          var loginURL = "https://us.romwe.com/user/auth/login?direction=nav"
          var loginPrompt = "Sign in/Register"

          var username = data.username
          var currency = data.currency
          var email = data.email
          var account_type = data.account_type
          var memberId = data.memberId

         var hostname = document.location.hostname
         var diffHostname = hostname.indexOf('.romwe.co.in') > -1;
         var lastCookieValue = getCookie('sessionID_rw');
        if(!diffHostname){//存在2个相同cookie 先删除所有cookie后再设置
             if(checkSameCookie("sessionID_rw")){
                setCookie('sessionID_rw', '', -1,true);//删除根域名下cookie
                lastCookieValue = getCookie('sessionID_rw'); //获取子域名下cookie
                setCookie('sessionID_rw', '', -1); //删除子域名下cookie
             }
        }

          if (username != null){
             // diffHostname?setCookie('sessionID_rw', lastCookieValue, 60 * 60 * 24 * 7):setCookie('sessionID_rw', lastCookieValue, 60 * 60 * 24 * 7, true)
            $('.j-header-username').text(hi + ' ' + username)
            
              $('.j-header-login').prop('href', "https://us.romwe.com/user/index")
            
            $('.j-header-login').attr('data-login', 1)
            $('.j-operate-item').removeClass('rw-hide')

            setCookie('userinfo[email]', email, 60 * 60 * 24 * 7, true)
            setCookie('userinfo[userId]', memberId, 60 * 60 * 24 * 7, true)
            if(typeof GB_headerOrderVue != 'undefined'){
              GB_headerOrderVue.isLogin = true;
            }

            $.get('/user/tickets/getUnReadTicketNum',function(res){
              if(res.ticketNum>0) {
                $('.j-ticket-nopenum').removeClass('rw-hide')
                $('.j-ticket-nopenum').text(res.ticketNum)
              }
            })

            $.post('/user/coupon/getCouponList', {}, function(res){
                if(res.code == 0 && res.info && res.info.total && res.info.total > 0){
                    $('.j-coupons-number').removeClass('rw-hide')
                    $('.j-coupons-number').text(res.info.total)
                }
            })

            $.get('/user/share_earn', function(res){
                if(res.code == 0){
                    if(res.info.have_activity_chance == 1 && $('.j-operate-shareearn').length){
                        $('.j-operate-shareearn').removeClass('rw-hide');
                    }
                }
            })


          } else {
            // diffHostname?setCookie('sessionID_rw', lastCookieValue, 60 * 60 * 24 ):setCookie('sessionID_rw', lastCookieValue, 60 * 60 * 24 , true)
            $('.j-header-username').text(loginPrompt)
            $('.j-header-login').prop('href', loginURL)
            $('.j-header-login').attr('data-login', 0)
            $('.j-operate-item').addClass('rw-hide')

          }

          if(account_type) {
            $('.j-edit-pass').removeClass('rw-hide')
          }else {
            $('.j-edit-pass').addClass('rw-hide')
          }

          // 更改货币
          // setCookie('currency', currency, 60 * 60 * 24 * 7)
          if (currencies[currency]) {
              $('.j-currency-title').html(currencies[currency].code)
              if ($('.j-flag-img').length > 0) {
                  $('.j-flag-img').css('background-image', currencies[currency].country_flag);
              }
              if ($('.j-change-currency').length > 0) {
                  $('.j-change-currency').removeClass('active')
                  $('.j-change-currency-' + currencies[currency].code).addClass('active')
              }
          }



          // 快速注册弹窗
          function getCookie(objName) {
            var arrStr = document.cookie.split("; ");
            for (var i = 0; i < arrStr.length; i++) {
              var temp = arrStr[i].split("=");
              if (temp[0] == objName) {
                return decodeURIComponent(temp[1]);
              }
            }
          }
          if (quickRegister) {
            var hide_q_r = getCookie('hide_q_r')
            var cancelPrivacy = getCookie('cancelPrivacy')
            var keepPrivacy = getCookie('keepPrivacy')
            if(false) {
              if (!email && hide_q_r != 1 && window.location.href.indexOf('user/auth/login') < 0 && (keepPrivacy || cancelPrivacy)) {
                quickRegister.state.quickRegister = true
                setTimeout(function(){
                  sa("send", sadata_qucik_register_expose)
                }, 1000)
              }
            }else {
              
                if(true && ROMWE_W.getCookie('countryId') || true) {
                  if (!email && hide_q_r != 1 && window.location.href.indexOf('user/auth/login') < 0 && typeof(popus)!="undefined" && popus.state && popus.state.popus == false) {
                    quickRegister.state.quickRegister = true
                    setTimeout(function(){
                      sa("send", sadata_qucik_register_expose)
                    }, 1000)
                  }
                }else {
                  if (!email && hide_q_r != 1 && window.location.href.indexOf('user/auth/login') < 0 && typeof(popus)!="undefined" && popus.state && popus.state.popus == false && (keepPrivacy || cancelPrivacy)) {
                    quickRegister.state.quickRegister = true
                    setTimeout(function(){
                      sa("send", sadata_qucik_register_expose)
                    }, 1000)
                  }
                }
              
            }
            if(keepPrivacy) {
              quickRegister.state.isshowPrivacy = keepPrivacy
            }
          }

          //US站快速注册
          if(newQuickRegister){
              var hide_q_r = getCookie('hide_q_r');
              var cancelPrivacy = getCookie('cancelPrivacy');
              var keepPrivacy = getCookie('keepPrivacy');
              if(gbCommonInfo.lang == 'us'){
                if(!email && !hide_q_r && window.location.href.indexOf('user/auth/login') < 0 && typeof(popus) != 'undefined' && popus.state && popus.state.popus == false){
                  var registerOldFun = function () {
                    newQuickRegister.quickRegisterShow = true;
                    setTimeout(function(){
                      sa("send", sadata_qucik_register_expose)
                    }, 1000)
                  }
                  if(typeof window._abt_server_provider != 'undefined' && _abt_server_provider.getAbtResult){
                    var poskey = 'RPcPopup'
                    _abt_server_provider.getAbtResult({poskey: poskey}).then(function(data){
                      ga('rwus.set', 'dimension22', data.param == 'type=old' ? 'OldPopUps' : 'NewPopUps');
                      sadata_qucik_register_expose.activity_param = {
                        abtest: poskey + '`' + data.expid + '`' + data.id
                      }
                      if (data.param == "type=old") {
                        registerOldFun()
                      } else {
                        newQuickRegisterSide.sliderShow()
                      }
                    }).catch(function(err){
                      ga('rwus.set', 'dimension22', 'OldPopUps');
                      registerOldFun()
                    })
                  }
                }
                if(!email && hide_q_r && window.location.href.indexOf('user/auth/login') < 0 && typeof(popus) != 'undefined' && popus.state && popus.state.popus == false){
                  if(typeof window._abt_server_provider != 'undefined' && _abt_server_provider.getAbtResult){
                    var poskey = 'RPcPopup'
                    _abt_server_provider.getAbtResult({poskey: poskey}).then(function(data){
                      ga('rwus.set', 'dimension22', data.param == 'type=old' ? 'OldPopUps' : 'NewPopUps');
                      sadata_qucik_register_expose.activity_param = {
                        abtest: poskey + '`' + data.expid + '`' + data.id
                      }
                      newQuickRegisterSide.slideRegisterShow = true;
                    }).catch(function(err){
                      ga('rwus.set', 'dimension22', 'OldPopUps');
                      newQuickRegisterSide.slideRegisterShow = true;
                    })
                  }
                }
              }
          }

        function textTemplate(args) {
            var str = arguments[arguments.length - 1];
            for (var i = 0; i < arguments.length - 1; i++) {
                var re = new RegExp('\\{' + i + '\\}', 'gm');
                str = str.replace(re, arguments[i]);
            }
            return str;
        }
        function deal_with_shipping_data(shippingData) {
              // 更改免邮
                var freeHTML = [];
            if(shippingData && shippingData.length){
                var freeShippingTips = data.freeShippingTips
                var freeShippingTipsData = []

                var textTpl = {
                  express_shipping: "&lt;storng style=&#34;text-transform: capitalize; color:#ff696e; font-weight:900&#34;&gt;Free {0}&lt;/storng&gt; on orders over {1}",
                  stand_shipping: "&lt;storng style=&#34;text-transform: capitalize; color:#ff696e; font-weight:900&#34;&gt;Free {0}&lt;/storng&gt; on orders over {1}",
                }

                shippingData.forEach(function(val){
                    var text = ROMWE_W.htmlDecode(textTpl[val.type] ? textTpl[val.type] : textTpl['stand_shipping']);
                    var el1 = '<span>'+textTemplate(val.title, val.full_amount.amountWithSymbol, text)+'</span>';
                    var el2 = '<span><storng style=\"text-transform: capitalize; color:#ff696e; font-weight:700\">'+textTemplate(val.title, "Free {0}!")+'</storng></span>';
                    var invoke = Number(val.full_amount.amount);
                    if(invoke > 0){
                        freeShippingTipsData.push(el1);
                    }else if(invoke == 0 && val.shippingPrices.amount == 0){
                        freeShippingTipsData.push(el2);
                    }
                });
                freeShippingTips  = freeShippingTipsData.map(function(tip, i) {
                    var hrefVal = "" + "/Free-Shipping-a-471.html";
                    return '<a href='+hrefVal+'>'+tip+'</a>';
                });

              freeHTML = freeShippingTips.map(function(tip) {
                return ' <li class="discount">' + tip + '</li> '
              })
            }
            if(data.freeShippingTips && data.freeShippingTips.length){
                var freeShippingTips = data.freeShippingTips
                for(var i = 0, len = freeShippingTips.length; i<len; i++){
                    var liEl = freeShippingTips[i];
                    if(freeShippingTips[i].indexOf('http') == -1){
                        liEl = freeShippingTips[i].replace(/href\=\"/i, 'href="' + '');
                    }
                    if(freeShippingTips[i]){
                        var countEl = '<li class="discount">' + liEl + '</li>'
                        freeHTML.push(countEl);
                    }
                }
            }
              // if (false) {
              //   freeHTML.push('<li><a href="https://us.romwe.com/coupon-a-368.html?icn=coupon&ici=rw_headline02" class="discount">save <em>60% off</em> on first order</a></li>')
              // }

              // if (false) {
              //   freeHTML.push('<li><a href="https://us.romwe.com/coupon-a-368.html?icn=coupon&ici=rwfr_headline02" class="discount"><em>-60% </em> Sur la 1ère commande</a></li>')
              //   freeHTML.push('<li><a href="https://us.romwe.com/no-vat-a-481.html?icn=notice&ici=rwfr_headline03" class="rw-color-red"> Tva à notre charge </a></li>')
              // }

              // if (false) {
              //   freeHTML.push('<li><a href="https://us.romwe.com/coupon-a-368.html?icn=coupon&ici=rwde_headline02" class="discount"><em>60% Rabatt</em> auf Erstauftrag</a></li>')
              // }

              // if (false) {
              //   freeHTML.push('<li><a href="https://us.romwe.com/coupon-a-368.html?icn=coupon&ici=rw_headline02" class="discount">save <em>60% off</em> on first order</a></li>')
              // }

              // var discountHTML = '<li><a href="https://us.romwe.com/coupon-a-368.html?icn=coupon&ici=rw_headline02" class="discount">save <em>60% off</em> on first order</a></li>'
              $('.j-free-shipping').append(freeHTML.join(''))

              // free shipping 动画
              var index = 0,
                  stop = false,
                  num =  $('.j-free-shipping >li').length,
                  liEls = $('.j-free-shipping >li');

              function shippingflipInX(){
                  if(stop) return false;
                  if(index > (num-2)){
                    liEls.addClass('none');
                    liEls.removeClass('animated flipInX block');
                    index = 0;
                    liEls.eq(0).removeClass('none').addClass('animated flipInX block');
                    return;
                  }

                  liEls.addClass('none');
                  liEls.removeClass('animated flipInX block');
                  liEls.eq(index+1).removeClass('none').addClass('animated flipInX block');
                  index ++ ;
              }
              if (num>1) {
                  var hdtimer = setInterval(function(){
                      shippingflipInX();
                  },3000);
              }
              $('.j-free-shipping').hover(function(){
                stop = true;
              },function(){
                stop = false;
              })

              if(typeof(GB_ga_currentRate) != 'undefined') {
                  GB_ga_currentRate = data.GB_CurrentRate
              }
        }
        if (typeof GB_ROMWE_shipping_promise !== 'undefined') {
            GB_ROMWE_shipping_promise.then(function(shippingData) {
                deal_with_shipping_data(shippingData)
            })
        } else {
            $.get('/shippingDetail', function(shippingData){
                deal_with_shipping_data(shippingData)
            })
        }

        }
      })

    // 设置语言切换
    $('.j-menu-lang li>a').click(function() {
      var lang = $(this).data('lang')
      GB_ga_nav.ga_language(lang)
      lang = lang === 'en'? 'www': lang
      location.href = location.href.replace(location.hostname, lang + '.romwe.com').replace(location.search, '')
    })

    $('.j-icon-del').click(function(e){
      e.stopPropagation();
      e.preventDefault();
      $('.j-top-banner').hide();
      return false
    })

    // 头部固定动画
      // topbanner 改成了可配置不再是一条 j-top-banner 后有了banner_id ，所以这里换成 banner-wrapper
    var fixedTop = function() {
        var st = $(document).scrollTop();
        if (st>0) {
        	if ($(".banner-wrapper").hasClass('rw-active')) {
        		$(".banner-wrapper").removeClass('rw-active');
        	}
        } else {
        	$(".banner-wrapper").addClass('rw-active');
        }
    };
    $(window).scroll(fixedTop);
    fixedTop();



    var userAgent = window.navigator.userAgent;
    var isIE = userAgent.indexOf("MSIE") > -1 || userAgent.indexOf("rv:11") > -1;
    var isEdge = userAgent.indexOf("Edge") > -1;

    if(isIE || isEdge){
      $('.j-navbar-list').hover(function(){
        $(this).children('.j-category-title').addClass('category-hover-ie')
      },function(){
          $(this).children('.j-category-title').removeClass('category-hover-ie').removeClass('j-prevent')
      })
    }else{
      $('.j-navbar-list').hover(function(){
        $(this).children('.j-category-title').addClass('category-hover')
      },function(){
        $(this).children('.j-category-title').removeClass('category-hover').removeClass('j-prevent')
      })
    }



    // header wishlist hover动画
    $('.j-wishlist-info').hover(function(){
      $(this).find('i').addClass('icon-saved').removeClass('icon-save')
    },function(){
      $(this).find('i').addClass('icon-save').removeClass('icon-saved')
    })

    $('.j-welcome').hover(function(){
      $('.j-header-login').addClass('member-hover')
    },function(){
      $('.j-header-login').removeClass('member-hover')
    })

    $('.j-lang').hover(function(){
      $(this).children('.lang').addClass('lang-hover')
    },function(){
      $(this).children('.lang').removeClass('lang-hover')
    })

    // footer 邮件订阅
    $('.j-footer-subscribe').click(function(event) {
      analysisFun.emailEdit();
    });


    $(document).on('click','.j-footer-studentdiscount',function(){
      if(typeof(ga) == 'function') {
        ga('rwus.send',{
            hitType: 'event',
            eventCategory: 'footer',
            eventAction: 'ClickStudentDiscount'
        });
      }
    })

    $(document).on('click','.rw-footer-faq',function(){
      if(typeof(sa) == 'function') {
        var sadata_effect = $.extend({}, {
            page_id: 1,
            page_name: 'page_home',
            page_param: '',
            activity_name: 'click_faq',
            activity_param: {
                ent1: 'help'
            }
        })

        sa('send', sadata_effect)
      }
    })

    $(document).on('click','.j-subscribe-submit',function(){
      var errormsg = $('.j-footer-errormsg')
      var email = $('.j-footer-subscribe').val().trim()
      if(email.length == 0) {
        errormsg.text('Please enter an email address.');
        analysisFun.emailSub(0);
      }else if (!pattern.test(email)) {
        errormsg.text('Get ModMail Oopsy daisy! Email boo-boo. Mind trying that again?');
        analysisFun.emailSub(0);
        //alert('邮箱错误')
      } else {
         // 验证隐私政策是否勾选
         
            if(true && _gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1) {
              if(!ROMWE_W.getCookie('keepPrivacy')) {
                privacy_vue.usarticleshow=true;
                gb_gdprRegister('PopUps','');
                return
              }
            }else if(true && !_gb_privacyEurCountry.indexOf(parseInt(ROMWE_W.getCookie('countryId'))) > -1){

            }else {
              if(!ROMWE_W.getCookie('keepPrivacy')) {
                if(!$('.j-footer-check-item .j-register-footer-agree').is(':checked')) {
                  $('.j-privacytips').text("Please agree to the Privacy Policy")
                  errormsg.text('')
                  return
                }else {
                  $('.j-privacytips').text('')
                }
              }
            }
          

         $('.j-footer-submit').addClass('rw-none').next().removeClass('rw-none')
        $.ajax({
          type: 'POST',
          url: '/user/auth/subscribe',
          data: {
            email: email
          },
          success: function(data) {
            if(data.code == 0){
              gb_gdprRegister('Subscribe-email','AgreePrivacyPolicy');
              $('.j-footer-submit').removeClass('rw-none').next().addClass('rw-none')
              errormsg.text('Thank you for subscribing! Enjoy shopping at romwe.com.');
              analysisFun.emailSub(email);
            }else if(data.code == 400509) {
              $('.j-footer-submit').removeClass('rw-none').next().addClass('rw-none')
              errormsg.text('Oops! This email address has already been registered.');
              analysisFun.emailSub(0);
            }
          }
        })
      }
    })

    
      $('.choose-lang.currency.j-toggle-lang, .j-header-to-www-site').click(function() {
        var isInSite = location.hostname.indexOf('co.in') > -1
        var langs = ['es', 'fr', 'us', 'de', 'es', 'in', 'uk', 'au', 'ca', 'it', 'mx', 'ar']
        var site = window.location.hostname.split('.')[0]
        if(isInSite) {
          site = 'in'
        }
        setCookie("mobileJump", "0", 1);
        setCookie('nginx_jump', '1', 3600*24, 1)
        setCookie('jump_to_' + site, '0', 3600*24, 1)
        setCookie('ipcountry', '0', 3600*24, 1)
        var index = langs.indexOf(site)
        if (index === -1) return

        var url = location.protocol + '//' + ('www.' + window.location.hostname.split('.').slice(1).join('.')) + location.pathname + location.search
        if(isInSite) {
          url = location.protocol + '//www.romwe.com' + location.pathname + location.search
        }
        if (url.indexOf('?') > -1)
          url += '&ref=' + site + '&rep=pop&ret=www&mobileJump=0'
        else
          url += '?ref=' + site + '&rep=pop&ret=www&mobileJump=0'

        url += location.hash
        window.location = url
      })
    

    // 切换货币
    $('.j-change-currency').click(function() {
      var currency = $(this).data('currency')
      GB_ga_nav.ga_currency(currency)
      $.get('/changeCurrency?currency=' + currency, function() {
        setCookie('currency', currency, 60 * 60 * 24 * 7)
        window.location.reload(true)
      })
    })

  }());
</script>
<script type="text/javascript">
  // 头部搜索
  ;(function() {
      function getUrlNameString(url, name) {
          var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
          var r = url.substr(1).match(reg);
          if (r != null) return unescape(r[2]); return null;
      }

    if($('.banner-wrapper').length) {
        if (typeof(ga) == 'function') {
            $('.c-header').on('click', '.banner-wrapper', function (e) {
                if (!$(e.target).hasClass('j-icon-del')) {
                    ga('rwus.ec:addPromo', {
                        'name': !getUrlNameString($(this).find('a').attr('href'), 'ici') ? '' : getUrlNameString($(this).find('a').attr('href'), 'ici')
                    });
                    ga('rwus.ec:setAction', 'promo_click');
                    ga('rwus.send', 'event', 'Banner', 'ClickBanner', !getUrlNameString($(this).find('a').attr('href'), 'ici') ? '' : getUrlNameString($(this).find('a').attr('href'), 'ici'));
                } else {
                    ga('rwus.send', 'event', 'Banner', 'CloseBanner', !getUrlNameString($(this).find('a').attr('href'), 'ici') ? '' : getUrlNameString($(this).find('a').attr('href'), 'ici'));
                }
            });
        }
    }

  })();
</script>
<script type="text/javascript">
    function getCookie(objName){/*获取指定名称的cookie的值*/
      var arrStr = document.cookie.split("; ");
      for(var i = 0;i < arrStr.length;i ++){
      var temp = arrStr[i].split("=");
      if(temp[0] == objName) return unescape(temp[1]);}
    }
    ;(function() {
        var email = getCookie('userinfo[email]')
        if (email) window.localStorage.setItem('_user_login_email', email)
    }());
</script>

<script type="text/javascript">
    if($(".j-wishlist-info").length){
        var fastwishVue = new Vue({
            el: '.j-wishlist-info',
            data: {
                whislistNum: 0,
            },
            created: function() {
                this.rewriteWish();
            },
            methods: {
                rewriteWish: function() {
                    var self = this;
                    $.get('/user/wishlist', {}, function(res) {
                       if(res.count){
                          var wishcount = res.count;
                          if(wishcount > 99){
                              self.whislistNum = "99+"
                          }else{
                              self.whislistNum = wishcount
                          }
                       }
                    })
                }
            }
        })
    }
</script>
<script type="text/javascript">
    if($(".j-message-info").length){
        var fastMessageVue = new Vue({
            el: '.j-message-info',
            data: {
                messageNum: 0,
            },
            created: function() {
                this.rewriteMessage();
            },
            methods: {
                //设置message 未读数
                rewriteMessage: function() {
                    var self = this;
                    $.get('/user/message/getMsgUnreadCount', {}, function(data) {
                        var msgUnReadTotal = 0;
                        var noticeUnReadTotal = 0;
                        var unRead;
                        if(data.code ==0 && data.info && typeof data.info.msgUnReadTotal.count != 'undefined'){
                            msgUnReadTotal = data.info.msgUnReadTotal.count;
                        }
                        if(data.code ==0 && data.info && typeof data.info.noticeTotal.total != 'undefined'){
                            try{
                                noticeUnReadTotal = data.info.noticeTotal.total - localStorage.getItem('notice_count');
                            }catch(err){}
                        }
                        unRead = Number(msgUnReadTotal) +　Number(noticeUnReadTotal);
                        if(unRead >99){
                            self.messageNum = "99+"
                        } else {
                            self.messageNum = unRead
                        }
                    })
                }
            }
        })
    }
</script>
<script type="text/javascript">
    if($(".j-head-member-info").length){
        var GB_headerOrderVue = new Vue({
            el: '.j-head-member-info',
            data: {
                isLogin: false,
            },
            methods: {
            }
        })
    }
</script>
<script>
  var support = {};
  $(function() {
    if($('.j-customer-vue').length){
      support = new Vue({
        el: '.j-customer-vue',
        data: {
          bannerNav: [{
            type: "online",
            _collapse: true,
            _selected: true,
            data: {
                title: 'LIVE CHAT',
                desc: '24*7 hours always at your service.',
                offline: {
                    title: 'LIVE CHAT',
                    desc: '24*7 hours always at your service.',
                }
            }
          },{
            type: "ticket",
            _collapse: true,
            _selected: true,
            data: {
              title: 'Submit a ticket',
              desc: 'Any issues, response within 24 hours.'
            }
          },{
            type: "selfhelp",
            _collapse: true,
            _selected: true,
            data: {
              title: 'FAQ',
              desc: ''
            }
          }],
          offLine: false,
          showCustomer: false,
          ticketnum: 0,
          _department: '',
          _departmentOne: false,
          departmentStatusRetrieved: false,
        },
        methods: {
          getCustomerService: function(){
            var self = this;
            $.get('/get_customer_service', function(res){
                $('.j-customer-show').css('display', 'table-cell');
                $('.j-customer-show-header').css('display', 'inline-block');
                if(res.code == 0 && res.info){
                    if(res.info.entries && res.info.entries.bannerNav && res.info.entries.bannerNav.length){
                      self.bannerNav = res.info.entries && res.info.entries.bannerNav;
                    }else{
                      $('.j-customer-show, .j-customer-show-header').hide();
                    }
                }
            })
          },
          addDepartment: function(event, offLine) {
            // var self = this;
            //
            // try{
            //   if(!self._departmentOne && $zopim && $zopim.livechat && $zopim.livechat.departments){
            //     if(self._department){
            //       // 配合 zendesk 调试，暂时不要删除 console.log
            //       console.log('department: ', self._department)
            //       $zopim.livechat.addTags([(self.isChatDeptAvailable ? 0 : 1)+ '_' + self._department]);
            //       $zopim.livechat.departments.setVisitorDepartment(self._department);
            //     }else{
            //       this.departmentTimeout();
            //     }
            //     self._departmentOne = true;
            //   }
            // }catch(err) {
            //   self.departmentTimeout();
            // }

          },
          departmentTimeout: function() {
            // var self = this;
            // var departmentTime = 0;
            //
            // var departmentInt = setInterval(function(){
            //   if(departmentTime == 400) self._department = 'OTHERS';
            //   if(self._department){
            //     console.log('department: ', self._department)
            //     $zopim.livechat.addTags([(self.isChatDeptAvailable ? 0 : 1)+ '_' + self._department]);
            //     $zopim.livechat.departments.setVisitorDepartment(self._department);
            //     clearInterval(departmentInt);
            //     zenDeskComponent.activeOnlineHelp();
            //     self._departmentOne = true;
            //   }
            //   departmentTime++;
            // }, 300)
          },
          bothubGa: function() {
            var memberId = ROMWE_W.getCookie('memberId')
              if( memberId ) {
                  $.get('/user/auth/bothubBindInfo',function( data ){
                      if(data.code == 0 && data.info && data.info.bindId) {
                          window.open("https://m.me/122630408404372?ref=engagement:7ip:0,bind:" + data.info.bindId)
                      }else {
                          window.open("https://m.me/122630408404372?ref=engagement:7ip:0")
                      }
                  })
              }else {
                  window.open("https://m.me/122630408404372?ref=engagement:7ip:0")
              }
            if(typeof(ga) == 'function'){
              ga('rwus.send',{
                  hitType: 'event',
                  eventCategory: '导航栏',
                  eventAction: 'Clickmessenger',
              })
            }
          },
        },
        mounted: function (){
          var _this = this;
          _this.$nextTick(function(){
            _this.getCustomerService();
          })
        },
      })
    }
  })
</script>


<script>
var cart_module = {
	//对外提供购物车json可执行函数数组
	cartFn: [],
	initialize: function(){
		var self = this;
		this._eventCenter_ = new Vue()

		$.get('/cart/checkcart', function(json){
			if( json.code == 0 ){

				// 购物车数据拿到再去拿购物车优惠券的数据
				var cartInfo = json.info;

				// 初始化加价购模板
				// C_Module.init([
				// 	'shopping-add-goods',
				// ], {
				// 	v_cart: cartInfo
				// });
				
				// 购物车应付总价格
				var totalPrice = cartInfo.totalPrice.amount
				// 货币
				var currency = 'USD';
				// 空购物车的时候就不去请求优惠券接口
				if (cartInfo.carts && cartInfo.carts.length === 0) {
					self.cartVue(json);
					self.bindEvent();
					self.checkStock();

					//执行其他依赖购物车json的函数
					for( var i in cart_module.cartFn ){
						cart_module.cartFn[i](json);
					}
					return;
				}

				$.get('/cart/getCartCoupons?price=' + totalPrice + '&currency=' + currency, function(couponJson){
					self.cartVue(json, couponJson);
					self.bindEvent();
					self.checkStock();

					//执行其他依赖购物车json的函数
					for( var i in cart_module.cartFn ){
						cart_module.cartFn[i](json);
					}
				}, 'json').fail(function(){
					console.log('cart coupon error');
				});
			}
		}, 'json').fail(function(){
			//alert('error');
			console.log('cart error');
		});
	},

	bindEvent: function(){
		var self = this;
		$('.j-bag-hover').hover(function(){
			$('.bag-box').addClass('bag-box-hover');
		}, function(){
			if(!(self.shopping_bag.$refs.addBuys && self.shopping_bag.$refs.addBuys.is_show)) {
				$('.bag-box').removeClass('bag-box-hover');
			}
		});
	},

	//检查库存
	checkStock: function(){
		$.get('/cart/checkStock', function(json){
			if( json.code == 0 ){
				//如果购物车商品有sold out
				if( json.info.outStockCarts.length ){
					$.each(json.info.outStockCarts, function(index, item){
						$('.j-sold-out-' + item.id).removeClass('rw-hidden');
					});
				}
			}
		}, 'json').fail(function(error) {
			console.log('error');
		});
	},
	//购物车列表组件
	goodComponent: function(opts){
		var self = this;
		return Vue.extend({
			template: '#goods-list-template',
			props: ['info', 'range-list'],
			data: function(){
				return {
					IMG: '//img.romwe.com/',
					getGoodsUrl: ROMWE_W.getGoodsUrl,
					out_stock: {},
					limit_qty: {},
					req_ing: {},
				};
			},
			created: function(){
				for( var i in this.info.carts ){
					var item = this.info.carts[i];
					Vue.set(this.out_stock, item.id, false);
					Vue.set(this.limit_qty, item.id, false);
					Vue.set(this.req_ing, item.id, false);
				}
				
			},
			methods: {
				handleQuantity: function(index, type, ev){
					var _this = this;
					var item = this.info.carts[index];
					if( this.req_ing[item.id] ) return false;
					Vue.set(this.req_ing, item.id, true);

					var $target = $(ev.target);
					if( $target.hasClass('disabled') ) return false;
					var quantity = 1;
					if( type == 'increase' ){
						quantity = $target.siblings('input').val();
						++quantity;
					} else if( type == 'reduce' ){
						quantity = $target.siblings('input').val();
						quantity = Number(quantity) > 1 ? --quantity : 1
					} else if( type == 'change' ){
						quantity = $target.val();
					}
					this.$emit('quantity', index, quantity, function(){
						Vue.set(_this.req_ing, item.id, false);
					});
				},
				handleDel: function(id){
					this.$emit('delete', id)
				},
				isPromotionVal: function(item, typeId) {
					return (item.product.promotionInfo && item.product.promotionInfo.length && item.product.promotionInfo.some(function(val) { return val.typeId == typeId }))
				},
				getPromotionVal: function(item, typeId) {
					var _filter = (item.product.promotionInfo && item.product.promotionInfo.length && item.product.promotionInfo.filter(function(val) { return val.typeId == typeId })) || []
					return _filter.length ? _filter[0] : {}
				},
				percentNum: percentNum,
				template: ROMWE_W.template,
				transformImg: transformImg
			},
			mounted: function(){
				var _this = this
				// _addGoodsModule = C_Module.require('shopping-add-goods')
				self._eventCenter_.$on('out-of-stock', function(id){
					Vue.set(_this.out_stock, id, true);
					setTimeout(function(){
						Vue.set(_this.out_stock, id, false);
					}, 3000);
				});
				self._eventCenter_.$on('limit-quantity', function(id){
					Vue.set(_this.limit_qty, id, true);
					setTimeout(function(){
						Vue.set(_this.limit_qty, id, false);
					}, 3000);
				});

				if( !this.gift_empty && this.info.promotion && this.info.promotion.full_gifts ){
					if( "us" == 'de' || "us" == 'fr' ){
						$('.j-bag-link').css({'text-align': 'left', 'text-indent': '10px'});
					}
				}

				// if(opts.isReached && _addGoodsModule.addGoodsVue) {
				// 	_addGoodsModule.addGoodsVue.isReached = opts.isReached
				// }

				// if(typeof(_eventCenter_) != 'undefined') {
				// 	_eventCenter_.$on('update-add-buy', function(info, cb){
				// 		setTimeout(function() {
				// 			if(info && info.carts && _addGoodsModule.addGoodsVue) {
				// 				if(info.isReached) {
				// 					_addGoodsModule.addGoodsVue.isReached = info.isReached
				// 				}
				// 				if(info.addBuyGoodsId) {
				// 					_addGoodsModule.addGoodsVue.addBuyGoodsId = info.addBuyGoodsId
				// 				}
				// 			}
				// 		}, 300)
				// 	})
				// }
			}
		});
	},

	//购物车
	cartVue: function(res, couponRes){
		var self = this;
		//size处理
		Vue.filter('goodsize', function(val){
			if( !val ) return '';
			var arr = val.split(':');
			if( arr[1] )
			return arr[1];
		});

		this.shopping_bag = new Vue({
			el: '.j-hbag-box',
			data: {
				info: res.info,
				cartCouponsInfo: couponRes ? couponRes.info : null, // 优惠券的返回数据
				title: "",
				shipShow: false,
				ROMWE_W:ROMWE_W,
				gift_empty: true, //默认多档赠品列表为空
				buyGift: false,
				fullGift: false,
				buy_gifts_choose: 0,
				full_gifts_tips: '',
				analysis: {
					addProduct: function(product, type,qty) {
						if(typeof(ga) == 'function') {
					        ga('rwus.ec:addProduct', {
								id: product.product.productRelationID||product.product.goods_sn,
								name: product.product.goods_sn,
								category: product.product.cat_id,
								quantity: qty||product.quantity,
								price: GB_ga_transformPrice(product.unitPrice.amount)
							});
							ga('rwus.ec:setAction', type)
					    }
					},
					delete: function(sku) {
						if(typeof(ga) == 'function') {
					        ga('rwus.send',{
								hitType: 'event',
								eventCategory: '快捷购物车',
								eventAction: 'ClickDelete',
								eventLabel: sku
							})
					    }
					},
					qty: function(action, sku) {
						if(typeof(ga) == 'function') {
					        ga('rwus.send',{
								hitType: 'event',
								eventCategory: '快捷购物车',
								eventAction: action,
								eventLabel: sku
							})
					    }
					},
					checkout: function(val) {
						if(typeof(ga) == 'function') {
							self.shopping_bag.info.carts.forEach(function(item) {
								var gaParams = {
									id: item.product.productRelationID||item.product.goods_sn,
									category: item.product.cat_id,
									quantity: item.quantity,
									name: item.product.goods_sn,
									price: GB_ga_transformPrice(item.unitPrice.amount),
									variant: item.attr.attr_value
								}
								ga('rwus.ec:addProduct', gaParams);
							})
							ga('rwus.ec:setAction', "checkout",{step:1});

					        ga('rwus.send',{
					            hitType: 'event',
					            eventCategory: '快捷购物车',
					            eventAction: 'Checkout',
					            eventValue: val
					        });
					    }
					},
				},
				rangeList: {}
			},
			watch: {
				info: function(newVal) {
					this.getCartCouponData(this.info);
					// if(typeof(_eventCenter_) != 'undefined') {
					// 	_eventCenter_.$emit('update-add-buy', this.info)
					// }

					// if(this.info && C_Module.require('shopping-add-goods')) {
					// 	C_Module.require('shopping-add-goods').addGoodsVue.initEvent(this.info)
					// }
				}
			},
			created: function(){
				var _this = this;
				this.fullGiftsTip();
			},

			components: {
				'goods-list': self.goodComponent(res.info),
			},
			methods: {
				// 获取购物车优惠券
				getCartCouponData: function(cartInfo) {
					var _this = this;
					// 购物车应付总价格
					var totalPrice = cartInfo.totalPrice.amount
					// 货币
					var currency = 'USD';
					$.get('/cart/getCartCoupons?price=' + totalPrice + '&&currency=' + currency, function(couponJson){
						_this.cartCouponsInfo = couponJson.info;
					})
				},
				//满赠差额提示
				fullGiftsTip: function(){
					var _this = this;
					_this.full_gifts_tips = '';
					if( this.info.promotionNew && this.info.promotionNew.fullGifts ){
						_this.full_gifts_tips = "You have received a <span class='title'>FREE GIFT</span>. Please select it in the shopping cart.";
						$.each(this.info.promotionNew.fullGifts, function(index, item){
							if( item.promotionGoods.length && +item.needPrice.amount ){
								if( index == 0 ){
									_this.full_gifts_tips = ROMWE_W.template(item.needPrice.amountWithSymbol, "Buy <span class='title'>{0}</span> more to get a <span class='title'>FREE GIFT!</span>");
								} else {
									_this.full_gifts_tips = ROMWE_W.template(item.needPrice.amountWithSymbol, "Buy <span class='title'>{0}</span> more to select even more gifts！");
								}
								return false;
							}
						});
					}
				},
				handleQuantity: function(index, quantity, callback){
					var _this = this;
					var obj = this.info.carts[index];
					var o_quantity = obj.quantity;

					var _action = (obj.quantity*1>quantity*1)?'QtyLess':'QtyAdd'
					var _type = (obj.quantity*1>quantity*1)?'remove':'add'
					var _status = (obj.quantity*1 == quantity*1)? false : true
                    var ga_qty = Math.abs(obj.quantity-quantity);
					obj.quantity = quantity;
                  
					$.post('/cart/update', {
						quantity: quantity,
						id: obj.id
					}, function(json){
						if( json.code == 0 ){
							_this.info = json.info.info;
							// _this.price = json.price;
							// _this.title = json.title;
							// _this.shipShow = json.show;
							_this.getFreeShippingTip(_this.info.totalPrice.amount);
							_this.cartNum();
							_this.fullGiftsTip();

							if(_status) {
								_this.analysis.addProduct(obj, _type, ga_qty)
								_this.analysis.qty(_action, obj.product.goods_sn)
							}

						} else if( json.code == 300402 ){
							obj.quantity = o_quantity;
							self._eventCenter_.$emit('out-of-stock', obj.id);
						} else if( ['200401', '300405', '500301', '500302', '500303'].indexOf(json.code)>=0 ){
							obj.quantity = o_quantity;
							self._eventCenter_.$emit('limit-quantity', obj.id);
						} else {
							obj.quantity = o_quantity;
						}
						callback && callback();
					}, 'json');
				},
				handleDel: function(id){
					var _this = this;
					var _product = _this.info.carts.filter(function(item) {
						return item.id === id
					})[0]
					$.post('/cart/delete', {id: id}, function(json){
						if( json.code == 0 ){
							_this.info = json.info;
							// _this.price = json.price;
							// _this.title = json.title;
							// _this.shipShow = json.show;
							_this.getFreeShippingTip(_this.info.totalPrice.amount);
							_this.cartNum();
							_this.fullGiftsTip();

							_this.analysis.addProduct(_product, 'remove')
							_this.analysis.delete(_product.product.goods_sn)
						}
					}, 'json');
				},
				handleCheckLogin: function() {
					var self = this;
					sa('send', {
						activity_name: "click_checkout",
						activity_param: ""
					})
					$.ajax({
						type: 'POST',
						url: '/user/auth/getUserInfo?action=getMemberInfo&from=checkout',
						success: function(data) {
							if(data.username != null) {
								self.analysis.checkout(1)
								window.location = 'https://us.romwe.com/checkout/place_order'
							}else {
								self.analysis.checkout(0)
								quickLogin.state.quickLogin = true;
								_global_checkout_qiucklogin = true;
								gaquickloginOpen('Sign/Register-ClickCheckout');
								_ga_global_state_quicklogin.loginType = 'Checkout'
							}
						}
					})
				},
				cartNum: function(){
					$.post('/getCartNumOnly', function(data) {
						if (data.code != 0) return
						$('.j-header-cart-num').text(data.info.cartSumQuantity)
					})
				//	$('.j-header-cart-num').text(this.info.carts.length);
				},
				reCart: function(json){
					this.info = json.info;
					// this.price = json.price;
					// this.title = json.title;
					// this.shipShow = json.show;
					this.cartNum();
					this.getFreeShippingTip(this.info.totalPrice.amount);
					this.fullGiftsTip();
				},
				buygiftsUpdate: function() {
					var _this = this
					this.buy_gifts_choose = 0 
					$.each(this.info.carts, function(index, item){
						$.each(item.product.promotionInfo, function(index1, item1){
							if( item1.typeId == 2 ){
								if(item1.isPresent == 1) {
									_this.buy_gifts_choose = 1
								}
							}
						})
					});

					this.buyGift = this.info.promotionNew && this.info.promotionNew.buyGifts && this.info.promotionNew.buyGifts.length && this.buy_gifts_choose != 1
				},
				fullgiftsUpdate: function() {
					var _this = this;
					if( this.info.promotionNew && this.info.promotionNew.fullGifts ){
						$.each(this.info.promotionNew.fullGifts, function(index, item){
							if( item.promotionGoods.length ){
								_this.gift_empty = false;
								return false;
							}
						});
					}
					this.fullGift = !this.gift_empty && this.info.promotionNew && this.info.promotionNew.fullGifts && this.info.promotionNew.fullGifts.length
				},
				getFreeShippingTip: function(total_price){
					var _this = this;
					$.get('/cart/getFreeShipping', {amount: total_price}, function(res){
						if(res.code == 0 && res.info){
							var data = res.info;
							if(data.price.amount){//有差价
								_this.title = data.tips.replace('[money]',data.price.amountWithSymbol);
							}else{
								_this.title = data.tips;
							}
							_this.shipShow = _this.title?true:false;
						}else{
							_this.title = '';
							_this.shipShow = false;
						}
					})
					this.fullgiftsUpdate()
					this.buygiftsUpdate()
				},
				// 传递给促销组件的数据
				updateCom: function(opt) {
					if(opt && opt.rangeList) {
						this.rangeList = opt.rangeList
						if (this._eventCenter_) {
							this._eventCenter_.$emit('update-rangeList', opt.rangeList)
						}
					}
				},
			},
			mounted: function(){
				this.cartNum();
				this.getFreeShippingTip(res.info && res.info.totalPrice.amount);
			},
		});
	},

	//添加购物车时
	addCart: function(json, cb){
		if( json.code == 0 ){
			this.shopping_bag.info = json.info;
			// this.shopping_bag.price = json.price;
			// this.shopping_bag.title = json.title;
			// this.shopping_bag.shipShow = json.show;
			this.shopping_bag.getFreeShippingTip(this.shopping_bag.info.totalPrice.amount);
			this.shopping_bag.fullGiftsTip();
			var $cartNum = $('.j-header-cart-num');
			$cartNum.text(json.info.cartSumQuantity).closest('.bag-add-num').addClass('swing');
			$('.j-bag-hover').trigger('mouseenter');
			setTimeout(function(){
				$cartNum.closest('.bag-add-num').removeClass('swing');
			}, 1000);
			setTimeout(function(){
				$('.j-bag-hover').trigger('mouseleave');
			}, 3000);

			cb && cb()
		}
	},
	reloadCart: function(){
		var _this = this;
		$.get('/cart/checkcart', function(json){
			if( json.code == 0 ){
				_this.shopping_bag.reCart(json);
			}
		}, 'json').fail(function(){
			console.log('cart error');
		});
	}
};

</script>

<!-- Start of romwe Zendesk Widget script -->
<script type="text/javascript">
    window.zESettings = {
        webWidget: {
            contactForm: {
                tags:[]
            }
        }
    };
    var departmentConnected = false
    var zdUtils = (function(){
        var __CurrentMainDomain__ = (function () {
            var hostnameArray = location.hostname.split('.');
            return "." + hostnameArray.slice(-2).join('.');
        })();
        var _setCookie = function(name, val, expires, domain) {
            var text = String(encodeURIComponent(val));
            var  date = new Date();
            date.setTime(date.getTime() + Number(expires)*1000);
            text += '; expires=' + date.toUTCString();
            // domain
            text += '; path=/';
            if (typeof (domain) != "undefined" && domain != "") {
                text += '; domain='+__CurrentMainDomain__;
            }
            document.cookie = name + '=' + text;
        };
        var _getCookie = function (objName){
            var arrStr = document.cookie.split("; ");
            for(var i = 0;i < arrStr.length;i ++){
                var temp = arrStr[i].split("=");
                if(temp[0] == objName) return unescape(temp[1]);
            }
        };
        var _get = function(url, fn){
            var obj = new XMLHttpRequest();
            obj.open('GET', url, true);
            obj.setRequestHeader('X-Requested-With','XMLHttpRequest');
            obj.onreadystatechange = function() {
                if (obj.readyState == 4 && obj.status == 200) {
                    fn.call(this, obj.responseText);
                }
            };
            obj.send();
        };
        var _post = function(url, data, fn){
          var obj = new XMLHttpRequest();
          fn = fn || function () {}
          obj.open('POST', url, true);
          obj.setRequestHeader('X-Requested-With','XMLHttpRequest');
          obj.onreadystatechange = function() {
            if (obj.readyState == 4 && obj.status == 200) {
              fn.call(this, obj.responseText);
            }
          };
          obj.setRequestHeader('Content-Type', 'application/json')
          obj.send(JSON.stringify(data));
        };

        return {
            setCookie: _setCookie,
            getCookie: _getCookie,
            Get: _get,
            post: _post,
        };
    })();

    var zenDeskComponents = function(options) {
        options = options || {};
        var self = this;
        this.eventsMap = {
            'click a.j-online-help': self.activeOnlineHelp,
            'click .j-cart-help a': self.activeOnlineHelp,
            'click .j-ticket-offh': self.activeOnlineHelp,
            'click .j-ticket-oh': self.activeOnlineHelp,
            'click .j-offline': self.activeOnlineHelp
        };
        this.eventsSelector = [];
        this._initializeVariables();
    };
    zenDeskComponents.Vars = {
        _departments: {
            en: '01-English',
            us: 'US',
            uk: '01-English',
            in: 'IN',
            au: '01-English',
            fr: '02-French',
            es: '03-Spanish',
            mx: '03-Spanish',
            de: '04-German',
            ar: '05-Arabic',
            other: 'OTHERS'
        },
        locales: {
            en: 'en-US',
            us: 'en-US',
            uk: 'en-US',
            in: 'en-US',
            au: 'en-US',
            fr: 'fr',
            es: 'es',
            mx: 'es',
            de: 'de',
            ar: 'ar'
        },
        dep_ar: ['United Arab Emirates', 'Saudi Arabia', 'Kuwait', 'Bahrain', 'Oman', 'Qatar'],
        dep_fr: ['France', 'Reunion', 'Martinique', 'Guadeloupe', 'French Guiana', 'French Polynesia', 'New Caledonia', 'Mayotte', 'Morocco', 'Belgium'],
        dep_es: ['Spain', 'Mexico', 'Chile', 'Colombia', 'Peru', 'Argentina', 'Ecuador', 'Bolivia', 'Paraguay', 'Costa Rica', 'El Salvador', 'Panama', 'Honduras', 'Nicaragua', 'Cuba', 'Dominica', 'Puerto Rico', 'Venezuela'],
        dep_de: ['Germany', 'Austria', 'Liechtenstein'],
        isChatDeptAvailable: false,
        country_tag: 'others',
        country_tag_outdated: zdUtils.getCookie('country_tag_outdated') ? decodeURIComponent(zdUtils.getCookie('country_tag_outdated')) : '',
        userEmail: '',
        department: '',
        departmentStatusRetrieved: false
    };

    zenDeskComponents.prototype = {
        constructor: zenDeskComponents,
        _initializeVariables: function() {
            var vals = zenDeskComponents.Vars;
            for (var name in vals) {
                if (vals.hasOwnProperty(name)) {
                    this[name] = vals[name];
                }
            }
        },
        _delegate: function(name, selector, func) {
            $(selector).on(name, func);
        },
        _undelegate: function(name, selector, func) {
            $(selector).off(name, func);
        },
        _scanEventsMap: function(maps, isOn) {
            var delegateEventSplitter = /^(\S+)\s*(.*)$/;
            var bind = isOn ? this._delegate : this._undelegate;
            for (var keys in maps) {
                if (maps.hasOwnProperty(keys)) {
                    var matchs = keys.match(delegateEventSplitter);
                    this.eventsSelector.push(matchs[2]);
                    bind(matchs[1], matchs[2], maps[keys].bind(this));
                }
            }
        },
        loadZenDesk: function() {
            /*<![CDATA[*/window.zEmbed || function(e, t) {var n, o, d, i, s, a = [], r = document.createElement("iframe");window.zEmbed = function() {a.push(arguments)}, window.zE = window.zE || window.zEmbed, r.src = "javascript:false", r.title = "", r.role = "presentation", (r.frameElement || r).style.cssText = "display: none", d = document.getElementsByTagName("script"), d = d[d.length - 1], d.parentNode.insertBefore(r, d), i = r.contentWindow, s = i.document;try {o = s} catch (e) {n = document.domain, r.src = 'javascript:var d=document.open();d.domain="' + n + '";void(0);', o = s}o.open()._l = function() {var o = this.createElement("script");n && (this.domain = n), o.id = "js-iframe-async", o.src = e, this.t = +new Date, this.zendeskHost = t, this.zEQueue = a, this.body.appendChild(o)}, o.write('<body onload="document._l();">'), o.close()}("https://assets.zendesk.com/embeddable_framework/main.js", "romwe.zendesk.com");
            /*]]>*/
        },
        setIdentity: function() {
            var self = this
            var url = '/user/auth/getUserInfo';
            zdUtils.Get(url, function(data) {
                data = JSON.parse(data);
                if (data.username != null) {
                    self.userEmail = data.email
                    zE.identify({ name: data.username, email: data.email })
                }
            });
        },
        getMemberCountry: function() {
            var url = '/getMemberCountry' + window.location.search,
                self = this;

            zdUtils.Get(url, function(data) {
                data = JSON.parse(data);
                if (data.code == 0) {
                    if (data._type === 'registered') {
                        self.country_tag = data.info.result;
                    }else if(data._type === 'non-registered') {
                        try{
                            self.country_tag = data.info.location.country_name;
                        }catch(e){}
                    }
                    self.country_tag = self.country_tag.replace(/ /g, '_');
                    self.getChatDept(self.country_tag)
                    zdUtils.setCookie('country_tag_outdated', encodeURIComponent(self.country_tag), 12 * 60 * 60, true);
                } else {
                    self.set_zE_tags();
                }
            });
        },
        getChatDept: function (country) {
            var invoker_url = '/support/getChatDept?country=' + encodeURIComponent(country),
                self = this;

            zdUtils.Get(invoker_url, function (data) {
                var data = JSON.parse(data)
                if (data.dept) {
                    self.department = data.dept
                    self.isChatDeptAvailable = true
                }
                self.set_zE_tags();
            });
        },
        activeOnlineHelp: function() {
            var self = this;
            // 如果用户网络状况过差则禁止发起会话
            if (!this.departmentStatusRetrieved) return
            $zopim.livechat.departments.setVisitorDepartment(self.department);
            zdUtils.Get('/judgeMemberBlacklist', function(data) {
                if (!departmentConnected) return
                data = JSON.parse(data);
                if (data.code == 0) {
                    if(data.info.result == 0){
                        self.deleteTag();
                        zE.activate({ hideOnClose: true });
                        zdUtils.post('/recordUserActionInfo', { email: self.userEmail, country: self.country_tag.split('_').join(' '), department: self.department })
                    }else{
                        return;
                    }
                }
            });
        },
        generateTag: function(lang) {
            var lan = '', user_lan= '', site= '', tags='', arg_lang = lang || 'us';
            switch(arg_lang){
                case 'en':
                    site = 'site_rw';lan = 'lan_en';user_lan = 'user_en';
                    break;
                case 'fr':
                    site = 'site_rwfr';lan = 'lan_fr';user_lan = 'user_fr';
                    break;
                case 'de':
                    site = 'site_rwde';lan = 'lan_de';user_lan = 'user_de';
                    break;
                case 'es':
                    site = 'site_rwes';lan = 'lan_es';user_lan = 'user_es';
                    break;
                case 'ar':
                    site = 'site_rwar';lan = 'lan_ar';user_lan = 'user_ar';
                    break;
                case 'it':
                    site = 'site_rwit';lan = 'lan_it';user_lan = 'user_it';
                    break;
                case 'mx':
                    site = 'site_rwmx';lan = 'lan_es';user_lan = 'user_es';
                    break;
                default:
                    //au in uk us ca
                    site = 'site_rw'+'us';lan = 'lan_en';user_lan = 'user_en';
            }
            tags = site+','+lan+','+user_lan+','+ (lang?this.country_tag_outdated:this.country_tag);
            return tags;
        },
        set_zE_tags: function() {
            var self = this;
            window.zESettings.webWidget.contactForm.tags = self.generateTag();
            self.loadZenDesk();
            // 在自定义配置后引入第三方代码保证配置生效且保证ze对象可使用
            self.zEController();
        },
        deleteTag: function() {
            var self = this;
            zE(function() {
                $zopim(function () {
                    var langsite = ['en','us','uk','au','in','es','de','fr','ar'];
                    // $zopim.livechat.removeTags.apply($zopim, langsite.map(function(lang) { return self.generateTag(lang)}));
                    $zopim.livechat.addTags(self.generateTag());
                })
            });
        },
        initChat: function() {
            var self = this;
            zE(function() {
                zE.hide();
                $zopim(function() {
                    $zopim.livechat.setOnConnected(function() {
                        if (!$zopim.livechat.isChatting()) {
                            $zopim.livechat.hideAll()
                        } else {
                            $zopim.livechat.window.show()
                        }
                        departmentConnected = true
                        self.departmentStatusRetrieved = true;
                        self.setIdentity();
                        zE.setLocale(self.locales['us']);

                        if (self.isChatDeptAvailable) {
                            var _department = self.department
                        } else {
                            var _department = self._departments['us'],
                                currentCountry = self.country_tag.split('_').join(' ');
                            // 根据国家划分部门
                            if (self.dep_ar.indexOf(currentCountry) > -1) {
                                _department = self._departments['ar'];
                            } else if (currentCountry == 'United States') {
                                _department = self._departments['us'];
                            } else if (currentCountry == 'India') {
                                _department = self._departments['in'];
                            } else if (self.dep_de.indexOf(currentCountry) > -1) {
                                _department = self._departments['de'];
                            } else if (self.dep_es.indexOf(currentCountry) > -1) {
                                _department = self._departments['es'];
                            } else if (self.dep_fr.indexOf(currentCountry) > -1) {
                                _department = self._departments['fr'];
                            } else {
                                _department = self._departments['other'];
                            }
                            self.department = _department
                        }

                        // $zopim.livechat.addTags([(self.isChatDeptAvailable?0:1)+'_'+_department]);
                        // 判断状态
                        var department_status = $zopim.livechat.departments.getDepartment(_department);

                        // zendesk 其他部门 Others 和 OTHERS 不能兼容
                        if (typeof department_status == 'undefined') {
                            department_status = $zopim.livechat.departments.getDepartment(_department == 'Others' ? 'OTHERS' : 'Others')
                        }

                        if (!department_status || department_status.status != 'online') {
                            self.offLine();
                        } else {
                            self.onLine();
                        }

                        if(support){
                            support.isChatDeptAvailable = self.isChatDeptAvailable
                            support._department = _department
                            support.departmentStatusRetrieved = true
                        }
                        //$zopim.livechat.departments.setVisitorDepartment(_department);
                    });
                });
            });
        },
        offLine: function() {
            this.eventsSelector.forEach(function(selector) {
                if(selector == 'a.j-online-help') {
                    $(selector).length && $(selector).removeClass('online').find('em').html('offline')
                }else if(selector == '.j-ticket-offh') {
                    $(selector).length && $(selector).parent().removeClass('rw-none');
                }else if(selector == '.j-ticket-oh') {
                    $(selector).length && $(selector).parent().addClass('rw-none');
                }
            });
            $zopim.livechat.setStatus('offline');
            if(typeof support == 'object'){
                support.offLine = true;
            }
        },
        onLine: function() {
            $zopim.livechat.setStatus('online');
            $zopim.livechat.departments.filter('');
        },
        leaveMessageText: function() {
            zE(function() {
                $zopim(function() {
                    $zopim.livechat.setOnConnected(function() {
                        if (!$zopim.livechat.isChatting()) {
                            $zopim.livechat.hideAll()
                        } else {
                            $zopim.livechat.window.show()
                        }

                        // 监测第三方代码动态生成的离线留言成功弹窗
                        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                        if(MutationObserver) {
                            var observer = new MutationObserver(function (mutations, observer) {
                                var leaveMessageSuccEl = $('#webWidget').contents().find('.src-component-submitTicket-SubmitTicket-notify'),
                                    guestEmail = $('#webWidget').contents().find('.src-component-submitTicket-SubmitTicketForm-form').find('input[name="email"]').val(),
                                    emailVal = guestEmail || getCookie('userinfo[email]'),
                                    text = 'Any updates will be shown in your email {0} in 24 hours.'.replace('{0}', emailVal?emailVal:''),
                                    insertEl_2 = '<div class="wwtk-submit-succ" style="font-weight: 700;color: #c24036;opacity: .8;padding: 0 30px;">'+text+'</div>';
                                if(mutations[0].addedNodes.length == 1){
                                    leaveMessageSuccEl && leaveMessageSuccEl.find('footer').before(insertEl_2);
                                }
                            });

                        }

                        // 离线留言弹窗
                        var zendeskText = setInterval(function() {
                            var leaveMessageSubmitEl = $('#webWidget').contents().find('.src-component-submitTicket-SubmitTicketForm-form'),
                                insertEl_1 = '<div class="wwtk-submit-ing" style="position: relative;text-align: center;margin-top: 5px;font-weight: 600;color: #c24036;">('+'We will reply in 24 hours.'+')</div>';
                            if(leaveMessageSubmitEl.find('.wwtk-submit-ing')[0]) {
                                leaveMessageSubmitEl.find('header .wwtk-submit-ing').html(insertEl_1);
                            }else{
                                leaveMessageSubmitEl.find('header').append(insertEl_1);
                            }

                            var article = $('#webWidget').contents().find('.src-component-submitTicket-SubmitTicketForm-form').parent()[0];
                            var  options = {
                                'childList': true
                            } ;
                            article && observer.observe && observer.observe(article, options);
                        }, 1000);

                    });
                });
            });
        },
        bindEvents: function() {
            var self = this;
            zE(function() {
                self._scanEventsMap(self.eventsMap, true);
            });
        },
        zEController: function() {
            // 使用zE操作
            this.initChat();
            this.leaveMessageText();
            this.bindEvents();
        },
        initialization: function() {
            this.getMemberCountry();
        }
    };

    var zenDeskComponent = {};
    $(function() {
        zenDeskComponent = new zenDeskComponents();
        zenDeskComponent.initialization();
    })

</script>


<!-- Facebook pixel  -->
<!-- 基础代码 -->
<script>
    ! function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
            n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
        };
        if (!f._fbq) f._fbq = n;
        n.push = n;
        n.loaded = !0;
        n.version = '2.0';
        n.queue = [];
        t = b.createElement(e);
        t.async = !0;
        t.src = v;
        s = b.getElementsByTagName(e)[0]; 
        s.parentNode.insertBefore(t, s)
    }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '684749814913934');
    fbq('track', 'PageView');
</script> 
<noscript>
    <img height="1" width="1" src="https://www.facebook.com/tr?id=684749814913934&ev=PageView&noscript=1"/>
</noscript>
<script>
    window._fbq = window._fbq || [];

    window.fbAsyncInit = function () {
        FB.init({
            // appId : '404664897030389',//测试
            appId: 1507748332809925,//正式
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true,
            version: 'v2.9'
        });
    };
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    
    window.doFbq = function (action, params) {
        ! function () {
            if (typeof Object.assign != 'function') {
                Object.assign = function (target) {
                    'use strict';
                    if (target == null) {
                        throw new TypeError('Cannot convert undefined or null to object');
                    }

                    target = Object(target);
                    for (var index = 1; index < arguments.length; index++) {
                        var source = arguments[index];
                        if (source != null) {
                            for (var key in source) {
                                if (Object.prototype.hasOwnProperty.call(source, key)) {
                                    target[key] = source[key];
                                }
                            }
                        }
                    }
                    return target;
                };
            }
            if (typeof fbq !== 'undefined') {
                var _form = Object.assign({}, {
                    content_type: 'product', //直接上报此文本
                    value: 1.00, //固定上报此价格
                    currency: 'USD' //固定上报此币种 
                }, params)

                if(typeof fbq.init !== 'function') {
                    var _timeIndex = 0;
                    var _timeId = setInterval(function() {
                        _timeIndex++;
                        if(typeof fbq.init == 'function' || _timeIndex>5) {
                            fbq('track', action, _form);
                            clearInterval(_timeId);
                        }
                    }, 1000);
                } else {
                    fbq('track', action, _form);
                }
                
            }
        }();
    } 
</script>
<script src="//apis.google.com/js/api:client.js" async="1"></script>
<script>
    var thisHREF=encodeURIComponent(document.referrer);
    var thisURL=encodeURIComponent(document.URL);

    $.ajax({
        type:'get',
        dataType: 'jsonp',
        jsonp: 'callback',
        data:'urlfrom='+thisHREF+'&urlcurrent='+thisURL,
        url:'/index.php?model=origin&action=init',
        success:function(json){
            if(json){
                if(json.result == 1 ){
                    $("#wholesale_newsletter").show();
                }
            }
        }
    });
</script>


    <!-- 产品详情页，登录注册页，个人中心order页，支付页(目前只做us站) -->


	<script type="text/javascript">
		!function(e) {
			if (!window.pintrk) {
				window.pintrk = function() {
					window.pintrk.queue.push(
						Array.prototype.slice.call(arguments))
				}
				var n = window.pintrk
				n.queue = [], n.version = '3.0'
				var t = document.createElement('script')
				t.async = !0, t.src = e
				var r = document.getElementsByTagName('script')[0]
				r.parentNode.insertBefore(t, r)
			}
		}('https://s.pinimg.com/ct/core.js')
		pintrk('load', '2614189038006')
		pintrk('page')
	</script>



<script>
    //进入页面
    sa('set','setPageData',SaPageInfo);
    sa('send','pageEnter',{start_time:new Date().getTime()});
    //退出页面
    window.onbeforeunload = function(){sa('send','pageLeave',{end_time:new Date().getTime()});};

    
</script>



<script type="text/javascript">
 ;+function(){
    var getQueryString = function(name) {
      //get url query params
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
      var r = window.location.search.substr(1).match(reg);
      if (r != null) return unescape(r[2]); return null;
    }

    var setCookie = function(name, val, expires, domain) {
      /*setCookie start*/
      var __CurrentMainDomain__ = (function () {
        var hostnameArray = location.hostname.split('.');
        return "." + hostnameArray.slice(-2).join('.');
      })();

      //domain = domain || __CurrentMainDomain__;
      var text = String(encodeURIComponent(val));
      var  date = new Date();
      date.setTime(date.getTime() + Number(expires)*1000);
      text += '; expires=' + date.toUTCString();
      // domain
        text += '; path=/';
      if (typeof (domain) != "undefined" && domain != "") {
        text += '; domain='+__CurrentMainDomain__;
      }

      document.cookie = name + '=' + text;
    }

    var getCookie = function(objName) {
      var arrStr = document.cookie.split("; ");
      for (var i = 0; i < arrStr.length; i++) {
          var temp = arrStr[i].split("=");
          if (temp[0] == objName) {
              return decodeURIComponent(temp[1])
          }
      }
    }

    var href = document.location.href
    var orid = getCookie("originOtherId");//获取不到id再请求不能覆盖原来的originOtherId
    if(!orid && (href.indexOf('url_from') > -1 || href.indexOf('utm_source') > -1)) {
      var url = '/getOriginOtherIdFromUrl?urlcurrent='+encodeURIComponent(href)
      var xhr = new XMLHttpRequest
      xhr.open('GET', url)
      xhr.onload = function() {
        if(xhr.status === 200){
          var data = JSON.parse(xhr.responseText)
          if(data.code == 0 && data.info !=null) {
            setCookie("originOtherId",data.info,30*24*3600)
            if(typeof sa != 'undefined'){
              sa('send',{
                  activity_name: 'expose_origin_otherid',
                  activity_param: {}
              });
            }
          }
        }
      }
      xhr.send()
    }


     var _cjevent = getQueryString('cjevent');
    if(getQueryString('ref') == 'cj' || getQueryString('SASSource') == 'cjunction') {
      setCookie('ref_cj', 1);
        if(_cjevent != null && _cjevent.trim()) {
            setCookie('cjevent', _cjevent);
        }else{
            setCookie('cjevent', null, -1);
        }
    } else if(getQueryString('source') == 'webgains' || getQueryString('utm_source') == 'shareasale.com') {
      setCookie('ref_cj', null, -1);
    }

  }()
</script>
<script>
	//购物车初始化
	cart_module.initialize()
</script>
<script type="text/javascript">
	var __CurrentMainDomain__ = (function() {
		var hostnameArray = location.hostname.split('.')
		return '.' + hostnameArray.slice(-2).join('.')
	})()

	function setCookie(name, val, expires, domain) {
		//domain = domain || __CurrentMainDomain__;
		var text = String(encodeURIComponent(val))
		var date = new Date()
		date.setTime(date.getTime() + Number(expires) * 1000)
		text += '; expires=' + date.toUTCString()
		// domain
		text += '; path=/'
		if (typeof (domain) != 'undefined' && domain != '') {
			text += '; domain=' + __CurrentMainDomain__
		}

		document.cookie = name + '=' + text
	}

	setCookie('default_currency', 'USD', 60 * 60 * 24 * 7)
</script>
<!-- emarsys -->

<script>
  // 新密码规则下的埋点
  window._gaSendType = 'rwus.send'
  window.safety_ga_action = {}
  window.safetyCheckEventCategory = '' // 用来区别是高风险用户还是无风险用户
  function safetyCheckGa() {
    var gaSendFunc = function(obj) {
      ga(_gaSendType, $.extend({
        hitType: 'event',
        eventCategory: window.safetyCheckEventCategory,
      }, obj))
    }

    safety_ga_action = {
      // 修改密码弹框
      need_pop: function () {
        gaSendFunc({
          eventAction: 'PopUps-PasswordReset'
        })
      },
      // 关闭密码弹框
      close_pop: function () {
        gaSendFunc({
          eventAction: 'ClosePopUps-PasswordReset'
        })
      },
      // 点击提交修改密码成功
      submit_succ: function () {
        gaSendFunc({
          eventAction: 'Submit',
          eventLabel: 'Success',
          eventValue: 1,
        })
      },
      // 点击提交修改密码失败，返回失败原因
      submit_fail: function (msg) {
        gaSendFunc({
          eventAction: 'Submit',
          eventLabel: 'Fail-' + msg,
          eventValue: 0,
        })
      },
      // 邮件验证次数已用完
      auth_run_out: function () {
        gaSendFunc({
          eventAction: 'PopUps-EmailsUsedUp'
        })
      },
      // 个人中心修改密码
      change_pass_succ: function () {
        gaSendFunc({
          eventCategory: 'MyAccount',
          eventAction: 'Submit-ChangePassword',
          eventLabel: 'Success',
          eventValue: 1,
        })
      },
      change_pass_fail: function (msg) {
        gaSendFunc({
          eventCategory: 'MyAccount',
          eventAction: 'Submit-ChangePassword',
          eventLabel: 'Fail-' + msg,
          eventValue: 0,
        })
      },
    }

    // 公共监听事件
    // 点击重新发送验证码
    $(document).on('click', '.j-send-authcode', function () {
      gaSendFunc({
        eventAction: 'ClickResent'
      })
    })
    // todo: 点击重新发送验证码

    // 输入验证码
    $(document).on('focus', '.j-auth-code', function () {
      gaSendFunc({
        eventAction: 'EnterVerificationCode'
      })
    })
    // 输入旧密码
    $(document).on('focus', '.j-safe-old-pass', function () {
      gaSendFunc({
        eventAction: 'EditOldPassword'
      })
    })
    // 输入新密码
    $(document).on('focus', '.j-safe-new-pass', function () {
      gaSendFunc({
        eventAction: 'EditNewPassword'
      })
    })
    // 输入确认新密码
    $(document).on('focus', '.j-safe-new-con-pass', function () {
      gaSendFunc({
        eventAction: 'ConfirmNewPassword'
      })
    })
    // 点击联系邮箱
    $(document).on('click', '.j-contact-email', function () {
      gaSendFunc({
        eventAction: 'ClickContactEmail'
      })
    })
    // 点击个人中心修改密码链接
    $(document).on('click', '.j-account-edit-pass', function () {
      gaSendFunc({
        eventCategory: 'MyAccount',
        eventAction: 'ClickChangePassword'
      })
    })
    // 输入个人中心旧密码
    $(document).on('focus', '.j-account-old-pass', function () {
      gaSendFunc({
        eventCategory: 'MyAccount',
        eventAction: 'ChangePassword',
        eventLabel: 'EditOldPassword',
      })
    })
    // 输入个人中心新密码
    $(document).on('focus', '.j-account-new-pass', function () {
      gaSendFunc({
        eventCategory: 'MyAccount',
        eventAction: 'ChangePassword',
        eventLabel: 'EditNewPassword',
      })
    })
    // 输入个人中心确认新密码
    $(document).on('focus', '.j-account-con-pass', function () {
      gaSendFunc({
        eventCategory: 'MyAccount',
        eventAction: 'ChangePassword',
        eventLabel: 'ConfirmNewPassword',
      })
    })

  }

  safetyCheckGa()
</script>

<script>
  function GBProductRecommendAbt(params) {
    // console.log(params);
    var pageType = params.pageType
    var position = params.position
    var render = params.render
    var ownRender = params.ownRender
    var sheinProductRecommend = new SheinProductRecommend()
    var poskey = ''
    if(position == 'listRecommendForYou') {
      poskey = 'romwe_pc_category_Recommendforyou'
    } else if(position == 'searchRecommendForYou') {
      poskey = 'romwe_pc_search_Recommendforyou'
    } else if(position == 'detailYouMayAlsoLike') {
      poskey = 'romwe_pc_product_detail_YouMayAlsoLike'
    } else if(position == 'detailCustomersAlsoViewed') {
      poskey = 'romwe_pc_product_detail_CustomersAlsoViewed'
    } else if(position == 'detailBestSellers') {
      poskey = 'romwe_pc_product_detail_BestSellers'
    } else if(position == 'emptyCartRecommendforyou') {
      poskey = 'romwe_pc_empty_cart_Recommendforyou'
    } else if(position == 'cartRecommendforyou') {
      poskey = 'romwe_pc_cart_Recommendforyou'
    } else if(position == 'orderCustomersAlsoViewed') {
      poskey = 'romwe_pc_order_CustomersAlsoViewed'
    }

    if(pageType == 'goodsList') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        if(result.param == 'emarsys_personal') {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if(result.param == 'HotProduct'){//热销推荐分流
          ownRender('','','','hotproduct')
        } else if (result.param && result.param.indexOf('self_') > -1) {//可配置自有推荐
          ownRender('','','',result.param)
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'goodsDetail' && position == 'detailYouMayAlsoLike') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        // if(result.param == 'emarsys_related') {
        if(result.param.indexOf('emarsys') > -1) {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'goodsDetail' && position == 'detailCustomersAlsoViewed') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        // if(result.param == 'emarsys_also_bought') {
        if(result.param.indexOf('emarsys') > -1) {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'goodsDetail' && position == 'detailBestSellers') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        if(result.param == 'self_bestseller') {
          sheinProductRecommend.inspector.log('渲染自有推荐')
          render()
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'goodsCart' && position == 'emptyCartRecommendforyou') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        if(result.param == 'emarsys_emptycart') {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if (result.param && result.param.indexOf('self_') > -1) {//可配置自有推荐
          ownRender('','','',result.param)
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'goodsCart' && position == 'cartRecommendforyou') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        if(result.param == 'emarsys_cart') {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if (result.param && result.param.indexOf('self_') > -1) {//可配置自有推荐
          ownRender('','','',result.param)
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
  
        render()
      })
    }
    if(pageType == 'userOrder' && position == 'orderCustomersAlsoViewed') {
      sheinProductRecommend.getRecommend({
        posKeys: poskey
      }).then(function(result) {
        if(result.param == 'emarsys_personal') {
          sheinProductRecommend.inspector.log('渲染emarsys推荐')
          render()
        } else if(!Object.keys(result).length) {
          render()
        }
      }).catch(function(err) {
        sheinProductRecommend.inspector.log('error', err)
        render()
      })
    }
  }
</script>
<script>

  function GBSaProductRecommend(opt) {
    this.prePayload = []
    this.eventName = opt.eventName || ''
    this.isFaultTolerant = opt.isFaultTolerant || 0
    this.posKey = ''
    this.gaList = ''
    this.gaLabel = ''
  }

  GBSaProductRecommend.prototype.getPosKey = function () {
    if (!this.posKey) {
      switch (this.eventName) {
        case 'you_may_also_like': this.posKey = 'YouMayAlsoLike'; break;
        case 'customers_also_viewed': this.posKey = 'CustomersAlsoViewed'; break;
        case 'best_sellers': this.posKey = 'BestSellers'; break;
        case 'recommendations_for_you': this.posKey = 'Recommendforyou'; break;
        case 'recently_viewed': this.posKey = 'RecentlyViewed'; break;
        default: break;
      }
      //页面类型判断
      var pageStr = '';
      switch (SaPageInfo.page_id) {
        case 16: pageStr = 'romwe_pc_search_'; break;
        case 13: pageStr = 'romwe_pc_category_'; break;//属性
        case 3: pageStr = 'romwe_pc_category_'; break;
        case 2: pageStr = 'romwe_pc_category_'; break;
        case 21: pageStr = 'romwe_pc_category_'; break;
        case 7: pageStr = 'romwe_pc_product_detail_'; break;
        case 8:
          if(C_Module.require('shopping-cart-list').cartVue.source.length) {
            pageStr = 'romwe_pc_cart_';
          } else {
            pageStr = 'romwe_pc_empty_cart_';
          }
          break;
        case 6: pageStr = 'romwe_pc_order_'; break;
        default: break;
      }
      this.posKey = pageStr + this.posKey;
    }
    return this.posKey;
  }

  GBSaProductRecommend.prototype.addPayload = function (params) {
    this.prePayload.push(params.goods_id + '`' + params.sku + '`' + params.spu + '`' + params.index + '`' + 1);
  }
  GBSaProductRecommend.prototype.view = function () {
    if (this.prePayload.length) {
      var ABTInfo = getABTInfoByPosKey(this.getPosKey());
      var traceid = gbExposeTraceid('getComponent', {
          componentName: this.eventName
      })
      sa('send', {
        activity_name: 'expose_' + this.eventName,
        activity_param: $.extend({
          goods_list: this.prePayload.join(','),
          traceid: traceid,
          fault_tolerant: this.isFaultTolerant,
        }, ABTInfo)
      }
      );
      this.prePayload = []
    }
  }
  GBSaProductRecommend.prototype.click = function (params) {
    var ABTInfo = getABTInfoByPosKey(this.getPosKey());
    var traceid = gbExposeTraceid('getComponent', {
        componentName: this.eventName,
    })
    sa('send', {
      activity_name: 'click_' + this.eventName,
      activity_param: $.extend({
        goods_list: params.goods_id + '`' + params.sku + '`' + params.spu + '`' + params.index + '`' + 1,
        traceid: traceid,
        fault_tolerant: this.isFaultTolerant,
      }, ABTInfo)
    },{ beacon:1 });
    gbExposeTraceid('setProduct', {
        goods_id: params.goods_id,
        traceid: traceid
    })
  }
  GBSaProductRecommend.prototype.colorAction = function (params) {
    var ABTInfo = getABTInfoByPosKey(this.getPosKey());
    var traceid = gbExposeTraceid('getComponent', {
        componentName: this.eventName
    })
    sa('send', {
      activity_name: params.type+"_" + this.eventName,
      activity_param: $.extend({
        goods_list: params.goods_id + '`' + params.sku + '`' + params.spu + '`' + params.index + '`' + 1,
        traceid: traceid,
        fault_tolerant: this.isFaultTolerant,
      }, ABTInfo)
    });
    if(params.type == 'click'){
      gbExposeTraceid('setProduct', {
        goods_id: params.goods_id,
        traceid: traceid
      })
    }
  }
  GBSaProductRecommend.prototype.clickQuickView = function (params) {
    var traceid = gbExposeTraceid('getComponent', {
        componentName: this.eventName
    })
    gbExposeTraceid('setProduct', {
      goods_id: params.goods_id,
      traceid: traceid
    })
  }
  GBSaProductRecommend.prototype.getGaListAndLabel = function () {
    if (!this.gaLabel) {
      switch (this.eventName) {
        case 'you_may_also_like': this.gaLabel = 'You May Also Like'; break;
        case 'customers_also_viewed': this.gaLabel = 'Customers Also Viewed'; break;
        case 'best_sellers': this.gaLabel = 'Best Sellers'; break;
        case 'recommendations_for_you': this.gaLabel = 'Recommend For You'; break;
        case 'recently_viewed': this.gaLabel = 'Recently Viewed'; break;
        default: break;
      }
    }
    if(!this.gaList){
      switch (SaPageInfo.page_id) {
        case 16: this.gaList = '搜索列表页-'; break;
        case 13: 
        case 3: 
        case 2: 
        case 21: this.gaList = '列表页-'; break;
        case 7: this.gaList = '商品详情页-'; break;
        case 8:
          if(C_Module.require('shopping-cart-list').cartVue.source.length) {
            this.gaList = '购物车页-';
          } else {
            this.gaList = '空购物车-';
          }
          break;
        case 6: this.gaList = 'OrderList页-'; break;
        default: break;
      }
      this.gaList += '推荐列表'
      var ABTInfo = getABTInfoByPosKey(this.getPosKey());
      if(ABTInfo.type){
        this.gaList += '-' + ABTInfo.poskey+'_' + ABTInfo.type
      }
    }
    return {gaList: this.gaList, gaLabel: this.gaLabel};
  }
  GBSaProductRecommend.prototype.gaAddPayload = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.ec:addImpression', {
      'id': params.id,
      'name': params.name,
      'list': gaListAndLabel.gaList,
      'category': params.category,
      'position': params.position,
      'price': params.price,
    });
  }
  GBSaProductRecommend.prototype.gaView = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.send', 'event', '推荐列表', 'ViewItems', gaListAndLabel.gaLabel);
  }
  GBSaProductRecommend.prototype.gaClick = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.ec:addProduct', {
      'id': params.id,
      'name': params.name,
      'category': params.category,
      'position': params.position,
      'price': params.price,
    });
    ga('rwus.ec:setAction', 'click', { list: gaListAndLabel.gaList });
    ga('rwus.send', 'event', '推荐列表', 'ClickItems', gaListAndLabel.gaLabel);
  }
  GBSaProductRecommend.prototype.qvClickQuickViewGap = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.ec:addProduct', {
      'id': params.id,
      'name': params.name,
      'category': params.category,
      'position': params.position,
      'price': params.price,
    });
    ga('rwus.ec:setAction', 'click', { list: gaListAndLabel.gaList });
    ga('rwus.send', 'event', '推荐列表', 'ClickQuickView', gaListAndLabel.gaLabel);
  }
  GBSaProductRecommend.prototype.qvViewItemsHoverGap = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.ec:addProduct', {
      'id': params.id,
      'name': params.name,
      'list': gaListAndLabel.gaList,
      'category': params.category,
      'position': params.position,
      'price': params.price,
    });
    ga('rwus.send', 'event', '推荐列表', 'ViewItems-hover', gaListAndLabel.gaLabel);
  }
  GBSaProductRecommend.prototype.qvSelectColorGap = function (params) {
    var gaListAndLabel = this.getGaListAndLabel()
    ga('rwus.ec:addProduct', {
      'id': params.id,
      'name': params.name,
      'category': params.category,
      'position': params.position,
      'price': params.price,
    });
    ga('rwus.ec:setAction', 'click', { list: gaListAndLabel.gaList });
    ga('rwus.send', 'event', '推荐列表', 'SelectColor', gaListAndLabel.gaLabel);
  }
  GBSaProductRecommend.prototype.qvShowMoreColorGap = function () {
    ga('rwus.send',{
        hitType: 'event',
        eventCategory: '推荐列表',
        eventAction: 'ShowMoreColor'
    })
  }
  GBSaProductRecommend.prototype.qvCloseQuickViewGap = function () {
  }
</script>

    <script>
  window.emarsys_product_spu = {
    data: {
      orig_data: {},  // SC
      orig_sku_arr: [],
      spu_data: {},
      price_data: {},
    },
    start: function (data) {
      var self = this;
      self.data.orig_data = data;
      self.get_orig_sku(self.data.orig_data);
      if (self.data.orig_sku_arr && Array.isArray(self.data.orig_sku_arr) && self.data.orig_sku_arr.length) {
        return new Promise(function (resolve, reject) {
          self.get_product(self.data.orig_sku_arr, resolve,data)
        })
      } else {
        return Promise.resolve()
      }

    },
    get_orig_sku: function (orig_data) {
      var self = this;
      var products = orig_data.page.products
      var arr = [];
      for (var i = 0; i < products.length; i++) {
        if (products[i].c_sku && products[i].c_sku.length > 0) {
          arr.push(products[i].c_sku);
        }
      }
      self.data.orig_sku_arr = arr;
    },
    get_product: function (orig_sku_arr, resolve,data) {
      var self = this;
      $.ajax({
        url: '/product/getRelatedBySKU',
        type: 'POST',
        data: { sku: orig_sku_arr }
      })
        .done(function (json) {
          if (json.code == '0' && json.info.products) {
            self.data.orig_data.page.products.map(function (item, index) {
              json.info.products.forEach(function (product) {
                if (product.relatedColor && item.c_sku == product.goods_sn) {
                  item.relatedColor = product.relatedColor;
                  item.promotion = product.promotion;
                  item.relatedColor.forEach(function (colorItem) {
                    self.data.spu_data[colorItem.goods_id] = colorItem
                  })
                }
              })
            })
            var ids = [];
            for (var variable in self.data.spu_data) {
              ids.push(self.data.spu_data[variable].goods_id)
            }
            if (!ids.length) return
            $.post('/product/getPrices', { goods_ids: ids, t: Date.now() }, function (json) {
              if (json.code == 0) {
                self.data.price_data = json.info.prices || json.info.price;
              }
            });
          }
        })
        .always(function () {
          if (typeof resolve == 'function') { resolve() }
        });
    },
    bind_event: function (container, title, _page_type,_emarsys_type,_saRecommend) {
      var self = this;
      var clickLoading = false;
      var emarsys_type = _emarsys_type;
      var brand = $('#' + container + ' .c-recommend').attr('brand');
      var products = this.data.orig_data && this.data.orig_data.page.products;
      products.forEach(function (item) {
        if (self.data.spu_data[item.id]) {
          self.data.spu_data[item.id].is_view = true;
        }
      })
      $('#' + container + ' .j-multi-color-img').mouseenter(function (event) {
        var $this = $(this);
        var $this_goods_id = $this.attr('data-goods_id');
        var $this_init_id = $this.attr('data-init_id');
        var spu = $this.attr('data-spu');
        var sku = $this.attr('data-sku');
        var item = self.data.spu_data[$this_goods_id];
        var img = new Image();
        img.src = transformImg(item.goods_thumb);
        img.onload = function () {
          $('.j-multi-color-ctn-' + $this_init_id + ' span.j-multi-color-img').removeClass('active');
          $('.j-multi-color-ctn-' + $this_init_id + ' .j-emarsys-recommend-color').removeClass('active')
          $this.addClass('active');
          $('.j-recommend-item-' + $this_init_id).siblings('.gds-li-qvbtn').find('.gds-li-qvbtn-b').attr('goods_id', $this_goods_id);
          $('.j-recommend-item-' + $this_init_id).closest('.swiper-slide').attr('data-scarabitem',$this_goods_id);
          $('.j-recommend-item-' + $this_init_id).replaceWith(
            template('recommend_item_art_tpl', {
              SC: self.data.orig_data,
              item: item,
              image: transformImg(item.goods_thumb),
              link: ROMWE_W.getGoodsUrl(item.goods_name, item.goods_id, item.cat_id),
              price: self.data.price_data[$this_goods_id].salePrice.amountWithSymbol,
              usdAmount: self.data.price_data[$this_goods_id].salePrice.usdAmount,
              unit_discount: self.data.price_data[$this_goods_id].unit_discount,
              init_id: $this_init_id
            })
          )
        }
        //bi ga上报
        if(typeof _saRecommend != 'undefined' && $this_goods_id){
          self.data.spu_data[$this_goods_id].is_view = true;
          var index = $this.parents('a').attr('zkey');
          _saRecommend.colorAction({
            index: +index + 1,
            goods_id: $this_goods_id,
            spu:spu,
            sku:sku,
            type:'expose'
          });
          var gaParam = {
            id: item.productRelationID||item.goods_sn,
            name: item.goods_snu,
            category: item.cat_id,
            position: +index+1,
            price: self.data.price_data[$this_goods_id].salePrice.usdAmount.replace('.00', ''),
          }
          _saRecommend.qvViewItemsHoverGap(gaParam)
        }
      });
      $('#' + container).on('click', '.gds-li-qvbtn-b', function () {
        var $this = $(this),
          goods_id = $this.attr('goods_id'),
          index = $this.attr('index');
        if (clickLoading) return
        clickLoading = true
        $this.hide();
        $this.siblings('.add-loading').show()
        if (_page_type == 'goodsList' && typeof GB_ROMWE_goods_list != 'undefined') {
          GB_ROMWE_goods_list.vue_instance.quick_view.quickViewOpen({ goods_id: goods_id, moduleFrom: 'recommend' }, index, null, function (res) {
            $this.siblings('.add-loading').hide()
            $this.css({ 'display': '' });
            GB_ROMWE_goods_list.vue_instance.quick_view.status.quickview = true
            clickLoading = false
            if (res && res.error) {
              GB_ROMWE_goods_list.vue_instance.quick_view.status.quickview = false
            }
          })
        } else if (_page_type == 'goodsDetail' && typeof (dtsVue) != 'undefined') {
          dtsVue.quickViewOpen({ goods_id: goods_id, moduleFrom: 'recommend' }, index, null, function (res) {
            $this.siblings('.add-loading').hide()
            $this.css({ 'display': '' });
            dtsVue.status.quickview = true
            clickLoading = false
            if (res && res.error) {
              dtsVue.status.quickview = false
            }
          })
        } else if (_page_type == 'goodsCart' && C_Module.require('shopping-cart-index').indexVue) {
          var indexVue = C_Module.require('shopping-cart-index').indexVue
          indexVue.quickViewOpen({
            goods_id: goods_id,
            moduleFrom: 'recommend'
          }, index, null, function (res) {
            //$this.children('.add-loading').hide()
            $this.siblings('.add-loading').hide()
            $this.css({ 'display': '' });
            indexVue.status.quickview = true
            clickLoading = false
            if (res && res.error) {
              indexVue.status.quickview = false
            }
            $('.more-dts').hide();
          })
        }
        if (typeof dtsVue != 'undefined' && dtsVue.show_qvbtn) {
          dtsVue.show_qvbtn()
        }
        if(typeof _saRecommend != 'undefined'){
          _saRecommend.clickQuickView({goods_id:goods_id});
          $item = $this.parents('.gds-li-qvbtn').siblings('.j-recommend-item').find('a');
          var gaParam = {
            id: $item.attr('spu')||$item.attr('sku'),
            name: $item.attr('sku'),
            category: $item.attr('cat_id'),
            position: index+1,
            price: $item.attr('price'),
          }
          _saRecommend.qvClickQuickViewGap(gaParam)
        }
      })
      $('#' + container + ' .j-multi-color-img').click(function (event) {
        var $this = $(this);
        var $this_goods_id = $this.attr('data-goods_id');
        var $this_init_id = $this.attr('data-init_id');
        var spu = $this.attr('data-spu');
        var sku = $this.attr('data-sku');
        var item = self.data.spu_data[$this_goods_id];
        var index = $this.parents('a').attr('zkey');
        //bi ga上报
        if(typeof _saRecommend != 'undefined' && $this_goods_id){
          _saRecommend.colorAction({
            index: +index + 1,
            goods_id: $this_goods_id,
            spu:spu,
            sku:sku,
            type:'click'
          });
          var gaParam = {
            id: item.productRelationID||item.goods_sn,
            name: item.goods_snu,
            category: item.cat_id,
            position: +index + 1,
            price: self.data.price_data[$this_goods_id].salePrice.usdAmount.replace('.00', ''),
          }
          _saRecommend.qvSelectColorGap(gaParam);
        }
      })
      var color_resize_timeout;
      $(window).resize(function (event) {
        if (color_resize_timeout) {
          clearTimeout(color_resize_timeout)
        }
        color_resize_timeout = setTimeout(function () {
          $('.j-multi-color-omit-ctn').hide();
          self.show_related_color();
        }, 1000);
      });

      self.show_related_color();
      $('.j-multi-color-span-omit').click(function (event) {
        $(this).siblings('.j-multi-color-omit-ctn').fadeIn('200');
        if(typeof _saRecommend != 'undefined'){
          _saRecommend.qvShowMoreColorGap()
        }

      });
      $('.j-multi-color-omit').mouseleave(function (event) {
        $(this).children('.j-multi-color-omit-ctn').fadeOut('200');
      });
    },
    show_related_color: function () {
      var self = this;
      var item_width = $('.j-recommend-list .j-recommend-item').width()

      $('.j-recommend-list .j-multi-color-omit').hide()
      $('.j-recommend-list .j-multi-color-img-show').show()
      $('.j-recommend-list .j-multi-color-img-omit').hide()

      $('.j-recommend-list .j-multi-color-ctn').each(function (index, element) {

        var color_show = $(element).find('.j-multi-color-img-show')
        if (color_show.length > 1 && item_width <= 75) {
          $(element).find('.j-multi-color-img-show:nth-child(1)~.j-multi-color-img-show').hide()
          $(element).find('.j-multi-color-omit').show()
        } else if (color_show.length > 2 && item_width <= 95) {
          $(element).find('.j-multi-color-img-show:nth-child(2)~.j-multi-color-img-show').hide()
          $(element).find('.j-multi-color-omit').show()
        } else if (color_show.length > 3 && item_width <= 115) {
          $(element).find('.j-multi-color-img-show:nth-child(3)~.j-multi-color-img-show').hide()
          $(element).find('.j-multi-color-omit').show()
        } else if (color_show.length > 4) {
          $(element).find('.j-multi-color-img-show:nth-child(4)~.j-multi-color-img-show').hide()
          $(element).find('.j-multi-color-omit').show()
        }

        var color_omit = $(element).find('.j-multi-color-img-omit')
        if (color_omit.length > 1 && item_width <= 75) {
          $(element).find('.j-multi-color-img-omit:nth-child(1)~.j-multi-color-img-omit').show()
        } else if (color_omit.length > 2 && item_width <= 95) {
          $(element).find('.j-multi-color-img-omit:nth-child(2)~.j-multi-color-img-omit').show()
        } else if (color_omit.length > 3 && item_width <= 115) {
          $(element).find('.j-multi-color-img-omit:nth-child(3)~.j-multi-color-img-omit').show()
        } else if (color_omit.length > 4) {
          $(element).find('.j-multi-color-img-omit:nth-child(4)~.j-multi-color-img-omit').show()
        }
      })
    }
  }
</script>

    
    <script type="text/html" id="category_recommender_template">
      <div class="c-recommend" brand="emarsys">
          {{ if (SC.page.products.length) { }}
            <h5 class="recommend-title">{{=SC.re_title}}</h5>
            <div class="swiper-container j-rec"> <!-- you_may_also_like && 订单页customer also review-->
                <div class="swiper-wrapper">
                  {{ var _price_key = SC.currency.toLowerCase() === 'usd' ? 'price' : 'c_price_'+SC.currency.toLowerCase(); }}
    
                  {{ for(var i=0; i<SC.page.products.length; i++) { }}
                  {{ var item = SC.page.products[i];var goods_id = item.id;}}
                  {{ item.link = item.link.replace('http://www.romwe.com', '');}}
                    <div class="swiper-slide"
                      data-scarabitem="{{=item.id }}"
                      alt1="{{=item.id }}"
                      data-sku="{{=item.c_sku }}"
                      data-spu="{{=item.c_relation_id}}"
                      data-title="{{=item.title }}"
                      data-price="{{=item.price}}"
                      data-cat_id="{{=item.c_catid }}"
                    >
                        {{ if(SC.isQuickView){ }}
                        <a href="javascript:;"  class="c-recommend-a c-goodsli-recommend" goods_id="{{=item.id }}" title="{{=item.title}}" index="{{=i}}">
                          <div class="add-loading">
                              <div class="la-line-scale">
                                  <div></div>
                                  <div></div>
                                  <div></div>
                                  <div></div>
                                  <div></div>
                              </div>
                          </div>
                        {{ } else { }}
                        <a href="{{=item.link}}?recommend=Customers_Also_Viewed" title="{{=item.title}}" class="c-goodsli-recommend">
                        {{ } }}
                            {{ if(SC.page.priceInfo && SC.page.priceInfo[goods_id] && SC.isOrder){ }}
                              {{ if(SC.page.priceInfo[goods_id].unit_discount != 0) { }}
                              <div class="gds-li-discount-auto">
                                <div>
                                  <span class="j-discount-num">{{=SC.page.priceInfo[goods_id].unit_discount }}</span>%
                                </div>
                                off
                              </div>
                              {{ } }}
                            {{ } }}
                            <img src="{{=item.image.replace(/\http.*\https:|\http.*\http:/, '')}}" alt="{{=item.title}}">
                        </a>
                        <div class="recommend-name">{{=item.c_title_us?item.c_title_us:item.title}}</div>
                        <div class="recommend-price">{{=SC.page.priceInfo&&SC.page.priceInfo[goods_id]&&SC.page.priceInfo[goods_id].salePrice ? SC.page.priceInfo[goods_id].salePrice.amountWithSymbol : SC.symbol_left+item[_price_key]}}</div>
                    </div>
                  {{ } }}
                </div>
            </div>
            <div class="recommend-btn">
                <div class="recommend-prev swiper-button-prev iconfont icon-left j-rec-prev j-also-prev"></div>
                <div class="recommend-next swiper-button-next iconfont icon-right j-rec-next j-also-next"></div>
            </div>
          {{ } }}
      </div>
    </script>
    <script type="text/html" id="category_detail_recommender_template">
      <div class="c-recommend j-recommend-list" brand="emarsys">
          {{ if (SC.page.products.length) { }}
            <h5 class="recommend-title">{{=SC.re_title}}</h5>
            <div class="swiper-container j-rec">
                <div class="swiper-wrapper ">
                  {{ var _price_key = SC.currency.toLowerCase() === 'usd' ? 'price' : 'c_price_'+SC.currency.toLowerCase(); }}
    
                  {{ for(var i=0; i<SC.page.products.length; i++) { }}
                  {{ var item = SC.page.products[i]; var goods_id = item.id;}}
                  {{ item.link = item.link.replace('http://www.romwe.com', '');}}
                    <div class="swiper-slide"
                      data-scarabitem="{{=item.id }}"
                      alt1="{{=item.id }}"
                      data-sku="{{=item.c_sku }}"
                      data-spu="{{=item.c_relation_id}}"
                      data-title="{{=item.title }}"
                      data-price="{{=item.price}}"
                      data-cat_id="{{=item.c_catid }}"
                    >
                      <div class="recommend-item j-recommend-item j-recommend-item-{{=item.id }}">
              {{ if( SC.page_type == 'goodsCart' ){ }}
                          <a href="javascript:;"
                             onclick="$(this).closest('.swiper-slide').find('.gds-li-qvbtn-b').trigger('click');"
                             title="{{=item.title}}"
                             goods_id="{{=item.id }}"
                             index="{{=i}}"
                             sku="{{=item.c_sku }}"
                             spu="{{=item.c_relation_id}}"
                             price="{{=item['price']}}"
                             cat_id="{{=item.c_catid }}"
                             class="c-goodsli-recommend">
                              <img src="{{=item.image.replace(/\http.*\https:|\http.*\http:/, '')}}" alt="{{=item.title}}">
                              {{ if(SC.page.priceInfo && SC.page.priceInfo[goods_id]){ }}
                                {{ if(SC.page.priceInfo[goods_id].unit_discount != 0) { }}
                                <div class="gds-li-discount-auto">
                                  <div>
                                    <span class="j-discount-num">{{= SC.page.priceInfo[goods_id].unit_discount }}</span>%
                                  </div>
                                  off
                                </div>
                                {{ } }}
                              {{ } }}
                          </a>
    
              {{ } else { }}
                          <a href="{{=item.link}}?recommend=Customers_Also_Viewed"
                             title="{{=item.title}}"
                             title="{{=item.title}}"
                             goods_id="{{=item.id }}"
                             index="{{=i}}"
                             sku="{{=item.c_sku }}"
                             spu="{{=item.c_relation_id}}"
                             price="{{=item['price']}}"
                             cat_id="{{=item.c_catid }}"
                             class="c-goodsli-recommend">
                              <img src="{{=item.image.replace(/\http.*\https:|\http.*\http:/, '')}}" alt="{{=item.title}}">
                              {{ if(SC.page.priceInfo && SC.page.priceInfo[goods_id]){ }}
                                {{ if(SC.page.priceInfo[goods_id].unit_discount != 0) { }}
                                <div class="gds-li-discount-auto">
                                  <div>
                                    <span class="j-discount-num">{{= SC.page.priceInfo[goods_id].unit_discount }}</span>%
                                  </div>
                                  off
                                </div>
                                {{ } }}
                              {{ } }}
                          </a>
              {{ } }}
                          <div class="recommend-name">{{=item.c_title_us?item.c_title_us:item.title}}</div>
                          <div class="recommend-price">{{=SC.page.priceInfo&&SC.page.priceInfo[goods_id]&&SC.page.priceInfo[goods_id].salePrice ? SC.page.priceInfo[goods_id].salePrice.amountWithSymbol : SC.symbol_left+item[_price_key]}}</div>
                      </div>
              {{ if( SC.page_type != 'goodsCart' ){ }}
                      <div class="gds-li-other">
                          {{ if(item.relatedColor && item.relatedColor.length >0){ }}
                          <div class="c-opt j-multi-color-ctn j-multi-color-ctn-{{=item.id }}"> 
                              {{ for(var j=0; j < item.relatedColor.length; j++) { }}
                              {{ var coloritem = item.relatedColor[j]; }}
                              <div  class="opt-color opt-color-s j-multi-color-img-show"
                                    data-goods_id="{{=coloritem.goods_id}}"
                                    data-init_id="{{=item.id }}">
                                  <a
                                      href="{{=SC.getGoodsUrl(coloritem.goods_url_name, coloritem.goods_id, coloritem.cat_id)}}"
                                      zkey="{{=i}}"
                                      target="_blank"
                                      data-sku="{{=item.c_sku}}"
                                  >
                                    <span class="opt-color-link j-opt-color-link j-multi-color-img {{ if(coloritem.goods_id == item.id){ }}active{{ } }}" data-init_id="{{=item.id }}" data-goods_id="{{=coloritem.goods_id}}" data-spu="{{=coloritem.goods_relation_id}}" data-sku="{{=coloritem.goods_sn}}">
                                      <img src="{{=SC.transformImg(coloritem.original_img.replace('.jpg', '_thumbnail_100x100.jpg'))}}"
                                          data-goods_id="{{=coloritem.goods_id}}"
                                          data-init_id="{{=item.id }}" />
                                    </span>
                                  </a>
                              </div>
                              {{ } }}
                              <div class="multi-color-omit j-multi-color-omit">
                                  <span class="j-multi-color-span-omit j-emarsys-recommend-morecolor">+</span>
                                  <div class="multi-color-omit-ctn j-multi-color-omit-ctn" style="display: none;">
                                        {{ for(var k=0; k < item.relatedColor.length; k++) { }}
                                        {{ var item_k = item.relatedColor[k]; }}
                                          <div class="opt-color opt-color-s j-multi-color-img-omit">
                                            <a
                                              href="{{=SC.getGoodsUrl(item_k.goods_url_name, item_k.goods_id, item_k.cat_id)}}"
                                              zkey="{{=i+1}}"
                                              target="_blank"
                                              data-sku="{{=item.c_sku}}"
                                          >
                                              <img class="opt-color-link j-multi-color-img j-emarsys-recommend-color {{ if(item_k.goods_id == item.id){ }}active{{ } }}"
                                                  src="{{=SC.transformImg(item_k.original_img.replace('.jpg', '_thumbnail_100x100.jpg'))}}"
                                                  data-goods_id="{{=item_k.goods_id}}"
                                                  data-init_id="{{=item.id }}" />
                                            </a>
                                          </div>
                                        {{ } }}
                                  </div>
                              </div>
                          </div>
    
                          {{ } }}
                      </div>
              {{ } }}
    
                      <div class="gds-li-qvbtn">
              {{ if( SC.page_type == 'goodsCart' ){ }}
                          <button class="rw-btn-red-opposite rw-btn-s gds-li-qvbtn-b rw-hidden" goods_id="{{=item.id }}" title="{{=item.title}}" index="{{=i}}">
              {{ } else { }}
                          <button class="rw-btn-red-opposite rw-btn-s gds-li-qvbtn-b" goods_id="{{=item.id }}" title="{{=item.title}}" index="{{=i}}">
              {{ } }}
                            <i class="iconfont icon-pass"></i>
                            QUICK VIEW
                          </button>
                          <div class="la-line-scale wishlist-btn add-loading" style="display: none;"><div></div> <div></div> <div></div> <div></div> <div></div></div>
                      </div>
                    </div>
                  {{ } }}
                </div>
            </div>
            <div class="recommend-btn">
        {{ if( SC.page_type == 'goodsCart' && SC.page.products.length < 7 ){ }}
        {{ } else { }}
                <div class="recommend-prev swiper-button-prev iconfont icon-left j-rec-prev j-also-prev"></div>
                <div class="recommend-next swiper-button-next iconfont icon-right j-rec-next j-also-next"></div>
        {{ } }}
            </div>
          {{ } }}
      </div>
    </script>
    
    <script type="text/html" id="category_recommender_template_vue">
      <div class="c-recommend j-recommend-list" brand="自有推荐">
            <h5 class="recommend-title">{{rcTitle}}</h5>
            <div class="recommend-prev swiper-button-prev iconfont icon-left j-rec-prev"></div>
            <div class="swiper-container j-rec">
                <div class="la-line-scale" v-show="loading" style="color: #ff696e">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <div class="swiper-wrapper" v-show="!loading">
                    <div class="swiper-slide" v-for="item in items"
                      :data-scarabitem="item.goods_id"
                      :alt1="item.goods_id"
                      :data-sku="item.goods_sn"
                      :data-spu="item.productRelationID"
                      :data-title="item.goods_name"
                      :data-price="item.salePrice && item.salePrice.usdAmount"
                      :data-cat_id="item.cat_id"
                    >
                        <a @click="clickGoodsLi($event, item)" :title="item.goods_name" href="javascript:;" class="c-recommend-a c-goodsli-recommend">
                            <div class="gds-li-discount-auto" v-if="priceData[item.goods_id] && priceData[item.goods_id].unit_discount != 0">
                              <div>
                                <span class="j-discount-num">{{priceData[item.goods_id].unit_discount}}</span>%
                              </div>
                              off
                            </div>
                            <img :src="transformImg(item.goods_img)" :alt="item.goods_name">
                        </a>
                        <div class="recommend-name">{{item.goods_name}}</div>
                        <div class="recommend-price">{{item.salePrice && item.salePrice.amountWithSymbol}}</div>
                    </div>
                </div>
            </div>
            <div class="recommend-next swiper-button-next iconfont icon-right j-rec-next"></div>
      </div>
    </script>
    
    <script type="text/html" id="category_detail_recommender_template_vue">
      <div>
        <div class="c-recommend" brand="自有推荐">
              <h5 class="recommend-title" v-show="status.showRecommend">{{rcTitle}}</h5>
              <div class="recommend-prev swiper-button-prev iconfont icon-left j-rec-prev"></div>
              <div class="swiper-container j-rec">
                  <div class="la-line-scale" v-show="loading" style="color: #ff696e">
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                  </div>
                  <div class="swiper-wrapper" v-show="!loading">
                      <div class="swiper-slide" v-for="(item,index) in items"
                        :data-scarabitem="item.goods_id"
                        :alt1="item.goods_id"
                        :data-sku="item.goods_sn"
                        :data-spu="item.productRelationID"
                        :data-title="item.goods_name"
                        :data-price="(item.salePrice && item.salePrice.usdAmount) || priceData && priceData[item.goods_id] && priceData[item.goods_id].salePrice && priceData[item.goods_id].salePrice.usdAmount"
                        :data-cat_id="item.cat_id"
                      >
                          <a @click="clickGoodsLi($event, item)" :title="item.goods_name" href="javascript:;" class="c-recommend-a c-goodsli-recommend">
                              <div class="gds-li-discount-auto" v-if="priceData[item.goods_id] && priceData[item.goods_id].unit_discount != 0">
                                <div>
                                  <span class="j-discount-num">{{priceData[item.goods_id].unit_discount}}</span>%
                                </div>
                                off
                              </div>
                              <img :src="transformImg(item.goods_img)" :alt="item.goods_name">
                              <transition name="vue-fade">
                                    <div v-show="status.colorLoader[index]" v-cloak class="gds-li-color-loder">
                                        <div class="la-line-scale la-red1"><div></div><div></div><div></div><div></div><div></div></div>
                                    </div>
                              </transition>
                          </a>
                          <div class="recommend-name">{{item.goods_name}}</div>
                          <div class="recommend-price">{{(item.salePrice && item.salePrice.amountWithSymbol) || (priceData && priceData[item.goods_id] && priceData[item.goods_id].salePrice && priceData[item.goods_id].salePrice.amountWithSymbol)}}</div>
                          <div class="gds-li-other"> <!-- 无内容也要这个外层div占位 -->
                              <div class="c-opt j-multi-color-ctn" v-if="item.relatedColor">
                                  <div class="opt-color opt-color-s j-multi-color-img j-multi-color-img-show" v-for="(dataitem,dataindex) in item.relatedColor" v-show="dataindex < maxShowColor">
                                      <a :href="isMobile ? 'javascript:;' : '' + getGoodsUrl(dataitem.goods_url_name, dataitem.goods_id, dataitem.cat_id)"
                                        :zkey="dataindex+'1'"
                                          target="_blank"
                                          :data-sku="dataitem.goods_sn"
                                          @click="clickColor(item.goods_id, dataitem.goods_id, index ,dataitem)"
                                          @mouseenter="mouseenterColor(item.goods_id, dataitem.goods_id, item.goods_id, index)"
                                          @mouseleave="mouseleaveColor"
                                      >
                                        <span class="opt-color-link j-opt-color-link" :class="{'active': item.goods_id == dataitem.goods_id}">
                                          <img :src='transformImg(dataitem.original_img.replace(".jpg", "_thumbnail_100x100.jpg"))' />
                                        </span>
                                      </a>
                                  </div>
                                  <div class="multi-color-omit" @click="setOmitCtnShow(index,true)" @mouseleave="setOmitCtnShow(index,false)" v-show="item.relatedColor.length > maxShowColor" :data-index="index">
                                      <em class="j-multi-color-omit">+</em>
                                      <transition name="vue-fade">
                                          <div class="multi-color-omit-ctn" v-show="status.showOmitCtn && status.omitCtnShow[index]">
                                              <div class="opt-color opt-color-s j-multi-color-img j-multi-color-img-omit" v-for="(dataitem,dataindex) in item.relatedColor" v-show="dataindex >= maxShowColor">
                                                  <a :href="isMobile ? 'javascript:;' : '' + getGoodsUrl(dataitem.goods_url_name, dataitem.goods_id, dataitem.cat_id)"
                                                    :zkey="dataindex+'1'"
                                                      target="_blank"
                                                      :data-sku="dataitem.goods_sn"
                                                      @click="clickColor(item.goods_id, dataitem.goods_id, index,dataitem)"
                                                      @mouseenter="mouseenterColor(item.goods_id, dataitem.goods_id, item.goods_id, index)"
                                                      @mouseleave="mouseleaveColor">
                                                      <span class="opt-color-link j-opt-color-link" :class="{'active': dataitem.goods_id == item.goods_id}">
                                                          <img class="j-opt-color-link-omit"
                                                            :src="transformImg(dataitem.original_img.replace('.jpg', '_thumbnail_100x100.jpg'))" />
                                                      </span>
                                                  </a>
                                              </div>
                                          </div>
                                      </transition>
                                  </div>
    
                              </div>
                              <!-- color ++++++ -->
                          </div>
                          <div class="gds-li-qvbtn">
                            <button class="rw-btn-red-opposite rw-btn-s gds-li-qvbtn-b" @click="quickViewOpen({goods_id: item.goods_id, moduleFrom: 'recommend'},index)" v-show="!status.qv_loading[index]">
                              <i class="iconfont icon-pass"></i>
                              QUICK VIEW
                            </button>
                            <div class="la-line-scale wishlist-btn" v-show="status.qv_loading[index]"><div></div> <div></div> <div></div> <div></div> <div></div></div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="recommend-next swiper-button-next iconfont icon-right j-rec-next"></div>
        </div>
        <modal-vue :show="status.quickview"
          @cancel="quickViewClose"
          :isquickv=true
         >
          <quickview-vue :open-event="quickOpenEvent" @parenthandle="childHandle" @setrule="setRule"></quickview-vue>
          <div slot="footer"></div>
        </modal-vue>
        <modal-vue :show="status.sizeguide"
            :full=true
            @cancel="status.sizeguide = false">
            <div slot="title" v-cloak>Size Chart</div>
            <sizeguide-vue :sizeinfo="quickData.sizeInfoDes && quickData.sizeInfoDes.sizeInfo" :sizeinfoinch="quickData.sizeInfoDes && quickData.sizeInfoDes.sizeInfoInch" :show_inch="quickData.sizeInfoDes && quickData.sizeInfoDes.sizeUnit == '1'" :cat_info="quickData.currentCat" :grand_parent_id="quickData.parentCat && quickData.parentCat.parent_id" :is_dec=false :num="2" :localsize="quickData.localSize" :presentlocalsize="presentLocalSize"></sizeguide-vue>
            <div slot="footer"></div>
        </modal-vue>
      </div>
    </script>
    
    <!-- 用于emarsys 颜色切换 -->
    <script id="recommend_item_art_tpl" type="text/html">
       <div class="recommend-item j-recommend-item j-recommend-item-{{init_id }}">
          <a href="{{link}}?recommend=Customers_Also_Viewed"
              title="{{item.goods_name}}"
              goods_id="{{item.goods_id }}"
              sku="{{item.goods_sn }}"
              spu="{{item.goods_relation_id}}"
              price="{{usdAmount}}"
              cat_id="{{item.cat_id }}"
              class="c-goodsli-recommend">
              <img src="{{image}}" alt="{{item.goods_name}}">
              {{if unit_discount && unit_discount !=0}}
              <div class="gds-li-discount-auto">
                <div>
                  <span class="j-discount-num">{{unit_discount}}</span>%
                </div>
                off
              </div>
              {{/if}}
          </a>
          <div class="recommend-name">{{item.goods_name}}</div>
          <div class="recommend-price">{{price}}</div>
      </div>
    </script>
    
    <script>
    
    if(PageGroupEmarsys == 'other') {
    
      ;(function() {
          var _page_type = "false"
          var emarsys_type = 'false'
          var catInfo = false
          var recommendState = 0;
          var _sum = 'false' //商品个数
          // 我司数据埋点
          var sheinCustomTime = [];
          // var clickedGoodId = /-(\d+)-(\w+)-(\d+)/g.test(window.location.pathname)?RegExp.$1:'';
          var currentSitePathname = window.location.pathname.split('.')[0].split('-'),
              clickedGoodId = currentSitePathname[currentSitePathname.length-3];
    
          function customBuriedData () {
              var lang = navigator.browserLanguage?navigator.browserLanguage:navigator.language
              var gaName = 'rw'+('us' == 'en'?'':'us');
              var customData = {
                  jumpSource: '//www.srmdata.com/rec-romwe-page1/',
                  sendBackBase: '//www.srmdata.com/rec-romwe-page1/d/',
                  site: 'rwus',
                  lang: lang,
                  userId: getCookie('userinfo[userId]') || '0',
                  cookieId: getCookie('cookieId'),
                  url: window.location.href,
                  customviewType: getCookie('sr_custom_key')?getCookie('sr_custom_key'):recommendState?'ABC':'emarsys',
                  clientId: ga && ga.getByName && ga.getByName(gaName) && ga.getByName(gaName).get('clientId') || '0'
              }
              return customData;
          };
          function customBuriedPointShow (page,goodsList,gid) {
              // 展示埋点
              var shein_t = new Date().getTime();
              var img = window[shein_t] = new Image();
              var customData = customBuriedData ();
              if(customData.customviewType == undefined || customData.customviewType == '') {
                  return false;;
              };
              sheinCustomTime[page]=shein_t;
              var args = ['t=' + shein_t, 'site=' +customData.site,'lang=' + customData.lang, 'userId=' + customData.userId, 'cookieId=' +customData.cookieId, 'gid=' + gid, 'customviewType=' + customData.customviewType, 'page=' + page, 'goodsList=' + goodsList.join(','), 'clientId=' +customData.clientId].join('&');
              img.onload = function(){
                  delete window[shein_t];
              }
              img.src = customData.jumpSource + '?' + args;
          };
    
          function customBuriedPointClick (page,goodsList,goodsId,goodsPos,gid) {
              // 点击埋点
              var shein_t = new Date().getTime();
              var img = window[shein_t] = new Image();
              var customData = customBuriedData ();
              var trackId = sheinCustomTime[page]
              if(customData.customviewType == undefined || customData.customviewType == '') {
                  return false;;
              };
              var args = ['t=' + new Date().getTime(), 'trackId='+trackId, 'site=' +customData.site,'lang=' + customData.lang, 'userId=' + customData.userId, 'cookieId=' +customData.cookieId, 'gid=' + gid, 'customviewType=' + customData.customviewType, 'page=' + page, 'goodsList=' + goodsList.join(','), 'goodsId=' +goodsId, 'goodsPos=' + goodsPos, 'clientId=' +customData.clientId].join('&');
              img.onload = function(){
                  delete window[shein_t];
              }
              img.src = customData.sendBackBase + '?' + args;
          }
    
          function initSwiper(options) {
            var saRecommend = new GBSaProductRecommend({
              eventName: options.title || $(options.el).attr('title'),
              isFaultTolerant: options.isFaultTolerant || 0
            })
            var options = options || {
              el: '.j-rec'
            }
            var gaEmarsysCache = {}
            var $thisEmarsys = $(options.el);
            var clickedGoodId = /-(\d+)-(\w+)-(\d+)/g.test(window.location.pathname) ? RegExp.$1 : '';
            var eventLabel = 'Recommend For You'
            var position = 1000
            var eventList = ''
            var brand = $(options.el + ' .c-recommend').attr('brand')
            // 初始化默认曝光数量
            var swiperNum = 6;
    
            if (_page_type == 'goodsCart' && C_Module.require('shopping-cart-list').cartVue.source.length) {
              $('.j-recommend-emarsys').removeClass('container-fluid-1420').addClass('container-fluid-1200');
              $('#category_recommend_products_list').addClass('col-sm-8');
              swiperNum = 4;
            }
    
            //var initViewedLimit = 6;
            var initViewedLimit = swiperNum;
            var defaultSwiper = {
              direction: 'horizontal',
              prevButton: options.el + ' .j-rec-prev',
              nextButton: options.el + ' .j-rec-next',
              slidesPerView: swiperNum,
              slidesPerGroup: swiperNum,
              spaceBetween: 20,
            }
            var windowHeight = window.innerHeight, headerHeight = 108, topbannerHeight = 80, backtotopH = 110,
              containerheight = windowHeight - headerHeight - topbannerHeight - backtotopH; //初始化垂直模式的高度
    
            if (_page_type == 'goodsDetail') {
              eventList = '商品详情页-推荐列表-' + brand
              if (options.el == '#customers_also_view_container') {
                if (brand == 'emarsys') eventList += '-ALSO_BOUGHT'
                eventLabel = 'Customers Also Viewed'
                // position = 4000
                position = 1000
              } else {
                if (brand == 'emarsys') eventList += '-RELATED'
                eventLabel = 'You May Also Like'
                position = 3000
                // 详情页 you may also like 垂直模式
                defaultSwiper = {
                  direction: 'vertical',
                  prevButton: options.el + ' .j-rec-prev',
                  nextButton: options.el + ' .j-rec-next',
                  slidesPerView: 'auto',
                  slidesPerGroup: 2,
                  spaceBetween: 20,
                }
                $(options.el).find('.j-rec').css('height', containerheight + 'px')
              }
            }
    
            if (_page_type == 'goodsCart' && !C_Module.require('shopping-cart-list').cartVue.source.length && document.body.clientWidth < 1470) {
              $('.j-rec-prev').css('left', '5px');
              $('.j-rec-next').css('right', '5px');
            }
            if(brand == 'emarsys'){
              recommend_eventLabel = brand + '-' + emarsys_type
            }else{
              recommend_eventLabel = brand
            }
            if (_page_type == 'goodsList') {
              if(catInfo.type == 'search'){
                eventList = '搜索列表页-推荐列表-' + recommend_eventLabel
              }else{
                eventList = '列表页-推荐列表-' + recommend_eventLabel
              }
            }
            if (_page_type == 'goodsCart') eventList = '空购物车-推荐列表-' + recommend_eventLabel
            if(_page_type == 'userOrder') {
              eventList = 'OrderList页-推荐列表-' + recommend_eventLabel;
              eventLabel = "Customers Also Viewed";
            }
    
            // if (_page_type == 'goodsList' && (catInfo.type == 'virtual' || catInfo.type == 'search')) {
            //   eventLabel = "Customers Also Viewed"
            // }
    
    
    
            // 垂直模式的swiper组件计算初始化曝光的商品数量
            function computedViewedItems() {
              var $container = $('#category_recommend_products_list')
              var $items = $container.find('.swiper-slide')
              var target = 0
    
              for (var i = 0; i <= 8; i++) {
                var $img = $items.eq(i)
                if ($img && $img[0]) {
                  // console.log($img.offset().top, $img.height(), $container.height());
                  if ($img.offset().top + $img.height() * 0.6 <= $container.height() + $container.offset().top) {
                    target++
                  }
                }
              }
              return target
            }
    
    
            // 闭包访问 ga相关属性
            !function () {
              var newSwiper = new Swiper(options.el + ' .j-rec', $.extend(true, defaultSwiper, {
                onSlideChangeEnd: function (swiper) {
                  var originalParams = swiper.originalParams
                  initViewedLimit = swiper.initViewedLimit
                  var goodsList = [], perGroup = 6, forLimit = swiper.activeIndex
    
                  if (_page_type == 'goodsCart') {
                    perGroup = gb_emarsys_swiper.params.slidesPerView;
                  }
    
                  // 垂直模式 翻页时需减去已默认曝光的商品
                  if (originalParams.direction == 'vertical') {
                    perGroup = initViewedLimit || originalParams.slidesPerGroup
                    forLimit = swiper.activeIndex
                  }
                  var tempFlag = false;
                  for (var i = forLimit; i < (forLimit + perGroup) && i < swiper.imagesLoaded; i++) {
                    if (!gaEmarsysCache[i]){
                      tempFlag = true;
                      var $ctx = $thisEmarsys.find('.swiper-slide').eq(i);
                      var goods_id = $ctx.data('scarabitem')
                      goodsList.push(i + 1 + ':' + goods_id);
                      if ($ctx.length) {
                        var spu = $ctx.attr('data-spu')
                        var sku = $ctx.attr('data-sku')
                        var gaParam = {
                          id: spu && spu != 'null' ? spu : sku,
                          name: sku,
                          category: $ctx.attr('data-cat_id'),
                          position: i + 1,
                          price: $ctx.attr('data-price'),
                        }
                        saRecommend.gaAddPayload(gaParam)
                        saRecommend.addPayload({
                          index: i + 1,
                          goods_id: goods_id,
                          spu:spu,
                          sku:sku,
                        })
                      }
                      gaEmarsysCache[i] = true;
                    }
                  }
                  if(tempFlag){
                    saRecommend.gaView();
                    saRecommend.view()
                  }
                },
                onSlidePrevStart: function (swiper) {
                },
                onSlideNextStart: function (swiper) {
                },
                onClick: function (swiper, event) {
                var $ctx = $thisEmarsys.find('.swiper-slide').eq(swiper.clickedIndex);
                  var goodsList = [];
    
                  // 点到了元素的空白处
                if (!$ctx.length) return
    
                  for (var i = swiper.activeIndex; i < (swiper.activeIndex + 6) && i < swiper.imagesLoaded; i++) {
                    var $goods = $thisEmarsys.find('.swiper-slide').eq(i);
                    goodsList.push(i + 1 + ":" + $goods.attr('data-scarabitem'));
                  }
    
                  var page = Math.ceil(swiper.activeIndex / 6);
                  if (event && $(event.target).closest('.c-goodsli-recommend').length) {
                    var spu = String($ctx.attr('data-spu'))
                    var sku = String($ctx.attr('data-sku'))
                    var gaParam = {
                      id: spu && spu != 'null' ? spu : sku,
                      name: sku,
                      category: $ctx.attr('data-cat_id'),
                      position: 1 + swiper.clickedIndex,
                      price: $ctx.attr('data-price'),
                    }
                    saRecommend.gaClick(gaParam)
                    saRecommend.click({
                      index: swiper.clickedIndex + 1,
                      goods_id: $ctx.attr('data-scarabitem'),
                      spu:spu,
                      sku:sku
                    })
                  }
                  if ('rwus' == 'rw' || 'rwus' == 'rwus') {
                  customBuriedPointClick(page + 1, goodsList, $ctx.attr('data-scarabitem'), swiper.clickedIndex + 1, clickedGoodId);
                  }
                },
                onImagesReady: function (swiper) {
                  if (_page_type == 'goodsDetail' && options.el == '#category_recommend_products_list') {
                    initViewedLimit = computedViewedItems()
                  }
                  swiper.initViewedLimit = initViewedLimit
                  $(window).scroll(function () {
                    var container = document.querySelector(options.el)
                    if (container) {
                      var $this = $('#' + container.id)
                      if ($this.attr('viewed')) return;
                      var bottom = container.getBoundingClientRect().bottom - $(container).height() * 0.6
                      if (bottom && bottom <= window.innerHeight && bottom>=0) {
                        if ($this.find('.swiper-slide').length > 0) {
                          var goodsList = [];
                          for (var i = 0; i < initViewedLimit; i++) {
                            if (gaEmarsysCache[i]) return;
    
                          var $ctx = $this.find('.swiper-slide').eq(i);
                          var goods_id = $ctx.attr('data-scarabitem')
                            goodsList.push(i + 1 + ":" + goods_id);
                            if ($ctx.length) {
                              var spu = $ctx.attr('data-spu')
                              var sku = $ctx.attr('data-sku')
    
                              //购物车是否为空处理
                              var brand = $(options.el + ' .c-recommend').attr('brand')
                              if(brand == 'emarsys'){
                                recommend_eventLabel = brand + '-' + emarsys_type
                              }else{
                                recommend_eventLabel = brand
                              }
                              if (_page_type == 'goodsCart') {
                                if (C_Module.require('shopping-cart-list').cartVue.source.length) {
                                  // eventList = "购物车页-推荐列表-emarsys-CART";
                                  eventList = '购物车页-推荐列表-' + recommend_eventLabel
                                } else {
                                  // eventList = "空购物车-推荐列表-emarsys-CART ";
                                  eventList = '空购物车-推荐列表-' + recommend_eventLabel
                                }
                                if (!sku) continue;
                              }
                              var gaParam = {
                                id: spu && spu != 'null' ? spu : sku,
                                name: sku,
                                category: $ctx.attr('data-cat_id'),
                                position: 1 + i,
                                price: $ctx.attr('data-price'),
                              }
                              saRecommend.gaAddPayload(gaParam)
                              saRecommend.addPayload({
                                index: i + 1,
                                goods_id: goods_id,
                                spu:spu,
                                sku:sku,
                              })
                              gaEmarsysCache[i] = true;
                            }
                          }
                          saRecommend.gaView()
                          saRecommend.view()
    
                          if ('rwus' == 'rw' || 'rwus' == 'rwus') {
                            customBuriedPointShow('1', goodsList, clickedGoodId);
                          }
                        }
                        $this.attr({ 'viewed': true })
                      };
                    }
                  });
                  $(window).scroll()
                },
              }));
    
              if (_page_type == 'goodsCart') {
                window.gb_emarsys_swiper = newSwiper;
              }
    
            }()
    
          return saRecommend;
    
          }
    
          // 查询内部推荐
          function doRecommend(goods_id, cat_id, container, recommendType,isFaultTolerant) {
            var container = container || 'category_recommend_products_list'
            var component = '';
            // var clickedGoodId = /-(\d+)-(\w+)-(\d+)/g.test(window.location.pathname)?RegExp.$1:'';
              var currentSitePathname = window.location.pathname.split('.')[0].split('-'),
                  clickedGoodId = currentSitePathname[currentSitePathname.length-3];
            var global_loading = 0;
            var relatedColorResizeTimeout;
            var template;
            if(_page_type == 'goodsDetail' ||　_page_type == 'goodsList' || _page_type == 'goodsCart'){
              template = '#category_detail_recommender_template_vue'
            }else{
              template = '#category_recommender_template_vue'
            }
            var RecommendCptl = Vue.extend({
              template: template,
              data: function() {
                return {
                  loading: true,
                  limit: 30,
                  items: [],
                  currenttime: new Date().getTime(),
                  current_goodslist:[],
                  productCaches:{},
                  switchColorAjaxObj: [],
                  priceData: {},
                  page: 1,
                  rcTitle: container == 'customers_also_view_container' ? 'Customers Also Viewed' : 'You may also like',
                  status: {
                    omitCtnShow: [],
                    quickview: false,
                    qv_loading:[],
                    sizeguide: false,
                    dialog: false,    //信息弹窗
                    isSwitchedColor: {},
                    showOmitCtn: ROMWE_W.isMobile()?false:true,
                    colorLoader:[],
                    showRecommend:true
                  },
                  maxShowColor:0,
                  isMobile:false,
                  quickData: {},
                  quickDataCache: {},
                  quickOpenEvent: {
                    status: {
                      open: false,
                      sizetips: false,
                      addtowish: 0
                    },
                    data: null,
                    callback: null
                  },
                  presentLocalSize: "",
                }
              },
              created: function() {
                var self = this
                var url
                if(goods_id && cat_id){
                  url = '/product/recommend?' + $.param({goods_id: goods_id, cat_id:cat_id, limit: self.limit})
                }
    
                
                if(_page_type == 'goodsList' || _page_type == 'goodsCart'){
                  this.rcTitle = "Recommend for you";
                  if(recommendType && recommendType == 'hotproduct' && 'us' == 'us'){//自有推荐热销商品
                    url = "/product/getSearchRecommendInfo";
                  }else if(recommendType && recommendType.indexOf('self_')>-1){//可配置自有推荐
                    var _type;
                    switch (recommendType) {
                      case 'self_hotsale':
                        _type = 'bestSeller'
                        break
                      case 'self_discount':
                        _type = 'discountMost'
                        break
                      case 'self_newarrival':
                        _type = 'latest'
                        break
                      default:
                        break
                    }
                    if(_type) url = "/product/getFaultTolerantInfo?type="+_type;
                  }
                }
                $.get(url, function(data) {
                    if(!data) return
                    data.products = data.products || data.goods || (data.info && data.info.goods)
                    if(data.info && data.info.goods){//接口数据兼容
                      data.products = data.info.goods.map(function(item) {
                        return {
                          productRelationID: item.spu,
                          goods_id: item.goodsId,
                          cat_id: item.catId,
                          goods_name: item.goodsName,
                          goods_sn: item.goodsSn,
                          goods_url_name: item.goodsUrlName,
                          goods_img: item.goodsImg,
                          salePrice: {},
                          retailPrice: {}
                        }
                      })
                    }
                    if(_page_type == 'goodsList'){
                      data.products = data.products.filter(function(item,index){
                        return index < 30
                      })
                    }else if(_page_type == 'goodsCart'){
                      data.products = data.products.filter(function(item,index){
                        return index < 24
                      })
                    }
                    self.items = data.products
    
                    self.current_goodslist = [];
                    self.current_goodslist = data.products.map(function(i,item){return i+1+':'+item.goods_id});
                    if('rwus' == 'rw'|| 'rwus' == 'rwus') {
                        customBuriedPointShow(self.page, data.products.map(function(i,item){return i+1+':'+item.goods_id}),clickedGoodId);
                    }
                    self.$nextTick(function() {
                      self.quickGetPrice();
                    })
                })
                this.showRelatedColor();
                $(window).resize(function() {
                  if (relatedColorResizeTimeout) {clearTimeout(relatedColorResizeTimeout)}
                  relatedColorResizeTimeout = setTimeout(function() {
                    self.showRelatedColor();
                  },1000)
                });
              },
              methods: {
                setRule: function(val){
                    this.presentLocalSize = val;
                },
                getGoodsUrl: ROMWE_W.getGoodsUrl,
                transformImg: transformImg,
                quickViewOpen: function(goodsItem, index, relationId, callback) {
                  var self = this;
                  if(global_loading) return;
                  global_loading = 1;
                  Vue.set(self.status.qv_loading, index, 1);
                  this.saRecommend.clickQuickView({goods_id:goodsItem.goods_id});
                  var gaParam = {
                    id: this.items[index].productRelationID||this.items[index].goods_sn,
                    name: this.items[index].goods_sn,
                    category: this.items[index].cat_id,
                    position: index + 1,
                    price: this.items[index].price?this.items[index].price:GB_ga_transformPrice(this.items[index].salePrice.amount),
                  }
                  this.saRecommend.qvClickQuickViewGap(gaParam)
                  this.quickOpenEvent = {
                    status: {
                      open: true,
                      sizetips: false,
                      addtowish: 0
                    },
                    data: {
                      goodsItem: goodsItem,
                      index: index,
                      relationId: 0
                    },
                    callback: function() {
                      setTimeout(function() {
                          global_loading = 0;
                          self.status.qv_loading[index] = 0;
                      }, 500);
                    }
                  }
                },
                quickViewClose: function() {
                  this.status.quickview = false;
                  this.quickOpenEvent.status.open = false;
                  this.saRecommend.qvCloseQuickViewGap()
                },
                childHandle: function(data) {
                  if(typeof(global_childHandle) == "function") {
                      global_childHandle(data, this,'','current_goodslist');
                  }
                },
                setOmitCtnShow:function(index,val){
                  Vue.set(this.status.omitCtnShow,index,val)
                  this.saRecommend.qvShowMoreColorGap()
                },
                mouseleaveColor: function() {
                    if (typeof mouseenterTimeout != 'undefined' && mouseenterTimeout) {clearTimeout(mouseenterTimeout)}
                },
                // 切换颜色
                mouseenterColor: function(initialId, newItemId, oldItemId, itemindex) {
                    var self = this;
                    if ( !ROMWE_W.isMobile() && !self.productCaches[newItemId] ) {
                        self.mouseenterColorDelay(initialId, newItemId, oldItemId, itemindex)
                        return
                    }
                    self.switchColor(initialId, newItemId, oldItemId, itemindex)
                },
                mouseenterColorDelay: function(initialId, newItemId, oldItemId, itemindex) {
                    var self = this;
                    if (typeof mouseenterTimeout != 'undefined' && mouseenterTimeout) {clearTimeout(mouseenterTimeout)}
                    mouseenterTimeout = setTimeout(function() {
                        self.switchColor(initialId, newItemId, oldItemId, itemindex)
                    }, 500);
                },
                switchColor: function(initialId, newItemId, oldItemId, itemindex) {
                    var self = this;
    
                    if (newItemId == oldItemId) {
                        if(typeof self.switchColorAjaxObj[itemindex] != 'undefined') {
                            if (self.switchColorAjaxObj[itemindex].state() == 'pending') {
                                // console.log('跳回原ID abort suc');
                                self.switchColorAjaxObj[itemindex].abort()
                                Vue.set(self.status.colorLoader,itemindex, false);
                            }
                        }
                        return
                    }
    
                    if (!self.productCaches[newItemId]) {
                        Vue.set(self.status.colorLoader, itemindex, true);
    
                        if(typeof self.switchColorAjaxObj[itemindex] != 'undefined') {
                            if (self.switchColorAjaxObj[itemindex].state() == 'pending') {
                                // console.log('无缓存 abort suc');
                                self.switchColorAjaxObj[itemindex].abort()
                            }
                        }
    
                        self.switchColorAjaxObj[itemindex] = $.ajax({
                            url: '/product/info',
                            type: 'GET',
                            data: {id: newItemId},
                            success: function(json) {
                                if (json.code == 0) {
                                    if (!self.productCaches[oldItemId]) {
                                        Vue.set(self.productCaches, oldItemId, self.items[itemindex]);
                                    }
    
                                    json.info.Product.relatedColor = self.items[itemindex].relatedColor;
    
                                    Vue.set(self.productCaches, newItemId, json.info.Product);
    
                                    if ($('.j-goodsli'+itemindex).length > 0) {
                                        $('.j-goodsli'+itemindex).remove()
                                    }
                                    Vue.set(self.priceData, newItemId, {
                                        retailPrice: json.info.Product.retailPrice,
                                        salePrice: json.info.Product.salePrice,
                                        unit_discount: json.info.Product.unit_discount
                                    });
                                    Vue.set(self.items, itemindex, json.info.Product);
                                    Vue.set(self.status.isSwitchedColor, itemindex, true)
    
                                    self.showRelatedColor(itemindex);
                                    var gaParam = {
                                      id: json.info.Product.productRelationID||json.info.Product.goods_sn,
                                      name: json.info.Product.goods_snu,
                                      category: json.info.Product.cat_id,
                                      position: +itemindex+1,
                                      price: GB_ga_transformPrice(json.info.Product.salePrice.amount),
                                    }
                                    self.saRecommend.qvViewItemsHoverGap(gaParam)
                                    self.saRecommend.colorAction({
                                      index: +itemindex + 1,
                                      goods_id: json.info.Product.goods_id,
                                      spu:json.info.Product.productRelationID,
                                      sku:json.info.Product.goods_sn,
                                      type:'expose'
                                    })
                                }
    
                                var img = json && json.code == 0 ? self.transformImg(json.info.Product.goods_img) : '//romwe.ltwebstatic.com/rw_dist/images/404-1e0a2310f8.png';
                                self.preLoadImages([img], function() {
                                    Vue.nextTick(function () {
                                        Vue.set(self.status.colorLoader, itemindex, false);
                                    })
                                })
                            }
                        })
                    } else {
                        if(typeof self.switchColorAjaxObj[itemindex] != 'undefined') {
                            if (self.switchColorAjaxObj[itemindex].state() == 'pending') {
                                // console.log('有缓存 abort suc');
                                self.switchColorAjaxObj[itemindex].abort()
                                Vue.nextTick(function () {
                                    Vue.set(self.status.colorLoader, itemindex, false);
                                })
                            }
                        }
    
                        Vue.set(self.items, itemindex, self.productCaches[newItemId]);
    
                        self.showRelatedColor(itemindex);
                    }
                },
                showRelatedColor: function(itemindex) {
                    var self = this;
                    if (ROMWE_W.isMobile()) {
                      Vue.nextTick(function () {
                        self.items[itemindex].omitCtnShow[itemindex]= false;
                      })
                    }
    
                    if (window.innerWidth <= 900) {
                        self.maxShowColor = 1;
                    } else if(window.innerWidth <= 992) {
                        self.maxShowColor = 2;
                    } else if(window.innerWidth <= 1200) {
                        self.maxShowColor = 3;
                    } else if(window.innerWidth <= 1270) {
                        self.maxShowColor = 4;
                    } else {
                      self.maxShowColor = 5;
                    }
                },
                clickColor: function(newId, oldId,itemIndex,data) {
                    if (this.isMobile) {
                        if (newId == oldId) {
                            window.open('' + this.getGoodsUrl(this.items[itemIndex].goods_url_name, this.items[itemIndex].goods_id, this.items[itemIndex].cat_id), "_blank")
                        } else {
                            this.$emit('mouseenter-color', this.initialId, newId, oldId, this.itemindex);
                        }
                    }
                    var gaParam = {
                      id: this.items[itemIndex].productRelationID||this.items[itemIndex].goods_sn,
                      name: this.items[itemIndex].goods_snu,
                      category: this.items[itemIndex].cat_id,
                      position: +itemIndex+1,
                      price: GB_ga_transformPrice(this.items[itemIndex].salePrice.amount),
                    }
                    this.saRecommend.qvSelectColorGap(gaParam);
                    this.saRecommend.colorAction({
                      index: +itemIndex + 1,
                      goods_id: data.goods_id,
                      spu:data.productRelationID || data.goods_relation_id,
                      sku:data.goods_sn,
                      type:'click'
                    })
                },
                quickGetPrice: function() {
                    var _ids = [];
                    var self = this;
    
                    if(this.items.length) {
                        var length = this.items.length;
                        for(var i=0; i<length; i++) {
                            _ids.push(this.items[i].goods_id);
                        }
                    }
    
                    // console.log(_ids);
                    if(!_ids.length) return
                    $.post('/product/getPrices', {goods_ids: _ids}, function(json) {
                        self.loading = false
                        if(json.code == 0) {
                            self.priceData = json.info.prices || json.info.price;
                            self.$nextTick(function() {
                              if (_page_type == 'goodsList' || _page_type == 'goodsCart') {
                                self.saRecommend = initSwiper({
                                  el: '#' + container,
                                  title: 'recommendations_for_you',
                                  isFaultTolerant:isFaultTolerant || 0,
                                })
                              }else{
                                self.saRecommend = initSwiper({
                                  el: '#' + container,
                                  title: container == 'customers_also_view_container' ? 'customers_also_viewed' : 'you_may_also_like',
                                  isFaultTolerant:isFaultTolerant || 0,
                                })
                              }
                              if(typeof dtsVue != 'undefined' && dtsVue.show_qvbtn){
                                dtsVue.show_qvbtn()
                              }
                            })
                        }else{
                          self.status.showRecommend = false;
                        }
                    }, 'json');
                },
                preLoadImages: function(imgArr, callback) {
                    var imgObjs = [];
                    for (var i=0; i<imgArr.length; i++){
                        imgObjs[i]=new Image();
                        imgObjs[i].src=imgArr[i];
                        imgObjs[i].onload=function(){
                            callback();
                        }
                        imgObjs[i].onerror=function(){
                            callback();
                        }
                    }
    
                },
                clickGoodsLi:function(e, item){
                    var self = this;
                    function customBuriedPointClick (gid) {
                        // 点击埋点
                        var shein_t = new Date().getTime();
                        var img = window[shein_t] = new Image();
                        var customData = customBuriedData ();
                        var trackId = self.current_time;
                        var cur_page = self.current_page - 1;
                        var cur_goodId = $(e.srcElement).parent().parent().parent().attr('data-id');
                        var cur_goodPos = ($(e.srcElement).parent().parent().parent().attr('data-index')-1);
                        if(customData.customviewType == undefined || customData.customviewType == '') {
                            return false;;
                        };
                        var args = ['t=' + new Date().getTime(), 'trackId='+trackId, 'site=' +customData.site,'lang=' + customData.lang, 'userId=' + customData.userId, 'gid=' + gid, 'cookieId=' +customData.cookieId, 'customviewType=' + customData.customviewType, 'page=' + cur_page, 'goodsList=' + self.current_goodslist, 'goodsId=' +cur_goodId, 'goodsPos=' + cur_goodPos, 'clientId=' +customData.clientId].join('&');
                        img.onload = function(){
                            delete window[shein_t];
                        }
                        img.src = customData.sendBackBase + '?' + args;
                    }
                    if('rwus' == 'rw'|| 'rwus' == 'rwus') {
                        var currentSitePathname = window.location.pathname.split('.')[0].split('-'),
                            clickedGoodId = currentSitePathname[currentSitePathname.length-3];
                        customBuriedPointClick(clickedGoodId);
                    }
                    window.location.href = ""+self.getGoodsUrl(item.goods_url_name, item.goods_id, item.cat_id)
                },
                template: ROMWE_W.template,
              }
            })
            if(goods_id && cat_id || _page_type == 'goodsList' || _page_type == 'goodsCart') {
              component = new RecommendCptl().$mount()
              document.getElementById(container).appendChild(component.$el)
            }
            return component
          }
        //筛除无货商品
        function filterGoods(recommendData, goods_id) {
          if (recommendData) {
            var product_ids
            product_ids = recommendData.map(function (item) {
              return item[goods_id]
            })
            var _promise = $.ajax({
              type: 'POST',
              url: "/product/getGoodsStocks",
              contentType: 'application/json',
              data: JSON.stringify({ product_ids: product_ids }),
              success: function (data) {
              },
              error: function (e) {
                console.log(e)
              }
            })
            return _promise
          } else {
            return null
          }
        }
        //相关商品容错数据
        function getCustomerAlsoViewed(goods_id, cat_id) {
          if (goods_id && cat_id) {
            var _promise = $.ajax({
              type: 'get',
              dataType: 'json',
              data: {
                goods_id: goods_id,
                cat_id: cat_id
              },
              url: '/product/recommend',
              success: function (json) {
              },
              error: function (e) {
                console.log(e)
              }
            });
    
            return _promise;
          } else {
            return null;
          }
        }
        //类目推荐容错数据
        function getBestSeller(cat_id) {
          if (cat_id) {
            var _promise = $.ajax({
              type: 'GET',
              url: "/product/getBestSellerByCategory?cat_id=" + cat_id,
              success: function (json) {
              },
              error: function (e) {
                console.log(e)
              }
            })
            return _promise
          } else {
            return null
          }
        }
        //全站畅销容错数据
        function getFaultTolerantInfo(_type){
          var _promise = $.ajax({
            type: 'GET',
            url: "/product/getFaultTolerantInfo?type="+_type,
            success: function (json) {
            },
            error: function (e) {
              console.log(e)
            }
          })
          return _promise
        }
        
        var emarsys_reco_arr = new Array();
        
    
        var userInfoEmail = ROMWE_W.getCookie('userinfo[email]'),
          cart_items = []
        if(typeof userInfoEmail !== 'undefined' && userInfoEmail !== '') {
          ScarabQueue.push(['setEmail',userInfoEmail]);
        }
        // 详情页
        
    
        // 实体分类页跟属性页
        
    
        //支付成功页
        
    
        function doSend() {
          if(typeof emarsys_reco_arr !== 'undefined' && emarsys_reco_arr.length) {
            emarsys_reco_arr.forEach(function(item) {
              ScarabQueue.push(["recommend", {
                  logic: item.logic,
                  containerId: item.container,
                  templateId: item.template,
                  limit: item.limit,
                  success: item.success
              }]);
            })
          }
          ScarabQueue.push(['go']);
        }
        
          if(typeof cart_module !== 'undefined') {
    
            cart_module.cartFn.push(function(json) {
              cart_items = json.info.carts.map(function(item) {
                return {
                  item: item.product.goods_id,
                  price: Number(GB_ga_transformPrice(parseFloat(item.totalPrice.amount))),
                  quantity: parseFloat(item.quantity)
                }
              })
              ScarabQueue.push(['cart',cart_items]);
              doSend()
            })
          } else {
            $.get('/cart/checkcart', function(json){
              cart_items = json.info.carts.map(function(item) {
                return {
                  item: item.product.goods_id,
                  price: Number(GB_ga_transformPrice(parseFloat(item.totalPrice.amount))),
                  quantity: parseFloat(item.quantity)
                }
              })
              ScarabQueue.push(['cart',cart_items]);
              doSend()
            })
          }
        
    
      })()
    
    }
    
    
    
    </script>
    




    



    <script>
        if (ROMWE_W.getQueryString('url_from') && ROMWE_W.getQueryString('url_from').indexOf('admitad')>=0 ) {
            ROMWE_W.setCookie('admitad', 'admitad', 30*24*3600)
        }
        $(function () {
          if (ROMWE_W.getQueryString('url_from') && ROMWE_W.getQueryString('url_from').indexOf('admitad')>=0 || ROMWE_W.getCookie('admitad')) {
            var admitadScript = document.createElement('script')
            admitadScript.setAttribute('src', 'https://www.artfut.com/static/tagtag.min.js?campaign_code=001b226170')
            admitadScript.setAttribute('async', 'true')
            admitadScript.onerror = function () {
              var self = this;
              window.ADMITAD=window.ADMITAD||{},ADMITAD.Helpers=ADMITAD.Helpers||{},ADMITAD.Helpers.generateDomains=function()
              {for(var e=new Date,n=Math.floor(new Date(2020,e.getMonth(),e.getDate()).setUTCHours(0,0,0,0)/1e3),
              t=parseInt(1e12*(Math.sin(n)+1)).toString(30),i=["de"],o=[],a=0;a<i.length;++a)
              o.push({domain:t+"."+i[a],name:t});
              return o},
              ADMITAD.Helpers.findTodaysDomain=function(e){function n(){var o=new XMLHttpRequest,a=i[t].domain,
              D="https://"+a+"/";o.open("HEAD",D,!0),o.onload=function(){setTimeout(e,0,i[t])},
              o.onerror=function(){++t<i.length?setTimeout(n,0):setTimeout(e,0,void 0)},o.send()}var t=0,
              i=ADMITAD.Helpers.generateDomains();n()},window.ADMITAD=window.ADMITAD||{},
              ADMITAD.Helpers.findTodaysDomain(function(e){if(window.ADMITAD.dynamic=e,window.ADMITAD.dynamic)
              {var n=function(){return function(){return self.src?self:""}}(),t=n(),i=(/campaign_code=([^&]+)/.exec(t.src)||[])[1]||"";
              t.parentNode.removeChild(t);var o=document.getElementsByTagName("head")[0],a=document.createElement("script");
              a.src="https://www."+window.ADMITAD.dynamic.domain
              +"/static/"+window.ADMITAD.dynamic.name.slice(1)+
              window.ADMITAD.dynamic.name.slice(0,1)+".min.js?campaign_code="+i,o.appendChild(a)}});
            }
            document.body.appendChild(admitadScript)
          }
        })
      </script>



    
    <!--  俄罗斯平台代码cookie -->
        <script type="text/javascript">
            var AdmitadUid = ROMWE_W.getQueryString('admitad_uid');
            if(AdmitadUid){
              ROMWE_W.delCookie('admitad_uid');
              
            }
        </script>
    <!-- end -->
    



    
<!-- admitad -->




    
<!-- RTB House -->



	<iframe src="//us.creativecdn.com/tags?id=pr_ib3V2sbALgrul45Ungoj" width="1" height="1" scrolling="no" frameborder="0" style="display: none;"></iframe>






</body></html>