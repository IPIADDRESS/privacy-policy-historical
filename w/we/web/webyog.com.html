<!--The following is the downloaded HTML source of the webyog.com privacy policy that was archived on 2012-12-18.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20121218014244id_/http%3A//webyog.com/eula/privacyPolicy) for the most accurate reproduction.-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
        <title>Webyog Privacy Policy for SQLyog and MONyog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="keywords" content="Webyog, SQLyog, MONyog, Privacy, Policy">
<meta name="description" content="Webyog Privacy Policy for SQLyog and MONyog">
        <link rel="icon" href="http://static.webyog.com/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="http://static.webyog.com/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="http://static.webyog.com/min/g=master-css?v=70">
        <link type="text/css" rel="stylesheet" href="http://static.webyog.com//min/f=/css/monyog.css?v=70">        <!--[if IE 7]>
            <link rel="stylesheet" type="text/css" href="http://static.webyog.com/css/ie7.css?version=70" />
        <![endif]-->
        <!--[if IE 8]>
            <link rel="stylesheet" type="text/css" href="http://static.webyog.com/css/ie8.css?version=70" />
        <![endif]-->
        <script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script type="text/javascript" src="http://static.webyog.com/min/f=/js/jquery.1.7.js?v=70"></script>
        <script type="text/javascript" src="http://static.webyog.com/min/f=/js/jquery.cookie.js?v=70"></script>
            </head>
    <body class="wy-body">
        <div class="wy-main-wrapper">
            <div id="wy-header-wrapper">
    <div class="wy-container">
        <div id="wy-logo" class="wy-left">
            <a href="/"><img width="246px" height="65px" src="http://static.webyog.com/images/webyog-logo.png" alt="webyog logo"></a>
        </div>
        <div class="wy-right wy-restrict-width">
            <div>
                <div class="wy-left minicart-section wy-minicart-section">
                    <div class="wy-left wy-font-level-3 minicart-section-inner">
                        <a class="wy-link-color" id="my-minicart">
                            <span class="cm-icons" id="wy-cart-icon"></span>
                            <div class="wy-font-level-3" id="minicart">My cart</div>
                            <div class="wy-font-level-3" id="minicart_count"></div>
                        </a>
                    </div>
                    <span class="wy-img-button" id="tooltip-arrow"></span>
                    <div id="tooltip-content">
                        <table id="minicart-product-list" width="100%" class="wy-font-level-3" cellspacing="10">
                        </table>
                        <div class="wy-clear wy-right"><a id="view-cart" href="#shopping-cart-container" class="cboxElement"><div id="view-cart-span" class="wy-white wy-button wy-center-text wy-checkout-button">View cart</div></a></div>                   </div>
                </div>
                
                <div id="wy-webyog-search">
                    <form action="/webyog/search" id="cse-search-box">

                        <input type="hidden" name="cx" value="004508359561450295238:famli6ynmy0">
                        <input type="hidden" name="cof" value="FORID:10">
                        <input type="hidden" name="ie" value="UTF-8">

            <!--<input type="text" name="q" size="31" />-->

                        <input id="search" type="text" name="q" class="wy-search-box wy-user-actionable wy-right" size="35">
                        <a href="javascript:"><span class="wy-search-box-icon wy-right"></span></a>
                    </form>
                </div>
            </div>
            <div class="wy-link-list wy-right wy-font-level-3">
                <ul id="dropdown-menu">
                    <li>
                        <a id="home" href="/">Home</a>
                    </li>
                    <li class="wy-old-visitors-tab">
                        <a id="products" href="" onclick="return false;">Products</a>
                        <ul>
                            <li><a href="/product/sqlyog">SQLyog</a></li>
                            <li><a href="/product/monyog">MONyog</a></li>
                        </ul>
                    </li>
                    <li>
                        <a id="shop" href="/shop">Shop</a>
                    </li>
                    <li>
                        <a id="downloads" href="/product/downloads">Downloads</a>
                    </li>
                    <li>
                        <a id="community" href="http://forums.webyog.com" target="_blank">Community</a>
                    </li>
                    <li class="zero-right-margin-right-padding">
                        <a id="blog" href="http://blog.webyog.com" target="_blank" class="zero-right-margin-right-padding">Blog</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $(".wy-search-box-icon").click(function(){
            if($("#search").val()==""){

            } else {
                $(this).parents('form').submit();
            }
        });
        $("#wy-webyog-search #search").keydown(function(event) {
            //alert(event.which); return;
            if(event.which==13) {
                if($("#search").val()=="") {
                    return false;
                } else {
                    $("#wy-webyog-search #search").parents('form').submit();
                    e.preventDefault();
                }
            }

        });
    });
</script>
            <div class="wy-content-wrapper">
                <div class="wy-product-logo-wrapper">
    <div class="wy-container wy-white wy-white wy-product-logo-description wy-font-level-1">
        Privacy Policy
    </div>
</div>

<div class="wy-wrapper wy-extra-margins">
    <div class="wy-container wy-inner-page-background">
        <div class="wy-inner-full-container">
            <div class="wy-font-level-2 wy-bold">
                Your privacy is important to us.
            </div>
            
            <div class="wy-font-level-3">
            
            
            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">Webyog Softworks Private Limited is committed to protecting your privacy. Because we collect two types of user information, General Statistical Information and Personal Identifying Information, we are providing you with this policy to inform you of how we use and, in limited circumstances, disclose such information.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Collection, use and disclosure of General Statistical Information</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">When you visit our web site we gather certain general information, such as frequency of downloads, number of hits on our web site, and usage statistics with respect to our software products. This information is referred to throughout this policy as "General Statistical Information". We use and store this data only on a collective basis, in summary form, rather than on an individual basis. This data helps us to determine how and the extent to which certain parts of our web site and software are used. The stored General Statistical Information does not contain any Personal Identifying Information about you or any of our other users.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Collection and use of Personal Identifying Information</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">In addition to collecting General Statistical Information, we may ask you to provide us with certain personal information, such as your name, street address and email address, to enable us to respond to your requests and needs. Information that can reasonably be used to identify you is referred to in this policy as "Personal Identifying Information".</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">For example, if you choose a service or transaction that requires payment, such as making a purchase online or through other means such as a purchase order, we will request Personal Identifying Information necessary for payment, invoicing, and/or shipping.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">In addition, when you purchase a software product, we will also ask for product registration information, which includes the name of the product acquired, as well as your name, street address, and e-mail address. This Personal Identifying Information is kept on file and updated from time to time to fulfill our continuing obligations to you, such as providing notices of new versions and giving support by e-mail.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">When you visit our web pages by clicking on a link in our software and choose to purchase a license, we gather certain Personal Identifying Information to facilitate your purchase and usage statistics to analyze, on a collective basis, how and the extent to which certain parts of the our software is used.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">When you provide us Personal Identifying Information in an e-mail, fax or by telephone such as when you request technical and other types of support, we use the information to locate your records and provide you with answers to your questions.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">Also, when you submit information to us in the context of a technical support inquiry, including sending the error log files, sample data to reproduce the error, Personal Identifying Information may be attached to the information submitted.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">Please note that you should be aware that the transmitting of the error logs or sample data or other attachments may include confidential information which should be removed prior to the transmittal as we do not accept responsibility for the inadvertent subsequent disclosure of such confidential information. When you ask to be placed on one of our mailing lists, we will use your e-mail address to send you messages relevant to that list.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Disclosure of Personal Identifying Information</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">We may disclose your Personal Identifying Information to appropriate third parties to process transactions you initiate, including shipping products to you and invoicing for purchases made. Examples of such third parties are our order processing and fulfillment service providers and credit card processing companies. We may also disclose your Personal Identifying Information to third parties if we are required to do so by law, or if we believe that such action is necessary to:</p>
            
            <ol class="wy-really-small-top-margin wy-default-left-right-margin wy-visible">
                <li>Comply with legal processes such as a search warrant, subpoena, or court order;</li>
                <li>Protect our rights and property; or </li>
                <li>Protect against misuse or unauthorized use of our web site and/or our software products.</li>
            </ol>
            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">We never loan, rent or sell your Personal Identifying Information to others.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Cookies</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">We may set and access cookies on your computer. A cookie is a small amount of data that is sent to your browser from a Web server and stored on your computer's hard drive. We use cookies in a limited way to track usage on our site. We gather information about site use by our visitors through cookie technology on an anonymous basis and analyze it at an aggregate level only. This enables us to continually improve our website to meet the needs of our users.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">In addition, we may use temporary session cookies to track your progress through our order processing system, keeping track of information such as the contents of your shopping cart and address. These session cookies only exist for the duration of your browser session.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Third party web sites</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">The Webyog web site may contain links to third-party web sites over which we have no control or responsibility regarding content, privacy policies, or practices. We suggest that you review the privacy policy applicable to any third party site that you visit. This privacy policy applies only to our own web site at www.webyog.com . Please note that all on-line and telephone credit card orders for our software products may be processed by a third party.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Web site security</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">Our web site utilizes industry standard security technology to protect the security, integrity, and privacy of Personal Identifying Information from unauthorized third-party access. The Personal Identifying Information resides behind a firewall with access restricted to authorized Webyog employees and their agents.</p>

            <div class="wy-top-margin wy-font-level-2 wy-bold">Changes to the Webyog privacy policy</div>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">Webyog may amend this policy at any time by posting the amended terms on our web site. All amended terms will be automatically effective without further notice, 10 days after they are first posted.</p>

            <p class="wy-really-small-top-margin wy-really-small-bottom-margin">If you have further questions, please send a mail to <a href="mailto:support@webyog.com">support@webyog.com</a></p>
            </div>
        </div>
    </div>
</div>
            </div>
            <div id="olark-data"><a class="olark-key" id="olark-5962-702-10-7739" title="Powered by Olark" href="http://olark.com/about" rel="nofollow">Powered by Olark</a></div>

<div id="wy-footer-wrapper" class="wy-wrapper">
    <div class="wy-container wy-font-level-4 wy-top-margin">
        <div class="wy-left">
            Contact Sales: <a href="mailto:sales@webyog.com">sales@webyog.com</a>, +1 408-600-0544 (US), +44 20-81-23-1250 (EU and UK)
        </div>
        <div class="wy-right">
            <a href="/webyog/aboutUs">About us</a>&nbsp;|&nbsp;<a href="/customer">Customer Area</a>&nbsp;|&nbsp;<a href="/eula">EULA</a>
        </div>
    </div>
    <div class="wy-container wy-font-level-4 wy-really-small-top-margin wy-bottom-margin">
        <blockquote>
            <div class="wy-left">
                GUI, Front End, Admin, Visual Designer, Monitoring, Performance Tuning Tools for MySQL
            </div>
            <div class="wy-right">
                <a href="/webyog/resellers">Resellers</a>&nbsp;|&nbsp;<a href="/eula/privacyPolicy">Privacy Policy</a>&nbsp;|&nbsp;<a href="/webyog/careers">Careers</a>
            </div>
        </blockquote>
    </div>
</div>

<div id="shopping-cart-container" style="display:none">
            <div class="wy-product-download-tab wy-inner-inner-tab">
            <div id="shopping-cart-header-bar" class="wy-product-download-label wy-font-level-3 wy-white">
                <div class="wy-default-left-right-padding">
                    <span class="cm-icons" id="circle1-icon">&nbsp;</span>
                    <span class="wy-product-download-label-text">
                        Choose upgrades
                    </span>
                </div>
            </div>
        </div>
        <div id="shopping-form" class="wy-product-download-tab wy-top-margin" style="display:none; ">
            <div>
                <div class="multiyear-block">
                    <div class="wy-bottom-margin multiyear-text">
                        <span class="wy-img-button feature-present"></span>
                        Product added to the cart. Choose next year upgrades now and save!
                    </div>
                    <ul class="purchase-type">
                        <li>
                            <input type="radio" name="upgrade" value="1">
                            Major and minor upgrades for 1 year (included with your purchase)
                        </li>
                        <li>
                            <input type="radio" name="upgrade" value="2">
                            Major and minor upgrades for 2 years <span class="wy-bold">[add $<span id="2yearPurchaseAmount"></span> and save 25%]</span>
                        </li>
                        <li id="life-multiyear">
                            <input type="radio" name="upgrade" value="3">
                            Major and minor upgrades for 5 years <span class="wy-bold">[add $<span id="lifePurchaseAmount"></span> and save 60%]</span>
                        </li>
                    </ul>
                </div>
                <div class="cart-block">
                    <ul>
                        <li id="productnameblock">
                            <span class="item-added-name"></span>
                        </li>
                        <li>
                            <span id="cart-subtotal-block">
                                <span class="total-text">Subtotal</span>
                                &nbsp;
                                <span class="wy-bold wy-usd-size">$</span><span class="total-value">ok</span>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="wy-clear wy-right wy-top-margin wy-bottom-margin cart-buttons-block">
                <input id="continue_button" class="wy-button wy-font-level-3" type="button" value="Continue shopping">
                <input id="proceed_checkout_button" class="wy-button wy-font-level-3 wy-green" type="button" value="Proceed to checkout">
            </div>
        </div>
    
    <div id="checkout-header-bar" class="wy-clear wy-product-download-tab wy-grey-force wy-inner-inner-tab wy-white">
        <div class="wy-product-download-label wy-font-level-3">
            <div class="wy-default-left-right-padding">
                <span class="cm-icons" id="circle2-icon">&nbsp;</span>
                <span class="wy-product-download-label-text">
                    Review order and checkout
                </span>
            </div>
        </div>
    </div>
    <div id="checkout-form" class="wy-product-download-tab wy-default-left-right-padding wy-bottom-margin">
        <div id="finalShoppingCart"></div>
        <div id="emptyShoppingCart">
            <table width="95%" class="wy-default-left-right-padding wy-font-level-3 wy-top-margin">
                <tbody><tr>
                    <td align="center">
                        <div style="line-height: 50px;" class="wy-font-level-1">Your cart is empty</div>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <div class="wy-font-level-3 wy-top-margin" style="width:250px;">
                            <input id="emptyCartButton" type="button" class="wy-button wy-font-level-3" value="Continue shopping">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div id="emptycartmsg" style="display:none;">
                            <a href="/shop">click here</a>
                        </div>
                    </td>
                </tr>
            </tbody></table>
        </div>
        <table cellpadding="0" cellspacing="0" id="checkout-customer-info" style="display:none;" width="920px" class="wy-default-left-right-padding wy-font-level-3">
            <tbody><tr>
                <td width="20%">Registered to <span class="wy-font-level-5 wy-red">(required)</span></td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="reg_name" name="regname" maxlength="100" value="">
                </td>
                <td>
                    <span id="regname_error" class="wy-red wy-clear"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="wy-clear wy-font-level-4 wy-multiyear-text" style="width:425px; margin-top:0px;">
                        Your name or organization's name.
                    </div>
                </td>
            </tr>
            <tr>
                <td>Coupon code if any</td>
            </tr>
            <tr>
                <td class="cm-cart-row">
                    <div id="coupon-code-block" class="cm-cart-row wy-small-bottom-margin">
                        <input type="text" id="coupon_code" name="coupon_code" value="">
                        <input type="button" id="discount-check" value="Apply code">
                    </div>
                </td>

                <td class="cm-cart-row">
                    <div class="cm-cart-row wy-small-bottom-margin wy-middle wy-really-small-negative-top-margin">
                        <span id="invalid-coupon" class="form-error wy-clear wy-red"><span class="wy-img-text">&nbsp;</span><span class="wy-img-button"></span></span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td align="right">
                    <input type="button" id="checkoutButton" value="Checkout" class="wy-button wy-font-level-3 wy-green wy-small-top-margin">
                </td>
            </tr>
        </tbody></table>
    </div>
    <div id="product-form-block">
            </div>

</div>

<script type="text/javascript">
    /*
     *  Global variables that I intend to use.
     */
    //Cart holds the shopping cart as a JS object.
    //I read its value from the cookie.
    //I need its value to be initialized when read the cart.
    //I need its value to be synchronized to what is there in the cart.
    var cart="";

    var issave = 1;

    /*
     *  These are global variables. They are used to store details. The details
     *  are of the product currently shown in step 1. These details are used in
     *  to decide what is to be shown to the user and in the call to saveFormData.
     */
    var productName = "";
    var productId = -1;
    var productPrice = -1;
    var productOriginalPrice = -1;
    var productQuantity = 0;
    var productMultiyear = 1;
    var purchaseType = "new";
    var cartEdit = 0;
    var regName = null;
    var animateTotal = false;
    var optionShown = -1;
    var shoppingCartShown = false;

    //JScrollPane related global variables
    var api = null;
    var percentScrolledY = 0;
    


    /**
     *  I want to write a function that refreshes the cart based global variables
     *
     *  Logic:
     *
     *  1. Refresh the global variables using the cart item at  @index.
     *
     *  Parameters:
     *
     *  @index: The index of the cart item to reflect in the global variables.
     *
     *  Preconditions:
     *
     *  None
     *
     *  Postconditions:
     *
     *  None
     *
     *  Returns:
     *
     *  Nothing
     *
     */
    function refreshGlobalVariables(index){
        cart = JSON.parse($.cookie('shopping_cart'));

        productName = cart[index].item_name;
        productId = cart[index].item_number;
        productPrice = cart[index].amount;
        productOriginalPrice = cart[index].productOriginalPrice;
        productQuantity = cart[index].quantity;
        productMultiyear = cart[index].productMultiyear;
        purchaseType = cart[index].purchaseType;

    }

    /*
     *  This function has the logic to hide or show the 5 year multiyear option.
     *  The 5 year multiyear option should be shown only for the the single and
     *  5 User versions of SQLyog.
     *
     *  Preconditions:
     *
     *
     *
     *  Postconditions:
     *
     *  1. The life-mutiyear option is either shown or hidden
     *
     *  Returns:
     *
     *  Nothing.
     *
     */
    function showMultiyearOption(productName) {
        var pattern1=/SQLyog (.*) - Single/;
        var pattern2=/SQLyog (.*) - 5 User/;


        if((pattern1.test(productName)) || (pattern2.test(productName))) {
            $('#life-multiyear').show();
        } else {
            $('#life-multiyear').hide();
        }
    }

    /*
     *  A function that fetches the applicable discount for this coupon code for
     *  the items in formdata. It makes an ajax call to the server, and that call
     *  returns the discount details as a JSON.
     *
     *  These details are stored in the 'discount' cookie .
     *
     *  Parameters:
     *
     *  @code:  the discount coupon code to validate against the database
     *  @formData: the shopping cart as a form, to validate
     *
     *  PreCondition: None
     *
     *  PostCondition: The discount cookie is set in case of successful
     *  completion, and nothing otherwise.
     *
     *  Returns: Nothing
     */
    function calculateDiscount(code, formData) {
        $("#invalid-coupon").hide();
        if(code=='') {
            $("#invalid-coupon").html("<span class='wy-img-text wy-red'>You haven't entered a coupon code</span><span class='wy-img-button'></span>");
            $("#invalid-coupon").show();
            return;
        }
        $.post("/shoppingcart/getDiscount",
        {
            couponCode:code,
            formdata: formData
        },
        function(data) {
            if(data){
                if(parseInt(data)==-1){
                    $.cookie('discount',null, {path: "/"});
                    showOption(2,false);
                    getMiniCart();
                    getShoppingCart();
                    $("#invalid-coupon").html("<span class='wy-img-text wy-red'>This coupon cannot be applied on this product</span><span class='wy-img-button'></span>");
                    $("#invalid-coupon").show();
                } else {
                    $("#coupon_code").val('');
                    $.cookie("discount",data,{path: "/", expires:7});

                    showOption(2,false);
                    getMiniCart();
                    getShoppingCart();

                    animateTotal=true;

                    var totalWithoutDiscount = parseFloat($("#total-without-discount").html().substring(1));
                    var finalTotal = parseFloat($("#final-total").html());
                    var finalTotalFloor = Math.floor(finalTotal);
                    animateAmount2($("#final-total"), totalWithoutDiscount, finalTotalFloor,function(){$("#final-total").html(finalTotal)} );

                    animateTotal=false;
                }
                
            }
            else {
                $.cookie('discount',null, {path: "/"});
                showOption(2,false);
                getMiniCart();
                getShoppingCart();
                $("#invalid-coupon").html("<span class='wy-img-text wy-red'>Invalid coupon code</span><span class='wy-img-button'></span>");
                $("#invalid-coupon").show();

            }
        });
    }

    /*
     *  Animates the the total value span from startAmount to endAmount
     *
     *  Parameters:
     *
     *  @startAmount: The amount to start the animation.
     *  @endAmount: The amount at which the animation stops.
     *
     *  Logic:
     *
     *
     *
     *  Preconditions:
     *
     *  None
     *
     *  Postconditions:
     *
     *  1. The total-value span has the value endAmount.
     *
     *  Returns:
     *
     *  Nothing
     *
     */
    function animateAmount2(counterx,startAmount, endAmount, callback) {

        if(animateTotal == false) {
            return false;
        }
        if(typeof(id)!='undefined'){
            clearInterval(id);
        }
        var
        i = startAmount,
        n = endAmount,
        dur = 1000, // 1 second
        intr = 100,
        s = Math.round(Math.abs(n-i) / (dur / intr));


        if(i<n){

            id = setInterval(function() {

                counterx.html((i += s));
                if (i >= n) {
                    clearInterval(id);
                    counterx.html(n);
                    if(callback!=null){
                        callback();
                    }
                }
            }, intr);

        }else if(i>n){
            id = setInterval(function() {

                counterx.html((i -= s));
                if (i < n) {
                    clearInterval(id);
                    counterx.html(n);
                    if(callback!=null){
                        callback();
                    }
                }
            }, intr);

        }

    }

    /*
     *  A function that gets the shopping cart into the popup from the cookie.
     *
     *  Logic:
     *
     *
     *
     *  Parameters:
     *
     *  None
     *
     *  Preconditions:
     *
     *
     *  Postconditions:
     *
     *  None
     *
     *
     */
    function getShoppingCart() {
        $("#checkout-customer-info").hide();


        if($.cookie('shopping_cart')!=null){
            cart=JSON.parse($.cookie("shopping_cart"));
            
            html ='<b><table cellspacing=\'0\' cellpadding=\'0\' width=\'920px\' class=\'wy-default-left-right-padding wy-font-level-3 checkout-product-list wy-really-small-top-margin\'>'
                +'<tr>'
                +'<td class=\'cm-cart-row\' width=\'62%\'>Product Name</td>'
                +'<td class=\'cm-cart-row\' width=\'10%\' align=\'right\'>Qty</td>'
                +'<td class=\'cm-cart-row\' width=\'10%\' align=\'right\'>Cost</td>'
                +'<td class=\'cm-cart-row\' width=\'9%\' align=\'right\'>&nbsp;</td>'
                +'<td class=\'cm-cart-row\' width=\'9%\' align=\'right\'>&nbsp;</td>'
                +'</tr>'
                +'</table></b><div id="checkout-product-div"><table cellspacing=\'0\' cellpadding=\'0\' width=\'920px\' class=\'wy-default-left-right-padding wy-font-level-3 checkout-product-list\'>';


            var discountInfo=JSON.parse($.cookie("discount"));
            var discount = 0;
            var total = 0;
            var payable = 0;


            for(i=0;i<cart.length;i++){
                var itemTotal = (cart[i].quantity * cart[i].amount);
                html+="<tr>"
                    +"<td width='62%' class=\'cm-cart-row\'>" + cart[i].item_name + "<br /><span class='wy-clear wy-font-level-5 wy-multiyear-text'>(" + getMultiyearText(cart[i].productMultiyear, cart[i].purchaseType) + ")</span></td>"
                    +"<td width='10%' class='cm-cart-row' valign='middle' align='right'>"
                    +"<table id='qty-table' style='border:0px solid red;' cellspacing='0' cellpadding='0'>"
                    +"<tr>"
                    +"<td rowspan=2 style='border: 0px !important'>"
                    +"<input type='text' class='p_quantity' readonly='readonly' id='p_quantity_" + i + "' value='" + cart[i].quantity + "'>"
                    +"</td>"
                    +"<td>"
                    +"<a href='javascript:increaseQty(\"p_quantity_" + i + "\")'><span class='card-icons increase-quantity-button"
                    +((cart[i].purchaseType=="upgrade") ? "-grey" : "")
                    +"'></span></a>"
                    +"</td>"
                    +"</tr>"
                    +"<tr>"
                    +"<td>"
                    +"<a href='javascript:decreaseQty(\"p_quantity_" + i + "\")'><span class='card-icons decrease-quantity-button"
                    +(((cart[i].quantity ==1)  || (cart[i].purchaseType=="upgrade")) ? "-grey" : "")
                    +"'></span></a>"
                    +"</td>"
                    +"</tr>"
                    +"</table>"
                    + "<td width='10%'align='right' class='cm-cart-row'>$" + itemTotal + "</td>"
                    + "<td width='9%' align='center' class='cm-cart-row'><a href='javascript:void(0)' onclick=editCartProduct('" + i + "') class='cm-icons edit-icon'>&nbsp;</a></td>"
                    + "<td width='9%' align='center' class='cm-cart-row'><a href='javascript:void(0)' onclick=deteleCartProduct('" + i + "') class='wy-img-button product-delete-button'>&nbsp;</a></td>"
                    + "</tr>";
                total += cart[i].quantity * cart[i].amount;
            }
            html+= "</table></div></table><table cellspacing=\'0\' cellpadding=\'0\' width=\'920px\' class=\'wy-default-left-right-padding wy-font-level-3\'>";

            if ( discountInfo!=undefined && discountInfo!=null && discountInfo.value!=undefined && discountInfo.type!=undefined) {
                if (discountInfo.type == 'discount_rate') {
                    discount = (total * discountInfo.value) / 100;
                } else if (discountInfo.type == 'discount_amount') {
                    discount = 1.0* discountInfo.value;
                }
            }

            payable = total-discount;

            html+="<tr>"
                +"<td width='62%' align='right'>&nbsp;</td>"
                +"<td width='10%' align='right'>&nbsp;</td>"
                +"<td width='10%' align='right'>"
                +(discount!=0 ? "<span id='total-without-discount' class='wy-strikethrough wy-grey-text wy-font-level-5'>$"+total+"</span>" : "&nbsp;")
                +"</td>"
                +"<td width='9%' >&nbsp;</td>"
                +"<td width='9%' >&nbsp;</td>"
                +"</tr>";

            html+="<tr>"
                +"<td width='62%' align='right'></td>"
                +"<td width='10%' align='right'>Cart Total</td>"
                +"<td width='10%' align='right'>"
                +"$<span id='final-total' class='wy-bold'>"
                + payable + "</span></td>"
                +"<td width='9%' >&nbsp;</td>"
                +"<td width='9%' >&nbsp;</td>"
                +"</tr>"
                +"</table>";

            html+= "<form id='checkoutForm' action='/shoppingcart/processCart' method='post'>"
                + ((discount!=0)
                ? (discountInfo.tag + "<input type='hidden' id='coupon' name='coupon' value='" + discountInfo.code+"'>"
            //                        + "<input type='hidden' id='tax_cart' name='tax_cart' value='0.00'>"
        )
            : "")
                +"<input type='hidden' id='regname' name='regname' value=''>";

            for(i=0;i<cart.length;i++){
                html += "<input type='hidden' id='product_name_"  + i + "' name='product_name[]' value='" + cart[i].item_name + "'>";
                html+="<input type='hidden' id='product_quantity_" + i + "' name='product_quantity[]' value='" + cart[i].quantity + "'>";
                html+="<input type='hidden' id='product_price_" + i + "' name='product_price[]' value='" + cart[i].amount + "'>";
                html+="<input type='hidden' id='product_id_" + i + "' name='product_id[]' value='" + cart[i].item_number + "'>";
                html+="<input type='hidden' id='product_multiyear_" + i + "' name='product_multiyear[]' value='" + cart[i].productMultiyear + "'>";
                html+="<input type='hidden' id='product_multiyear_" + i + "' name='purchase_type[]' value='" + cart[i].purchaseType + "'>";
            }

            html+="</form>";
            $("#finalShoppingCart").html(html);

            if((typeof(cart)!= 'undefined') && (cart!=null) && cart.length > 0) {
                /*
                 *  When recreating the cart, don't reinitialize regname.
                 */
                initializeRegName();
                displayRegName();
                
                var element = $('#checkout-product-div').jScrollPane();
                api = element.data('jsp');
                $("#checkout-customer-info").show();
            }

            $("#regname_error,#invalid-coupon").hide();
            $("#coupon_code").val("");

            if(discount!=0){
                $("#invalid-coupon").show(0).html("<span class='wy-img-button feature-present'></span><span class='wy-img-text wy-green-text'>Great! You saved&nbsp;"
                    +"$" + discount + "</span>");
                $("#coupon_code").val(discountInfo.code);
            }
            if(api!=null){
                api.scrollToPercentY(percentScrolledY);
                percentScrolledY=0;
            }
            

        } else {
            showOption(-1,false);
            return;
        }
        
    }

    /*
     *  A function that deletes the current item at index 'index' from the shopping
     *  cart.
     *
     *  Logic:
     *
     *
     *
     *  Parameters:
     *
     *  None
     *
     *  Preconditions:
     *
     *  None
     *
     *  Postconditions:
     *
     *  None
     *
     *
     */
    function deteleCartProduct(index) {
        //$products = $session->get('updateCart');
        $.cookie("discount",null, {path: "/"});
        cart=JSON.parse($.cookie("shopping_cart"));
        var tempProducts= new Array();
        for (i = 0,j=0; i < cart.length; i++) {
            if (i != index) {
                tempProducts[j++]= cart[i];
            }
        }
        if(tempProducts.length==0){
            $.cookie("shopping_cart",null,{path: '/', expires: 7});
        }
        else{
            $.cookie("shopping_cart",  JSON.stringify(tempProducts),{path: '/', expires: 7});
        }
        cart=JSON.parse($.cookie('shopping_cart'));
        $("#finalShoppingCart").html('');
        showOption(2,false);
        getMiniCart();
        getShoppingCart();



    }



    /*
     *  A function that does all the GUI work of showing
     *  options 1 and 2.
     *
     *  Logic:
     *
     *
     *
     *  Parameters:
     *
     *  @which
     *
     *  Preconditions:
     *
     *  None
     *
     *  Postconditons:
     *
     *  None
     *
     *  Returns:
     *
     *  Nothing
     */
    function showOption(which,slideDown){
        if(which==1){
            /*
             *  If the first option is to be displayed
             */

            optionShown = 1;
            $("#emptyShoppingCart").stop(false,true).hide(0);
            $("#finalShoppingCart").stop(false,true).show(0);
            $('#shopping-form').stop(false,true).hide(0);
            $('#shopping-cart-header-bar').stop(false,true).show(0);
            $('#checkout-header-bar').stop(false,true).show(0);
            $('#checkout-customer-info').stop(false,true).hide(0);
            $('#checkout-form').stop(false,true).hide(0);

            $('#shopping-form').slideDown('slow');
            $('#shopping-cart-header-bar').css('background-color','#1D75D6');
            $('#shopping-cart-header-bar').removeClass('wy-grey-force');
            $('#shopping-cart-header-bar').find('span').addClass('wy-white');
            $('#checkout-header-bar').addClass('wy-grey-force');
            $('#checkout-header-bar').removeClass("wy-white").find('span').removeClass("wy-white");
            $('#edit-icon').removeClass('change-edit-icon');
            $('#checkout-header-bar').addClass('wy-top-margin');
            $('#checkout-form').hide(0);

            $('#productnameblock').html(productName);
            showMultiyearOption($('#productnameblock').html());

            var lifeOptionShown = !($("#life-multiyear").is(":hidden"));

            setColorboxDimensions(which, lifeOptionShown, 0, false);
        }else if (which==2){
            $("#emptyShoppingCart").stop(false,true).hide(0);
            $("#finalShoppingCart").stop(false,true).show(0);
            $('#shopping-form').stop(false,true).hide(0);
            $('#shopping-cart-header-bar').stop(false,true).show(0);
            $('#checkout-header-bar').stop(false,true).show(0);
            $('#checkout-customer-info').stop(false,true).hide(0);
            $('#checkout-form').stop(false,true).hide(0);


            $("#checkout-customer-info").hide();
            $('#shopping-form').hide(0);
            $('#shopping-cart-header-bar').addClass('wy-grey-force');
            $('#shopping-cart-header-bar').find('span').removeClass('wy-white');
            $('#shopping-cart-header-bar').removeClass('wy-white');
            $('#checkout-header-bar').removeClass('wy-grey-force');
            $('#checkout-header-bar').addClass('wy-white');
            $('#edit-icon').addClass('change-edit-icon');
            $('#checkout-header-bar').removeClass('wy-top-margin')
            .addClass("wy-white").find('span').addClass("wy-white");
            $("#checkout-customer-info").hide();
            if(slideDown)
                $('#checkout-form').slideDown('slow');
            else
                $('#checkout-form').stop(false,true).show(0);

            cart= $.cookie('shopping_cart');
            
            cart= JSON.parse(cart);
            if(cart!=null){

                var discountApplicable = ($.cookie('discount')!=null);
                var numberOfProducts = cart.length;

                setColorboxDimensions(which, false, numberOfProducts , discountApplicable);
            }
        }else if(which==-1){
            $("#emptyShoppingCart").show();
            $("#finalShoppingCart").hide();
            $('#shopping-form').hide();
            $('#shopping-cart-header-bar').hide();
            $('#checkout-header-bar').hide();
            $('#checkout-customer-info').hide();
            //            colorboxTimer = window.setTimeout(function(){
            //                $.colorbox.close();
            //            },2000);
            setColorboxDimensions(which, false, 0, false);
        }
    }

    /*
     *  A function that opens the element at index 'index' for editing.
     *
     *  Logic:
     *
     *
     *
     *  Parameters:
     *
     *  @which
     *
     *  Preconditions:
     *
     *  None
     *
     *  Postconditons:
     *
     *  None
     *
     *  Returns:
     *
     *  Nothing
     */
    function editCartProduct(index) {
        //$products = $session->get('updateCart');
        cart=JSON.parse($.cookie("shopping_cart"));

        productName = cart[index].item_name;
        productId = cart[index].item_number;
        productPrice = cart[index].amount;
        productOriginalPrice = cart[index].productOriginalPrice;
        productQuantity = cart[index].quantity;
        productMultiyear = cart[index].productMultiyear;
        purchaseType = cart[index].purchaseType;
        cartEdit=1;

        $.cookie("edit_cart_index",index , {path: "/", expires: 7});


        var year2PurchaseAmount = Math.floor(parseFloat(productOriginalPrice*0.5));
        //console.log(year2PurchaseAmount);
        $('#2yearPurchaseAmount').html(year2PurchaseAmount);
        //console.log($('#2yearPurchaseAmount').html());
        $('#lifePurchaseAmount').html(parseFloat(productOriginalPrice));
        //console.log($('#lifePurchaseAmount').html());

        $('input:radio[name=upgrade]')[productMultiyear-1].checked = true;
        productOriginalPrice = parseFloat(productOriginalPrice);


        $('.total-value').html(productOriginalPrice);

        animateTotal = false;
        fireSelect(productMultiyear);

        //productName global varibale is set here.
        showOption(1, false);


        $("#finalShoppingCart").html('');
        getMiniCart();
        getShoppingCart();
    }




    /*
     *  I want to parameterize saveFormData
     *
     *  Parameters:
     *
     *
     *
     */
    function saveFormData1(
    productName,
    productId,
    productPrice,
    productOriginalPrice,
    productQuantity,
    productMultiyear,
    purchaseType,
    cartEdit) {
        $.post("/shoppingcart/saveCart",
        {
            item_name: productName,
            item_number: productId,
            amount: productPrice,
            productOriginalPrice: productOriginalPrice,
            quantity: productQuantity,
            productMultiyear: productMultiyear,
            purchaseType: purchaseType,
            cartEdit: cartEdit

        },
        function(data) {
            //console.log($.cookie("shopping_cart"));
            cart=JSON.parse($.cookie("shopping_cart"));
            //                console.log(cart);
            if(data==0) {
                alert('saving cart failed');
            } else if(data == '-101') {
                //alert(data);
                window.location.replace('/shoppingcart/payment_type_error');
            }
        });
    }


    /*
     *  I intend this version to do whatever the Server Side version used to do.
     *
     *  LOGIC:
     *
     *  i) Read the shopping cart Cookie.
     *  ii) If the cookie is not empty, set the cart variable to the object it
     *  represents.
     *  iii) Else, set the cart variable to the an empty array.
     *
     *  iv) If there are items in the cart variable.
     *          1.  If the purchase type of the new product is not the same are that of
     *              the items in the cart:
     *                  a. Remove the items in the cart variable.
     *                  b. Delete the discount cookie. The item is which it was applicable on
     *                  is now certainly gone.
     *                  c. Add the new item to the cart.
     *              Else:
     *                  a. For each item in the cart:
     *                      1. If the item number of the current item in the cart
     *                      matches the item number of the new cart item:
     *                          a. Set duplicate product to true.
     *                          b. If cartEdit is set to false:
     *                              1. Increase the quantity of the element by 1.
     *                          c. Set productOriginialPrice, productMultiyear and
     *                              amount to that of the new cart item.
     *                  b. If dulicateProduct is still false:
     *                      1.  Add the new cart item to the cart variable.
     *      Else:
     *          1. Delete the discount cookie. Whatever item it was applicable on is
     *          now certainly gone.
     *          2. Add the new cart item to the cart variable.
     *
     * v) Set the shopping cart cookie to reflect the contents of the cart variable.
     * vi) Return.
     *
     *
     *  Preconditions:
     *
     *
     *  Postconditions:
     *
     *  1) The global variable cart contains the shopping cart as a JS object.
     *  2) The 'shopping_cart' cookie contains the shopping cart as a JSON.
     *  3) The 'discount' cookie has been contains the correct discount to be
     *  applied to this cart.
     */
    function saveFormData(
    item_name,
    item_number,
    amount,
    productOriginalPrice,
    quantity,
    productMultiyear,
    purchaseType,
    cartEdit) {

        //Error checking
        if(

        (   typeof(item_name)=='undefined'
            ||typeof(item_number)=='undefined'
            ||typeof(amount)=='undefined'
            ||typeof(productOriginalPrice)=='undefined'
            ||typeof(quantity )== 'undefined'
            ||typeof(productMultiyear)=='undefined'
            ||typeof(purchaseType)=='undefined'
            ||typeof(cartEdit)=='undefined')

            ||

            ( item_name===null
            ||item_number===null
            ||amount===null
            ||productOriginalPrice===null
            ||productMultiyear===null
            ||quantity === null
            ||purchaseType===null
            ||cartEdit===null))
        {
            //This should not happen. Go to the error page.
            //            console.log (item_name+","+
            //                item_number+ ","+
            //                amount+ ","+
            //                productOriginalPrice+ ","+
            //                quantity + ","+
            //                purchaseType+ ","+
            //                productMultiyear + "," +
            //                cartEdit);

        }

        var cartCookie = $.cookie('shopping_cart');
        if(typeof(cartCookie)=='undefined' || cartCookie==null){
            cartCookie=null;
        }
        if (cartCookie==null) {
            cart = new Array();
        } else {
            cart= JSON.parse(cartCookie);
        }


        var newCartItem = new Object();

        newCartItem.item_name= item_name;
        newCartItem.item_number= item_number;
        newCartItem.amount= amount;
        newCartItem.productOriginalPrice= productOriginalPrice;
        newCartItem.quantity= quantity;
        newCartItem.productMultiyear= productMultiyear;
        newCartItem.purchaseType= purchaseType;

        var duplicateProduct = new Boolean();
        duplicateProduct = false;

        if (cart.length > 0) {
            $.cookie('discount',null, {path: "/"});
            var cartPurchaseType = cart[0]['purchaseType'];
            if (purchaseType != cartPurchaseType) {
                $.cookie('discount',null, {path: "/"});
                $.cookie("edit_cart_index",0, {path: "/"});
                cart = new Array(newCartItem);
            } else {
                for (i = 0; i < cart.length; i++) {
                    if (cart[i].item_number == item_number) {
                        $.cookie("edit_cart_index",i , {path: "/"});
                        duplicateProduct = true;
                        if (cartEdit == false && (cartPurchaseType=='new')) {
                            cart[i].quantity = parseInt(cart[i].quantity) + 1;
                        }
                        cart[i].productMultiyear = productMultiyear;
                        cart[i].amount = amount;
                        cart[i].productOriginalPrice = productOriginalPrice;
                    }
                }
                if (!duplicateProduct) {
                    $.cookie('discount',null, {path: "/"});
                    $.cookie("edit_cart_index", cart.length , {path: "/"});
                    cart=cart.concat(new Array(newCartItem));
                }
            }
        } else {
            $.cookie('discount',null, {path: "/"});
            $.cookie("edit_cart_index",0, {path: "/"});
            cart = new Array(newCartItem);
        }

        $.cookie('shopping_cart', JSON.stringify(cart), {path: "/", expires: 7});
    }

    /*
     *  This function updates quantity of the cart item at index 'index' with
     *  value 'value'.
     *
     *  Logic:
     *
     *  1. Read the cart contents from the shopping cart cookie.
     *  2. If the cart type is not upgrade:
     *      a.  Set the percentScrolledY global variable with the percent the
     *          checkout product div has been scrolled.
     *      b.  For i = 0 to (cart.length - 1):
     *          i.  if (i == @index)
     *              1.  Set quantity of the item at index @index in the cart variable
     *                  to @value.
     *      c.  Set the shopping_cart cookie to the contents of the cart variable.
     *      d.  Read back the contents of the cart cookie into the cart variable.
     *      e.  Delete the discount cookie.
     *      f.  Clear the contents of the finalShoppingCart div.
     *      g.  Call getMiniCart to repopulate the minicart from the cookie.
     *      h.  Call getShoppingCart to repopulate the shopping cart from the cookie.
     *
     *
     *  Parameters:
     *
     *  @index: The index of the cart item to update.
     *  @value: The quantity of the the cart item at that index.
     *
     *  Preconditions:
     *
     *  1. The cart variable should contain exactly the contents of the shopping
     *  cart cookie.
     *
     *  Postconditions:
     *
     *  1. The shopping cart cookie contains the final shopping cart.
     *  2. The cart variable also contains the final shopping cart.
     *
     */
    function UpdateCartData(index, value) {
       
        cart = JSON.parse($.cookie("shopping_cart"));
        var i=0;
        var j=0;
        
        if(cart[index].purchaseType!='upgrade'){
            percentScrolledY = api.getPercentScrolledY();

            for (i = 0,j=0; i < cart.length; i++) {
                if (i == index) {
                    cart[i].quantity=value;
                }
            }

            $.cookie('shopping_cart',  JSON.stringify(cart),{path: '/', expires: 7});
                
            cart=JSON.parse($.cookie("shopping_cart"));
            $("#finalShoppingCart").html('');

            $.cookie('discount',null,{path: "/"});

            getMiniCart();
            getShoppingCart();
        }
    }

    /*
     *  This function is called to increment the quantity of a cart item.
     *
     *  Logic:
     *
     *  1.  Split @id into a string array based on _ and store in a local
     *      variable called @substr.
     *  2.  Create a local variable @index which contains the substring at index
     *      2 in @substr.
     *  3.  Create a local variable @qty and assign it the int value of the HTML
     *      element with id @id, plus 1.
     *  4.  Call updateCartData(@index,@value)
     *
     *  Parameters:
     *
     *  @id:    A string - the id of an html element. This element should contain the
     *          quantity of a cart item. @id will be of the form:
     *
     *                  p_quantity_<index>
     *
     *          where index is the quantity of the cart item this it holds.
     *  
     *  Preconditions:
     *
     *  1.  The element with the id specified should contain the quantity of the
     *      item in the cart.
     *
     *  
     *  Postconditions:
     *
     *  1.  The cart should have the corresponding item's quantity increased.
     *
     *  Returns:
     *
     *  Nothing
     *
     */
    function increaseQty(id) {
        var substr = id.split('_');
        var index = substr[2];
        var qty = (parseInt($('#'+id).val()) + 1);
        UpdateCartData(index, qty);
    }

    /*
     *  This function is called to decrement the quantity of a cart item.
     *
     *  Logic:
     *
     *  1.  Split @id into a string array based on _ and store in a local
     *      variable called @substr.
     *  2.  Create a local variable @index which contains the substring at index
     *      2 in @substr.
     *  3.  If the int value of the HTML element with id @id is not equal to 1:
     *      a.  Create a local variable @qty and assign it the int value of the
     *          HTML element with id @id, minus 1.
     *      b.  Call updateCartData(@index,@value)
     *
     *  Parameters:
     *
     *  @id:    A string - the id of an html element. This element should contain the
     *          quantity of a cart item. @id will be of the form:
     *
     *                  p_quantity_<index>
     *
     *          where index is the quantity of the cart item this it holds.
     *
     *  Preconditions:
     *
     *  1.  The element with the id specified should contain the quantity of the
     *      item in the cart.
     *
     *
     *  Postconditions:
     *
     *  1.  The cart should have the corresponding item's quantity decreased.
     *
     *  Returns:
     *
     *  Nothing
     *
     */
    function decreaseQty(id) {
        var substr = id.split('_');
        var index = substr[2];
        if($('#'+id).val() != 1) {
            var qty = (parseInt($('#'+id).val()) - 1);
            UpdateCartData(index,qty);
        }
    }


    (function(){document.write(unescape('%3Cscript async=true src=\'' + (document.location.protocol == 'https:' ? "https:" : "http:") + '//static.olark.com/js/wc.js\' type=\'text/javascript\'%3E%3C/script%3E'));})();




    /*
     *  I want to write a function that fires the click event for the appropriate
     *  upgrade radio button input.
     *
     *  Logic:
     *
     *  1. The index of the cart item being edited is read from the edit_cart_index
     *  cookie.
     *  2. The global variables reflecting the cart item being edited are refreshed
     *  using the cart item at this index.
     *  3. The appropriate multiyear option is fired.
     *
     *  Preconditions:
     *
     *  1. The span holding the total value should have the corect value.
     *  2. The spans 2yearPurchase and lifePurchaseAmount should be set.
     *
     *  Postconditions:
     *
     *  1. Total value should be set in the span with the class total-value.
     *
     */
    function fireSelect(multiyear){
        cartEdit=1;
        oldValue = parseFloat($(".total-value").html());
        //        console.log (productName+","+
        //            productId+ ","+
        //            productPrice+ ","+
        //            productOriginalPrice+ ","+
        //            productQuantity + ","+
        //            purchaseType+ ","+
        //            productMultiyear + "," +
        //            cartEdit);

        
        if($.cookie("edit_cart_index")==null){
            $.cookie("shopping_cart", null , {path:"/",expires: 7});
            $.cookie("discount", null, {path:"/"});
            $.cookie("edit_cart_index",null, {path:"/"});
            window.location.replace("/shop");
        }

        var refreshIndex = parseInt($.cookie("edit_cart_index"));
        refreshGlobalVariables(refreshIndex);

        if(productOriginalPrice==undefined || productOriginalPrice==null){
            $.cookie("shopping_cart", null , {path:"/",expires: 7});
            $.cookie("discount", null, {path:"/"});
            $.cookie("edit_cart_index",null, {path:"/"});
            window.location.replace("/shop");
        }
        if(multiyear == 1) {
            productOriginalPrice = parseFloat(productOriginalPrice);
            animateAmount2($(".total-value"),oldValue,productOriginalPrice,null);

            if(animateTotal==false)
                $('.total-value').html(productOriginalPrice);


            saveFormData(
            productName,
            productId,
            productOriginalPrice,
            productOriginalPrice,
            productQuantity,
            multiyear,
            purchaseType,
            cartEdit);
        } else if(multiyear == 2) {
            var amount = $('#2yearPurchaseAmount').html();
            amount = amount.replace("$","");
            var total = parseFloat(productOriginalPrice)+parseFloat(amount);

            animateAmount2($(".total-value"),oldValue,total,null);
            if(animateTotal==false)
                $('.total-value').html(total);


            saveFormData(
            productName,
            productId,
            total,
            productOriginalPrice,
            productQuantity,
            multiyear,
            purchaseType,
            cartEdit);
        } else if(multiyear == 3) {
            var amount = $('#lifePurchaseAmount').html();
            amount = amount.replace("$","");
            var total = parseFloat(productOriginalPrice*2);



            animateAmount2($(".total-value"),oldValue,total,null);
            if(animateTotal==false)
                $('.total-value').html(total);

            saveFormData(
            productName,
            productId,
            total,
            productOriginalPrice,
            productQuantity,
            multiyear,
            purchaseType,
            cartEdit);
        }
        getMiniCart();
    }



    /*
     * I want to write a function that returns the multiyear text for a given
     * product given its multiyear value and purchase type.
     *
     * Logic:
     *
     *
     *
     * Parameters:
     *
     * @productMultiyear: The multiyear value for the product.
     * @purchaseType: The purchase type - new or upgrade.
     *
     *
     * Preconditions:
     *
     * None
     *
     * Postconditions:
     *
     * None
     *
     */
    function getMultiyearText(productMultiyear, purchaseType){

        switch (productMultiyear) {
            case '2':
                multiyearText = "plus upgrades for 2 years";
                if (purchaseType == 'upgrade') {
                    multiyearText = "upgrades for 2 years";
                }
                break;
            case '3':
                multiyearText = "plus upgrades for 5 years";
                if (purchaseType == 'upgrade') {
                    multiyearText = "upgrades for 5 years";
                }
                break;
            default:
                multiyearText = "plus upgrades for 1 year";
                if (purchaseType == 'upgrade') {
                    multiyearText = "upgrades for 1 year";
                }
                break;
            }
            return multiyearText;
        }


        $(document).ready(function() {
            if(($.cookie("shopping_cart")!=null)
                && ($.cookie("shopping_cart").charAt(0)!='[')){
                $.cookie("shopping_cart",null,{path:"/",expires:7});
                $.cookie("discount",null,{path:"/",expires:7});
                $.cookie("edit_cart_index",null,{path:"/",expires:7});
            }


            initializeRegName();
            if ($(".slideshow").length > 0){
                $('.slideshow').cycle({
                    fx: 'fade', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
                    pager: '#nav'
                });
                $('.slideshow').show();
            }


            //            if (/*@cc_on!@*/false) { // check for Internet Explorer
            //                document.onfocusin = onFocus;
            //            } else {
            window.onfocus = onFocus;
            //            }


            $('input:radio[name=upgrade]').parents('li').click(function(){
                var multiyear = $(this).find('input:radio[name=upgrade]').val();
                $('input:radio[name=upgrade]')[multiyear-1].checked = true;
                animateTotal = true;
                fireSelect(multiyear);
            });



            cart=JSON.parse($.cookie("shopping_cart"));

            getMiniCart();

            $(".wy-price-submit-link, #view-cart, .wy-upgrade-price-link").colorbox(
            {
                inline:true,
                fixed: false,
                transition: 'none',
                scrolling: false,
                returnFocus: false,
                href: "#shopping-cart-container",
                onLoad: function(){
                    //                 console.log("Console log:"+this.id);

                    shoppingCartShown = true;
                    if(this.id=="view-cart"){
                        issave = 0;
                        getMiniCart();
                        getShoppingCart();
                        window.setTimeout(function(){
                            $('#proceed_checkout_button').trigger('click');
                        },000);
                    }
                    else{
                        issave = 1;
                        cartEdit=0;

                        if($(this).hasClass('wy-price-submit-link')){
                            submitForm = $("#"+submitId).find("form").get(0);
                        } else {
                            submitForm = $(this).find("form");
                        }





                        productName = $(submitForm).find("input[name=item_org_name]").val();
                        productId = $(submitForm).find("input[name=item_number]").val();
                        productPrice = parseFloat($(submitForm).find("input[name=amount]").val());
                        productOriginalPrice = productPrice;
                        productQuantity = $(submitForm).find("input[name=quantity]").val();
                        productMultiyear = 1;
                        purchaseType = $(submitForm).find("input[name=purchase_type]").val();


                        showMultiyearOption(productName);


                        $('#2yearPurchaseAmount').html((Math.floor(parseFloat((productPrice*1.5)-productPrice))));
                        $('#lifePurchaseAmount').html((Math.floor(parseFloat((productPrice*2)-productPrice))));

                        $("span.item-added-name").html($(submitForm).find("input[name=item_name]").val());
                        $("span.total-value").html(productPrice);



                        $('input:radio[name=upgrade]')[0].checked = true;
                        saveFormData(
                        productName,
                        productId,
                        productOriginalPrice,
                        productOriginalPrice,
                        productQuantity,
                        productMultiyear,
                        purchaseType,
                        cartEdit);
                        getMiniCart();

                        $('#checkout-form').hide();
                        $('#checkout-header-bar').removeClass('wy-white');
                    }


                    $("#emptyCartButton").click(function(){
                        var rloc = $('#emptycartmsg a').attr("href");
                        window.location.href = rloc;
                    });

                    $('#continue_button').click(function(){
                        window.location.href = '/shop'
                    });

                    $('#proceed_checkout_button').click(function(){
                        showOption(2,true);
                        getMiniCart();
                        getShoppingCart();
                        $.removeCookie('edit_cart_index');

                    })

                    $("#checkoutButton").click(function(){
                        /*
                         *  Delete the cookies representing the shopping cart
                         *  when the user checks out. He will have to recreate
                         *  the cart if he wants to redo the purchase.
                         */
                        
                        
                        $("#regname").val($("#reg_name").val());
                        if($("#regname").val() == '') {
                            
                            $('#regname_error').html('Please enter the registration name').show();
                        } else {
                            $.cookie("shopping_cart", null , {path:"/",expires: 7});
                            $.cookie("discount", null, {path:"/"});
                            $.cookie("edit_cart_index",null, {path:"/"});
                            $("#checkoutForm").submit();
                        }
                    });


                    // copying the regname inside form
                    $("#reg_name").blur(function(){
                        $("#regname").val($("#reg_name").val());
                        
                        initializeRegNameWithVal($("#reg_name").val());
                        displayRegName();
                    });

                    // Discount coupon check
                    $("#discount-check").click(function(){
                        var formData = $("#checkoutForm").serializeArray();
                        var code = $("#coupon_code").val();
                        if(code!='') {
                            code = code.replace(/^\s+|\s+$/g, "");
                            calculateDiscount(code, formData);
                        } else {
                            calculateDiscount('', formData);
                        }

                    });

                    $('#shopping-form').slideDown('slow');


                    $("#shopping-cart-container").show();

                },
                onClosed:function(){
                    $("#shopping-cart-container").hide();
                    $.removeCookie("edit_cart_index");
                    if((typeof(colorboxTimer)!='undefined') && (colorboxTimer!=null)){
                        window.clearTimeout(colorboxTimer);
                    }
                    shoppingCartShown =false;
                },
                onComplete: function(){
                    $("#shopping-cart-container").show();
                    if(issave==1){
                        //productName global varibale will have been set in the
                        //onLoad callback
                        showOption(1,false);
                    }
                    $("#emptyShoppingCart").stop(false,true).hide(0);
                    
                }
                
            }).css("cursor","pointer");


            $(".wy-price-submit-link").click(function(){
                submitId=$(this).parents("li:first").attr("id");
            });


            if( $(location).attr("href").indexOf("/search")== -1 ){
                $("#search").watermark("Search",{className:"wy-watermark", useNative:false});
            }

            fireWhenReady();

            $(document).click(function(event){
                //console.log(event.target.id);
                switch(event.target.id) {
                    case 'minicart':
                    case 'wy-cart-icon':
                    case 'minicart_count':
                    case 'my-minicart':
                        $("#tooltip-arrow").show();
                        $("#tooltip-content").show();
                        break;
                    default:
                        $("#tooltip-arrow").hide();
                        $("#tooltip-content").hide();
                        break;
                }
            })

            // Stop hiding minicart if clicked inside that
            $("#tooltip-content").click(function(event){
                // Stop hiding minicart if clicked inside that
                if(event.target.id!="view-cart-span")
                    event.stopPropagation();
            });



            (function() {
                $.reject({
                    reject: {
                        all: false, // Covers Everything (Nothing blocked)
                        msie5: true, msie6: true, msie7: true // Covers MSIE 5-6 (Blocked by default)
                    },
                    closeMessage: 'Close this window at your own demise!', // Message below close window link
                    imagePath: 'http://static.webyog.com/images/jReject/images/'
                }); // Customized Text

                return false;
            })();

        });


        /*
         *   I want to write a function which displays the minicart.
         *
         *   Logic:
         *
         *
         *   Preconditions:
         *
         *   None
         *
         *   Postcondition:
         *
         *   1. The minicart section is poulated with the minicart
         *
         *
         */
        function getMiniCart() {
            cart = JSON.parse($.cookie("shopping_cart"));
            if(cart != null &&  cart.length > 0) {
                $(".wy-minicart-section").show();
                $("#minicart_count").html('('+cart.length+')');


                html="";
                var totalAmount = 0.00;
                var discountInfo=JSON.parse($.cookie("discount"));
                var discount = 0;
                var total = 0;
                var payable = 0;

                
                for (i = 0; i < cart.length; i++) {

                    totalAmount += ( cart[i].quantity * cart[i].amount);

                    productNameArr = cart[i].item_name.split("-");

                    if(productNameArr.length>=1)
                        productName1 = productNameArr[0]
                    else
                        productName1 =  '';

                    if(productNameArr.length>=2)
                        productName2 = productNameArr[1]
                    else
                        productName2 =  '';

                    //                productName2 = isset($productNameArr[1]) ? $productNameArr[1] : '';

                    var total = (cart[i].quantity * cart[i].amount);
                    html+="<tr>"
                        +"<td valign='middle' style='line-height:18px;' width='65%'><b>" + productName1 + "</b><p>" + productName2 + "</p></span></td>"
                        +"<td width='20%' valign='middle' align='center'><input disabled='disabled' type='text' value='"
                        +((cart[i].quantity>=10) ? cart[i].quantity : ("&nbsp;" + cart[i].quantity))
                        +"'></td>"
                        +"<td width='15%' valign='middle' align='right'>$" + total+ "</td>"
                        +"</tr>";

                }

                if ( discountInfo!=undefined && discountInfo!=null && discountInfo.value!=undefined && discountInfo.type!=undefined) {
                    if (discountInfo.type == 'discount_rate') {
                        discount = (total * discountInfo.value) / 100;
                    } else if (discountInfo.type == 'discount_amount') {
                        discount = 1.0* discountInfo.value;
                    }
                }
                payable = totalAmount-discount;
                
                html += "<tr>"
                    +"<td></td>"
                    +"<td class='wy-reset-padding-mini' align='right'><span class='wy-bold'></span></td>"
                    +"<td align='right' id='total-without-discount-minicart' class='wy-bold wy-font-level-5 wy-strikethrough wy-grey-text'>" 
                    + ((discount!=0)? ("$" + totalAmount) :"")
                    + "</span></td>"
                    +"</tr>";
                html += "<tr>"
                    +"<td colspan=2 align='left'><b>Cart Total</b></td>"
                    +"<td align='right' class='wy-bold wy-font-level-5'>$" + payable + "</td>"
                    +"</tr>";
                $("#minicart-product-list").html(html);
            } else {
                $(".wy-minicart-section").hide();
                //$("#tooltip-arrow").hide();
                //$("#tooltip-content").hide();
            }

        }


        /*
         *   I want to write a function that sets the registration name for
         *   customer logged in to the site in the shopping cart popup.
         *
         *   Parameters:
         *
         *   None
         *
         *   Logic:
         *
         *   1. If the regName variable is set:
         *       a. Set the value of the cookie regname to this value.
         *       b. Set the value of the reg_name input to this value.
         *   2. Else:
         *       a. Do nothing. Return
         *
         *   Preconditions:
         *
         *   None
         *
         *   Postconditions:
         *
         *   1. An exception is thrown in unforeseen cases (or can you call them
         *   foreseen, now that I am commenting this?).
         *   Otherwise, the regName global variable is set with the value of
         *   the customer's registration name.
         *
         *   Returns:
         *
         *   Nothing.
         */
        function displayRegName(){
            if(regName!=null){
                $("#reg_name").val(regName);
                $("#regname").val(regName);
                $.cookie("regname", regName, {path:"/", expires:7});
            }
        }

        /*
         *  I want to write a function that initializes the regName global variable
         *
         *   Parameters:
         *
         *   None
         *
         *   Logic:
         *
         *   1. If the regName variable is not set:
         *       a. Check the regname cookie.
         *       b. If it is set and not blank, set the regname variable to the value of this
         *       cookie.
         *       c. Else:
         *          i.Make an ajax call to the server.
         *          ii. If it returns a valid result:
         *              A. Set its result as the value of the regName variable.
         *          iii. Else:
         *              A. Do nothing. Return.
         *
         *   Preconditions:
         *
         *   None
         *
         *   Postconditions:
         *
         *   1. The regName global variable is set with the value of
         *   the customer's registration name.
         *
         *   Returns:
         *
         *   Nothing.
         *
         */
        function initializeRegName(){
            if(($.cookie("regname")!=null) && ($.cookie("regname")!="")){
                
                regName= $.cookie("regname");
                $("#reg_name").val(regName);
                return;
            }
            $.post('/shoppingcart/getRegname',
            null,
            function(data){
                if(data){
                    regName=data;
                    $("#reg_name").val(regName);
                }
            });
        }

        /*
         *  I want to write a function that initializes the regName global variable
         *  to a particular value.
         *
         *   Parameters:
         *
         *   @val: The value to set the regname variable to.
         *
         *   Logic:
         *
         *   1. Set the regName variable to @val.
         *   2. Return
         *
         *   Preconditions:
         *
         *   None
         *
         *   Postconditions:
         *
         *   1. The regName global variable is set with the desired value.
         *
         *   Returns:
         *
         *   Nothing.
         *
         */
        function initializeRegNameWithVal(val){
            regName=val;

        }


        /*
         *   I want to write a function that sets the discount code text in the
         *   shopping cart
         *
         *   Parameters:
         *
         *   None
         *
         *   Logic:
         *
         *   1. If the discount cookie is null:
         *       Set the text to blank
         *   2. Else
         *       a. Parse the contents of the discount cookie into a Javascript
         *       object.
         *       b. Display the code attribute of this object in the text box.
         *
         *   Preconditions:
         *
         *   None
         *
         *   Postconditions:
         *
         *   1.
         *
         *   Returns:
         *
         *   Nothing.
         */

        function onFocus(){
            if(shoppingCartShown){
                showOption(2,false);
                getShoppingCart();
            }
            getMiniCart();

        };


        /*
         * A function that fires wc_init() when it is ready. Stops the window
         * from waiting for it to finish.
         */
        function fireWhenReady() {
            if (typeof  wc_init != 'undefined') {
                wc_init();
                olark('api.visitor.getDetails' , function(details){
                    //                    console.log(details);
                });

                
            }
            else {
                productOriginalPrice = 100;
                setTimeout(fireWhenReady, 100);
            }
        }

        /**
         * A function to set the colorbox height based on 3 parameters:
         *
         * @which: which option to show
         * @lifeOptionShown:    a boolean to indicate whether the discount for five
         *                      years is
         * @numberOfProducts: the number of products in the cart
         * @discount: a boolean to indicate whether there is a valid discount applicable
         *
         * Logic:
         *
         *
         *
         * Preconditions:
         *
         * None
         *
         * Postconditions:
         *
         * None
         *
         * Returns:
         *
         * Nothing
         *
         */
        function setColorboxDimensions(which, lifeOptionShown,
        numberOfProducts, discount){
            /*
             * If the first option is to be displayed.
             */
            if(which==1){
                //If the five year option is shown
                if(lifeOptionShown){
                    $.colorbox.resize({
                        innerHeight: "480px"
                    });
                    $("shopping-cart-container").attr("height","480px");
                }
                //Otherwise
                else {
                    $.colorbox.resize({
                        innerHeight: "430px"
                    });
                    $("shopping-cart-container").attr("height","430px");
                }
            }/*
             *If the second option is to be displayed
             */else if(which==2){
                //If the number of products in the cart is 1
                if(numberOfProducts==1){
                    //                    if(discount) {
                    //                        $.colorbox.resize({
                    //                            innerHeight: "540px"
                    //                        });
                    //                        $("shopping-cart-container").attr("height","540px");
                    //                    }
                    //                    // Otherwise
                    //                    else {
                    $.colorbox.resize({
                        innerHeight: "510px"
                    });
                    $("shopping-cart-container").attr("height","510px");
                    //                    }
                }
                //If the number of products in the cart is 0
                else {
                    //If discount is applicable
                    //                    if(discount) {
                    $.colorbox.resize({
                        innerHeight: "570px"
                    });
                    $("shopping-cart-container").attr("height","570px");
                    //                    }
                    //                    // Otherwise
                    //                    else {
                    //                        $.colorbox.resize({
                    //                            innerHeight: "556px"
                    //                        });
                    //                        $("shopping-cart-container").attr("height","556px");
                    //                    }
                }
            } /*
             *If the empty cart is to be displayed
             */else if(which == -1){
                $.colorbox.resize({
                    innerHeight: "490px"
                });
                $("shopping-cart-container").attr("height","490px");
            }
        }


        /**
         * I want to write a function that refreshes the value of the cart related
         * global variables from a cookie.
         *
         *
         * Logic:
         *
         * 1. Read the cookie 'editIndex' contents into the cart.
         * 2.
         */


</script><script async="true" src="https://static.olark.com/js/wc.js" type="text/javascript"></script>
<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-256194-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
            <script type="text/javascript" src="http://static.webyog.com/min/g=master-js?v=70"></script>
            <script type="text/javascript">

                function formatTitle(title, currentArray, currentIndex, currentOpts) {
                    return '<div id="tip7-title"><span><a href="javascript:;" onclick="$.fancybox.close();">Close</a></span>' + (title && title.length ? '<b>' + title + '</b>' : '' ) + 'Image ' + (currentIndex + 1) + ' of ' + currentArray.length + '</div>';
                }
            </script>
        </div>
    

</body></html>