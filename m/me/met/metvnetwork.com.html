<!--The following is the downloaded HTML source of the metvnetwork.com privacy policy that was archived on 2019-12-31.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20191231225045id_/https%3A//www.metv.com/privacy-policy) for the most accurate reproduction.-->

<!DOCTYPE html><html lang="en"><head>
		<!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700,800" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lilita+One" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Archivo+Black&amp;display=swap" rel="stylesheet">

        <base href="//www.metv.com/">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>Privacy Policy</title>
        <meta name="keywords" content="MeTV, classic, TV, television, broadcast, show, watch, westerns, andy griffith, the brady bunch, mash, m*a*s*h, carol burnett, dick van dyke, columbo, green acres, flintstones, star trek, svengoolie, wonder woman, charlie’s angels, hogan’s heroes, gilligan’s island, the three stooges, saved by the bell, lost in space, the twilight zone, memorable entertainment, nostalgia, drama, comedy, retro, network, antenna, cord cutter">
        <meta name="description" content="">
                        <meta name="og:title" property="og:title" content="Privacy Policy">
		<meta name="og:description" property="og:description" content="">
		<meta name="og:type" property="og:type" content="website">
		<meta name="og:url" property="og:url" content="//www.metv.com/privacy-policy">
		<meta name="og:image" property="og:image" content="">
		<link rel="image_src" href="">
		<meta name="og:site_name" property="og:site_name" content="Me-TV Network">
		<meta property="fb:admins" content="567665230">
        <meta property="fb:app_id" content="424455911043606">
                    
                <!-- Twitter Card data -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Privacy Policy">
        <meta name="twitter:description" content=""> <!-- 200 characters or less -->
        <!-- Twitter summary card with large image must be at least 280x150px -->
        <meta name="twitter:image:src" content="">
        
        <link rel="stylesheet" href="/css/normalize.css" media="screen">
        <link rel="stylesheet" href="/css/style.css?v9.26" media="screen">
                <!--
        <link rel="stylesheet" href="https://metvnetwork-resources.s3.amazonaws.com/all_style.gz.css" media="screen" />
-->

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/all.css" crossorigin="anonymous">
        <!-- <link href="/css/rrssb.css" rel="stylesheet" type="text/css"> -->
        <link rel="stylesheet" href="/css/jquery-ui-1.10.3.custom.min.css" media="screen">
                            <link href="/js/videojs7/video-js.css?v9.16" rel="stylesheet">
            <link rel="stylesheet" href="/js/videojs7/videojs.ads.css?v9.16">
            <link rel="stylesheet" href="/js/videojs7/videojs.ima.css?v9.16">
            <link href="/css/video_player.css?v9.16" rel="stylesheet">
            <script src="https://secure.quantserve.com/quant.js" async="" type="text/javascript"></script><script id="twitter-wjs" src="https://platform.twitter.com/widgets.js"></script><script async="" src="https://sb.scorecardresearch.com/beacon.js"></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script async="" src="//c.amazon-adsystem.com/aax2/apstag.js"></script><script src="/js/imagesLoaded.js"></script>
        
        <!-- Makes HTML5 work in IE6-8 -->
        <!--[if lt IE 9]>
        <script>
            document.createElement('header');
            document.createElement('nav');
            document.createElement('section');
            document.createElement('article');
            document.createElement('aside');
            document.createElement('footer');
            document.createElement('hgroup');
        </script>
        <![endif]-->

        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        
        <script src="/js/jquery-ui.min.js"></script>
        <script src="/js/jquery.sticky.js"></script>
        <script src="/js/jquery.sticky-kit.min.js"></script>
                

        <script src="/js/jquery.bxslider.min.js"></script>

        <link rel="stylesheet" href="/css/owl_carousel.css">
        <link rel="stylesheet" href="/css/owl_theme.css">

        <link rel="stylesheet" href="/css/animate.css">
        <script src="/js/owl.carousel.min.js"></script>
        <script src="/js/jquery.colorbox-min.js"></script>
		<script type="text/javascript" src="/js/rrssb.min.js"></script>

        
        <script src="/js/reconnecting-websocket.min.js"></script>

        <script src="/js/toggleswitch/on-off-switch.js?x"></script>
        <script src="/js/toggleswitch/on-off-switch-onload.js?y"></script>
        <link rel="stylesheet" href="/js/toggleswitch/on-off-switch.css">

        <!-- smart app banners -->
        <link rel="stylesheet" href="/js/smart-app-banner.css">
        <link rel="apple-touch-icon" href="/images/icons/ios-icon.jpg">
        <link rel="android-touch-icon" href="/images/icons/android-icon.png">
        <meta name="apple-itunes-app" content="app-id=1079958817">
        <meta name="google-play-app" content="app-id=com.metv.metvandroid">
		<script>
			$(document).ready(function(){
				// System alerts
                				var alerts = [];

				var hasStorage =false;
				if(typeof(Storage)!== void(0)){
					hasStorage = true;
				}

				for(i in alerts){
				   msg = alerts[i];
				   var html_alert = '<div class="system-alert-outer" id="alert_'+msg.id+'"><div class="lg-col-wrapper"><i class="system-alert-close fa fa-times-circle" aria-hidden="true"></i><div class="system-alert-text">'+msg.message+'</div><input type="hidden" value="'+msg.id+'"></div></div>';

				   if(hasStorage && localStorage.getItem('alert_'+msg.id)==msg.id){
					  //$('#wrapper').prepend(html_alert);
				   }else{
					  $('.alert-container').append(html_alert);
				   }
				}

				$('.system-alert-close').on('click', function(e){
					if(e.target) targ = e.target;
					else if (e.srcElement) targ = e.srcElement;
					if(targ.nodeType==3) targ = targ.parentNode;

					alt_box = $(targ.parentNode);
					id = alt_box.children('input').val();

					alt_box.fadeOut();
					if(hasStorage){
						localStorage.setItem('alert_'+id,id);
					}
				});
                			});
        </script>
        <script>
            var WEBVIEW = WEBVIEW || {};
            WEBVIEW.is_webview = false;
            WEBVIEW.access_token = '';
            WEBVIEW.app_location_enabled = false;
            WEBVIEW.version = 1;
            var WCS = WCS || {};
            WCS.isHomepage = false;
        </script>
        <script src="/js/scripts.js?v9.16b"></script>
        <script src="/js/scripts_extra.js?v9.16b"></script>
                 <!-- DFP/Google Ads / Prebid / Wallpaper INITIALIZE -->
        	<script async="" src="https://www.googletagservices.com/tag/js/gpt.js">
	</script>
            <script src="/js/prebid1.16.0.js?v3"></script>
    	<script>
	  var googletag = googletag || {};
	  googletag.cmd = googletag.cmd || [];
	</script>
        <script src="https://tagan.adlightning.com/metv/op.js"></script>
	<script>
	  googletag.cmd.push(function() {
	    //googletag.pubads().set("adsense_background_color", "FFFFFF");
            googletag.pubads().setTargeting("page", "privacy-policy");
            googletag.pubads().setTargeting("site", "metv.com");
                        
            
                        
            	  });
	</script>
	<script>
       function build_slot(fullSizeName, adSize, id){
            //alert("building slot: " + fullSizeName + " with adsize: " + '[' + adSize[0] + ", " + adSize[1] + "] id: " + id);
            var adSlot = googletag.defineSlot("/7089059/" + fullSizeName, adSize, id).addService(googletag.pubads());

            return adSlot;
        }


        var allSlots = new Array();
        var AMAZON_SLOTS = new Array();
        var REQUEST_TIME = 10000;
        var WAITING = false;
        var allSizes = new Array();
        allSizes['metvcom_header'] = "728x90,728x90,468x60,320x50";
        allSizes['metvcom_sidebar'] = "300x250,200x200,468x60,320x50";
        allSizes['metvcom_footer'] = "728x90,728x90,468x60,320x50";
        allSizes['metvcom_quiz'] = "468x60,468x60,468x60,320x50";
        allSizes['metvcom_middle'] = "728x90,728x90,468x60,320x50";
        allSizes['metvcom_sidebar_2'] = "300x250,200x200,468x60,320x50";
        allSizes['metvcom_content1'] = "728x90,468x60,728x90,468x60,320x50";
        // allSizes['metvcom_content2'] = "728x90,468x60,728x90,468x60,320x50";
        //allSizes['metvcom_home1'] = "728x90,728x90,468x60,320x50";
        var width = window.innerWidth || document.documentElement.clientWidth;

        var DFP_SLOTS = new Array();

        var slots = ['metvcom_header', 'metvcom_sidebar'];
                    slots.push('metvcom_footer');
                            
        
                
        for(var a = 0; a < slots.length; a++){

            var slotName = slots[a];
            var widths = [1260,900,500,-1];
            if(slotName == 'metvcom_footer' || slotName == 'metvcom_header'){
                widths = [1260,800,500,-1];
            }else if(slotName == 'metvcom_middle'){
                                    widths = [1100,1100,500,-1];
                              }else if(slotName == 'metvcom_content1'){
                widths = [1100,900,800,550,-1];
            }else if(slotName == 'metvcom_quiz'){
                widths = [500,500,500,-1];
            }

            for(var w = 0; w < widths.length;w++){
                var aWidth = widths[w];
                if(width > aWidth){

                    var id = slotName;
                    var sizeIndex = w;
                    var sizeName = slotName;
                    var mySizes = allSizes[id].split(",");
                    var adData = mySizes[sizeIndex];
                    var theWidth = parseInt(adData.split('x')[0]);
                    var theHeight = parseInt(adData.split('x')[1]);

                    var adSize = [theWidth, theHeight];

                    var adArr = sizeName.split('_');

                    //ugh, extra _ in name
                    if(sizeName == 'metvcom_sidebar_2'){
                         adArr[1] = 'sidebar_2';
                    }

                    var fullSizeName = adArr[0] + "_" + adData + "_" + adArr[1];

                    var itemArr = new Array();
                    itemArr['id'] = id;
                    itemArr['full_size_name'] = fullSizeName;
                    itemArr['ad_size'] = adSize;
                    if((theWidth == 160 && theHeight == 600) ||
                            (theWidth == 300 && theHeight == 250) ||
                            (theWidth == 300 && theHeight == 600) ||
                            (theWidth == 320 && theHeight == 50) ||
                            (theWidth == 468 && theHeight == 60) ||
                            (theWidth == 728 && theHeight == 90)){
                        if(sizeName == 'metvcom_sidebar_2'){
                            console.log("skipping amazon metvcom_sidebar_2");
                        }else{

                            var amazonObject = {
                                slotID: id,
                                slotName: "/7089059/" + fullSizeName,
                                sizes: [adSize]
                            };
                            AMAZON_SLOTS.push(amazonObject);
                            console.log("Amazon slot size match " + theWidth + " , " + theHeight + " for " + fullSizeName);
                            console.log(amazonObject);
                        }
                    }


                    DFP_SLOTS.push(itemArr);

                    break;
                }
            }
        }



		  googletag.cmd.push(function() {
                  /*
			if(width > 1260){
				googletag.defineSlot('/7089059/metvcom_300x250_directFixed', [300, 250], 'metvcom_directFixed').addService(googletag.pubads());;
			}

			if(width <= 1260){
				googletag.defineSlot('/7089059/metvcom_320x50_directFixed', [320, 50], 'metvcom_directFixed').addService(googletag.pubads());;
			}
                    */

            var scrollerSlot = googletag.defineSlot('/7089059/MeTV_300x250_Scroller', [1, 1], 'metv_scroller').addService(googletag.pubads());;
            allSlots.push(scrollerSlot);

            for(var x = 0; x < DFP_SLOTS.length; x++){
                var dSlot = DFP_SLOTS[x];
                var adSlot = build_slot(dSlot['full_size_name'], dSlot['ad_size'], dSlot['id']);
                allSlots.push(adSlot);
            }


	    //googletag.pubads().enableSingleRequest();
                                                googletag.pubads().disableInitialLoad();
                                                    //googletag.pubads().enableSingleRequest();
                                googletag.pubads().enableVideoAds();
                googletag.enableServices();
                            //?google_console=1
            //alert("enabling");
            //googletag.openConsole();

	  });
	</script>


 <script>
     var amazonBids = true;
     
        //load the apstag.js library
        !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");
    

     //
        amazonBids = false;
        apstag.init({
             pubID: 'c5284f18-82aa-4599-abba-7e1a65c7b555', //enter your pub ID here as shown above, it must within quotes
             adServer: 'googletag'
        });
        apstag.fetchBids({
             slots: AMAZON_SLOTS,
             timeout: 2000
        }, function(bids) {
            console.log("some amazon bids");
            console.log(bids);
            // set apstag targeting on googletag, then trigger the first DFP request in googletag's disableInitialLoad integration
            googletag.cmd.push(function(){
                 apstag.setDisplayBids();
                 amazonBids = true;
                 //googletag.pubads().refresh();
            });
        });

        var oathNetworkId = "11399.1";
        var oathPlacements = new Array();
        oathPlacements['metvcom_300x250_sidebar'] = '4865825';
        oathPlacements['metvcom_728x90_middle'] = '4865826';
        oathPlacements['metvcom_728x90_header'] = '4865827';
        oathPlacements['metvcom_728x90_footer'] = '4865828';
        oathPlacements['MeTV_Music_728x90'] = '4865829';
        oathPlacements['metvcom_320x50_sidebar'] = '4865830';
        oathPlacements['metvcom_320x50_middle'] = '4865831';
        oathPlacements['metvcom_320x50_footer'] = '4865832';
        oathPlacements['metvcom_320x50_header'] = '4865833';
        oathPlacements['metvcom_320x50_quiz'] = '4865834';

        var sovrnPlacements = new Array();
        sovrnPlacements['metvcom_300x250_sidebar'] = '574598';
        sovrnPlacements['metvcom_320x50_footer'] = '574599';
        sovrnPlacements['metvcom_320x50_header'] = '574600';
        sovrnPlacements['metvcom_320x50_middle'] = '574601';
        sovrnPlacements['metvcom_320x50_quiz'] = '574602';
        sovrnPlacements['metvcom_320x50_sidebar'] = '574603';
        sovrnPlacements['metvcom_468x60_footer'] = '574604';
        sovrnPlacements['metvcom_468x60_header'] = '574605';
        sovrnPlacements['metvcom_468x60_middle'] = '574606';
        sovrnPlacements['metvcom_468x60_quiz'] = '574607';
        sovrnPlacements['metvcom_468x60_sidebar'] = '574608';
        sovrnPlacements['metvcom_728x90_footer'] = '574609';
        sovrnPlacements['metvcom_728x90_header'] = '574610';
        sovrnPlacements['metvcom_728x90_middle'] = '574611';

/*
MeTV_Music_720		MeTV_Music_728x90 	Desktop	ATF	https://www.metv.com/metvmusic/					13659609
metvcom_300x250_sidebar		metvcom_300x250_sidebar 	Desktop	BTF	https://www.metv.com/       	13659610
metvcom_320x50_footer		metvcom_320x50_footer 	Mobile	BTF1                                    13659611
metvcom_320x50_header		metvcom_320x50_header 	Mobile	ATF                                     13659612
metvcom_320x50_middle		metvcom_320x50_middle 	Mobile	BTF                                     13659613
metvcom_320x50_quiz		metvcom_320x50_quiz 	Mobile	BTF                                         13659614
metvcom_320x50_sidebar		metvcom_320x50_sidebar 	Mobile	BTF                                     13659615
metvcom_468x60_footer 		metvcom_468x60_footer 	Tablet	BTF1                                    13659616
metvcom_468x60_header		metvcom_468x60_header 	Tablet	ATF                                     13659617
metvcom_468x60_middle		metvcom_468x60_middle 	Tablet	BTF                                     13659618
metvcom_468x60_quiz		metvcom_468x60_quiz 	Tablet	BTF                                         13659619
metvcom_468x60_sidebar		metvcom_468x60_sidebar 	Tablet	BTF                                     13659620
metvcom_728x90_footer		metvcom_728x90_footer 	Desktop (Tablet - Landscape)	BTF1			13659621
metvcom_728x90_header		metvcom_728x90_header 	Desktop (Tablet - Landscape)	ATF				13659622
metvcom_728x90_middle		metvcom_728x90_middle 	Desktop (Tablet - Landscape)	BTF				13659623
*/
        var appnexusPlacements = new Array();
        appnexusPlacements['metvcom_300x250_sidebar'] = '13659610';
        appnexusPlacements['metvcom_320x50_footer'] = '13659611';
        appnexusPlacements['metvcom_320x50_header'] = '13659612';
        appnexusPlacements['metvcom_320x50_middle'] = '13659613';
        appnexusPlacements['metvcom_320x50_quiz'] = '13659614';
        appnexusPlacements['metvcom_320x50_sidebar'] = '13659615';
        appnexusPlacements['metvcom_468x60_footer'] = '13659616';
        appnexusPlacements['metvcom_468x60_header'] = '13659617';
        appnexusPlacements['metvcom_468x60_middle'] = '13659618';
        appnexusPlacements['metvcom_468x60_quiz'] = '13659619';
        appnexusPlacements['metvcom_468x60_sidebar'] = '13659620';
        appnexusPlacements['metvcom_728x90_footer'] = '13659621';
        appnexusPlacements['metvcom_728x90_header'] = '13659622';
        appnexusPlacements['metvcom_728x90_middle'] = '13659623';

        var rubiconPlacements = new Array();
        rubiconPlacements['metvcom_320x50_header'] = '886216';
        rubiconPlacements['metvcom_728x90_header'] = '886208';
        rubiconPlacements['metvcom_300x250_sidebar'] = '886200';
        rubiconPlacements['metvcom_728x90_footer'] = '886204';
        rubiconPlacements['metvcom_728x90_middle'] = '886212';
        rubiconPlacements['metvcom_320x50_footer'] = '886214';
        rubiconPlacements['metvcom_320x50_middle'] = '886218';
        rubiconPlacements['metvcom_320x50_quiz'] = '886220';
        rubiconPlacements['metvcom_320x50_sidebar'] = '886222';

        function getPlacementId(adName, bidder){
            var theArray = new Array();
            if(bidder == 'oath'){
                theArray = oathPlacements;
            }
            else if(bidder == 'sovrn'){
                theArray = sovrnPlacements;
            }
            else if(bidder == 'appnexus'){
                theArray = appnexusPlacements;
            }
            else if(bidder == 'rubicon'){
                theArray = rubiconPlacements;
            }
            if(adName in theArray){
                return theArray[adName];
            }
            return null;
        }

        function build_prebid(fullSizeName, adSize, id){
            var my_sizes = [
                adSize
            ];

            var sovrnId = getPlacementId(fullSizeName, 'sovrn');
            var oathId = getPlacementId(fullSizeName, 'oath');
            var appnexusId = getPlacementId(fullSizeName, 'appnexus');
            var rubiconId = getPlacementId(fullSizeName, 'rubicon');
            var allBids = new Array();

            if(oathId === null){
                console.log("no oath bid for " + fullSizeName);
            }else{

                if(fullSizeName.indexOf('320x50') !== -1){
                    var thePosition = fullSizeName;
                    var mobileDcn = '2c9d2b4f0166663460843ab982e800c7';
                    allBids.push({
                            bidder: 'onemobile',
                            params: {
                                dcn: mobileDcn,
                                pos: thePosition
                            }
                        });
                }else{
                    allBids.push({
                            bidder: 'onedisplay',
                            params: {
                                placement: oathId,
                                network: "11399.1"
                            }
                        });
                }
            }

            if(sovrnId === null){
                console.log("no sovrn bid for " + fullSizeName);
            }else{
                allBids.push({
                        bidder: 'sovrn',
                        params: {
                            tagid: sovrnId
                        }
                    });
            }

            if(rubiconId === null){
                console.log("no rubicon bid for " + fullSizeName);
            }else{
                var rubiconSite = '181692';
                if(fullSizeName.indexOf('320x50') !== -1){
                    //site id is different for mobile
                    rubiconSite = '181694';
                }
                allBids.push({
                        bidder: 'rubicon',
                        params: {
                            accountId: '17798',
                            siteId: rubiconSite,
                            zoneId: rubiconId
                        }
                    });
            }

            if(appnexusId === null){
                console.log("no appnexus bid for " + fullSizeName);
            }else{
                allBids.push({
                        bidder: 'appnexusAst',
                        params: {
                            placementId : appnexusId
                        }
                    });
            }
            if(allBids.length <= 0){
                return null;
            }

            var adUnit = {
                code: "/7089059/" + fullSizeName,
                mediaTypes: {
                    banner: {
                        sizes: my_sizes
                    }
                },
                bids: allBids
            };

            return adUnit;
        }
            var allAdUnits = new Array();
            var PREBID_TIMEOUT = 1000;

            for(var x = 0; x < DFP_SLOTS.length; x++){
                var dSlot = DFP_SLOTS[x];
                var adUnit = build_prebid(dSlot['full_size_name'], dSlot['ad_size'], dSlot['id']);
                if(adUnit !== null){
                    allAdUnits.push(adUnit);
                }
            }

            console.log("------- PREBID AD UNITS ----------");
            console.log(allAdUnits);

            /*
            var sizes = [
                [300, 250]
            ];
            var adUnits = [{
                code: '/19968336/header-bid-tag-1',
                mediaTypes: {
                    banner: {
                        sizes: sizes
                    }
                },
                bids: [{
                    bidder: 'appnexus',
                    params: {
                        placementId: 13144370
                    }
                }]
            }];
            */

            /*
            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                googletag.pubads().disableInitialLoad();
            });
            */
            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            pbjs.que.push(function() {
                pbjs.setConfig({ priceGranularity: "dense" });
                pbjs.enableAnalytics([{
                    provider: 'pubwise',
                    options: {
                        site: '2255f45c-d41e-426c-98ba-e44ac31c4500',
                        endpoint:'https://api.pubwise.io/api/v4/event/add/'
                        }
                    }]
                );
                pbjs.addAdUnits(allAdUnits);
                pbjs.requestBids({
                    bidsBackHandler: initAdserver
                });
            });

            function refreshAdsIfReady(){
                if(googletag.pubadsReady && amazonBids){
                    console.log("refreshing ads");
                    googletag.pubads().refresh(allSlots, {
                        changeCorrelator: true
                    });
                }else{
                    console.log("not ready");
                    setTimeout(function(){
                        refreshAdsIfReady();
                    }, 100);
                }
            }


            function initAdserver() {
                if (pbjs.initAdserverSet) return;
                pbjs.initAdserverSet = true;
                googletag.cmd.push(function() {
                    pbjs.que.push(function() {
                        pbjs.setTargetingForGPTAsync();
                        refreshAdsIfReady();
                    });
                });
            }

            setTimeout(function() {

                initAdserver();
            }, PREBID_TIMEOUT);

            $(document).ready(function(){

                $('body').on('click', '#debug_prebid', function(){
                    alert("debugging prebid");
                    var responses = pbjs.getBidResponses();
                    var winners = pbjs.getAllWinningBids();
                    var output = [];
                    Object.keys(responses).forEach(function(adUnitCode) {
                      var response = responses[adUnitCode];
                      response.bids.forEach(function(bid) {
                        output.push({
                          bid: bid,
                          adunit: adUnitCode,
                          adId: bid.adId,
                          bidder: bid.bidder,
                          time: bid.timeToRespond,
                          cpm: bid.cpm,
                          msg: bid.statusMessage,
                          rendered: !!winners.find(function(winner) {
                            return winner.adId==bid.adId;
                          })
                        });
                      });
                    });
                    if (output.length) {
                      if (console.table) {
                        console.table(output);
                      } else {
                        for (var j = 0; j < output.length; j++) {
                          console.log(output[j]);
                        }
                      }
                    } else {
                      console.warn('NO prebid responses');
                    }
                });
                            });

    </script>
         
    <script type="text/javascript">
        if (!Date.now) {
            Date.now = function() { return new Date().getTime(); }
        }
                </script>

            <script>
                
                        </script>
        
         <!-- Google Analytics -->
		<script>
			
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			
				ga('create', 'UA-5553426-11', 'metv.com');
				ga('require', 'displayfeatures');
				ga('send', 'pageview');
			
		</script>

        <!-- Google AdSense / Analytics linking -->
		<script type="text/javascript">
                    window.google_analytics_uacct = "UA-5553426-11";
		</script>
                    <link rel="stylesheet" href="/css/twemoji-awesome.css">
            <script src="https://www.google.com/recaptcha/api.js?onload=CaptchaCallback&amp;render=explicit" async="" defer=""></script>
        
                <script type="text/javascript" src="//s.ntv.io/serve/load.js" async=""></script>
        
        <!-- Begin comScore Tag -->
        <script>
          var _comscore = _comscore || [];
          _comscore.push({ c1: "2", c2: "23481286" });
          (function() {
            var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
            s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
            el.parentNode.insertBefore(s, el);
          })();
        </script>
        <noscript>
          <img src="http://b.scorecardresearch.com/p?c1=2&c2=23481286&cv=2.0&cj=1" />
        </noscript>
        <!-- End comScore Tag -->
        
                <style>
            .wallpaper-body-wrap{
                background: false;
            }
        </style>
        

        <!-- OneTag Container: weigelweb 05-16-2018-->
        
                <!-- JUSTPREMIUM AUTOMATIC WALLPAPERS -->
        
    </head>
    <body>
        <script>
            /**********************************************
             * Workaround - On iOS 9, inside of FB's iOS app, if you click our share link for Facebook on a story it crashes.
             * This workaround uses the SDK to share when the userAgent is a Facebook app
             *********************************************/
            var SHARE_URL = "//www.metv.com/privacy-policy";
            
            function isFacebookApp() {
              var ua = navigator.userAgent || navigator.vendor || window.opera;
              return (ua.indexOf("FBAN") > -1) || (ua.indexOf("FBAV") > -1);
            }
            var isFBInitialized = function () {
                return typeof (FB) != 'undefined' && window.fbAsyncInit.hasRun;
            };

            window.fbAsyncInit = function() {
              FB.init({
                appId      : '424455911043606',
                xfbml      : true,
                version    : 'v2.5'
              });
             };

           $(document).ready(function(){
                $('.rrssb-facebook a').on('click', function(e){
                    if(isFBInitialized && isFacebookApp()){
                        FB.ui(
                         {
                          method: 'share',
                          href: SHARE_URL
                        }, function(response){});
                        console.log("USING FACEBOOK APP SHARING TO PREVENT CRASH");
                        e.preventDefault();
                        return false;
                    }
                    //console.log("NORMAL SHARE");
                });

           });

          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
        </script>
        

    	<!-- Facebook -->
        <div id="fb-root"></div>

        <!-- Twitter -->
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    	
                                
            <header>
                <div class="header-outer-container lg-col-wrapper-no-space clearfix">
                                        <div class="header-ad">
                                                <div id="metvcom_header">
                            <script type="text/javascript">
                                googletag.cmd.push(function() { googletag.display("metvcom_header"); });
                            </script>
                        </div>
                                            </div>
                                        <div class="header-row-wrapper">
                        <div class="header-logo-container">
                            <span class="header-nav-menu-tab"><i class="fa fa-bars"></i></span>
                            <a href="/"><img class="logo" src="/images/metv_logo.png"></a>
                            <div class="header-location-affiliates desktop-only">
                                                        <img src="https://metvcdn.metv.com/metvlogos/oLS4k-1536161609-1-markets-wwme_web_darkish.png" width="290" height="40">
                                                    </div>
                            <a class="where-to-watch-btn btn-primary purple desktop-only" href="/wheretowatch/affiliate/602"><img src="/images/television_icon.png">
                                                                Where to Watch
                                                            </a>
                                                                                 </div>
                        <div class="header-login-container top">
                            <div class="contact-button">
                                <a class="btn-primary btn-upper btn-small yellow" href="/contact">
                                    <i class="fas fa-envelope"></i>&nbsp;Contact MeTV
                                </a>
                            </div>
                            <div class="user-notifications">
                                                                <div class="popup-notification">
                                </div>
                                                                    <span class="no-notifications"><i class="fas fa-bell-slash"></i></span>
                                                            </div>
                            <div id="user-profile-link" class="user-profile">
                                <div class="logged-in" style="display:none;">
                                    <img class="wcs-avatar wcs-user-trigger" id="header-login-avatar" src="" width="25">
                                    <span class="wcs-user-trigger user-login"><a href="/"></a></span>
                                </div>
                                <div class="logged-out">
                                    <img class="" src="images/user-avatar.svg" width="30">
                                    <span class="user-login"><a href="javascript:void(0);">Log In</a></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <nav class="header-nav">
                    <div class="rainbow-border-container non-sticky">
                        <div class="rainbow-border"></div>
                    </div>
                    <div class="lg-col-wrapper clearfix">
                        <span class="header-nav-menu-tab bottom"><i class="fa fa-bars"></i></span>
                    	<a href="/" title="MeTV"><img class="logo-resp" src="/images/metv_logo.png" width="125" height="40"></a>
                        <div class="header-login-container mobile-sticky-nav">
                            <div class="user-notifications">
                                                                <div class="popup-notification">
                                </div>
                                                                    <span class="no-notifications"><i class="fas fa-bell-slash"></i></span>
                                                            </div>
                            <div id="user-profile-link" class="user-profile">
                                <div class="logged-in" style="display:none;">
                                    <img class="wcs-avatar wcs-user-trigger" id="header-login-avatar" src="" width="25">
                                    <span class="user-login"><a href="javascript:void(0);"></a></span>
                                </div>
                                <div class="logged-out">
                                    <img class="" src="images/user-avatar.svg" width="30">
                                    <span class="user-login"><a href="javascript:void(0);">Log In</a></span>
                                </div>
                            </div>
                        </div>
                        <ul class="clearfix">
                            <li>
                                <a href="/schedule/">Schedule</a>
                            </li>
                            <li>
                                <a href="/shows/">Shows</a>
                            </li>
                            <li>
                                <a href="/stories/">Stories</a>
                            </li>
                            <li>
                                <a href="/quiz/">Quizzes</a>
                            </li>
                            <li>
                                <a href="/videos/">Videos</a>
                            </li>
                            <li>
                                                                    <a href="https://metv.fm" target="_blank" rel="noopener">
                                                                    Music</a>
                            </li>
                            <li>
                                <a href="http://games.metv.com/?arkpromo=site_topnav">Games</a>
                            </li>
                            <li>
                                <a href="http://store.metv.com" rel="noopener">Store</a>
                            </li>
                            <div class="mobile-only">
                             <li>
                                <a href="/wheretowatch/affiliate/602">Where To Watch</a>
                            </li>
                            </div>
                            <div class="mobile-only">
                            <li>
                                <a href="/about-us/">About</a>
                            </li>
                            <li>
                                <a href="/contact/">Contact</a>
                            </li>
                            <li>
                                <a href="/advertise/">Advertise</a>
                            </li>
                            <li>
                                <a href="/privacy-policy/">Privacy Policy</a>
                            </li>
                            <li>
                                <a href="/terms-of-use/">Terms of Use</a>
                            </li>
                            <li>
                                <a href="/fcc-public-files/">FCC Public Files</a>                            </li>
                            <li>
                                <a href="/sweepstakes/">Sweepstakes Winners</a> 
                            </li>
                            </div>
                            <div class="header-nav-icons">
                                <li class="header-nav-search">
                                    <i class="fa fa-search"></i>
                                </li>
                                <li class="social-nav">
                                    <a href="https://www.facebook.com/metvnetwork" target="_blank" rel="noopener"><i class="fab fa-facebook-f"></i></a>
                                </li>
                                <li class="social-nav">
                                   <a href="https://twitter.com/MeTV" target="_blank" rel="noopener"><i class="fab fa-twitter"></i></a>
                                </li>
                                <li class="social-nav">
                                    <a href="https://instagram.com/metvnetwork" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                                </li>
                            </div>
                            <div class="copyright mobile-only">© 2019 MeTV National Limited Partnership</div>
                            <div class="header-login-container bottom">
                                <div class="user-notifications">
                                                                        <div class="popup-notification">
                                    </div>
                                                                            <span class="no-notifications"><i class="fas fa-bell-slash"></i></span>
                                                                    </div>
                                <div id="user-profile-link" class="user-profile">
                                    <div class="logged-in" style="display:none;">
                                        <img class="wcs-avatar wcs-user-trigger" id="header-login-avatar" src="" width="25">
                                        <span class="user-login"><a href="/social_auth/logout"></a></span>
                                    </div>
                                    <div class="logged-out">
                                        <img class="" src="images/user-avatar.svg" width="30">
                                        <span class="user-login wcs-force-login"><a href="javascript:void(0);">Log In</a></span>
                                    </div>
                                </div>
                            </div>
                        </ul>
                    </div><!-- .lg-col-wrapper -->
                    <div class="rainbow-border-container sticky">
                        <div class="rainbow-border"></div>
                    </div>
                    <div class="search-bar closed">
                        <div class="lg-col-wrapper-no-space">
                            <form class="search-form clearfix" action="/search/" method="get" enctype="multipart/form-data">
                                <div class="search-bar-input-wrap">
                                    <input type="text" name="search_term" value="Search..." placeholder="Search...">
                                </div>
                                <button type="submit" name="submit"><i class="fa fa-chevron-right"></i></button>
                            </form>
                        </div>
                    </div>
                </nav>
            <!-- .header-wrapper -->
            <div class="alert-container"></div>
                            <div class="content-now-next-section mobile-only">
        <h1>On MeTV</h1>
        <div class="content-now-next-container">
            <div id="promo_player_mobile" class="content-now-promo">
                
            </div>
            <!-- On Now new module -->
            <div class="content-now-next">
                <div class="content-now-next-inner inner-box-stacking-bottom">
                    <div class="content-next-heading">On MeTV Now:</div>
                    <div class="content-now-title">
                        Charlie's Angels
                    </div>
                    <span class="content-now-subheading">Rosemary, for Remembrance
                    </span>
                    <p class="content-now-description desktop-only">When an ex-mobster is targeted, the Angels are called.</p>
                    <div class="content-next-heading">Up Next:</div>
                    <div class="content-next-schedule">
                        <span class="content-next-time"> 5:00PM</span>
                                                <a href="shows/the-flintstones">
                            The Flintstones
                        </a>
                                                
                    </div>
                    <div class="content-next-schedule up-next-second">
                        <span class="content-next-time"> 5:30PM
                        </span>
                        <span class="content-next-title">
                                                                                            <a href="shows/the-flintstones">
                                The Flintstones
                                </a>
                                                    </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-buttons inline-mobile-buttons">
            <a class="btn-primary orange" href="/schedule/">Full Schedule<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
            <a class="btn-primary purple" href="/wheretowatch/affiliate/602">Where to Watch<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </div>
    </div>   
                    </header>

        
        
                                
        <div class="lg-col-wrapper clearfix">
    
            <div class="main-content">
                                    <h1>Privacy Policy</h1>
                                
                                
                <p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Updated: December 31, 2019</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We take your electronic privacy seriously. Questions regarding this statement or our practices should be directed to the MeTV.com Privacy Coordinator by email at feedback-metv@metvnetwork.com. You may also send inquiries by mail to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><b>Privacy Coordinator</b></span></p><p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><b>MeTV National Limited Partnership</b></span></p><p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><b>26 North Halsted</b></span></p><p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><b>Chicago, IL 60661</b></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">You may also call our toll free number: 1-833-367-6388</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We reserve the right to change our policy from time to time as we deem appropriate in our sole discretion.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">KINDS OF INFORMATION</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">There are two kinds of information websites can obtain about you:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Aggregate Information: Aggregate Information is anonymous data that websites use to diagnose problems on the sites' servers, administer the sites, and to help improve the quality of the Web pages. It may be your domain name (i.e. "XYZ.com") or your IP address.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Personally Identifiable Information: Personally Identifiable Information is any information that personally identifies you. It can be your first and last name, your email address, your home address, or your telephone number. Sometimes this personal information is needed when you order products online or subscribe to an email newsletter. Other times, websites collect this information to help personalize advertising and marketing.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We collect Aggregate Information - such as your IP address (a number that's automatically assigned to your computer whenever you're surfing the Internet), browser type (e.g., Netscape or Internet Explorer), and domain (e.g., "XYZ.com"). We do this in the background so it does not interrupt your cruising speed. We use this information to help diagnose problems with our servers, to administer our site, and to gather broad demographic information. We share Aggregate Information with third parties for advertising and promotional purposes. None of this information is connected with Personally Identifiable Information. So, when you enter our site, you are anonymous and will remain that way unless you choose otherwise.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">SURVEYS AND REGISTRATION FORMS</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Sometimes MeTV.com posts surveys and registration forms in which we ask for Personally Identifiable Information. Here are some ways we might use that information:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To send you information about MeTV Network and this website.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To better serve viewers on the MeTV network.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To customize which articles and information appears on this website for visitors.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">The choice is yours - you do not have to answer surveys or register for newsletters or service. If you choose to answer the survey or complete the registration, we will tell you on the survey or registration form how we will use the Personally Identifiable Information. If we are asking for optional information, we will mark it with an asterisk (*) so you know you can skip it if you want. And on that same page we will give you a way to "opt out" of being contacted by MeTV.com and any third parties.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CONTESTS AND SWEEPSTAKES</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">From time to time we run contests and sweepstakes in which we ask for Personally Identifiable Information such as your name, email address or telephone number. That's so we can let you know if you win. Sometimes we request additional Personally Identifiable Information such as your age, gender, and income level. And once in a while - though not often - we require this additional information in exchange for allowing you to enter the contest. Here are some of the ways we might use the information that we collect:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To notify you if you are a winner</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To send you information about MeTV Network and our site</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To give to content partners, who may send you promotional email</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; To give to advertisers, who may send you emails about their products and services</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We may share Aggregate Information with our partners and advertisers. We will not share your Personally Identifiable Information with third parties unless we tell you otherwise when asking for it. We will give you a way to "opt out" of being contacted by MeTV.com and any third parties.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">If you win one of our contests or sweepstakes, we will not publish your name, hometown, or other Personally Identifiable Information on the Site unless you give us your permission.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">OPT OUT</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">If we ask you for Personally Identifiable Information, we will tell you if we intend to share it with others. We will provide you with a way to tell us that you don't want us to share the information or if you don't want to receive promotional and/or marketing information about products, services, and offerings from MeTV.com and/or any third parties. Let us know and we will use your name and address only to tell you if you win a contest.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">COOKIES AND INFORMATION</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We authorize select suppliers of advertisements to place cookies on MeTV.com. The purpose of the cookies is to re/target users of our website to display personalized advertisements in their future navigation based on your visit to this website. The following platforms - IAB opt-out platform, Network Advertising Initiative opt-out platform, and Digital Advertising Alliance platform provide options to express opt-out choices for all companies that are registered in the respective platform. Please note that if you disable the display of personalized ads and other advertising partners, you will continue to receive ads that are less relevant to your interests/browsing behavior.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Here is a list of suppliers authorized to place cookies on MeTV.com and information on how to opt-out through their privacy policy.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Criteo (criteo.com/en/privacy-policy)</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Sovrn (sovrn.com/privacy-policy)</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Rubicon (</span><a href="https://rubiconproject.com/rubicon-project-advertising-technology-privacy-policy/platform-cookie-statement/" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://rubiconproject.com/rubicon-project-advertising-technology-privacy-policy/platform-cookie-statement/</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">)</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; App Nexus (</span><a href="https://www.appnexus.com/platform-privacy-policy#choices" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://www.appnexus.com/platform-privacy-policy#choices</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">)</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Amazon (</span><a href="https://www.amazon.com/gp/help/customer/display.html?nodeId=468496#GUID-1B2BDAD4-7ACF-4D7A-8608-CBA6EA897FD3__SECTION_0D132936501A4AE0A2F8D74426A8A2CA" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://www.amazon.com/gp/help/customer/display.html?nodeId=468496#GUID-1B2BDAD4-7ACF-4D7A-8608-CBA6EA897FD3__SECTION_0D132936501A4AE0A2F8D74426A8A2CA</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">)</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">· &nbsp; &nbsp; &nbsp; Google Ads(</span><a href="https://support.google.com/ads/answer/2662922?hl=en" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://support.google.com/ads/answer/2662922?hl=en</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> and https://adssettings.google.com)&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">SUBPOENAS AND LAW ENFORCEMENT AGENCIES</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We reserve the right to cooperate with government and law enforcement agencies engaged in investigations of activities that are, or are believed to be, illegal. Further, we may share your Personally Identifiable Information with such agencies if we believe that a crime or any act that endangers the health and safety of others may have been or may be committed. We may also share your Personally Identifiable Information in response to an appropriate subpoena.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">COMMUNITY AND PUBLIC AREAS</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Information posted to message boards or chat areas is available to the general public. Please use caution when posting any such information. Users under the age of 18 should be particularly careful not to provide any personally identifying information while using chat rooms or message boards. We reserve the right to, but are not obligated to, refuse or delete any content that in our sole discretion is considered inappropriate. Please see our Terms of Service for additional information.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">FEEDBACK AND EMAIL</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">On every page at MeTV.com there is a link to a Contact Us email form so you can comment, complain, make suggestions, and ask questions. Your email address is required on this form so we can answer your questions, and we want your name, too, so we can address our answer in a mannerly way. We may also track your browser type and referring URL to better diagnose technical issues you may be having. We do not share this information with third parties and we will use it only to answer your correspondence.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">LINKS TO OTHER SITES</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">When you visit our site, you may be directed to other sites outside our service. For example, if you click on a banner advertisement, you will leave our site. This includes links to sites operated by advertisers, sponsors and partners that may use our logo as part of an agreement with us. These other sites may send their own cookies to users, collect data, or solicit personal information. These other sites are not subject to our privacy policy and we are not responsible for the privacy policies for these other sites, nor for the use of any information that these sites may collect.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">DELETING OR MODIFYING YOUR INFORMATION</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">If you've given us personally identifiable information in the past and then have second thoughts or want to update it, here are your choices:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Email to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">feedback-metv@metvnetwork.com with subject line “Privacy Coordinator”</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Regular mail to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MeTV National Limited Partnership</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">26 North Halsted</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Chicago, IL 60661</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Phone call to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">1-833-367-6388</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Although it is not always possible to remove or modify information in the databases, we will make reasonable efforts to do so. If you've given us information for one of those third parties we mentioned above and we've already passed it on, we may not be able to delete or change the information.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">SECURITY OF PRIVATE INFORMATION</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Any personal information you give us is kept in secure files. Access is limited to the few employees who have a need to know. We would like to tell you that your information is as safe with us as it is in your head, but, as hackers have proved worldwide, no computer security system is entirely foolproof. The most any Website can do is make reasonable efforts, which is what we do at MeTV.com, to protect your information from theft, misuse and alteration.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><br></span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CALIFORNIA PRIVACY RIGHTS</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">The State of California permits California residents to request from a business, with whom the California resident has an established business relationship, certain information about the types of personal information the business has shared with third parties for those third parties’ direct marketing purposes and the names and addresses of the third parties with whom the business has shared such information during the immediately preceding calendar year.&nbsp; You may make the request:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">1.&nbsp; &nbsp; By emailing us at: feedback-metv@metvnetwork.com with the subject line “Privacy Coordinator Request”&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">2.&nbsp; &nbsp; By completing the contact form at this page: </span><a href="https://metv.com/contact" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://metv.com/contact</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> and selecting “Privacy Request” as the reason for your message.&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">3.&nbsp; &nbsp; By sending inquiries by mail to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Privacy Coordinator</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MeTV National Limited Partnership</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">26 North Halsted</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Chicago, IL 60661</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">4.&nbsp; &nbsp; You may also call our toll free number: 1-833-367-6388</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">California residents also have the right to request that we (a) delete all personal information; (b) provide a copy of all personal information we collected; or (c) opt them out of any sale of their personal information. If you are a California Resident who would like to exercise one of these rights, you may contact us:&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">1.&nbsp; &nbsp; By emailing us at: feedback-metv@metvnetwork.com with the subject line “Privacy Coordinator Request”&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">2.&nbsp; &nbsp; By completing the contact form at this page: </span><a href="https://metv.com/contact" style="text-decoration: none;"><span style="font-size: 11pt; font-family: Arial; color: rgb(17, 85, 204); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: underline; text-decoration-skip: none; vertical-align: baseline; white-space: pre-wrap;">https://metv.com/contact</span></a><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> and selecting “Privacy Request” as the reason for your message.&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">3.&nbsp; &nbsp; By sending inquiries by mail to:</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Privacy Coordinator / MeTV National Limited Partnership</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">26 North Halsted</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Chicago, IL 60661</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">4.&nbsp; &nbsp; By calling our toll free number: 1-833-367-6388</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">You will not be discriminated against as a result of your choice to exercise these rights, however certain account and personalization functionality may be lost as a result of your request to delete your information or opt-out of sale of your information.</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">In accordance with the California law, we are required to verify your identity before processing a request for deletion or request for information. We will attempt to do so based on your account information (where applicable) and the information you provide when submitting the request, however there may be instances where we do not have sufficient personal information about you in order to reasonably verify your identity. In such cases, we will let you know and treat a request for deletion as a do not sell request. In addition, there may be instances when we need to retain such information for legal compliance or business purposes.&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p dir="ltr" style="font-weight: normal; line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><span style="font-size: 11pt; font-family: Arial; color: rgb(0, 0, 0); background-color: transparent; font-weight: 400; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-position: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></p><p style="font-weight: normal;"><span id="docs-internal-guid-9f0bd410-7fff-b7c8-ac19-24bfdfaead8f" style="caret-color: rgb(0, 0, 0); text-size-adjust: auto;"><br></span></p>
            </div><!-- #main-content -->
                        <aside>
                <ul>
                    <li>
                        <div class="content-now-next-section now-title-small desktop-only">
                                                        <h1>On MeTV</h1>
                            <div class="content-now-next-container">
                                <div id="promo_player_desktop" class="content-now-promo">
                                                                        <script src="/js/toggleswitch/on-off-switch.js?x"></script>
<script src="/js/toggleswitch/on-off-switch-onload.js?y"></script>
<link rel="stylesheet" href="/js/toggleswitch/on-off-switch.css?z">

<link rel="stylesheet" href="/js/videojs7/video-js.css?x">
<link rel="stylesheet" href="/js/videojs7/videojs.ads.css">
<link rel="stylesheet" href="/js/videojs7/videojs.ima.css">
<link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<!---   DEBUGGING MOBILE  --->

<!--
 <script src="/js/inlineconsole.js"></script>
-->
<!-- move these to .style, not sure if this is what they want anyway so just showing them -->
<style>
    
    .floating-video.promo-playlist {
        display:block;
    }
    .promo-playlist .next-dropdown-accordion{
        display:none !important;
    }
    #promo_player_desktop .vjs-poster {
        border-bottom-left-radius: 0px;
        border-bottom-right-radius: 0px;
    }
    
    .floating-video .next-dropdown-accordion{
        display:block;
    }
    
    .promo-playlist .now-playing-container {
        display:none !important;
    }
    
    .promo-playlist.floating-video .now-playing-container{
        display:block !important;
    }
    
    .floating-video .now-playing-description {
        display: none;
    }
    
    #promo_player_desktop .next-dropdown-accordion{
        display:none;
    }
    
    #promo_player_desktop .floating-video .next-dropdown-accordion{
        display:none;
    }
    
    #promo_player_mobile .floating-video .next-dropdown-accordion{
        display:none;
    }
    
    
.vjs-ad-loading .vjs-loading-spinner {
    display: none !important;
}    


.floating-video{
    background:black;
    border-radius: 10px;
}
    
    
</style>    
    
    <div id="media-placeholder-83505" class="media-placeholder" style="display:none;overflow:hidden;">&nbsp; 
    </div>
    
 <div id="media-container-83505" class="media-container">
    <!-- on mobile display as left right -->
    <div class="mobile-flexbox-video-splitter  video-playlist-container ">
        <div class="hlsvideo-wrapper clearfix">
            <video poster="https://videoposters.weigelbroadcasting.com/metv-promos/CHARLIES_ANGELS_initpromo-METV%20980x551.jpg?1560184710" id="html5-video-83505" muted="" class="video-js vjs-16-9 vjs-big-play-centered vjs-show-big-play-button-on-pause" style="cursor:pointer;" controls="" crossorigin="anonymous">                        
                            
                                              <source src="https://streamoutcdn.weigelbroadcasting.com/metv-promos/CHARLIES_ANGELS_initpromo/hls_index.m3u8" type="application/x-mpegURL">
                   
                                            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="http://videojs.com/html5-video-support/" target="_blank" rel="noopener">supports HTML5 video</a>
              </p>
            </video>
        </div><!-- .hlsvideo-content --> 
                <div class="now-playing-container">
            <div class="now-playing-grid">
                <div class="now-playing-grid-item-left">
                    <a class="video-close" href="javascript:void(0)">
                        <i class="fa fa-times-circle-o"></i>
                    </a>
                    <div class="now-playing-title" id="video_title_83505">
                        <div class="now-playing-prefix">
                            On MeTV Now
                        </div>
                        <div class="content-now-title inner">
                            Charlie’s Angels                            
                        </div>
                    </div>
                                        <div class="content-next-heading">Up Next:</div>
                    <div class="content-next-schedule">
                        <span class="content-next-time"> 5:00PM</span>
                                                <a href="shows/the-flintstones">
                            The Flintstones
                        </a>
                                                
                    </div>
                                    </div>
                            </div>
        </div>        
            </div>

        <div class="next-dropdown-accordion">        
        <div class="next-dropdown-header">
            <div class="next-dropdown-text">
                <span class="video-slider-nextlabel">Up Next:</span> <span class="video-slider-nexttitle" style="display:none;" id="video-slider-nexttitle83505"></span>
            </div>
            <div class="next-dropdown-expander">
                <a href="javascript:void(0);" class="next-dropdown-accordion-button" id="next-dropdown-accordion-button-83505">
                                        <i class="fa fa-chevron-down" aria-hidden="true"></i>                        
                                    </a>
            </div>                        
        </div>
        
         
        <div id="page-carousel-wrapper-83505" class="page-carousel-wrapper">
            <ul id="page-carousel-83505" class="page-carousel page-carousel-lg-slides owl-carousel" style="display:none;">
                                                    
                                                                            <li>
                <a id="videolink_111867" class="videolink" href="javascript:void(0);">
                    <div class="video-preview-image-container">
                        <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                        <img alt="1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019" src="https://videoposters.weigelbroadcasting.com/metv-promos/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 480x270.jpg?1577474044">
                        <div class="video-overlay">
                        </div>
                    </div>
                </a>
                <h5 class="video-slider-title">
                    <a id="videolink2_111867" class="videolink">1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019
                    </a>
                </h5>
                </li>
                                                <li>
                <a id="videolink_111872" class="videolink" href="javascript:void(0);">
                    <div class="video-preview-image-container">
                        <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                        <img alt="2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts" src="https://videoposters.weigelbroadcasting.com/metv-promos/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 480x270.jpg?1577474147">
                        <div class="video-overlay">
                        </div>
                    </div>
                </a>
                <h5 class="video-slider-title">
                    <a id="videolink2_111872" class="videolink">2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts
                    </a>
                </h5>
                </li>
                                                <li>
                <a id="videolink_111875" class="videolink" href="javascript:void(0);">
                    <div class="video-preview-image-container">
                        <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                        <img alt="renamed_3000_ADAM12 PROCEED 30 WKDY" src="https://videoposters.weigelbroadcasting.com/metv-promos/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 480x270.jpg?1577474259">
                        <div class="video-overlay">
                        </div>
                    </div>
                </a>
                <h5 class="video-slider-title">
                    <a id="videolink2_111875" class="videolink">renamed_3000_ADAM12 PROCEED 30 WKDY
                    </a>
                </h5>
                </li>
                                                <li>
                <a id="videolink_111863" class="videolink" href="javascript:void(0);">
                    <div class="video-preview-image-container">
                        <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:15</span>
                        </div>
                        <img alt="4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts" src="https://videoposters.weigelbroadcasting.com/metv-promos/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 480x270.jpg?1577473893">
                        <div class="video-overlay">
                        </div>
                    </div>
                </a>
                <h5 class="video-slider-title">
                    <a id="videolink2_111863" class="videolink">4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts
                    </a>
                </h5>
                </li>
                
            </ul>                     
        </div>           
                
        <div id="#mobile-list-wrapper-83505" class="mobile-list-wrapper" style="display:none;">
            <ul class="mobile-list-videos">
                
                

                <li class="mobile-list-with-img clearfix">       
                    <div id="mobilelistitem-wrapper">
                        <a id="videolist_83505" class="mobile-list-image" href="javascript:void(0);">
                            <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:20</span>
                        </div>
                            <img alt="Charlie’s Angels" src="https://videoposters.weigelbroadcasting.com/metv-promos/CHARLIES_ANGELS_initpromo-METV%20480x270.jpg?1560184462">
                        </a>
                        <a id="videolist2_83505" class="mobile-list-title videolink" href="javascript:void(0);">
                            Charlie’s Angels
                        </a>                                  
                    </div>
                </li>
                

                <li class="mobile-list-with-img clearfix">       
                    <div id="mobilelistitem-wrapper">
                        <a id="videolist_111867" class="mobile-list-image" href="javascript:void(0);">
                            <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                            <img alt="1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019" src="https://videoposters.weigelbroadcasting.com/metv-promos/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 480x270.jpg?1577474044">
                        </a>
                        <a id="videolist2_111867" class="mobile-list-title videolink" href="javascript:void(0);">
                            1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019
                        </a>                                  
                    </div>
                </li>
                

                <li class="mobile-list-with-img clearfix">       
                    <div id="mobilelistitem-wrapper">
                        <a id="videolist_111872" class="mobile-list-image" href="javascript:void(0);">
                            <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                            <img alt="2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts" src="https://videoposters.weigelbroadcasting.com/metv-promos/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 480x270.jpg?1577474147">
                        </a>
                        <a id="videolist2_111872" class="mobile-list-title videolink" href="javascript:void(0);">
                            2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts
                        </a>                                  
                    </div>
                </li>
                

                <li class="mobile-list-with-img clearfix">       
                    <div id="mobilelistitem-wrapper">
                        <a id="videolist_111875" class="mobile-list-image" href="javascript:void(0);">
                            <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:30</span>
                        </div>
                            <img alt="renamed_3000_ADAM12 PROCEED 30 WKDY" src="https://videoposters.weigelbroadcasting.com/metv-promos/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 480x270.jpg?1577474259">
                        </a>
                        <a id="videolist2_111875" class="mobile-list-title videolink" href="javascript:void(0);">
                            renamed_3000_ADAM12 PROCEED 30 WKDY
                        </a>                                  
                    </div>
                </li>
                

                <li class="mobile-list-with-img clearfix">       
                    <div id="mobilelistitem-wrapper">
                        <a id="videolist_111863" class="mobile-list-image" href="javascript:void(0);">
                            <div class="playicon-container">
                            <i class="far fa-play-circle"></i>
                            <span>0:15</span>
                        </div>
                            <img alt="4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts" src="https://videoposters.weigelbroadcasting.com/metv-promos/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 480x270.jpg?1577473893">
                        </a>
                        <a id="videolist2_111863" class="mobile-list-title videolink" href="javascript:void(0);">
                            4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts
                        </a>                                  
                    </div>
                </li>
                
            </ul> 
        </div>
     </div>
         
 </div>
   
    <script src="/js/videojs7/can-autoplay.js?xx"></script>
    <script src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>        
    <script src="/js/videojs7/video.js?xx"></script>    
    <script src="/js/videojs7/videojs-http-streaming.js"></script>    
    <script src="/js/videojs7/videojs.ads.min.js?v3"></script>
    <script src="/js/videojs7/videojs.ima.js?v3"></script>    

    <script>
    var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };    
    var WVM = WVM || {};    
       
    WVM.detectIE = function(){
                
    };

    var getCustomParams = function(){
        var USER_AGENT = encodeURI(navigator.userAgent);
        var IP_ADDRESS = '207.241.225.158';
        //var VIDEO_WIDTH = $("#media-placeholder-83505").width();
        var VIDEO_WIDTH = Math.ceil($('#media-container-83505 .hlsvideo-wrapper').width());
        if(VIDEO_WIDTH <= 0 || !VIDEO_WIDTH){
            VIDEO_WIDTH = Math.ceil($('.floating-video .hlsvideo-wrapper').width());            
        }
        if(VIDEO_WIDTH <= 0 || !VIDEO_WIDTH){
            $('.hlsvideo-wrapper').each(function(){
                var tempWidth = Math.ceil($(this).width());         
                if(!tempWidth || tempWidth <= 0){
                    
                }else{
                    VIDEO_WIDTH = Math.ceil($(this).width());            
                }
                
            });     
            
        }        
        var VIDEO_HEIGHT = Math.floor(VIDEO_WIDTH * (9 / 16));     
        
        //alert("WIDTH " + VIDEO_WIDTH + " HEIGHT " + VIDEO_HEIGHT);
        var isMobile2 = 'no';
                var url = 'metv.com';
                         
        var custParams = '&cust_params=site%3D' + url + '%26ismobile%3D' + isMobile2 + '%26page%3Dprivacy-policy' + '%26playerwidth%3D' + VIDEO_WIDTH + '%26playerheight%3D' + VIDEO_HEIGHT + '%26ipaddress%3D' + IP_ADDRESS + '%26ua%3D' + USER_AGENT;
        //alert("cust " + WVM.custParams);
        if(VIDEO_WIDTH <= 0 || VIDEO_HEIGHT <= 0 || !VIDEO_WIDTH || !VIDEO_HEIGHT){
            return false;
        }
        return custParams;
    };
    
    
    if(!WVM.custParams){
        var maxTimes = 30;        
        WVM.custParams = getCustomParams();
        var CUSTOMINTERVAL = setInterval(function(){
            if(!WVM.custParams){
                WVM.custParams = getCustomParams();
                
            }else{
                clearInterval(CUSTOMINTERVAL);
            }
            maxTimes--;
            if(maxTimes == 0){
                var html = 'blah'; //$('body').get(0).outerHTML;
                $.ajax({
                    url: '/ajax/log_ads_problems/',
                    data: {
                        url: 'privacy-policy',
                        the_html: html
                    },
                    type: 'POST',
                    dataType: 'json',
                    success: function(data)
                    {
                        console.log("recorded");
                    },
                    error : function(response)
                    {
                        //alert('Error');
                       console.log("not recorded");
                       console.log(response);
                    }
                });                
                clearInterval(CUSTOMINTERVAL);
            }
        }, 1000);             
    }
    

    
    WVM.getAdTagUrl = function(){            
        return 'https://pubads.g.doubleclick.net/gampad/live/ads?iu=/7089059/MeTV_Video_Preroll' +
                '&description_url=https%3A%2F%2Fwww.metv.com%2Fvideos&env=vp&impl=s&correlator=[timestamp]&tfcd=0&npa=0' +
                '&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1' + WVM.custParams
    };
    WVM.getFirstPrerollUrl = function(){
        return 'https://pubads.g.doubleclick.net/gampad/live/ads?iu=/7089059/testprogpreroll2' +
                '&description_url=https%3A%2F%2Fwww.metv.com%2Fvideos&env=vp&impl=s&correlator=[timestamp]&tfcd=0&npa=0' +
                '&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1' + WVM.custParams;
    };    
    WVM.getAppTestPrerolllUrl = function(){
        return 'https://pubads.g.doubleclick.net/gampad/live/ads?iu=/7089059/MeTV_App_Test_Preroll_Video' +
                '&description_url=https%3A%2F%2Fwww.metv.com%2Fvideos&env=vp&impl=s&correlator=[timestamp]&tfcd=0&npa=0' +
                '&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1' + WVM.custParams;
    };    
    
    WVM.firstPrerollTagUrl = WVM.firstPrerollTagUrl || WVM.getFirstPrerollUrl();
    WVM.adTagUrl = WVM.adTagUrl || WVM.getAdTagUrl();
    
    //USE FIRST PREROLL AS AD TAG
    WVM.adTagUrl = WVM.getFirstPrerollUrl();
    
      

            WVM.firstPrerollTagUrl = "";
        
        console.log("first preroll " + WVM.firstPrerollTagUrl);
    console.log("ad tag url: " + WVM.adTagUrl);

    WVM.activePlayer = WVM.activePlayer || null;
    WVM.activeVideoId = WVM.activeVideoId || null;
    WVM.lastAdRequest = 0;     
    WVM.lastLoadedVideo = new Date().getTime() / 1000;     
    WVM.device_name = 'desktop';
    if(!WVM.playlist_ids || WVM.playlist_ids.length <= 0){
        WVM.playlist_index = -1;
        WVM.playlist_ids = new Array();
            
        WVM.playlist_ids.push(83505);
            
        WVM.playlist_ids.push(111867);
            
        WVM.playlist_ids.push(111872);
            
        WVM.playlist_ids.push(111875);
            
        WVM.playlist_ids.push(111863);
             
        for(var x = 0;x < WVM.playlist_ids.length; x++){
            if(WVM.playlist_index == WVM.playlist_ids[x]){
                WVM.playlist_index = x;
            }
        }
    }
    (function () {
      if (
          typeof window.CustomEvent === "function" ||
          // In Safari, typeof CustomEvent == 'object' but it otherwise works fine
          this.CustomEvent.toString().indexOf('CustomEventConstructor')>-1
      ) { return; }

      function CustomEvent ( event, params ) {
        params = params || { bubbles: false, cancelable: false, detail: undefined };
        var evt = document.createEvent( 'CustomEvent' );
        evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
        return evt;
       }

      CustomEvent.prototype = window.Event.prototype;

      window.CustomEvent = CustomEvent;
    })();    
    
    //wait for polyfill
    setTimeout(function(){
        WVM.FloatEventStart = new CustomEvent(
            "floatStarted", 
            {
                detail: {
                    is_floating: true
                }
            }
        );
        WVM.FloatEventEnd = new CustomEvent(
            "floatEnded", 
            {
                detail: {
                    is_floating: false
                }
            }
        );
        
    }, 100);
    
    
    WVM.ACTIVE_PLAYING = false;
    WVM.videoads = null;
    WVM.useMobilePlayer = WVM.useMobilePlayer || null;
    if(WVM.activeVideoId == null){
        WVM.activeVideoId = 83505;        
    }
    
    WVM.player83505 = null;
    WVM.player_settings83505 = {        
        autoplay_next : true ,    
        slider : null
    };
    WVM.player_state83505 = {
        IS_PLAYING: false,
        PLAYER_META : false,
        PLAYER_READY : false,
        CAROUSEL_INIT : false,
        AD_IS_PLAYING: false,
        AD_ERROR: false,
        VIDEO_ID : 83505,
        ORIGINAL_ID : 83505,
        VIDEO_URL : "charlies-angels",
        VIDEO_TITLE: "Charlie’s Angels",
        START_SENT: false,
        CANCEL_FLOATING: false,
        COMPLETE_EVENT: null,
        PROMO_PLAYER : true,
        PERCENTS_TRACKED : []
    };
    try{
        WVM.playlist_data83505 = JSON.parse('[{"id":"83505","tags":[],"video_id":"83505","url":"charlies-angels","type":"hls","directory_id":"101","has_captions":"no","title":"Charlie\u2019s Angels","description":"","length":"20","status":"2","active":"yes","start_date":"2019-06-10 11:33:53","end_date":"2036-01-01 00:00:00","display_settings":null,"channel_url":"metv-promos","imageurl":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV 980x551.jpg?1560184710","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo\/hls_index.m3u8","master":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-promos\/CHARLIES_ANGELS_initpromo.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV%20980x551.jpg?1560184710","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV%20480x270.jpg?1560184462","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV%20320x180.jpg?1560184519","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-Default.jpg?1560184739","dimensions":"1280x720","priority":"4"}],"filename":"CHARLIES_ANGELS_initpromo.mp4","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV%20980x551.jpg?1560184710","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/CHARLIES_ANGELS_initpromo-METV%20480x270.jpg?1560184462","autoplay":true,"now_block_active":true,"playlist_active":true,"duration":"0:20","video_options":{"nowplaying_active":true,"nowplaying_title":false,"nowplaying_titleright":false,"nowplaying_slider":true,"nowplaying_expanded":false,"nowplaying_floating":true},"now_block_position":"below","playlist_position":"slider","prefix":"NOW: ","noprefixtitle":""},{"id":"111867","tags":[],"links":null,"video_id":"111867","url":"1-prn4268-prn4268-3000-andy-griffith-trek-30-wknts-2019","type":"video","directory_id":"101","has_captions":"no","input_resolution":"1920x1080","title":"1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019","description":"","length":"30","status":"2","active":"yes","start_date":"2019-12-27 13:13:21","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-promos","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019\/hls_index.m3u8","master":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019\/mp4wcap\/index.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 980x551.jpg?1577474034","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 480x270.jpg?1577474044","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 320x180.jpg?1577474026","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-Default.jpg?1577474036","dimensions":"1280x720","priority":"4"}],"total_items":"4","filename":"1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy%20Griffith%20TREK%2030%20wknts%202019-METV%20980x551.jpg?1577474034","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-promos\/1-prn4268-prn4268-3000-andy-griffith-trek-30-wknts-2019?contentview=1","display_duration":"0:30","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 480x270.jpg?1577474044","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019-METV 480x270.jpg?1577474044","noprefixtitle":"1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019","duration":"0:30","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019\/hls_index.m3u8","master_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/1_PRN4268_PRN4268_3000_Andy Griffith TREK 30 wknts 2019\/mp4wcap\/index.mp4","prefix":""},{"id":"111872","tags":[],"links":null,"video_id":"111872","url":"2-prn4502-prn4502-3000-flintstones-gomer-30-wknts","type":"video","directory_id":"101","has_captions":"no","input_resolution":"1920x1080","title":"2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts","description":"","length":"30","status":"2","active":"yes","start_date":"2019-12-27 13:15:21","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-promos","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts\/hls_index.m3u8","master":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts\/mp4wcap\/index.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 980x551.jpg?1577474126","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 480x270.jpg?1577474147","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 320x180.jpg?1577474139","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-Default.jpg?1577474136","dimensions":"1280x720","priority":"4"}],"total_items":"4","filename":"2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES%20GOMER%2030%20wknts-METV%20980x551.jpg?1577474126","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-promos\/2-prn4502-prn4502-3000-flintstones-gomer-30-wknts?contentview=1","display_duration":"0:30","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 480x270.jpg?1577474147","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts-METV 480x270.jpg?1577474147","noprefixtitle":"2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts","duration":"0:30","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts\/hls_index.m3u8","master_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/2_PRN4502_PRN4502_3000_FLINTSTONES GOMER 30 wknts\/mp4wcap\/index.mp4","prefix":""},{"id":"111875","tags":[],"links":null,"video_id":"111875","url":"renamed-3000-adam12-proceed-30-wkdy","type":"video","directory_id":"101","has_captions":"no","input_resolution":"1920x1080","title":"renamed_3000_ADAM12 PROCEED 30 WKDY","description":"","length":"30","status":"2","active":"yes","start_date":"2019-12-27 13:17:19","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-promos","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY\/hls_index.m3u8","master":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY\/mp4wcap\/index.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 980x551.jpg?1577474270","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 480x270.jpg?1577474259","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 320x180.jpg?1577474274","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-Default.jpg?1577474268","dimensions":"1280x720","priority":"4"}],"total_items":"4","filename":"renamed_3000_ADAM12 PROCEED 30 WKDY.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12%20PROCEED%2030%20WKDY-METV%20980x551.jpg?1577474270","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-promos\/renamed-3000-adam12-proceed-30-wkdy?contentview=1","display_duration":"0:30","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 480x270.jpg?1577474259","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY-METV 480x270.jpg?1577474259","noprefixtitle":"renamed_3000_ADAM12 PROCEED 30 WKDY","duration":"0:30","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY\/hls_index.m3u8","master_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/renamed_3000_ADAM12 PROCEED 30 WKDY\/mp4wcap\/index.mp4","prefix":""},{"id":"111863","tags":[],"links":null,"video_id":"111863","url":"4-prn9757-prn9757-1500-block-hogan-c-burnett-in-person-15-wknts","type":"video","directory_id":"101","has_captions":"no","input_resolution":"1920x1080","title":"4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts","description":"","length":"15","status":"2","active":"yes","start_date":"2019-12-27 13:10:07","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-promos","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts\/hls_index.m3u8","master":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts\/mp4wcap\/index.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 980x551.jpg?1577473906","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 480x270.jpg?1577473893","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 320x180.jpg?1577473894","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-Default.jpg?1577473891","dimensions":"1280x720","priority":"4"}],"total_items":"4","filename":"4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK%20HOGAN%20C%20BURNETT%20IN%20PERSON%2015%20wknts-METV%20980x551.jpg?1577473906","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-promos\/4-prn9757-prn9757-1500-block-hogan-c-burnett-in-person-15-wknts?contentview=1","display_duration":"0:15","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 480x270.jpg?1577473893","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts-METV 480x270.jpg?1577473893","noprefixtitle":"4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts","duration":"0:15","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts\/hls_index.m3u8","master_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-promos\/4_PRN9757_PRN9757_1500_BLOCK HOGAN C BURNETT IN PERSON 15 wknts\/mp4wcap\/index.mp4","prefix":""}]');
    }catch(e){
        //unexpected JSON - hopefully doesn't happen but just in case let's not have player break completely
        console.log("ERROR PARSING JSON DATA USING SHORT PLAYLIST");        
        WVM.playlist_data83505 = JSON.parse('[{"id":"73827","tags":[],"video_id":"73827","url":"its-gunsmoke-on-the-andy-griffith-show","type":"hls","directory_id":"82","has_captions":"no","title":"It\u2019s Gunsmoke on The Andy Griffith Show!","description":"","length":"31","status":"2","active":"yes","start_date":"2019-02-19 10:26:00","end_date":"2036-01-01 00:00:00","display_settings":null,"channel_url":"metv-originals","imageurl":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV 980x551.jpg?1550593569","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM\/hls_index.m3u8","master":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-originals\/WEB_ANDY_GUNSM.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV%20980x551.jpg?1550593569","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV%20480x270.jpg?1550593571","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV%20320x180.jpg?1550593575","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-Default.jpg?1550593573","dimensions":"1280x720","priority":"4"}],"filename":"WEB_ANDY_GUNSM.mp4","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV%20980x551.jpg?1550593569","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_ANDY_GUNSM-METV%20480x270.jpg?1550593571","autoplay":true,"now_block_active":true,"playlist_active":true,"duration":"0:31","video_options":{"nowplaying_active":true,"nowplaying_title":false,"nowplaying_titleright":false,"nowplaying_slider":true,"nowplaying_expanded":false,"nowplaying_floating":true},"now_block_position":"below","playlist_position":"slider","prefix":"On MeTV Now ","noprefixtitle":""},{"id":"48049","tags":[],"links":"","video_id":"48049","url":"every-time-spock-said-fascinating-on-star-trek-the-original-series","type":"video","directory_id":"82","has_captions":"no","input_resolution":null,"title":"Every Time Spock Said Fascinating on Star Trek- The Original...","description":"","length":"83","status":"2","active":"yes","start_date":"2018-04-10 14:43:00","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-originals","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series\/hls_index.m3u8","master":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-METV 980x551.jpg?1523389418","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-METV 480x270.jpg?1523389424","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-METV 320x180.jpg?1523389422","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-Default.jpg?1523389420","dimensions":"1280x720","priority":"4"}],"total_items":"3","filename":"Every Time Spock Said Fascinating on Star Trek- The Original Series.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every%20Time%20Spock%20Said%20Fascinating%20on%20Star%20Trek-%20The%20Original%20Series-METV%20980x551.jpg?1523389418","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-originals\/every-time-spock-said-fascinating-on-star-trek-the-original-series?contentview=2","display_duration":"1:23","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-METV 480x270.jpg?1523389424","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series-METV 480x270.jpg?1523389424","noprefixtitle":"Every Time Spock Said Fascinating on Star Trek- The Original...","duration":"1:23","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series\/hls_index.m3u8","master_rendition":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-originals\/Every Time Spock Said Fascinating on Star Trek- The Original Series.mp4","prefix":""},{"id":"4337","tags":[],"links":null,"video_id":"4337","url":"top-hulk-outs","type":"video","directory_id":"58","has_captions":"no","input_resolution":null,"title":"Top Hulk-Out","description":null,"length":"99","status":"2","active":"yes","start_date":"2017-05-24 10:29:56","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-other","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs\/hls_index.m3u8","master":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-other\/Top Hulk-Outs.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-METV 980x551.jpg","dimensions":"980x551","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-METV 480x270.jpg","dimensions":"480x270","priority":"2"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-METV 320x180.jpg","dimensions":"320x180","priority":"3"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-Default.jpg","dimensions":"1280x720","priority":"4"}],"total_items":"3","filename":"Top Hulk-Outs.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top%20Hulk-Outs-METV%20980x551.jpg","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-other\/top-hulk-outs?contentview=2","display_duration":"1:39","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-METV 480x270.jpg","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs-METV 480x270.jpg","noprefixtitle":"Top Hulk-Out","duration":"1:39","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-other\/Top Hulk-Outs\/hls_index.m3u8","master_rendition":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-other\/Top Hulk-Outs.mp4","prefix":""},{"id":"53336","tags":[],"links":"","video_id":"53336","url":"time-for-a-little-wkrp-pop-quiz","type":"video","directory_id":"82","has_captions":"no","input_resolution":"1920x1080","title":"Time for a Little WKRP Pop Quiz!","description":"","length":"36","status":"2","active":"yes","start_date":"2018-06-14 14:08:00","end_date":"2036-01-01 00:00:00","display_settings":null,"collectors_teaser_id":"0","channel_url":"metv-originals","website":"metv","renditions":{"hls":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP\/hls_index.m3u8","master":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-originals\/WEB_WHO_SAID_WKRP.mp4"},"images":[{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-Default.jpg?1529003415","dimensions":"1280x720","priority":"4"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-METV 480x270.jpg?1529005107","dimensions":"480x270","priority":"1"},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-METV 320x180.jpg?1529005034","dimensions":"320x180","priority":null},{"url":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-METV 980x551.jpg?1529005073","dimensions":"980x551","priority":null}],"total_items":"3","filename":"WEB_WHO_SAID_WKRP.mp4","listing_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-Default.jpg?1529003415","season":"","episode":"","air_date":"","content_link":"https:\/\/www.metv.com\/videos\/metv-originals\/time-for-a-little-wkrp-pop-quiz?contentview=2","display_duration":"0:36","provider":"aws","preview_image":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-METV 480x270.jpg?1529005107","image_preview":"https:\/\/videoposters.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP-METV 480x270.jpg?1529005107","noprefixtitle":"Time for a Little WKRP Pop Quiz!","duration":"0:36","hls_rendition":"https:\/\/streamoutcdn.weigelbroadcasting.com\/metv-originals\/WEB_WHO_SAID_WKRP\/hls_index.m3u8","master_rendition":"https:\/\/weigel-streaming-input.s3.amazonaws.com\/metv-originals\/WEB_WHO_SAID_WKRP.mp4","prefix":""}]');
    }
    WVM.getPlaylistData = function(playerId, mediaId, fieldName){
        var data = WVM['playlist_data' + playerId];
        var retVal = null;
        $.each(data, function(i,item){
            //console.log("item ");
            //console.log(item);
            //console.log("mediaId " + mediaId +  " VS " + item['video_id']);
            if(item['video_id'] == mediaId){
                //console.log("match");
                retVal = item[fieldName];
            }
        });
        if(retVal == null){
           //alert("null field " + playerId + " fieldName " + fieldName);            
        }
        return retVal;
    };
    
    WVM.NO_FLOAT_COOKIE = function(closeType){
        $.ajax({
            url: '/ajax/videoplayer_no_float/',
            data: {
                close_type : closeType 
            },
            type: 'POST',
            dataType: 'json',
            success: function(data) 
            {  
                console.log("player hidden");
            },
            error : function(){
                console.log("Error loading video");
            }
        });          
    };    
    
    WVM.addMuteButton = function(videoId, player, hideClose){
            if(WVM.player_state83505.PLAYER_READY && WVM.player_state83505.PLAYER_META){                
                var $videoEl = $('#html5-video-' + videoId); //Video element
                $videoEl.append('<div class="mute-overlay"><div class="force-vcenter"><span class="fa-stack fa-lg">' +
                    '<i class="fa fa-volume-off fa-stack-1x"></i>' + 
                    '<i class="fa fa-times fa-stack-1x"></i>' + 
                  '</span><span class="mute-overlay-text">&nbsp;&nbsp;UNMUTE</span></div></div>');       
          
                $videoEl.append('<a class="video-close-floating" href="javascript:void(0)">' + 
                        '<i class="fa fa-times-circle-o"></i>' + 
                    '</a>');
          
                setTimeout(function(){
                    $('.mute-overlay').on('touchstart click', function(e){        
                        if(e.handled === false) return;
                        e.stopPropagation();
                        e.preventDefault();
                        e.handled = true;  
                        
                        player.muted(false);
                        //console.log("volumee " +   WVM.activePlayer.volume());
                        $(this).hide();
                        $(this).css('display', 'none');
                        var currentTime = player.currentTime();                        
                        if(currentTime < 3){                            
                            player.currentTime(0);
                        }
                        var adsManager = player.ima.getAdsManager();
                        adsManager.setVolume(player.volume());
                    }); 
                    
                    $('.video-close-floating').on('click', function(){
                        WVM['player_state' + videoId]['CANCEL_FLOATING'] = true;
                        WVM.IS_FLOATING = false;  
                        window.dispatchEvent(WVM.FloatEventEnd);
                        $('#media-container-' + videoId).css('width', "100%");
                        $('#media-container-' + videoId).removeClass('floating-video');                        
                        $('#media-placeholder-' + videoId).css('display', 'none');     
                        player.pause();            
                        
                        WVM.NO_FLOAT_COOKIE();
                        var adsManager = player.ima.getAdsManager();
                        if(adsManager){
                            adsManager.pause();    
                        }
                    });         
                    if(hideClose){
                        setTimeout(function(){
                            $('.video-close-floating').css('display', 'none');   
                            $('.video-close-floating').remove();                                                    
                        }, 500);
                    }
                }, 500);
            }
            else{
                //wait 500 sec call again
                setTimeout(function(){
                    WVM.addMuteButton(videoId, player, hideClose);
                }, 500);
            }
                  
    };
    
    WVM.addFloatingAbility = function(videoId, player){
        var deviceName = 'desktop';
        if($('#media-container-' + videoId).length > 0){           
            if(deviceName == 'desktop'){                
                WVM.VIDEO_TOP = $('#media-container-' + videoId).offset().top;
            }else{
                WVM.VIDEO_TOP = $('#media-container-' + videoId).offset().top - $('.next-dropdown-accordion').height();
            }
            if(deviceName == 'desktop'){
               WVM.VIDEO_HEIGHT = $('#html5-video-' + videoId).outerHeight();
            }else{
                WVM.VIDEO_HEIGHT = $('#html5-video-' + videoId).outerHeight();
            }
            WVM.CONTAINER_HEIGHT = $('#media-container-' + videoId).height();
            //console.log("container height: " + WVM.CONTAINER_HEIGHT);
            $(window).on( "resize", function() {
                if(deviceName == 'desktop'){                
                    WVM.VIDEO_TOP = $('#media-container-' + videoId).offset().top;
                }else{
                    WVM.VIDEO_TOP = $('#media-container-' + videoId).offset().top - $('.next-dropdown-accordion').height();
                }
                if(deviceName == 'desktop'){
                   WVM.VIDEO_HEIGHT = $('#html5-video-' + videoId).outerHeight();
                }else{
                    WVM.VIDEO_HEIGHT = $('#html5-video-' + videoId).outerHeight();
                }
               WVM.CONTAINER_HEIGHT = $('#media-container-' + videoId).height();               
                console.log("container height: " + WVM.CONTAINER_HEIGHT);               
            });
            
            
            //console.log("VIDEOTOP: " + WVM.VIDEO_TOP);
            //console.log("VIDEOHEIGHT: " + WVM.VIDEO_HEIGHT);

            $(window).on( "scroll", function() {
                if(!WVM.IS_FLOATING){
                    if(deviceName == 'desktop'){
                        WVM.CONTAINER_HEIGHT = $('#media-container-' + videoId).height();                              
                    }else{  
                        WVM.CONTAINER_HEIGHT = $('#media-container-' + videoId + " .hlsvideo-wrapper").height() + 
                            $('#media-container-' + videoId + " .now-playing-container").height();      
                    }
                }
                
                
                //var top = $('#media-container-' + videoId).offset().top;
                var offset = WVM.VIDEO_TOP + (WVM.VIDEO_HEIGHT / 2);
                var offsetBack = WVM.VIDEO_TOP;
                var changed = false;
                //console.log("VIDEOTOP: " + WVM.VIDEO_TOP);
                //console.log("VIDEOHEIGHT: " + WVM.VIDEO_HEIGHT);
                //console.log("scrolltop " + $(window).scrollTop());
                //only float if playing
                var isPlaying = WVM['player_state' + videoId]['IS_PLAYING'] || WVM['player_state' + videoId]['AD_IS_PLAYING'];
                if(isPlaying){
                    $('.vjs-loading-spinner').hide();
                }
                
                
                if($(window).scrollTop() > offset && isPlaying && !WVM['player_state' + videoId]['CANCEL_FLOATING']){                   
                    $('#media-placeholder-' + videoId).height(WVM.CONTAINER_HEIGHT);
                    $('#media-placeholder-' + videoId).css('display', 'block');
                    if(!WVM.IS_FLOATING){
                        changed = true;
                        window.dispatchEvent(WVM.FloatEventStart);
                    }
                    WVM.IS_FLOATING = true;
                    $('#media-container-' + videoId).addClass('floating-video');
                    //set right
                    var sWidth = window.innerWidth || document.documentElement.clientWidth;
                    var sHeight = window.innerHeight || document.documentElement.clientHeight;
                    if(deviceName == 'desktop' || sWidth > 900){
                        var leftPos2 = $('aside').get(0).getBoundingClientRect().left;
                        var leftPos = $('aside').offset().left - 50;
                        $('#media-container-' + videoId).css('left', leftPos + "px");
                        var newWidth = Math.floor(sWidth / 3.5);
                        $('#media-container-' + videoId).css('width', newWidth + "px");
                    }
                    else{
                        $('#media-container-' + videoId).css('width', "100% !important");          
                        if(!WVM['player_state' + videoId]['PROMO_PLAYER']){
                           $('#media-container-' + videoId + ' .now-playing-container').css('display', 'block');
                           $('#media-container-' + videoId + ' .next-dropdown-accordion').css('display', 'block');
                        }
                    }
                    
                    
                    //floating-video
                    $('#media-container-' + videoId + " " + '.page-carousel-wrapper').hide();    
                    setTimeout(function(){
                        var hWrapper = $('.floating-video .hlsvideo-wrapper').height();
                        var npWidth = $('.floating-video .now-playing-container').height();
                        var ndWidth = $('.floating-video .next-dropdown-header').height() + 20;
                        var scrollerHeight = sHeight - (hWrapper + npWidth + ndWidth);
                        scrollerHeight = 180;
                        //scrollerHeight = parseInt(scrollerHeight * 0.5);
                        if(WVM.device_name == 'desktop'){
                            $('#media-container-' + videoId + " " + " .mobile-list-videos").height(scrollerHeight);                        
                        }
                    }, 100);
                }else if($(window).scrollTop() < offsetBack){                                        
                    if(WVM.IS_FLOATING){
                        changed = true;
                        window.dispatchEvent(WVM.FloatEventEnd);
                    }             
                    WVM.IS_FLOATING = false;         
                    $('#media-container-' + videoId).css('width', "100%");
                    $('#media-container-' + videoId).removeClass('floating-video');                        
                    $('#media-placeholder-' + videoId).css('display', 'none');
                    $('#media-container-' + videoId + ' .now-playing-container').css('display', 'block');
                    if(WVM['player_state' + videoId]['PROMO_PLAYER']){
                        $('#media-container-' + videoId + ' .now-playing-container').css('display', 'none');
                        $('#media-container-' + videoId + ' .next-dropdown-accordion').css('display', 'none');
                    }                    
                }
                

                
                if($('#next-dropdown-accordion-button-' + videoId).find('i').hasClass('fa-chevron-up')){                    
                    if(deviceName == "desktop" && !$('#media-container-' + videoId).hasClass('floating-video')){
                        $('#media-container-' + videoId + " " + '.page-carousel-wrapper').show();
                        $('#media-container-' + videoId + " " + '.mobile-list-wrapper').hide();                      
                        //console.log("showing desktop");
                        if(!WVM.player_state83505['CAROUSEL_INIT']){                        
                            WVM.setupCarousel(videoId);
                        }                         
                        
                    }else{                    
                        if(changed){
                            //default closed for mobile/floating player
                            $('#next-dropdown-accordion-button-' + videoId).find('i').removeClass('fa-chevron-up');                             
                            $('#next-dropdown-accordion-button-' + videoId).find('i').addClass('fa-chevron-down');                                
                            $('#media-container-' + videoId + " " + '.page-carousel-wrapper').hide();
                            $('#media-container-' + videoId + " " + '.mobile-list-wrapper').hide();     
                            var currVideoId = WVM['player_state' + videoId]['VIDEO_ID'];  
                            if(currVideoId == '9999999999'){
                                currVideoId = WVM.playlist_ids[0];
                            }
                            var nextVideoId = WVM.getNextPlaylistIndex(currVideoId);
                            var myTitle = WVM.getPlaylistData(videoId, currVideoId, 'noprefixtitle');                                                           
                            
                            $('#video-slider-nexttitle' + videoId).css('display', 'inline');
                            $('#video-slider-nexttitle' + videoId).html(myTitle);                               
                        }else{
                            $('#media-container-' + videoId + " " + '.page-carousel-wrapper').hide();
                            $('#media-container-' + videoId + " " + '.mobile-list-wrapper').show();                              
                        }
                    }
                }else{
                    $('#media-container-' + videoId + " " + '.page-carousel-wrapper').hide();
                    $('#media-container-' + videoId + " " + '.mobile-list-wrapper').hide();                            
                }
            } );
            
            $('#media-container-' + videoId + ' .video-close').on('click',function(){
                //set back to paused and stop floating
                WVM['player_state' + videoId]['CANCEL_FLOATING'] = true;
                WVM.IS_FLOATING = false;         
                window.dispatchEvent(WVM.FloatEventEnd);

                $('#media-container-' + videoId).css('width', "100%");
                $('#media-container-' + videoId).removeClass('floating-video');                        
                $('#media-placeholder-' + videoId).css('display', 'none');                
                WVM.NO_FLOAT_COOKIE();
                player.pause();                        
                player.ima.getAdsManager().pause();      
                
             });
            
            
        
        }        
    };
    
    WVM.setupCarousel = function(fullVideoId, player){
        // initialize Masonry after all images have loaded
        //alert("setting up carousel");        
        console.log("setting up carousel on desktop");        
        $('#page-carousel-' + fullVideoId).css('display', 'block');
        WVM['player_state' + fullVideoId]['CAROUSEL_INIT'] = true;
        if($('#page-carousel-' + fullVideoId).length > 0){
            
            var container = document.querySelector('#page-carousel-' + fullVideoId);
            imagesLoaded( container, function() {
                var screenWidth = window.innerWidth || document.documentElement.clientWidth;
                if(screenWidth > 850){
                    //alert("setting up carousel3");                    
                    WVM.IS_DESKTOP = true;
                    $('#page-carousel-' + fullVideoId + ' .page-carousel-lg-slides').css('display', 'block');
                    
                    WVM['player_settings' + fullVideoId].slider = $('#page-carousel-' + fullVideoId).owlCarousel({
                          loop: false,
                            center: false,
                            nav: false,
                            dots: false,
                            autoplay: false,
                            autoplayHoverPause: true,
                            margin: 25,
                            responsiveClass: true,
                            animateOut: 'slideOutDown',
                            animateIn: 'flipInX',
                            navText : ["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"],
                            responsive:{
                                0:{
                                    items:3
                                }
                            }
                        });                            
                }else{
                    WVM.IS_DESKTOP = false;
                    $('.page-carousel-wrapper').css('display', 'block');
                }
            });                 
        }        
        
    };
    
    WVM.setupToggleButton = function(fullVideoId, player){
        if($('.nextplay-switch-' + fullVideoId).length > 0){
            new DG.OnOffSwitchAuto({
                cls:'.nextplay-switch-' + fullVideoId,
                height: 24,
                trackColorOn:'#F9F9F9',
                trackColorOff:'#222',
                textColorOn: '#222',
                textColorOff: '#222',                        
                textOn:'On',
                textOff:'Off',
                listener:function(name, checked){
                    var theVal = 1;
                    if(!checked){
                        theVal = 0;
                    }

                    $.ajax({
                        url: '/ajax/update_autoplay_video/',
                        data: {
                            autoplay_on: theVal
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(data) 
                        {  
                            WVM['player_settings' + fullVideoId]['autoplay'] = checked;
                        },
                        error : function(){
                            console.log("Error loading video");
                        }
                    });                          
                }
            });                        
        }        
    };
    
    
    WVM.setupAccordionButton = function(fullVideoId){
        var deviceName = 'desktop';
        $('#next-dropdown-accordion-button-' + fullVideoId).on('click', function(){  
            if($(this).find('i').hasClass('fa-chevron-up')){
                //hide
                $(this).find('i').removeClass('fa-chevron-up');                             
                $(this).find('i').addClass('fa-chevron-down');                             
                if(deviceName == "desktop" && !$('#media-container-' + fullVideoId).hasClass('floating-video')){
                    $('#media-container-' + fullVideoId + " " + '.page-carousel-wrapper').slideUp();     
                    $('#media-container-' + fullVideoId + " " + '.mobile-list-wrapper').hide();
                    
                                           
                }else{
                    $('#media-container-' + fullVideoId + " " + '.mobile-list-wrapper').slideUp();   
                    $('#media-container-' + fullVideoId + " " + '.page-carousel-wrapper').hide();                         
                }
                var currVideoId = WVM['player_state' + fullVideoId]['VIDEO_ID'];   
                if(currVideoId == '9999999999'){
                    currVideoId = WVM.playlist_ids[0];
                }                
                var nextVideoId = WVM.getNextPlaylistIndex(currVideoId);                    
                //playerId, mediaId, fieldName                
                var myTitle = WVM.getPlaylistData(fullVideoId, nextVideoId, 'noprefixtitle'); 
                //alert("Getting title " + myTitle);
                $('#video-slider-nexttitle' + fullVideoId).css('display', 'inline');
                $('#video-slider-nexttitle' + fullVideoId).html(myTitle);                    
            }else{
                //expand
                $(this).find('i').addClass('fa-chevron-up');                             
                $(this).find('i').removeClass('fa-chevron-down');
                $('#media-container-' + fullVideoId + " " + '.mobile-list-wrapper').css('display', 'block');
                if(deviceName == "desktop" && !$('#media-container-' + fullVideoId).hasClass('floating-video')){
                    $('#media-container-' + fullVideoId + " " + '.page-carousel-wrapper').css('display', 'block');
                    $('#media-container-' + fullVideoId + " " + '.page-carousel-wrapper').slideDown();
                    $('#media-container-' + fullVideoId + " " + '.mobile-list-wrapper').hide();    
                    if(!WVM.player_state83505['CAROUSEL_INIT']){                        
                        WVM.setupCarousel(fullVideoId);
                    }          
                    
                }else{
                    $('#media-container-' + fullVideoId + " " + '.mobile-list-wrapper').slideDown();   
                    $('#media-container-' + fullVideoId + " " + '.page-carousel-wrapper').hide();       
                    
                    if(!$('#media-container-' + fullVideoId).hasClass('floating-video')){
                        if(!WVM.player_state83505['CAROUSEL_INIT']){
                            WVM.setupCarousel(fullVideoId);
                        }                      
                    }                    
                }         
                
                $('#video-slider-nexttitle' + fullVideoId).css('display', 'none');                  
            }
       });        
        var currVideoId = WVM['player_state' + fullVideoId]['VIDEO_ID'];        
        if(currVideoId == '9999999999'){
            currVideoId = WVM.playlist_ids[0];
        }        
        //console.log("current Video " + currVideoId);
        var nextVideoId = WVM.getNextPlaylistIndex(currVideoId);
        var myTitle = WVM.getPlaylistData(fullVideoId, nextVideoId, 'noprefixtitle'); 
        //console.log("setting title " + myTitle);
        $('#video-slider-nexttitle' + fullVideoId).css('display', 'inline');
        $('#video-slider-nexttitle' + fullVideoId).html(myTitle);           
       
    };
    WVM.sendbeacon = function(action, nonInteraction, value, eventLabel) {
        if(WCS.ONLY_CONTENT || WEBVIEW.is_webview){
            
            WEBVIEW.log_stats("video-" + action, value, WCS.THREAD_URL);
            var eventCategory = 'AppVideo';
            if (window.ga) {
            //console.log("sending action: " + action + " val: " + value + " label " + eventLabel);
              ga('send', 'event', {
                'eventCategory': eventCategory,
                'eventAction': action,
                'eventLabel': eventLabel,
                'eventValue': value,
                'nonInteraction': nonInteraction
               });
            }               
        }else{
            var eventCategory = 'Video';
            if (window.ga) {
            //console.log("sending action: " + action + " val: " + value + " label " + eventLabel);
              ga('send', 'event', {
                'eventCategory': eventCategory,
                'eventAction': action,
                'eventLabel': eventLabel,
                'eventValue': value,
                'nonInteraction': nonInteraction
               });
            }             
        }
    };   
    
    WVM.getNextPlaylistIndex = function(mediaId, returnArrayIndex){
        var currId = null;
        if(mediaId == null){            
            return null;
        }
        var found = false;
        for(var x =0; x < WVM.playlist_ids.length; x++){
            var myMediaId = WVM.playlist_ids[x];
            if(myMediaId == mediaId){
                found = true;
                currId = myMediaId;
                break;
            }
        }
        var nextId = x + 1;
        
        if(nextId < WVM.playlist_ids.length && currId !== null){        
            if(!returnArrayIndex){
                return WVM.playlist_ids[nextId];
            }else{
                return nextId;
            }
        }
        return null;
    };
    
    WVM.getPlaylistArrayId = function(mediaId){
        for(var x =0; x < WVM.playlist_ids.length; x++){
            var myMediaId = WVM.playlist_ids[x];
            if(myMediaId == mediaId){
                return x;
            }
        }    
        return null;
    };
    
    //unimportant stuff like tracking... don't put anything platform specific here
    WVM.finishPlayer = function(player, playerState, playerSettings){        
        var percentsPlayedInterval = 25;
        //player.off('ready');        
        player.on('ready', function(){
            playerState.PLAYER_READY = true;
        });
        
        //player.off(['waiting', 'pause']); 
        player.on(['waiting', 'pause'], function() {          
          playerState.IS_PLAYING = false;
          $('.vjs-loading-spinner').removeClass('badspinner');          
        });

        //player.off('playing'); 
        player.on('playing', function() {
          console.log('playing');                
          
        });         
        
        player.on('loadedmetadata', function(){
            if(playerState.PLAYER_META){
                return;
            }
            playerState.PLAYER_META = true;
            var currId = playerState.VIDEO_ID;
            if(currId == '9999999999'){
              currId = WVM.playlist_ids[0];
            }               
            
            WVM.sendbeacon("loadedmetadata", true, currId, playerState.VIDEO_TITLE);
        });             
        
        
        //player.off('adstart');          
        player.on('adstart', function(){
            console.log("starting ads");
            WVM.lastAdRequest = new Date().getTime() / 1000;            
            playerState.AD_IS_PLAYING = true; 
            playerState.PLAYED_AD = true;
            var currId = playerState.VIDEO_ID
              if(currId == '9999999999'){
                currId = WVM.playlist_ids[0];
              }               
            WVM.sendbeacon("adstart", true, currId, playerState.VIDEO_TITLE);
        });       
        //player.off('adend');      
        player.on('adend', function(){
            var playPromise = null;
            console.log("ad end");
            playerState.AD_IS_PLAYING = false;
            setTimeout(function(){
                if(!playerState.IS_PLAYING || player.paused()){
                                    }
            }, 500);    
            WVM.lastAdRequest = new Date().getTime() / 1000;       
            var currId = playerState.VIDEO_ID;
            if(currId == '9999999999'){
                currId = WVM.playlist_ids[0];
            }               
            WVM.sendbeacon("adend", true, currId, playerState.VIDEO_TITLE);

        });   
        //player.off('timeupdate');                
        player.on('timeupdate', function(){
            playerState.IS_PLAYING = true;
            var fullDuration = this.duration() * 1000;
            var fullCurrent = this.currentTime() * 1000;
            var rand = parseInt(Math.random() * 100);
            //console.log("timeupdate "  + fullCurrent + " out of " + fullDuration);

            if(rand > 20){
                if(fullDuration > 1 && ((fullDuration - fullCurrent) > 1) && !$('.vjs-loading-spinner').hasClass('badspinner')){       
                    console.log("hiding spinner");
                    $('.vjs-loading-spinner').addClass('badspinner');
                }
            }
            var duration_time =  Math.floor(this.duration());
            
            //this is a hack because the end video event is not firing...
            var current_time =  Math.floor(this.currentTime());
            if ( current_time > 0 && ( fullCurrent >= (fullDuration - 10) )){
              var currId = playerState.VIDEO_ID;          
              if(currId == '9999999999'){
                    currId = WVM.playlist_ids[0];
              }                   
              var newMediaId = WVM.getNextPlaylistIndex(currId); 
              //if(playerSettings.autoplay_next && newMediaId){ 
              if(newMediaId){ 
                  if('desktop' == "iphone" && playerState.AD_ERROR){
                      console.log("skipped timeupdate end");
                  }else{                    
                     WVM.load_video(newMediaId, true, playerState.ORIGINAL_ID);
                  }
              }                
            }                        
            
            if(!playerState.START_SENT){
              WVM.sendbeacon('start', true, currId, playerState.VIDEO_TITLE);
              playerState.START_SENT = true;
            }      
            
            var currentTime, duration, percent, percentPlayed, _i;
            currentTime = Math.round(this.currentTime());
            duration = Math.round(this.duration());
            percentPlayed = Math.round(currentTime / duration * 100);
            for (percent = _i = 0; _i <= 99; percent = _i += percentsPlayedInterval) {
              if (percentPlayed >= percent && __indexOf.call(playerState['PERCENTS_TRACKED'], percent) < 0) {
                if (percentPlayed !== 0) {
                  WVM.sendbeacon('percent-' + percent, true, currId, playerState.VIDEO_TITLE);              
                }
                if (percentPlayed > 0) {
                  playerState['PERCENTS_TRACKED'].push(percent);
                }
              }
            }    
            
            
        });
        //player.off('ended');         
        player.on('ended', function(){
            console.log("ended");
            playerState.IS_PLAYING = false;
            var currId = playerState.VIDEO_ID;          
            if(currId == '9999999999'){
                currId = WVM.playlist_ids[0];
            }               
            WVM.sendbeacon("complete", true, currId, playerState.VIDEO_TITLE);    
       
            console.log("current id " + currId);
            console.log("playlist ids");
            console.log(WVM.playlist_ids);            
            
            var newMediaId = WVM.getNextPlaylistIndex(currId); 
            //if(playerSettings.autoplay_next && newMediaId){ 
            if(newMediaId){ 
                WVM.load_video(newMediaId, true, playerState.ORIGINAL_ID);
            }else{
                var videoId = playerState.ORIGINAL_ID;
                WVM['player_state' + videoId]['CANCEL_FLOATING'] = true;
                WVM.IS_FLOATING = false;  
                window.dispatchEvent(WVM.FloatEventEnd);
                $('#media-container-' + videoId).css('width', "100%");
                $('#media-container-' + videoId).removeClass('floating-video');                        
                $('#media-placeholder-' + videoId).css('display', 'none');     
                console.log("Playlist complete (no more videos)");
                                
            }

        });  
        

        //player.off('adserror');    
        player.on('adserror', function(e){
            //$('#ima-ad-container').remove();
            WVM.lastAdRequest = new Date().getTime() / 1000;
            console.log(e);
            console.log("ads error");
            
            var errMessage = e['data']['AdError']['l'];

            playerState.AD_IS_PLAYING = false;
            playerState.IS_PLAYING = false;
            
            // && errMessage == 'The VAST response document is empty.'
            if(!playerState.AD_ERROR){
                var dTime = new Date().getTime();
                WVM.firstPrerollTagUrl = WVM.getFirstPrerollUrl();
                console.log("not calling backup ad tag url: " + WVM.adTagUrl);
                /*
                WVM.activePlayer.ima.changeAdTag(WVM.adTagUrl  + "?" + dTime);
                WVM.activePlayer.ima.requestAds();

                //reload src
                WVM.activePlayer.src({
                    src: masterSrc,
                    type: 'video/mp4'
                });
                                //firefox *really* hates this load event
                WVM.activePlayer.load();
                                  */  
            }
            playerState.AD_ERROR = true;            
        });
        
        //player.off('error');         
        player.on('error', function(event) {
          if (player.error().code === 4) {
            player.error(null); // clear out the old error
            player.options().sources.shift(); // drop the highest precedence source
            console.log("now doing src");            
            console.log(player.options().sources[0]);
            player.src(player.options().sources[0]); // retry
            return;
          }
        });
        
        //player.off('volumechange');        
        player.on('volumechange', function(event) {
            console.log(event);

            var theHeight = $('#media-container-' + playerState.ORIGINAL_ID + ' .vjs-volume-level').css('height');
            var cssVolume = 0;
            if(theHeight){
                cssVolume = parseInt(theHeight.replace('%', ''));
            }
            var theVolume = player.volume();
            if(theVolume > 0.0 || cssVolume > 0){
                $('#media-container-' + playerState.ORIGINAL_ID + ' .mute-overlay').css('display', 'none');                                
            }else{
                $('#media-container-' + playerState.ORIGINAL_ID + ' .mute-overlay').css('display', 'block');                
            }
        });        
                //WVM.reinitRawEvents(playerState.ORIGINAL_ID);
        //setInterval(function(){
        //    WVM.reinitRawEvents(playerState.ORIGINAL_ID);
        //}, 2000);
            }
    if(!WVM.rawCompleteEvent){
        WVM.rawCompleteEvent = function(e){
            var playerState = WVM['player_state83505'];
                    };
    }
    if(!WVM.rawTimeupdateEvent){
        WVM.rawTimeupdateEvent = function(e){
                        var playerState = WVM['player_state83505'];
            var rawVideoElem = document.getElementById('html5-video-' + playerState['ORIGINAL_ID'] + '_html5_api');            
            var fullCurrent = rawVideoElem.currentTime * 1000;
            var fullDuration = rawVideoElem.duration * 1000;
            var current_time =  Math.floor(rawVideoElem.currentTime);
            console.log("raw timeupdate: " + fullCurrent + " out of " + fullDuration);                      
            
            if ( current_time > 0 && ( fullCurrent >= (fullDuration - 50) )){
              var currId = playerState.VIDEO_ID;       
              if(currId == '9999999999'){
                currId = WVM.playlist_ids[0];
              }              
              var newMediaId = WVM.getNextPlaylistIndex(currId); 
              if(newMediaId){ 
                  console.log("loading new video from rawtimeupdate");    
                  WVM.load_video(newMediaId, true, playerState.ORIGINAL_ID);
              }                
            }                    
                        if(!$('.vjs-loading-spinner').hasClass('badspinner')){
                $('.vjs-loading-spinner').addClass('badspinner')
            }
        };
    }    
    
    WVM.reinitRawEvents = function(playerId){
        var playerState = WVM['player_state' + playerId];
        var rawVideoElem = document.getElementById('html5-video-' + WVM['player_state' + playerId]['ORIGINAL_ID'] + '_html5_api');

        //COMPLETE EENT
        if( WVM['player_state' + playerId].COMPLETE_EVENT){
            rawVideoElem.removeEventListener('ended', WVM.rawCompleteEvent, false);
        }  
        rawVideoElem.addEventListener('ended', WVM.rawCompleteEvent, false);      
        
        //TIME UPDATE EVENT
        if( WVM['player_state' + playerId].TIMEUPDATE_EVENT){
            rawVideoElem.removeEventListener('ended', WVM.rawTimeupdateEvent, false);
        }  
        rawVideoElem.addEventListener('ended', WVM.rawTimeupdateEvent, false);  
        
        
        WVM['player_state' + playerId].COMPLETE_EVENT = true;      
        WVM['player_state' + playerId].TIMEUPDATE_EVENT = true;     
    };
    
    </script>
            <!-- Video Player Desktop 83505 -->
    <script>      
console.log("desktop");
    WVM.detectIE = function() {
        var ua = window.navigator.userAgent;

        var msie = ua.indexOf('MSIE ');
        if (msie > 0) {
            // IE 10 or older => return version number
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        }

        var trident = ua.indexOf('Trident/');
        if (trident > 0) {
            // IE 11 => return version number
            var rv = ua.indexOf('rv:');
            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        }

        var edge = ua.indexOf('Edge/');
        if (edge > 0) {
           // Edge (IE 12+) => return version number
           return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
        }

        // other browser
        return false;
    };    
    
    function initPlayer83505(){       
        var firstPlayer = true;        
        var fullVideoId = 83505;      
        var isPromoVideo = true;
        var isHomepage = false;
        
        var muted = true;
                
        if(firstPlayer){
          console.log("first player now");
            WVM.autoplayAllowed = true;
        }

        
        var vjsOptions = {
          autoplay: WVM.autoplayAllowed,
          playsinline : true,
          muted: muted,
          debug: true,   
          replay: false,
          controlBar: {
            volumePanel: {
                inline: false
            }
          },           
        };        
                
        var wrapperDiv = document.getElementById('html5-video-83505');
        var player = videojs('html5-video-83505', vjsOptions);
        console.log("initing player 83505");
        var initAdDisplayContainer = function() {
            console.log("init ads");
            player.ima.initializeAdDisplayContainer();
            wrapperDiv.removeEventListener('click', initAdDisplayContainer);
        }           
        var handleVolumeChange = function(e){
            $('#media-container-' + fullVideoId + ' .mute-overlay').css('display', 'none');     
        };
        
        var handleComplete = function(e){
            console.log("ad completed");            
                        setTimeout(function(){
                //reload video
                //WVM.load_video(playerState.VIDEO_ID, true, playerState.ORIGINAL_ID);
                if(player.paused()){                    
                    var playPromise = player.play();
                    WVM.printPromise(playPromise, "rawadend");                              
                }
            }, 100);
                        //WVM.lastAdRequest = new Date().getTime() / 1000;   
            WVM.reinitRawEvents(fullVideoId);
        };        
        var firstLoaded = false;
        var handleLoaded = function(e){
            if(!firstLoaded){
                firstLoaded = true;
                if(muted){
                    player.ima.getAdsManager().setVolume(0);     
                }
            }
        };
        console.log("first preroll url: " + WVM.firstPrerollTagUrl);        
        var imaOptions = {
          id: 'html5-video-83505',
          adTagUrl: WVM.firstPrerollTagUrl,
          vpaidMode: google.ima.ImaSdkSettings.VpaidMode.INSECURE,
          timeout: 15000,          
          adsManagerLoadedCallback: function(e){

                player.ima.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,handleVolumeChange);
                player.ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,handleComplete);
                player.ima.addEventListener(google.ima.AdEvent.Type.LOADED, handleLoaded);
          }        
        };
        player.ima(imaOptions);        
        
        
        if (!WVM.autoplayAllowed) {
          
          wrapperDiv.addEventListener('click', initAdDisplayContainer);

        }else{
          //WVM.lastAdRequest = new Date().getTime() / 1000;   
        }
        WVM.activePlayer = player;
        WVM.finishPlayer(player, WVM.player_state83505, WVM.player_settings83505);   
        
        //SETUP THE OPTIONS 
        

               
        console.log("ADDING FLOATING ABILTY");
        WVM.addFloatingAbility(fullVideoId, player);                    
                console.log("ACCORDION BUTTON");            
        WVM.setupAccordionButton(fullVideoId, player);       
                       
        console.log("SETUP MUTE");                                  
        
        WVM.setupToggleButton(fullVideoId, player);       
        WVM.addMuteButton(fullVideoId, player);       
                
        var playPromise = null;
                //give it a kick part 2    
        console.log("is chrome kick");
        setTimeout(function(){
            //var isPlaying = WVM['player_state' + fullVideoId]['IS_PLAYING'] || WVM['player_state' + fullVideoId]['AD_IS_PLAYING'];
            if(player.paused() && firstPlayer){

                var playPromise = player.play();
                WVM.printPromise(playPromise, "setupkick");                
            }else if(player.paused() && isPromoVideo){
                console.log("not first player but promo so kicking");
                var playPromise = player.play();
                WVM.printPromise(playPromise, "setupkick"); 
            }
        }, 500);            
                    

        $('#media-container-' + fullVideoId + ' a.videolink').off('click');
        $('#media-container-' + fullVideoId + ' a.videolink').on('click', function()
        {
            //alert("loading video with player id " + fullVideoId);
            var mid = this.id.split('_')[1];         
            var newIndex = WVM.getPlaylistArrayId(mid); 
            WVM.load_video(mid, true, fullVideoId, newIndex);
        });    
      }     
    
    </script>     
            

       
    
    <script>
    if(!WVM.load_video){
        WVM.load_video = function(mediaID, changeAd, playerId)
        {        
            
            var currDate = new Date().getTime() / 1000;
            //console.log("currDate " + currDate + " vs " + (WVM.lastLoadedVideo + 1).toString());
            if(currDate < (WVM.lastLoadedVideo + 1)){
                //don't load video if video was loaded a sec ago
                return;
            }
            var playerSettings = WVM['player_settings' + playerId];
            var playerState = WVM['player_state' + playerId];
            var playPromise = null;

            WVM.sendbeacon('changevideo', true, playerState.ORIGINAL_ID, playerState.VIDEO_TITLE);        
            WVM.lastLoadedVideo = currDate;
            var nextVideoId = WVM.getNextPlaylistIndex(mediaID);
            if(nextVideoId == null){
                $('#media-container-' + playerId + ' .video-slider-nextlabel').hide();
                $('#media-container-' + playerId + ' .video-slider-nexttitle').hide();            
            }else{
                $('#media-container-' + playerId + ' .video-slider-nextlabel').show();
                $('#media-container-' + playerId + ' .video-slider-nexttitle').show();            
            }
            
            WVM['player_state' + playerId]['VIDEO_ID'] = mediaID;
    
            if(!playerState.PROMO_PLAYER){
                $('#media-container-' + playerId + ' #video_title_' + playerId).addClass('blurme');
                $('#media-container-' + playerId + ' #video_title_' + playerId).removeClass('blurme');
            }
            var mTitle = WVM.getPlaylistData(playerId, mediaID, "prefix") + WVM.getPlaylistData(playerId, mediaID, "title");
            var mid = WVM.getPlaylistData(playerId, mediaID, "video_id");   
            var hlsSrc = WVM.getPlaylistData(playerId, mediaID, "hls_rendition");   
            var masterSrc = WVM.getPlaylistData(playerId, mediaID, 'master_rendition');                
            var hasCaptions = WVM.getPlaylistData(playerId, mediaID, 'has_captions');
            var captionUrl = WVM.getPlaylistData(playerId, mediaID, 'caption_url');
            var vidUrl = WVM.getPlaylistData(playerId, mediaID, 'url');
            var vidTitle = WVM.getPlaylistData(playerId, mediaID, 'noprefixtitle');
                        playerState['VIDEO_URL'] = vidUrl;
            playerState['VIDEO_TITLE'] = vidTitle;
            $('#media-container-' + playerId + ' .now-playing-description').empty();

            var NEXT_TITLE = "";
            if(nextVideoId !== null){
                NEXT_TITLE = WVM.getPlaylistData(playerId, nextVideoId, "noprefixtitle");
            }

            var $mobileParent = $('#media-container-' + playerId + " #videolist_" + mediaID).parent().parent();
            //remove previous items in mobile/floating playist
            if($mobileParent.nextAll().length >= 2){
                $mobileParent.prevAll().remove();
                $mobileParent.remove();            
            }
            else if($mobileParent.nextAll().length == 1){
                $mobileParent.prevAll().remove();

            }        


            //remove previous items in owlCarousel
            if(WVM.device_name == 'desktop'){
                var owlParent = $('#media-container-' + playerId + " #videolink_" + mediaID).parents('.owl-item').get(0);
                var totalRemove = $(owlParent).prevAll().length;
                for(var x = totalRemove; x > 0; x--){
                    playerSettings.slider.trigger('remove.owl.carousel', [x - 1])                    
                }
                if(playerSettings.slider !== null){
                    playerSettings.slider.trigger('refresh.owl.carousel');
                }
            }
            if(!playerState.PROMO_PLAYER){
                $('#media-container-' + playerId + ' #video_title_' + playerId).html(
                    "<div class='now-playing-prefix'>On Now </div><div class='content-now-title inner'>" + mTitle + '</div>');
            }
            $('#media-container-' + playerId + ' a.videolink').removeClass('selected');
            $('#media-container-' + playerId + ' a#videolink2_' + mediaID).addClass('selected');
            $('#media-container-' + playerId + ' a#videolink_' + mediaID).addClass('selected');
            $('#media-container-' + playerId + ' h5').removeClass('selected');
            $('#media-container-' + playerId + ' a#videolink2_' + mediaID).parent().addClass('selected');
            $('#media-container-' + playerId + ' a#videolink_' + mediaID).parent().addClass('selected');

            $('#media-container-' + playerId + ' #video-slider-nexttitle' + playerId).html(NEXT_TITLE);
            
            
            $('#video-slider-nexttitle' + playerId).css('display', 'inline');
            $('#video-slider-nexttitle' + playerId).html(NEXT_TITLE);   
            
            if(WVM['player_settings' + playerId].slider !== null)
            {
                playerSettings.slider.trigger('to.owl.carousel', [0, 1]);
                
                //WVM['player_settings' + playerId].slider.goToSlide(0);
            }                    
            
            
            WVM.activePlayer.pause();

            var sixtySecondsAgo = (new Date().getTime() / 1000) - 60;
            //console.log(sixtySecondsAgo + " VS ");
            //console.log(WVM.lastAdRequest);
            playerState.START_SENT = false;
            playerState.PERCENTS_TRACKED = [];
            var has_prerolls = true;
            try {
                var playPromise = null;
                //WVM.activePlayer.reset();     
                //wvm
                console.log("change ad " + changeAd);
                console.log(WVM.lastAdRequest);
                console.log(sixtySecondsAgo);
                if(changeAd && (WVM.lastAdRequest < sixtySecondsAgo)){ 
                    var dTime = new Date().getTime();
                    console.log("requesting ad " + WVM.adTagUrl);
                    //alert("requesting ad " + WVM.adTagUrl);
                    
                    WVM.activePlayer.ima.changeAdTag(WVM.adTagUrl + "?" + dTime);
                    WVM.activePlayer.ima.requestAds();
                    WVM.activePlayer.src({
                        src: masterSrc,
                        type: 'video/mp4'
                    });           
                                        //firefox *really* hates this load event
                    WVM.activePlayer.load();      
                    playPromise = WVM.activePlayer.play(); 
                                        //play will be handled by adend
                    $('#media-container-' + playerId + ' .vjs-loading-spinner').addClass('badspinner');

                }else{
                    //alert("master src " + masterSrc); 
                    WVM.activePlayer.src({
                        src: masterSrc,
                        type: 'video/mp4'
                    });
                    
                                            WVM.activePlayer.load();     
                        playPromise = WVM.activePlayer.play();                                            
                                        $('#media-container-' + playerId + ' .vjs-loading-spinner').addClass('badspinner');
                }
                WVM.ACTIVE_PLAYING = true;
                var oldTracks = WVM.activePlayer.remoteTextTracks();
                var i = oldTracks.length;
                while (i--) {
                  WVM.activePlayer.removeRemoteTextTrack(oldTracks[i]);
                }
                if(hasCaptions == 'yes'){                   
                    WVM.activePlayer.addRemoteTextTrack({
                        kind: 'captions',
                        srclang: "en",
                        label:'English',
                        src: captionUrl }, false);                                    
                }
                //console.log("date2 " + new Date().getTime());
                if(playPromise !== null){
                    WVM.printPromise(playPromise, "adend");
                }                
            }
            catch(error) {
              console.error(error);
              alert("There was an error in the video player.");
              //reset the stupid player for being stupid
              WVM.activePlayer.reset();
            }
            setTimeout(function(){
                var isPlaying = WVM['player_state' + playerId]['IS_PLAYING'] || WVM['player_state' + playerId]['AD_IS_PLAYING'];
                if(!isPlaying){
                    //alert("restarting because stupid");
                    console.log("restarting because not started after loaded");
                    playPromise = WVM.activePlayer.play();
                    if(playPromise !== null){
                        WVM.printPromise(playPromise, "adend");
                    }
                    
                }   
            }, 300);

            var theHeight = $('#media-container-' + playerState.ORIGINAL_ID + ' .vjs-volume-level').css('height');
            var cssVolume = 0;
            if(theHeight){
                cssVolume = parseInt(theHeight.replace('%', ''));
            }
                        var theVolume =  WVM.activePlayer.volume();
            if(theVolume > 0.0 || cssVolume > 0){
                $('#media-container-' + playerState.ORIGINAL_ID + ' .mute-overlay').css('display', 'none');                                
            }else{
                $('#media-container-' + playerState.ORIGINAL_ID + ' .mute-overlay').css('display', 'block');                
            }        
                        //cant believe I have to do this.... re-init all events
            //WVM.finishPlayer(WVM.activePlayer, playerState, playerSettings);


        }    
    }

        
    WVM.autoplayAllowed = false;
    WVM.autoplayRequiresMute = false;
    var didCheck;
        WVM.printPromise = function(playPromise, theType){
        if (playPromise !== undefined) {
          playPromise.then(_ => {
            console.log("PLAY-PROMISE: success for " + theType);
          })
          .catch(error => {
            console.log("PLAY-PROMISE: failure for " + theType);            
          });
        }        
    };        
    function checkUnmutedAutoplaySupport(callback) {      
      canAutoplay.video({
            timeout: 500, muted: false
        })
        .then(({
            result, error
        }) => {
            if(result === false) {
              // Unmuted autoplay is not allowed.
              checkMutedAutoplaySupport(callback);
            } else {
              // Unmuted autoplay is allowed.
              WVM.autoplayAllowed = true;
              WVM.autoplayRequiresMute = false;
              callback();
            }
        })
    }

    function checkMutedAutoplaySupport(callback) {
      canAutoplay
        .video({
            timeout: 500, 
            muted: true
        })
        .then(({
            result, error
        }) => {
            if(result === false) {
              // Muted autoplay is not allowed.
              
              WVM.autoplayAllowed = false;
              WVM.autoplayRequiresMute = false;
            } else {
              // Muted autoplay is allowed.
              
              WVM.autoplayAllowed = true;
              WVM.autoplayRequiresMute = true;
            }
            callback();
        });
    }    
    if(!didCheck){
        checkUnmutedAutoplaySupport(function(){        
                        console.log("is promo");
            var imagesInterval = window.setInterval(function(){
                if(!google){
                    return;
                }
                var screenWidth = window.innerWidth || document.documentElement.clientWidth;
                if(screenWidth >= 900){
                     
                        initPlayer83505();
                        window.clearInterval(imagesInterval);
                                    }else if(screenWidth < 900)
                {
                     
                    var $promo_mobile = $('#promo_player_mobile');
                    var $playerElement = $('#promo_player_desktop').first();
                    $('#promo_player_desktop').first().detach();
                    $promo_mobile.append($playerElement);
                    setTimeout(function(){
                        $('.desktop-only').remove();    
                        initPlayer83505();                        
                    }, 100);                    
                    //initPlayer83505();
                    window.clearInterval(imagesInterval);
                                    }
                else{
                    console.log("imagesloaded waiiiiiitting");
                }                
            }, 500);
                                            
        });     
        didCheck = true;
    }else{
          
        var imagesInterval = window.setInterval(function(){
            var screenWidth = window.innerWidth || document.documentElement.clientWidth;
            var playerId = 83505;
            if(screenWidth > 900){
                $('.mobile-only').remove();
                initPlayer83505();    
            }else if(screenWidth <= 900){
                var $promo_mobile = $('#promo_player_mobile');
                var $playerElement = $('#promo_player_desktop').first();
                $('#promo_player_desktop').first().detach();
                $promo_mobile.append($playerElement);
                setTimeout(function(){
                    $('.desktop-only').remove();    
                    initPlayer83505();                        
                }, 100);
            }
            window.clearInterval(imagesInterval);
        }, 500);
             
    }    
        

    
</script>        


    
<!--
<a id="hide_mobile_thing" href="javavascript:void(0);">
    Hide Mobile side
</a>
-->

                                                                    </div>
                                <!-- On Now new module -->
                                <div class="content-now-next">
                                    <div class="content-now-next-inner inner-box-stacking-bottom">
                                        <div class="content-next-heading">On MeTV Now:</div>
                                        <div class="content-now-title">
                                            Charlie's Angels
                                        </div>
                                        <span class="content-now-subheading">Rosemary, for Remembrance
                                        </span>
                                        <p class="content-now-description desktop-only">When an ex-mobster is targeted, the Angels are called.</p>
                                        <div class="content-next-heading">Up Next:</div>
                                        <div class="content-next-schedule">
                                            <span class="content-next-time"> 5:00PM</span>
                                                                                        <a href="shows/the-flintstones">
                                                The Flintstones
                                            </a>
                                                                                        
                                        </div>
                                        <div class="content-next-schedule up-next-second">
                                            <span class="content-next-time"> 5:30PM
                                            </span>
                                            <span class="content-next-title">
                                                                                                                                                        <a href="shows/the-flintstones">
                                                    The Flintstones
                                                    </a>
                                                                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                                                        <div class="sidebar-buttons inline-mobile-buttons">
                                <a class="btn-primary orange" href="/schedule/">Full Schedule<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                                <a class="btn-primary purple" href="/wheretowatch/affiliate/602">Where to Watch<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                            </div>
                        </div>
                    </li>
                                            <li>
                            <div class="side-ad">
                                <div id="metvcom_sidebar">
                                    <script type="text/javascript">
                                        googletag.cmd.push(function() { googletag.display('metvcom_sidebar'); });
                                    </script>
                                </div>
                            </div>
                        </li>
                                         <!-- else not homepage -->
                    
                                                    <li>
                                <div class="side-ad">
                                    <div id="metvcom_sidebar">
                                        <script type="text/javascript">
                                            googletag.cmd.push(function() { googletag.display('metvcom_sidebar'); });
                                        </script>
                                    </div>
                                </div>
                            </li>
                                                <li>
                            <div class="side-newsletter-wrap">
    <div class="side-newsletter-subheading">Sign up for our newsletter
        </div>
    <div class="side-newsletter-form-wrap">
        <form id="side-newsletter-form" class="clearfix" method="post">
            <input type="text" id="side_newsletter_email" name="email" value="Your email" placeholder="Your email">
            <button id="newsletter_signup" type="submit" name="submit"><i class="fa fa-chevron-right"></i></button>
        </form>

    </div>
</div>


    <script type="text/javascript">
        var WCS = WCS || {};  
        if(!WCS.newsletterAdded){           
            $(document).ready(function(){            

                var NEWSLETTER_CLICK = false;
                var HP_NEWSLETTER_CLICK = false;
                var MODAL_NEWSLETTER_CLICK = false;
                var LP_NEWSLETTER_CLICK = false;
                var HEADTOHEAD_CLICK = false;
                var MEMADNESS_CLICK = false;
                var SIDE_NEWSLETTER_CLICK = false;
                var FOOT_NEWSLETTER_CLICK = false;

                //hacky - monitor clicks and typing on forms to choose where to say THANK YOU!!!!!!
                $('#modal-newsletter-form').on('keypress', function(event) {
                    MODAL_NEWSLETTER_CLICK = true;
                });
                $('#modal-newsletter-form').on('click', function(event) {
                    MODAL_NEWSLETTER_CLICK = true;
                });

                $('#memadness-newsletter-form').on('keypress', function(event) {
                    MEMADNESS_CLICK = true;
                });
                $('#memadness-newsletter-form').on('click', function(event) {
                    MEMADNESS_CLICK = true;
                });

                 $('#side-newsletter-form').on('keypress', function(event) {
                     console.log("side1");
                    SIDE_NEWSLETTER_CLICK = true;
                    FOOT_NEWSLETTER_CLICK = false;          
                });
                $('#side-newsletter-form').on('click', function(event) {
                     console.log("side2");                    
                    SIDE_NEWSLETTER_CLICK = true;
                    FOOT_NEWSLETTER_CLICK = false;                           
                });    

                 $('#foot-newsletter-form').on('keypress', function(event) {
                    FOOT_NEWSLETTER_CLICK = true;
                    SIDE_NEWSLETTER_CLICK = false;
                          
                     console.log("foot1");                                        
                });
                $('#foot-newsletter-form').on('click', function(event) {
                    FOOT_NEWSLETTER_CLICK = true;
                    SIDE_NEWSLETTER_CLICK = false;
                     console.log("foot2");                                                            
                });            

                $('#side-newsletter-form,#foot-newsletter-form,#modal-newsletter-form,#pickme-newsletter-form,#hth-newsletter-form,#memadness-newsletter-form').submit( function(e){
                    e.preventDefault();

                    var emailAddress = $('#side_newsletter_email').val();
                    if(HEADTOHEAD_CLICK){
                        emailAddress = $('#hth_newsletter_email').val();
                    }
                    else if(HP_NEWSLETTER_CLICK){
                        emailAddress = $('#hp_newsletter_email').val();
                    }
                    else if(MODAL_NEWSLETTER_CLICK){
                        emailAddress = $('#modal_newsletter_email').val();
                    }
                    else if(MEMADNESS_CLICK){
                        emailAddress = $('#memadness_newsletter_email').val();
                    }
                    else if(SIDE_NEWSLETTER_CLICK){
                        emailAddress = $('#side_newsletter_email').val();
                    }
                    else if(FOOT_NEWSLETTER_CLICK){
                        emailAddress = $('#foot_newsletter_email').val();
                    }                

                    if(emailAddress.length <= 2){
                        alert("Enter a valid email");
                        return false;
                    }
                    if(NEWSLETTER_CLICK){
                        return;
                    }
                    NEWSLETTER_CLICK = true;
                    $.ajax({
                        url: '/ajax/newsletter_signup/',
                        data: {
                            email: emailAddress
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(data)
                        {
                            if(data.status == "success"){
                                
                                if(MEMADNESS_CLICK){
                                    $('.memadness-newsletter-signup').html('<span class="newsletter-thankyou">Thank you for signing up!</span>');
                                }     
                                else if(SIDE_NEWSLETTER_CLICK){
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');
                                }
                                else if(FOOT_NEWSLETTER_CLICK){                                
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');                                    
                                }                                     
                                else{
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');
                                    $('.content-newsletter-signup.newsletter-wrap').css('padding-left', '0');
                                }
                            }
                            else if(data.status == "failure"){
                                alert(data.msg);
                            }
                            NEWSLETTER_CLICK = false;
                        },
                        error : function(response)
                        {
                           //alert('Error');
                           console.log(response);
                        }
                    });

                });
                
            });
            WCS.newsletterAdded = true;
        }
		// open MeTV Music playter
		/*$('.metvmusic-listen-btn-side').click(function(e){
			e.preventDefault();
			window.open('/metvmusic/','metvmusic','resizable,height=582,width=756');
		});*/
    </script>


                        </li>
                        <li>
                            <div class="side-store-products-section">
                                <h3>Shop the M<span class="transform-lowercase">e</span>TV Store</h3>
                                        <div class="side-store-products">
                                        <div class="owl-carousel owl-theme content-grid-sample store-products">
                                                                                                                                                <div class="side-store-product-item">
                                                        <a class="shows-mobile-stories-thumbs" href="https://store.metv.com/products/i-love-lucy-many-moods">
                                                            <img src="https://cdn.shopify.com/s/files/1/0219/7690/products/LB298-AS_large.jpg?v=1486415028">
                                                            <div class="product-title">I Love Lucy - Many Moods</div>
                                                        </a>
                                                        <div class="product-price">$34.95</div>
                                                    </div>
                                                                                                                                                                                                <div class="side-store-product-item">
                                                        <a class="shows-mobile-stories-thumbs" href="https://store.metv.com/products/batman-boy-wonder">
                                                            <img src="https://cdn.shopify.com/s/files/1/0219/7690/products/BMT110-AT_large.jpg?v=1479227168">
                                                            <div class="product-title">Batman - Boy Wonder</div>
                                                        </a>
                                                        <div class="product-price">$19.95</div>
                                                    </div>
                                                                                                                                                                                                <div class="side-store-product-item">
                                                        <a class="shows-mobile-stories-thumbs" href="https://store.metv.com/products/batman-classic-1966-tv-series-retro-action-figure-surfing-chief-ohara">
                                                            <img src="https://cdn.shopify.com/s/files/1/0219/7690/products/2016_FTC_Batman_TV_VariantsCARDED_OHara_Surf_large.jpg?v=1471546432">
                                                            <div class="product-title">Batman Classic 1966 TV Series Retro Figurine: Surfing Chief O'Hara</div>
                                                        </a>
                                                        <div class="product-price">$24.99</div>
                                                    </div>
                                                                                                                                                                                                <div class="side-store-product-item">
                                                        <a class="shows-mobile-stories-thumbs" href="https://store.metv.com/products/i-love-lucy-keep-calm">
                                                            <img src="https://cdn.shopify.com/s/files/1/0219/7690/products/LB269-AFTH_large.jpg?v=1485367674">
                                                            <div class="product-title">I Love Lucy - Keep Calm</div>
                                                        </a>
                                                        <div class="product-price">$38.95</div>
                                                    </div>
                                                                                                                                                                                        
                                        </div>
                                    </div>
                                <div class="inner-flex-btn">
                                    <a class="btn-primary btn-small white inverted-white text-brand-blue" href="https://store.metv.com/">Shop All&nbsp;<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </li>
                        <li class="desktop-only">
                            <div class="sidebar-metvfm-background">
    <div class="sidebar-metvfm-inner-container">
        <div class="now-playing-music-container">
            <span class="now-playing-text">Now playing on&nbsp;<img src="/images/metvfm-logo.png"></span>
        </div>
        <a class="external-link" href="https://metv.fm" target="_blank" rel="noopener">
                            <img id="sidebar-metvfm-image" class="sidebar-metvfm-image" src="https://is2-ssl.mzstatic.com/image/thumb/Music127/v4/8a/65/be/8a65bef2-f23d-e43d-9124-f5e4293513f7/source/100x100bb.jpg">
                    </a>
        <script>
            $(document).ready(function(){
               var songThumbUrl = 'https://is2-ssl.mzstatic.com/image/thumb/Music127/v4/8a/65/be/8a65bef2-f23d-e43d-9124-f5e4293513f7/source/100x100bb.jpg';
               var imgElem = document.getElementById('sidebar-metvfm-image');
                $(imgElem).on("error", function () {
                    //revert back
                    imgElem.src = songThumbUrl;
                });
                if(imgElem){
                   imgElem.src = songThumbUrl.replace('60x60', '100x100');
                }
            });
        </script>
        <p class="sidebar-metvfm-song-title">The Way You Make Me Feel  </p>
        <p class="sidebar-metvfm-band">MICHAEL JACKSON</p>
                <div class="inner-flex-btn">
                        <a href="https://metv.fm" target="_blank" class="btn-primary white text-brand-red inverted-white btn-small external-link" rel="noopener">Visit MeTV.FM <i class="fa fa-chevron-right"></i></a>
                    </div>
    </div>
</div>
<script>
//As of now - 99% of markets don't have any data at all concerning the music playing    
//There is no need to call nowplaying websockets in that case

var conn;
if (window["WebSocket"]) {
	conn = new ReconnectingWebSocket("wss://socket2me.weigelbroadcasting.com:8080/nowplaying");
	conn.onmessage = function (evt) {
		var data = JSON.parse(evt.data);
		var song = data[0];
		var title = song['title'];
		var parentheses = title.indexOf('(');
		var trimmedTitle = title.slice(0, parentheses);
		$('.sidebar-metvfm-song-title').html(trimmedTitle);
		$('.sidebar-metvfm-band').html(song['artist']);
		if(song['thumb_url']){
            song['thumb_url'] = song['thumb_url'].replace('60x60', '100x100');
			$('.sidebar-metvfm-image').attr('src', song['thumb_url']);
			$('.sidebar-metvfm-image').show();
		}else{
			//$('.sidebar-metvfm-image').hide();
			$('.sidebar-metvfm-image').attr('src', '/images/metvfm.png');
			$('.sidebar-metvfm-image').show();
		}

	};
} else {
	var item = document.createElement("div");
	item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
	appendLog(item);
}
</script>
    
        

                        </li>
                        <li>
                            <h3>Recent Stories</h3>
                            <div class="side-content">
                                                                <div class="side-content-story content-box-primary clearfix">
                                        <a class="side-content-item-thumb" href="/quiz/quick-which-of-these-police-shows-doesnt-take-place-in-california">
                                            <img src="https://metvcdn.metv.com/7QKRC-1577809154-thumbnail_image-1857.jpg">
                                        </a>
                                        <div class="content-grid-item-desc">
                                            <a href="/quiz/quick-which-of-these-police-shows-doesnt-take-place-in-california">Quick: which of these police shows doesn't take place in California?</a>
                                        </div>
                                    </div>
                                                                <div class="side-content-story content-box-primary clearfix">
                                        <a class="side-content-item-thumb" href="/quiz/can-you-name-all-these-members-of-the-waltons-family">
                                            <img src="https://metvcdn.metv.com/An1u7-1576861899-1851-quiz-waltons_names_quiz_main.jpg">
                                        </a>
                                        <div class="content-grid-item-desc">
                                            <a href="/quiz/can-you-name-all-these-members-of-the-waltons-family">Can you name all these members of the Waltons family?</a>
                                        </div>
                                    </div>
                                                                <div class="side-content-story content-box-primary clearfix">
                                        <a class="side-content-item-thumb" href="/quiz/how-well-do-you-remember-the-star-trek-episode-the-trouble-with-tribbles">
                                            <img src="https://metvcdn.metv.com/gzvuw-1577373249-thumbnail_image-1856.jpg">
                                        </a>
                                        <div class="content-grid-item-desc">
                                            <a href="/quiz/how-well-do-you-remember-the-star-trek-episode-the-trouble-with-tribbles">How well do you remember the Star Trek episode ''The Trouble with Tribbles''?</a>
                                        </div>
                                    </div>
                                
                            </div>
                        </li>

                        
                                                    <li>
                                <div class="side-ad">
                                    <div id="metvcom_sidebar_2">
                                        <script type="text/javascript">
                                            googletag.cmd.push(function() { googletag.display('metvcom_sidebar_2'); });
                                        </script>
                                    </div>
                                </div>
                            </li>
                                                            <!-- END IF IS HOMEPAGE -->
            
                    <!--    <li>
                            <div class="side-ad">
                                <div id="metv_scroller">
                                    <script type='text/javascript'>
                                        googletag.cmd.push(function() { googletag.display('metv_scroller'); });
                                    </script>
                                </div>
                            </div>

                            <div id="sovrn-test-div"></div>
                        </li> -->
                        <li>
                            
<ul>
    <li>
        <footer>
        <img src="/images/metv-footer-logo.png" class="metv-logo" width="77" height="25">
        <a href="/about-us/">About</a><a href="/contact/">Contact</a><a href="/advertise/">Advertise</a><a href="/privacy-policy/">Privacy Policy</a><a href="/terms-of-use/">Terms of Use</a><a href="/fcc-public-files/">FCC Public Files</a><a href="/sweepstakes/">Sweepstakes Winners</a>                   <div class="side-newsletter-wrap home-footer-newsletter">
    <div class="side-newsletter-subheading">Sign up for our newsletter and get stories delivered straight to your inbox
        </div>
    <div class="side-newsletter-form-wrap">
        <form id="foot-newsletter-form" class="clearfix" method="post">
            <input type="text" id="foot_newsletter_email" name="email" value="Your email" placeholder="Your email">
            <button id="newsletter_signup" type="submit" name="submit"><i class="fa fa-chevron-right"></i></button>
        </form>

    </div>
</div>


    <script type="text/javascript">
        var WCS = WCS || {};  
        if(!WCS.newsletterAdded){           
            $(document).ready(function(){            

                var NEWSLETTER_CLICK = false;
                var HP_NEWSLETTER_CLICK = false;
                var MODAL_NEWSLETTER_CLICK = false;
                var LP_NEWSLETTER_CLICK = false;
                var HEADTOHEAD_CLICK = false;
                var MEMADNESS_CLICK = false;
                var SIDE_NEWSLETTER_CLICK = false;
                var FOOT_NEWSLETTER_CLICK = false;

                //hacky - monitor clicks and typing on forms to choose where to say THANK YOU!!!!!!
                $('#modal-newsletter-form').on('keypress', function(event) {
                    MODAL_NEWSLETTER_CLICK = true;
                });
                $('#modal-newsletter-form').on('click', function(event) {
                    MODAL_NEWSLETTER_CLICK = true;
                });

                $('#memadness-newsletter-form').on('keypress', function(event) {
                    MEMADNESS_CLICK = true;
                });
                $('#memadness-newsletter-form').on('click', function(event) {
                    MEMADNESS_CLICK = true;
                });

                 $('#side-newsletter-form').on('keypress', function(event) {
                     console.log("side1");
                    SIDE_NEWSLETTER_CLICK = true;
                    FOOT_NEWSLETTER_CLICK = false;          
                });
                $('#side-newsletter-form').on('click', function(event) {
                     console.log("side2");                    
                    SIDE_NEWSLETTER_CLICK = true;
                    FOOT_NEWSLETTER_CLICK = false;                           
                });    

                 $('#foot-newsletter-form').on('keypress', function(event) {
                    FOOT_NEWSLETTER_CLICK = true;
                    SIDE_NEWSLETTER_CLICK = false;
                          
                     console.log("foot1");                                        
                });
                $('#foot-newsletter-form').on('click', function(event) {
                    FOOT_NEWSLETTER_CLICK = true;
                    SIDE_NEWSLETTER_CLICK = false;
                     console.log("foot2");                                                            
                });            

                $('#side-newsletter-form,#foot-newsletter-form,#modal-newsletter-form,#pickme-newsletter-form,#hth-newsletter-form,#memadness-newsletter-form').submit( function(e){
                    e.preventDefault();

                    var emailAddress = $('#side_newsletter_email').val();
                    if(HEADTOHEAD_CLICK){
                        emailAddress = $('#hth_newsletter_email').val();
                    }
                    else if(HP_NEWSLETTER_CLICK){
                        emailAddress = $('#hp_newsletter_email').val();
                    }
                    else if(MODAL_NEWSLETTER_CLICK){
                        emailAddress = $('#modal_newsletter_email').val();
                    }
                    else if(MEMADNESS_CLICK){
                        emailAddress = $('#memadness_newsletter_email').val();
                    }
                    else if(SIDE_NEWSLETTER_CLICK){
                        emailAddress = $('#side_newsletter_email').val();
                    }
                    else if(FOOT_NEWSLETTER_CLICK){
                        emailAddress = $('#foot_newsletter_email').val();
                    }                

                    if(emailAddress.length <= 2){
                        alert("Enter a valid email");
                        return false;
                    }
                    if(NEWSLETTER_CLICK){
                        return;
                    }
                    NEWSLETTER_CLICK = true;
                    $.ajax({
                        url: '/ajax/newsletter_signup/',
                        data: {
                            email: emailAddress
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(data)
                        {
                            if(data.status == "success"){
                                
                                if(MEMADNESS_CLICK){
                                    $('.memadness-newsletter-signup').html('<span class="newsletter-thankyou">Thank you for signing up!</span>');
                                }     
                                else if(SIDE_NEWSLETTER_CLICK){
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');
                                }
                                else if(FOOT_NEWSLETTER_CLICK){                                
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');                                    
                                }                                     
                                else{
                                    $('.side-newsletter-wrap').html('<span class="side-newsletter-thankyou">Thank you for signing up!</span>');
                                    $('.content-newsletter-signup.newsletter-wrap').css('padding-left', '0');
                                }
                            }
                            else if(data.status == "failure"){
                                alert(data.msg);
                            }
                            NEWSLETTER_CLICK = false;
                        },
                        error : function(response)
                        {
                           //alert('Error');
                           console.log(response);
                        }
                    });

                });
                
            });
            WCS.newsletterAdded = true;
        }
		// open MeTV Music playter
		/*$('.metvmusic-listen-btn-side').click(function(e){
			e.preventDefault();
			window.open('/metvmusic/','metvmusic','resizable,height=582,width=756');
		});*/
    </script>


        <div class="footer-affiliate-logos">
                        <a href="https://www.wciu.com/cw26" target="_blank" rel="noopener"><img src="//footercdn.metv.com/footerlogos/CW26.png" alt=""></a>
                        <a href="https://www.wciu.com" target="_blank" rel="noopener"><img src="//footercdn.metv.com/footerlogos/TheU.png" alt=""></a>
                        <a href="https://www.metv.fm" target="_blank" rel="noopener"><img src="//footercdn.metv.com/footerlogos/METV-FM-877-BW.png" alt=""></a>
            
        </div>
        <div class="copyright">© 2019 MeTV <br>National Limited Partnership</div>
        </footer>
    </li>
        <li>
        <div class="side-ad" style="background-color:#f9f9f9;">            
            <div id="metv_scroller">
                <script type="text/javascript">
                    googletag.cmd.push(function() { googletag.display('metv_scroller'); });
                </script>
            </div>
        </div>
        <!-- THIS "TEST DIV" AD UNIT IS NEEDED -->
        <div id="sovrn-test-div"></div>
    </li>
    
</ul>

    
    <script type="text/javascript">
        /*
        $(document).ready(function(){
            //THIS IS NOT CRITEO - IT'S ONETAG SOVRN
            var criteo_scrollingAd = $('#metv_scroller');
            var criteo_adTop = criteo_scrollingAd.offset().top;
            function fixDiv() {
                console.log
                var criteo_stoppingHeight = jQuery('.copyright').offset().top;
                if (jQuery(window).scrollTop() >= (criteo_stoppingHeight - 500)){
                    criteo_scrollingAd.css({'position': 'relative', 'top': (criteo_stoppingHeight - criteo_adTop - 500)+'px'});
                }
                else if (jQuery(window).scrollTop() >= (criteo_adTop - 80)){
                    criteo_scrollingAd.css({'position': 'fixed', 'top': '80px'});
                }
                else {
                    criteo_scrollingAd.css({'position': 'static', 'top': 'auto'});
                }
            }
            if($('#metv_scroller').length > 0){
                $(window).on( "scroll", function() {
                   fixDiv();
                });
                fixDiv();
            }
        });
        */
    </script>
    

                        </li>

                            </ul>

                <!--<div id="metvcom_directFixed" class="side-ad">  
                    <script type='text/javascript'>googletag.cmd.push(function() { googletag.display('metvcom_directFixed'); });</script>                            
                </div>-->



                                  
                <script type="text/javascript">
                    /*
                    $(document).ready(function(){
                        //THIS IS NOT CRITEO - IT'S ONETAG SOVRN
                        var criteo_scrollingAd = $('#metv_scroller');
                        var criteo_adTop = criteo_scrollingAd.offset().top;
                        function fixDiv() {
                            console.log
                            var criteo_stoppingHeight = jQuery('.copyright').offset().top;
                            if (jQuery(window).scrollTop() >= (criteo_stoppingHeight - 500)){
                                criteo_scrollingAd.css({'position': 'relative', 'top': (criteo_stoppingHeight - criteo_adTop - 500)+'px'});
                            }
                            else if (jQuery(window).scrollTop() >= (criteo_adTop - 80)){
                                criteo_scrollingAd.css({'position': 'fixed', 'top': '80px'});
                            }
                            else {
                                criteo_scrollingAd.css({'position': 'static', 'top': 'auto'});
                            }
                        }
                        if($('#metv_scroller').length > 0){
                            $(window).on( "scroll", function() {
                               fixDiv();
                            });
                            fixDiv();
                        }
                    });
                    */
                </script>
                
            </aside>


                </div><!-- .lg-col-wrapper -->
        
        
                    
                                                                                           <div class="footer-ad">
                            <div class="footer-ad-inner">
                                <div id="metvcom_footer">
                                    <script type="text/javascript">
                                        googletag.cmd.push(function() { googletag.display('metvcom_footer'); });
                                        //googletag.pubads().refresh([allAds['metvcom_footer']]);
                                    </script>
                                </div>
                            </div>
                        </div>
                                                     
        
                                                                                <div class="footer-ad">
                            <div class="footer-ad-inner">
                                <div id="metvcom_footer">
                                    <script type="text/javascript">
                                        googletag.cmd.push(function() { googletag.display('metvcom_footer'); });
                                        //googletag.pubads().refresh([allAds['metvcom_footer']]);
                                    </script>
                                </div>
                            </div>
                        </div>
                                                



<script type="text/javascript">

    var CAN_HAS_MORE = true;
    var PAGE_NUMS = 1;
    var IS_GETTING_MORE = false;
    var USED_URLS = new Array();
    var IS_HOME = false;

    if(IS_HOME) {

        $(document).ready(function(){
            if($('.content-rows').length > 0){
                $(window).scroll(function ()
                {
                      var windowHeight = window.innerHeight;
                      var bottomOfSearch = parseInt(($('.content-rows').offset().top + ($('.content-rows').height() - windowHeight)));
                      if(bottomOfSearch < 0){
                          return;
                      }
                      var theScrollTop = parseInt($(window).scrollTop());
                      //console.log("scrolltopppp " + theScrollTop + " vs " + bottomOfSearch);
                      if(theScrollTop >= bottomOfSearch)
                      {
                          if(!CAN_HAS_MORE || IS_GETTING_MORE){
                              return false;
                          }
                          PAGE_NUMS++;
                          $('#ajax_loader_content').show();
                          IS_GETTING_MORE = true;
                            $.ajax({
                                url: '/ajax/more_listing_stories/',
                                data: {
                                    page_num: PAGE_NUMS
                                },
                                type: 'POST',
                                dataType: 'json',
                                success: function(data)
                                {
                                    var items = data['items'];
                                    $('#ajax_loader_content').hide();
                                    $(items).each(function(){
                                        if($.inArray(this.origurl, USED_URLS) === -1){
                                            var theHtml = getContentItemHtml(this.title, this.related_image, this.url, this.display_description, this.display_date);
                                            $('.content-rows').append(theHtml);
                                        }
                                    });
                                    CAN_HAS_MORE = data['has_more'];
                                    IS_GETTING_MORE  = false;

                                },
                                error : function(response)
                                {
                                    //alert('Error');
                                   console.log("not recorded");
                                   console.log(response);
                                }
                            });

                      }
                });
            }
        });

        function getContentItemHtml(title, img, url, desc, disdate){

           var theHtml =
                    '<div class="home-footer-row-item clearfix">' +
                        '<a class="home-footer-stories-image" href="' + url + '">' +
                            '<img src="' + img + '">' +
                        '</a>' +
                        '<div class="home-footer-stories">' +
                            '<a class="home-footer-stories-title" href="' + url + '">' + title + '</a>' +
                            '<span class="home-footer-stories-desc">' + desc + '</span>' +
                        '</div>' +
                    '</div>';

            return theHtml;
            
        }

}

</script>


    <script>
    $(document).ready(function(){
        $('#user-profile-link').on('click', function(){
            if(WCS.USER_ID > 0){
                //what do we do now???
            }else{
                WCS.loadSidebarTemplate('login')
                WCS.setupProfileForm('login');
            }
        });
    });
    </script>

                                                <script>
                                    if("MetvMarket" in localStorage){
                        var marketId = localStorage.getItem('MetvMarket');
                        //reset cookie from localStorage
                        $.ajax({
                            url:'/setmarket.php?marketID=' + marketId + "&json_response=1",
                            cache:false,
                            type:'GET',
                            dataType:'json',
                            success:function(data){
                                //only reload once every 30 min, there might be some scenario where not working
                                if("MetvMarketReload" in localStorage){
                                    var oldTime = parseInt(localStorage.getItem('MetvMarketReload'));
                                    var currTime = new Date().getTime();
                                    if(Math.abs(currTime - oldTime) > 1800){
                                        localStorage.setItem("MetvMarketReload", new Date().getTime().toString());
                                        window.location.reload();
                                    }
                                }else{
                                    localStorage.setItem("MetvMarketReload", new Date().getTime().toString());
                                    window.location.reload();
                                }
                            },
                            error : function(err){
                                console.log(err);
                            }
                        });
                    }
                            </script>
                    


                    <link rel="stylesheet" type="text/css" href="/css/wcs/wcs-style.css?v51">

<section id="wcs-main-wrapper">
	<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>
	<div id="wcs-overlay-sidebar" class="wcs-overlay">
	<span class="wcs-slideout-close-btn">
		<span>Close</span>
		<i class="fas fa-times"></i>
	</span>
	<div id="wcs-slideout-wrapper">
		
	</div>
</div>

<script type="text/html" id="template_registration_header_email">
	<div id="wcs-email-registration-header">
        <h1 class="desired_title">Create a new account <span class='desired_action'></span></h1>
        <p class="desired_description"></p>  
        <p>Already have an account? <a href="#!" id="wcs-signin-link">Click here to sign in.</a></p>
    </div>
</script>
<script type="text/html" id="template_registration_header_social">
	<div id="wcs-email-registration-social">
        <h1>You're almost there!</h1>
        <p>Fill out the form fields below to complete your registration.</p>
    </div>
</script>

<script type="text/html" id="template_registration_header_success">
	<div id="wcs-email-registration-social">
        <h1>Thank You for Registering!</h1>
        <p>
            You will receive an email confirmation with a link to activate your account.
        </p>
    </div>
</script>
<style>
    .wcs-profile-settings-other-provider{
        display:none;
    }
</style>

<script type="text/html" id="template_profile_form">
	<form class="wcs-profile-settings-form">
		<div class="wcs-profile-settings-form-section">
			<label for="fullName">Full name <span>*</span></label>
			<input type="text" name="fullName">
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-full-name"></span>
		</div>

		<div class="wcs-profile-settings-form-section">
			<label for="wcs_email">Email <span>*</span></label>
			<input type="email" name="wcs_email" id="wcs_email">
			<!-- READ-ONLY HTML BELOW -->
			<!-- <input class="wcs-profile-settings-form-readonly" type="email" name="email" readonly>
			<span class="wcs-settings-form-disclaimer">This email address is tied to your google account and can't be edited</span> -->
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
		</div>

		<!-- USERNAME / PASSWORD -->
		<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi wcs-profile-settings-email-username">
			<div class="wcs-profile-settings-form-section-inner">
				<label for="username1">Username <span>*</span></label>
				<input type="text" name="username1">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-username1"></span>
			</div>

			<!-- UPDATE PASSWORD LINK -->
			<div class="wcs-profile-settings-form-section-inner wcs-settings-form-password-updater" style="display:none;">
				<label for="password">Password <span>*</span></label>
				<a class="wcs-profile-settings-update-password" href="#!">Click here to update your password</a>
			</div>
		</div>
		<div class="wcs-profile-settings-form-section wcs-profile-settings-social-username" style="display:none;">
			<div class="wcs-profile-settings-form-section-inner">
				<label for="social_username">Username <span>*</span></label>
				<input id="social_username" type="text" name="social_username">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-social-username"></span>
			</div>
		</div>

		<div class="wcs-profile-settings-form-section wcs-profile-signup-username">
			<label for="username">Username <span>*</span></label>
			<input id="username" type="text" name="username">
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-username"></span>
		</div>

		<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi wcs-profile-signup-password">
			<div class="wcs-profile-settings-form-section-inner">
				<label for="password">Password <span>*</span></label>
				<input type="password" name="password">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
			</div>
			<div class="wcs-profile-settings-form-section-inner">
				<label for="password2">Re-enter password <span>*</span></label>
				<input type="password" name="password2">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-password2"></span>
			</div>
		</div>


		<!-- USERNAME ONLY -->
		<!-- <div class="wcs-profile-settings-form-section">
			<label for="username">Username <span>*</span></label>
			<input type="text" name="username">
			<span class="wcs-settings-form-err-msg">Please enter a username</span>
		</div> -->

		<fieldset>
			<legend>Optional:</legend>
			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner wcs-profile-settings-form-section-inner-multi">
					<div>
						<label for="dobMonth">Date of birth</label>
						<select name="dobMonth">
	                        <option value=""></option>
							<option value="1">January</option>
							<option value="2">February</option>
							<option value="3">March</option>
							<option value="4">April</option>
							<option value="5">May</option>
							<option value="6">June</option>
							<option value="7">July</option>
							<option value="8">August</option>
							<option value="9">September</option>
							<option value="10">October</option>
							<option value="11">November</option>
							<option value="12">December</option>
						</select>
						<span class="wcs-settings-form-err-msg wcs-settings-form-err-dob"></span>
					</div>
					<div>
						<select name="dobDay">
	                        <option value=""></option>
															<option value="1">1</option>
															<option value="2">2</option>
															<option value="3">3</option>
															<option value="4">4</option>
															<option value="5">5</option>
															<option value="6">6</option>
															<option value="7">7</option>
															<option value="8">8</option>
															<option value="9">9</option>
															<option value="10">10</option>
															<option value="11">11</option>
															<option value="12">12</option>
															<option value="13">13</option>
															<option value="14">14</option>
															<option value="15">15</option>
															<option value="16">16</option>
															<option value="17">17</option>
															<option value="18">18</option>
															<option value="19">19</option>
															<option value="20">20</option>
															<option value="21">21</option>
															<option value="22">22</option>
															<option value="23">23</option>
															<option value="24">24</option>
															<option value="25">25</option>
															<option value="26">26</option>
															<option value="27">27</option>
															<option value="28">28</option>
															<option value="29">29</option>
															<option value="30">30</option>
															<option value="31">31</option>
							
						</select>
					</div>
					<div>
						<select name="dobYear">
								                        <option value=""></option>
															<option value="2001">2001</option>
								2001
															<option value="2000">2000</option>
								2000
															<option value="1999">1999</option>
								1999
															<option value="1998">1998</option>
								1998
															<option value="1997">1997</option>
								1997
															<option value="1996">1996</option>
								1996
															<option value="1995">1995</option>
								1995
															<option value="1994">1994</option>
								1994
															<option value="1993">1993</option>
								1993
															<option value="1992">1992</option>
								1992
															<option value="1991">1991</option>
								1991
															<option value="1990">1990</option>
								1990
															<option value="1989">1989</option>
								1989
															<option value="1988">1988</option>
								1988
															<option value="1987">1987</option>
								1987
															<option value="1986">1986</option>
								1986
															<option value="1985">1985</option>
								1985
															<option value="1984">1984</option>
								1984
															<option value="1983">1983</option>
								1983
															<option value="1982">1982</option>
								1982
															<option value="1981">1981</option>
								1981
															<option value="1980">1980</option>
								1980
															<option value="1979">1979</option>
								1979
															<option value="1978">1978</option>
								1978
															<option value="1977">1977</option>
								1977
															<option value="1976">1976</option>
								1976
															<option value="1975">1975</option>
								1975
															<option value="1974">1974</option>
								1974
															<option value="1973">1973</option>
								1973
															<option value="1972">1972</option>
								1972
															<option value="1971">1971</option>
								1971
															<option value="1970">1970</option>
								1970
															<option value="1969">1969</option>
								1969
															<option value="1968">1968</option>
								1968
															<option value="1967">1967</option>
								1967
															<option value="1966">1966</option>
								1966
															<option value="1965">1965</option>
								1965
															<option value="1964">1964</option>
								1964
															<option value="1963">1963</option>
								1963
															<option value="1962">1962</option>
								1962
															<option value="1961">1961</option>
								1961
															<option value="1960">1960</option>
								1960
															<option value="1959">1959</option>
								1959
															<option value="1958">1958</option>
								1958
															<option value="1957">1957</option>
								1957
															<option value="1956">1956</option>
								1956
															<option value="1955">1955</option>
								1955
															<option value="1954">1954</option>
								1954
															<option value="1953">1953</option>
								1953
															<option value="1952">1952</option>
								1952
															<option value="1951">1951</option>
								1951
															<option value="1950">1950</option>
								1950
															<option value="1949">1949</option>
								1949
															<option value="1948">1948</option>
								1948
															<option value="1947">1947</option>
								1947
															<option value="1946">1946</option>
								1946
															<option value="1945">1945</option>
								1945
															<option value="1944">1944</option>
								1944
															<option value="1943">1943</option>
								1943
															<option value="1942">1942</option>
								1942
															<option value="1941">1941</option>
								1941
															<option value="1940">1940</option>
								1940
															<option value="1939">1939</option>
								1939
															<option value="1938">1938</option>
								1938
															<option value="1937">1937</option>
								1937
															<option value="1936">1936</option>
								1936
															<option value="1935">1935</option>
								1935
															<option value="1934">1934</option>
								1934
															<option value="1933">1933</option>
								1933
															<option value="1932">1932</option>
								1932
															<option value="1931">1931</option>
								1931
															<option value="1930">1930</option>
								1930
															<option value="1929">1929</option>
								1929
															<option value="1928">1928</option>
								1928
															<option value="1927">1927</option>
								1927
															<option value="1926">1926</option>
								1926
															<option value="1925">1925</option>
								1925
															<option value="1924">1924</option>
								1924
															<option value="1923">1923</option>
								1923
															<option value="1922">1922</option>
								1922
															<option value="1921">1921</option>
								1921
															<option value="1920">1920</option>
								1920
															<option value="1919">1919</option>
								1919
															<option value="1918">1918</option>
								1918
															<option value="1917">1917</option>
								1917
															<option value="1916">1916</option>
								1916
															<option value="1915">1915</option>
								1915
															<option value="1914">1914</option>
								1914
															<option value="1913">1913</option>
								1913
															<option value="1912">1912</option>
								1912
															<option value="1911">1911</option>
								1911
															<option value="1910">1910</option>
								1910
															<option value="1909">1909</option>
								1909
															<option value="1908">1908</option>
								1908
															<option value="1907">1907</option>
								1907
															<option value="1906">1906</option>
								1906
															<option value="1905">1905</option>
								1905
															<option value="1904">1904</option>
								1904
															<option value="1903">1903</option>
								1903
															<option value="1902">1902</option>
								1902
															<option value="1901">1901</option>
								1901
															<option value="1900">1900</option>
								1900
							
						</select>
					</div>
				</div>
				<div class="wcs-profile-settings-form-section-inner">
					<label for="gender">Gender</label>
					<select name="gender">
	                    <option value=""></option>
						<option value="M">Male</option>
						<option value="F">Female</option>
					</select>
	                <span class="wcs-settings-form-err-msg wcs-settings-form-err-gender"></span>
				</div>
			</div>

			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner">
					<label for="wcs_zipcode">ZIP code<!--  <span>*</span> --></label>
					<input id="wcs_zipcode" type="text" maxlength="5" name="wcs_zipcode">
					<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-zipcode"></span> -->
				</div>
				<div class="wcs-profile-settings-form-section-inner">
					<label for="wcs_provider">Choose your provider<!--  <span>*</span> --></label>
					<select id="wcs_provider" name="wcs_provider">
						<option value=""></option>
					</select>
                    <input type="hidden" id="wcs_provider_display" name="wcs_provider_display" />
					<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-provider"></span> -->
				</div>
			</div>

			<div class="wcs-profile-settings-form-section wcs-profile-settings-other-provider">
				<label for="wcs_other_provider">Other provider<!--  <span>*</span> --></label>
				<input id="wcs_other_provider" type="text" name="wcs_other_provider">
				<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-other-provider"></span> -->
			</div>
			<div class="wcs-profile-settings-optional">
				We request this information so we can better serve you, our viewers. For example, on-air programming may be improved or viewer issues may be resolved sooner. We will not share this information with third parties or use it to track you on the Internet.
			</div>
		</fieldset>

		<div class="wcs-profile-settings-form-section">
			<div class="wcs-profile-settings-form-checkbox-wrap wcs-profile-settings-newsletter-container">
				<input type="checkbox" name="wcs_newsletter_signup" value="wcs_newsletter_signup" id="wcs_newsletter_signup" checked>
				<label class="wcs-checkbox-label" for="wcs_newsletter_signup">Receive MeTV e-mails</label>
			</div>
		</div>
                

        <div class="wcs-profile-settings-form-section">
			<div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
        </div>

        <div class="wcs-profile-settings-form-section wcs-profile-registration-terms">
			<b>By submitting this form you are accepting the <a href="https://www.metv.com/terms-of-use/" target="_blank">Terms of Service</a> and agreeing that you are 18 years of age or older.</b>
        </div>

		<div class="wcs-profile-settings-edit-message"></div>

        <input type="hidden" name="is_social" value="0"/>
        <input type="hidden" name="is_update" value="0"/>
        
		<div class="wcs-profile-settings-form-submit">
			<button class="wcs-cancel-btn" type="button">Cancel</button>
			<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
		</div>
	</form>
</script>

<script type="text/html" id="template_notifications">
	<div class="wcs-profile-settings-form-section manage-notifications">
		<div class="notifications-small-text">
			Your personal MeTV notifications are always available by clicking the bell at the top of the site and MeTV apps. You can also personalize if you receive notifications through the methods below.
		</div>
		<h3>Enable Notification Types</h3>
		<table id="wcs-profile-alerts-table">
			<tr>
                				<td class="wcs-profile-alerts-td">
			        <div class="alert-info-container">
						<div class="wcs-profile-tooltip">
							<span>Receive alerts right on your computer and click directly to MeTV.com</span>
			            	<i class="fas fa-info-circle"></i>
						</div>
						<label>Browser alerts</label>
						<div class="toggle-wrapper">
			            	<input type="checkbox" name="enable_browser_alerts" class="custom-switch showinplaylist-switch enable_browser_alerts-switch" id="enable_browser_alerts" />
						</div>
					</div>
			     </td>
                 				 <td class="wcs-profile-alerts-td">
		            <div class="alert-info-container-email">
						<div class="wcs-profile-tooltip">
							<span>Enable and verify your email to receive alerts in your mail inbox</span>
		                 	<i class="fas fa-info-circle"></i>
						</div>
						<label>Email alerts</label>
						 <div class="toggle-wrapper">
		                	<input type="checkbox" name="enable_email_alerts" class="custom-switch nosponsor-switch enable_email_alerts-switch" id="enable_email_alerts" />
						</div>
					</div>
	        	</td>
	    	</tr>
		</table>
		<div id="wcs_notifications_settings">
			<h3>Favorite Shows & Social Notifications</h3>
			<ul class="wcs-profile-settings-form">
				<li>
					<label>New content posted about your favorite shows</label>
					                    <span class="disabled_check"><input data-name="content_browser_alerts" type="checkbox" id="content_browser_alerts" disabled/> <label class="notify_check" for="content_browser_alerts">Browser alerts</label></span>
                                                            
                    <span class="disabled_check"><input data-name="content_email_alerts" type="checkbox" id="content_email_alerts" disabled/> <label class="notify_check" for="content_email_alerts">Email alerts</label></span>
				</li>
				<li>
					<label class="label-top-margin">Likes on your comments</label>
					                    <span class="disabled_check"><input data-name="likes_browser_alerts" type="checkbox" id="likes_browser_alerts" disabled/> <label class="notify_check" for="likes_browser_alerts">Browser alerts</label></span>
                                        
                    
                    <span class="disabled_check"><input data-name="likes_email_alerts" type="checkbox" id="likes_email_alerts" disabled/> <label class="notify_check" for="likes_email_alerts"> Email alerts</label></span>
				</li>
				<li>
					<label class="label-top-margin">Replies to your comments</label>
										<span class="disabled_check"><input data-name="replies_browser_alerts" type="checkbox" id="replies_browser_alerts" disabled/> <label class="notify_check" for="replies_browser_alerts">Browser alerts</label></span>
                                        
                    
					<span class="disabled_check"><input data-name="replies_email_alerts" type="checkbox" id="replies_email_alerts" disabled/> <label class="notify_check" for="replies_email_alerts">Email alerts</label></span>
				</li>
			</ul>
			<h3 class="television-notifications">Local Programming Notifications</h3>
			<ul class="wcs-profile-settings-form">
				<li>
					<label class="label-top-margin">Local programming updates and service alerts</label>
										<span class="disabled_check"><input data-name="local_browser_alerts" type="checkbox" id="local_browser_alerts" disabled/> <label class="notify_check" for="local_browser_alerts">Browser alerts</label></span>
                                        
                    
					<span class="disabled_check"><input data-name="local_email_alerts" type="checkbox" id="local_email_alerts" disabled/> <label class="notify_check" for="local_email_alerts">Email alerts</label></span>
				</li>
			</ul>
			<h3 class="television-notifications">Televison Notifications</h3>
			<ul class="wcs-profile-settings-form">
				<li class="wcs-profile-settings-noteworthy-reminder-wrap">
					<p>Notifications sent</p>
					<select id="noteworthy_send_time" data-name="noteworthy_send_time">
						<option value="900">15 min before broadcast</option>
					    <option value="3600">1 hour before broadcast</option>
						<option value="86400">1 day before broadcast</option>
						<option value="172800">2 days before broadcast</option>
						<option value="259200">3 days before broadcast</option>
					</select>
				</li>                
				<li class="wcs-profile-settings-noteworthy-episodes-wrap">
					<label>Noteworthy episodes coming up for your favorite shows</label>
					                    <span class="disabled_check"><input data-name="noteworthy_browser_alerts" type="checkbox" id="noteworthy_browser_alerts" disabled/> <label class="notify_check" for="noteworthy_browser_alerts">Browser alerts</label></span>
                    					<span class="disabled_check"><input data-name="noteworthy_email_alerts" type="checkbox" id="noteworthy_email_alerts" disabled/> <label class="notify_check" for="noteworthy_email_alerts">Email alerts</label></span>
				</li>
				<li>
					<label class="label-top-margin">Remind Me - Tune-in Reminders</label>
					<!-- <span class="disabled_check"><input data-name="reminders_browser_alerts" type="checkbox" id="reminders_browser_alerts" disabled/> <label class="notify_check" for="reminders_browser_alerts">Browser alerts</label></span>
					<span class="disabled_check"><input data-name="reminders_app_alerts" type="checkbox" id="reminders_app_alerts" disabled/> <label class="notify_check" for="reminders_app_alerts">App alerts</label></span>
					<span class="disabled_check"><input data-name="reminders_email_alerts" type="checkbox" id="reminders_email_alerts" disabled/> <label class="notify_check" for="reminders_email_alerts">Email alerts</label></span> -->
					<!--<span class="enable_text">
                        <input data-name="reminders_text_alerts" type="checkbox" id="reminders_text_alerts" disabled/> 
                        Text Messages</span>
                    -->
					<ul class="wcs-profile-settings-form reminders-list">
                        <li>You have no reminders set</li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</script>

<script type="text/html" id="template_profile_header">
	<div class="wcs-profile-header">
		<div class="wcs-profile-header-logout">
			<a href="/social_auth/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
		</div>
		<div class="wcs-profile-header-user">
			<div class="wcs-profile-header-user-avatar">
				<img class="wcs-avatar" src="">
				<span class="wcs-popout-wrapper">
					<a class="wcs-update-avatar-trigger" href="#!">Update Image</a>
					<div class="wcs-popout">
						<ul class="wcs-popout-avatar">
	<li class="wcs-popout-avatar-upload">
		<label for="image-uploader">Upload a file: &nbsp;<span id="avatar_upload_notice"></span></label>
	    <input id="avatar_uploader" name="image-uploader" style="" type="file" value=""/>
        <!--
	    <div class="wcs-popout-file-upload-dropzone">
	        Or drag a file here to upload
	    </div>
        -->
	</li>

            <li>
            <a href="#!" class="selectmoji " data-emoji="cherries.jpg">
                                <img src="/images/avatars/cherries.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="jello.jpg">
                                <img src="/images/avatars/jello.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="jukebox.jpg">
                                <img src="/images/avatars/jukebox.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="peep.jpg">
                                <img src="/images/avatars/peep.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="retrotv.jpg">
                                <img src="/images/avatars/retrotv.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="rollerskates.jpg">
                                <img src="/images/avatars/rollerskates.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="signal.jpg">
                                <img src="/images/avatars/signal.jpg" />                    
                            </a> 
        </li>
            <li>
            <a href="#!" class="selectmoji " data-emoji="tyedye.jpg">
                                <img src="/images/avatars/tyedye.jpg" />                    
                            </a> 
        </li>
            
        <!--
		<li><img src="http://placehold.it/300x300"></li>
        -->

</ul>
					</div>
				</span>
			</div>
			<div class="wcs-profile-header-user-meta">
				<h1 class="wcs-profile-header-fullname wcs-verified-user"></h1>
				<span class="wcs-profile-header-username"></span>
	            <span class="wcs-profile-header-likes"><i class="fas fa-heart"></i> <span class="wcs-user-karma-number"></span> likes</span>
			</div>
		</div>
		<nav class="wcs-profile-nav">
			<ul>
	            <li class="wcs-profile-nav-tab wcs-profile-nav-active"><a href="#!">Comments (<span class="wcs-comment-count"></span>)</a></li>
				<li class="wcs-profile-nav-tab"><a href="#!">Settings</a></li>
				<li class="wcs-profile-nav-tab"><a href="#!">Notifications</a></li>
			</ul>
		</nav>
	</div>
</script>

<script type="text/html" id="template_profile_display_wrapper">
	<div class="wcs-profile-body">
	    <div class="wcs-profile-comments-wrap">
            <div class="wcs-profile-comments-load-more" style="display:none;">
                <button class="view-more-btn view-more-profilecomment" name="view-more-comments" type="button">Load more comments <i class="fas fa-angle-down"></i></button>
            </div>
	    </div>
	    <div class="wcs-profile-settings-wrap">
	    </div>
		<div class="wcs-profile-notifications-wrap">
	   </div>
	</div>
</script>

<script type="text/html" id="template_profile_loggedin_header">
    <div class="wcs-profile-settings-loggedin">
        <h2></h2>
        <p></p>
    </div>
</script>

<script type="text/html" id="template_login_header">
    <h1 class="desired_title">Log in <span class='desired_action'></span></h1>
	<p class="desired_description"></p>    
	<p>Don't have an account? <a id="wcs-register-link" href="#!">Click here to register.</a></p>
</script>


<script type="text/html" id="template_login_form">
	<div class="wcs-login-wrapper">
		<div class="wcs-login-type-heading">
			<span>Log in with your social media account</span>
		</div>
		<div class="wcs-post-comment-login">
	        <button type="button" class="wcs-login-btn wcs-login-google">
	            <span class="wcs-login-btn-icon"><i class="fab fa-google"></i></span>
	            <span class="wcs-login-btn-text">Google</span>
	        </button>
	        <button type="button" class="wcs-login-btn wcs-login-facebook">
	            <span class="wcs-login-btn-icon"><i class="fab fa-facebook-f"></i></span>
	            <span class="wcs-login-btn-text">Facebook</span>
	        </button>
	        <button type="button" class="wcs-login-btn wcs-login-twitter">
	            <span class="wcs-login-btn-icon"><i class="fab fa-twitter"></i></span>
	            <span class="wcs-login-btn-text">Twitter</span>
	        </button>
	    </div>

	    <div class="wcs-login-type-heading">
			<span>Or with your email address</span>
		</div>
		<form class="wcs-profile-settings-form">
			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner">
					<label for="username">Username <span>*</span></label>
					<input type="text" name="username">
					<span class="wcs-settings-form-err-msg wcs-settings-form-err-username"></span>
				</div>

				<div class="wcs-profile-settings-form-section-inner">
					<label for="password">Password <span>*</span></label>
					<input type="password" name="password">
					<span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
				</div>
			</div>
            <div class="wcs-profile-settings-login-message">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-generic"></span>
            </div>

			<div class="wcs-profile-settings-form-submit">
				<a class="wcs-login-forgot-un-pw" href="#!">Forgot username/password?</a>
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_forgotpass_success">
	<div id="wcs-email-registration-social">    
        <h1>Instructions on how to reset your password have been emailed to you.</h1>        
        <p>
            Please allow a few minutes for the email to be sent and then follow the instructions in the email. 
        </p>
    </div>
</script>

<script type="text/html" id="template_forgotpass_form">    
	<div class="wcs-profile-settings-wrap">
        <h1>Forgot Username/Password</h1>
		<p>Enter your email address to retrieve your username and/or reset your password. <a id="wcs-login-link" href="#!">Click here to return to the login page.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="wcs_email">Email <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
                <input type="email" name="wcs_email">
            </div>
            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_update_password">
	<div class="wcs-profile-settings-wrap">
		<h1>Update password</h1>
		<p>Update your password below. <a href="#!" class='wcs-update-password-settings-link'>Click here to return to your profile.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="password">Current password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
				<input type="password" name="password" id="password">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="password1">New password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password1"></span>
				<input type="password" name="password1" id="password1">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="email">Confirm new password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password2"></span>
				<input type="password" name="password2" id="password2">
            </div>

            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_updatepass_success">
	<div id="wcs-email-registration-social">    
        <h1>Your password has been updated!</h1>        
        <p>
            The next time you login you'll need to use your new password. 
        </p>
    </div>
</script>


    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-messaging.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyCDYMkP0geJS0Umu1fzD4rwKTCG73MyveU",
    authDomain: "metv-browser-push.firebaseapp.com",
    databaseURL: "https://metv-browser-push.firebaseio.com",
    projectId: "metv-browser-push",
    storageBucket: "",
    messagingSenderId: "1083175955851",
    appId: "1:1083175955851:web:dc40db2a374ea773"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script>
var messaging;
try{
messaging = firebase.messaging();

//used for Vapid messages
messaging.usePublicVapidKey('BHgMrU42RCaKR0f8zNNIpTXd08C6-02mpmw2zILdIXYePty9U6rNZ1YiNeOFkuGM-PgFZp_8rDvLLiAGUooDLDo');


// Callback fired if Instance ID token is updated.  
//dont think this is called unless event
messaging.onTokenRefresh(() => {
  messaging.getToken().then((refreshedToken) => {
      console.log('Token refreshed.');
      alert("token refreshed " + refreshedToken);
      WCS.updateBrowserNotificationToken(refreshedToken, function(){

    });
  }).catch((err) => {
    console.log('Unable to retrieve refreshed token ', err);
  });
});

}catch(exx){
    console.log(exx);
}

    WCS.updateBrowserNotificationToken = function(notificationToken, callback){
        $.ajax({
            url: '/ajax_comments/update_browser_notification_token',
            data: {
                 notification_token: notificationToken,
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                if(resp['success'] == 'true'){
                    callback(true);
                }else{
                    callback(false);                    
                }
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });        
    };

  // Handle incoming messages. Called when:
  // - a message is received while the app has focus
  // - the user clicks on an app notification created by a service worker
  //   `messaging.setBackgroundMessageHandler` handler.
  try{
  messaging.onMessage((payload) => {
    console.log('Message received. ', payload);
    // Update the UI to include the received message???
    //alert("messsage recieved ");
    //console.log(payload);

  });
  }catch(ex){
      console.log("push wont work");
  }

  WCS.refreshBrowserToken = function() {
    // "Initially this makes a network call, once retrieved
    // subsequent calls to getToken will return from cache." - according to the BIG G
    
    messaging.getToken().then((currentToken) => {
      if (currentToken) {
        console.log("updating browser token " + currentToken);
        
        WCS.updateBrowserNotificationToken(currentToken, function(success){
            //other callback
        });
      } else {
        console.log('No Instance ID token available. Request permission to generate one.');
      }
    }).catch((err) => {
      console.log('An error occurred while retrieving token. ', err);
    });
  }


  WCS.requestBrowserNotificationPermission = function(callback) {
    console.log('Requesting permission2...');
    
    try {    
        // [START request_permission]
        Notification.requestPermission().then((permission) => {
          if (permission === 'granted') {
              console.log("granted");
            WCS.refreshBrowserToken();
            callback(true);
          } else {
            console.log('Unable to get permission to notify.');
            callback(false);        
          }
        });
    
    } catch (error) {
        // Safari doesn't return a promise for requestPermissions and it                                                                                                                                       
        // throws a TypeError. It takes a callback as the first argument                                                                                                                                       
        // instead.
        if (error instanceof TypeError) {
            Notification.requestPermission(() => {                                                                                                                                                             
                WCS.refreshBrowserToken();
                callback(true);
            });
        } else {
            throw error;                                                                                                                                                                                       
        }                                                                                                                                                                                                      
    }          
    
    
    
    // [END request_permission]
  }

  WCS.deleteToken = function() {
    messaging.getToken().then((currentToken) => {
      messaging.deleteToken(currentToken).then(() => {
        $.ajax({
            url: '/ajax_comments/update_browser_notification_token',
            data: {
                 notification_token: '',
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });                
          
          
      }).catch((err) => {
        console.log('Unable to delete token. ', err);
      });
      // [END delete_token]
    }).catch((err) => {

    });

  }

</script>

	<div id="wcs-comments-wrapper">
    </div>
    <style>
        .disabled_check{
            color: #ccc;
        }
        
        #wcs_notifications_settings label.notify_check {
            display: inline-block;
            font-weight: 400;
            margin-right: 15px;
            vertical-align: middle;
        }
        #notifications_reminder_type{
            max-width: 100px;
            display: inline-block;
            padding-right: 10px;
            margin-right: 20px;
        }
        
        .button.reminder-remove {
            top: 7px !important;            
        }
        ul.reminders-list{
            margin-left:5px;
        }
        ul li.wcs-profile-settings-noteworthy-reminder-wrap{
            padding-top: 0px;
            margin-bottom: 20px;           
        }
        li.wcs-profile-settings-noteworthy-episodes-wrap{
            margin-bottom:20px;
        }
        
        table#wcs-profile-alerts-table {
            margin-bottom: 20px;
            max-width: 500px;
        }        
</style>        
<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>

<!-- TEMPLATES -->
<script type="text/html" id="template_reply_container">
    <div class="wcs-reply-container">
        <h4>Reply to <a class="wcs-reply-username wcs-user-trigger wcs-verified-user" href="#!"></a></h4>
        <textarea id="subcomment_text" class="subcomment_text wcs-reply-textarea" placeholder="Leave a comment"></textarea>
        <div class="wcs-post-comment-logged-in-btns">
            <div class="wcs-post-comment-media-btns">
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
                    <div class="wcs-popout">
                        <ul class="wcs-popout-emojis">
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smile">
                <i class="twa twa-2x twa-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="laughing">
                <i class="twa twa-2x twa-laughing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="blush">
                <i class="twa twa-2x twa-blush"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smiley">
                <i class="twa twa-2x twa-smiley"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relaxed">
                <i class="twa twa-2x twa-relaxed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smirk">
                <i class="twa twa-2x twa-smirk"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart-eyes">
                <i class="twa twa-2x twa-heart-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-heart">
                <i class="twa twa-2x twa-kissing-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-closed-eyes">
                <i class="twa twa-2x twa-kissing-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="flushed">
                <i class="twa twa-2x twa-flushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relieved">
                <i class="twa twa-2x twa-relieved"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="satisfied">
                <i class="twa twa-2x twa-satisfied"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grin">
                <i class="twa twa-2x twa-grin"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="wink">
                <i class="twa twa-2x twa-wink"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-winking-eye">
                <i class="twa twa-2x twa-stuck-out-tongue-winking-eye"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-closed-eyes">
                <i class="twa twa-2x twa-stuck-out-tongue-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grinning">
                <i class="twa twa-2x twa-grinning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing">
                <i class="twa twa-2x twa-kissing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-smiling-eyes">
                <i class="twa twa-2x twa-kissing-smiling-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue">
                <i class="twa twa-2x twa-stuck-out-tongue"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sleeping">
                <i class="twa twa-2x twa-sleeping"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="worried">
                <i class="twa twa-2x twa-worried"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="frowning">
                <i class="twa twa-2x twa-frowning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="anguished">
                <i class="twa twa-2x twa-anguished"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="open-mouth">
                <i class="twa twa-2x twa-open-mouth"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grimacing">
                <i class="twa twa-2x twa-grimacing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confused">
                <i class="twa twa-2x twa-confused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="hushed">
                <i class="twa twa-2x twa-hushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="expressionless">
                <i class="twa twa-2x twa-expressionless"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="unamused">
                <i class="twa twa-2x twa-unamused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat-smile">
                <i class="twa twa-2x twa-sweat-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat">
                <i class="twa twa-2x twa-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="weary">
                <i class="twa twa-2x twa-weary"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="pensive">
                <i class="twa twa-2x twa-pensive"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="disappointed">
                <i class="twa twa-2x twa-disappointed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confounded">
                <i class="twa twa-2x twa-confounded"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="dizzy-face">
                <i class="twa twa-2x twa-dizzy-face"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="fearful">
                <i class="twa twa-2x twa-fearful"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cold-sweat">
                <i class="twa twa-2x twa-cold-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="persevere">
                <i class="twa twa-2x twa-persevere"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cry">
                <i class="twa twa-2x twa-cry"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sob">
                <i class="twa twa-2x twa-sob"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="joy">
                <i class="twa twa-2x twa-joy"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart">
                <i class="twa twa-2x twa-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sparkles">
                <i class="twa twa-2x twa-sparkles"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="star">
                <i class="twa twa-2x twa-star"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="thumbsup">
                <i class="twa twa-2x twa-thumbsup"></i>
            </a>
        </li>
    
</ul>
                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-youtube">
    <input class="youtube_url" style="" type="text" placeholder="Paste youtube url here..." value=""/>
    <button type="button" class="wcs-submit-btn youtube-add btn btn-link">Add</button>
</div>
                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-image">
    <label for="image-uploader">Upload a file:</label>
    <input class="image_uploader" name="image-uploader" style="" type="file" value=""/>
    <div class="wcs-popout-file-upload-dropzone">
        Or drag a file here to upload
    </div>
</div>
                    </div>
                </span>
            </div>
            <div class="wcs-post-comment-submit">
                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="template_reply_popup">
	<div class="wcs-popup-overlay" data-container-type="reply">
	    <div class="wcs-reply-container">
	    	<span class="wcs-reply-close-btn"><i class="fas fa-times"></i></span>
	        <textarea placeholder="Leave a reply"></textarea>
	        <div class="wcs-post-comment-logged-in-btns">
	            <div class="wcs-post-comment-media-btns">
	                <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
	                <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
	                <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
	            </div>
	            <div class="wcs-post-comment-submit">
	                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
	            </div>
	        </div>
	    </div>
	</div>
</script>

<script type="text/html" id="template_acomment">
    <div  class="wcs-comment-item">
        <span class="wcs-comment-flag"><i class="fas fa-flag"></i></span>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar" src=""></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" data-userid="" class="wcs-user-trigger wcs-user-displayname"></a>
                    <i class="fas fa-share"></i>
                    <a data-userid="" class="wcs-user-trigger wcs-other-user" href="#!"></a>
                </span>
                <span class="wcs-comment-item-date">Seconds Ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">
        </div>
        <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-like-btn wcs-like-trigger"><i class="fas fa-heart"></i></a>
            <a href="#!" class="wcs-reply-trigger"><i class="fas fa-comment-alt"></i> <span>Reply</span></a>
            <!-- <span class="wcs-popout-wrapper">
                <a href="#!" class="wcs-share-trigger"><i class="fas fa-share-alt"></i> <span>Share</span></a>
                <div class="wcs-popout">
                    <div class="wcs-popout-share">
    <a class="wcs-popout-share-btn wcs-popout-share-btn-facebook" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-facebook-f"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-twitter" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-twitter"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-email" href="javascript:void(0);">
    	<i class="far fa-envelope"></i>
    </a>
</div>
                </div>
            </span> -->
            <a href="#!" class="wcs-delete-trigger"><i class="fas fa-trash-alt"></i> <span>Delete</span></a>
        </div>
    </div>
</script>

<script type="text/html" id="template_deleted_comment">
    <div data-replyinfo="" data-id="" id="" class="wcs-comment-item wcs-comment-item-parent">
        <div class="wcs-comment-item-header">
            <a data-userid="deleted" href="" class="wcs-user-trigger"><img class="wcs-avatar" src="/images/wcs_logged_out_user.gif"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <span class="wcs-comment-item-username-removed">Deleted</span>
                </span>
                <span class="wcs-comment-item-date"></span>
            </div>
        </div>
        <span class="wcs-comment-item-text-removed">This comment has been removed.</span>
    </div>
</script>

<script type="text/html" id="template_loadinganimation">
 	<div class="wcs-loading-animation-overlay">
 		<div class="wcs-loading-animation">
			<div class="wcs-bounce1"></div>
			<div class="wcs-bounce2"></div>
			<div class="wcs-bounce3"></div>
		</div>
	</div>
</script>

<script type="text/html" id="template_listcomment">
    <div class="wcs-profile-comments-item">
        <h2 class="wcs-comment-post-title"><a href=""></a></h2>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar wcs-avatar-img" src="http://placehold.it/50x50"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" class="wcs-user-trigger wcs-user-displayname wcs-verified-user"></a> <i class="fas fa-share"></i> <a class="wcs-user-trigger wcs-other-user wcs-verified-user" href="#!">Other User</a>
                </span>
                <span class="wcs-comment-item-date">3 hours ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">
            Donec efficitur ut ligula suscipit vehicula. Morbi ut cursus est. Integer ligula lectus, fringilla sed commodo sed, laoreet et massa.
        </div>
        <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-view-in-discussion-trigger">
                <i class="fas fa-external-link-alt"></i> View in Discussion
            </a>
        </div>
    </div>
</script>

<script src="/js/reconnecting-websocket.min.js"></script>
<script type="text/javascript">
    var WCS = WCS || {};
    WCS.SITE_URL = "//www.metv.com/";
    WCS.ONLY_CONTENT = false;
    WCS.THREAD_ID = 0;
    WCS.TALKUMS_SITE_ID = 8;
    WCS.REPLY_PARENT_ID = -1;
    WCS.REPLY_ANCESTOR_ID = -1;
    WCS.REPLY_PARENT_ADMIN = -1;
    WCS.REPLY_LEVEL = -1;
    WCS.FLAG_ID = -1;
    WCS.IS_POSTING = false;
    WCS.IS_LIKING = false;
    WCS.USER_ID = "-1";
    WCS.USER_EMAIL = "";
    WCS.USER = "";
    WCS.USER_DISPLAY_NAME = "";
    WCS.NOTIFICATION_SETTINGS_PAGE = false;
    WCS.socket = null;
    /*
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 3000,
                  hostname: '54.175.141.4'
          };
    */
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 8000,
                  hostname: '127.0.0.1'
          };
    WCS.errorMax = 2;
    WCS.errorCount = 0;
    WCS.TOTAL_COMMENTS = 0;
    WCS.termsAccepted = 0;
    WCS.emailConfirmed =  0;
    WCS.EMOJI_TARGET = 0;
    WCS.YOUTUBE_TARGET = 0;
    WCS.UPLOAD_TARGET = 0;
    WCS.DROP_FILE_NAME = "";
    WCS.DROP_FILE_TYPE = "";
    WCS.THREAD_URL = 'https://www.metv.com';
    WCS.BASE_THREAD_URL = '';
    WCS.THREAD_TITLE = '';
    WCS.SHARE_COMMENT_ID = '';
    WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL;
    WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + WCS.THREAD_URL;
    WCS.PROFILE_OPEN = false;
    WCS.SIDEBAR_PAGE = "";
    WCS.POPUP_OPEN = false;
    WCS.CAPTCHA_SITE_KEY = '6Lee4v4SAAAAAMqR4dJGfD5PpNut-pwf12qezPdZ';
    WCS.REPLY_BOX = null;
    WCS.FILTER_TYPE = "newest"; //oldest, top
    WCS.FILTER_PAGE = 0;
    WCS.MODAL_CALLBACK = null;
    WCS.MODAL_OPEN = false;
    WCS.PROFILE_USER_ID = -1;
    WCS.RETURN_USER = false;
    WCS.SETTINGS_DATA = null;
    WCS.MAX_ID = 0;
    WCS.NEW_COMMENT_TOTAL = 0;
    WCS.LOADING_NEW_COMMENTS = false;
    WCS.PROFILE_COMMENT_PAGE = 0;
    WCS.PROFILE_COMMENT_USER = -1;
    WCS.IS_ONLYREGISTRATION = true;
    WCS.DESIRED_ACTION = "";
    WCS.DESIRED_TITLE = "";
    WCS.DESIRED_DESCRIPTION = "";
    WCS.SOCIAL_REGISTRATION_FORM = false;
    WCS.DEFAULT_SIGNUP_ZIPCODE = '';

    
WCS.OPEN_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').addClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').addClass('wcs-slideout-open');
    $('body').addClass('wcs-no-scroll');

    //dont set WCS.PROFILE_OPEN yet...
    //sometimes have to wait for events to be done or it will close immediated
};

WCS.CLOSE_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').removeClass('wcs-slideout-open');
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');

    $('body').removeClass('wcs-no-scroll');
    WCS.PROFILE_USER_ID = -1;
    WCS.PROFILE_OPEN = false;
};

(function(){
    /****** USERNAME - SHOW SIDEBAR ********/
    $('body').on("mousedown", function(e) {
        if(WCS.PROFILE_OPEN){
            if ($(e.target).closest('#wcs-slideout-wrapper').length === 0 &&
                $(e.target).closest('#wcs-overlay-modal').length === 0) {
                //alert("closing because " + $(e.target).closest('#wcs-slideout-wrapper').length);
                //console.log(e.target);
                WCS.CLOSE_SIDEBAR();
            }
        }
        if(WCS.POPUP_OPEN){
            if(e.target && $(e.target).closest('.wcs-post-comment-media-btns').length <= 0 &&
                    $(e.target).closest('.wcs-profile-header-user-avatar').length <= 0 &&
                    $(e.target).closest('.wcs-popout-wrapper').length <= 0){
                $('.wcs-popout').removeClass('wcs-popout-active');
                WCS.POPUP_OPEN = false;
            }else{

            }
        }
        if(WCS.MODAL_OPEN){
            //close the modal if click is on background... meaning on wcs-overlay-modal
            if(e.target && e.target.id == 'wcs-overlay-modal'){
                if(WCS.MODAL_CALLBACK !== null){
                    WCS.MODAL_CALLBACK(false, true);
                }
                $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
                WCS.MODAL_OPEN = false;
            }
        }
    });

    $('body').on('click', '.wcs-user-trigger', function(e){
        //closes automatically if don't set this first
        e.preventDefault();
        var me = this;
        if($(this).data('userid') == 'deleted'){
            return false;
        }
        if(WEBVIEW.is_webview || WCS.ONLY_CONTENT){
            window.location.href = '/webview/?key=notfication-settings&access_token=' + WEBVIEW.access_token;
            return false;
        }


        var openSettings = false;
        var hideSettings = false;
        var userId = parseInt($(this).data('userid'));
        if(userId == WCS.PROFILE_USER_ID){
            //do nothing because the same user
            return false;
        }
        if(isNaN(userId)){
            //shouldn't happen
            alert("User could not be found");
            return;
        }
        WCS.PROFILE_OPEN = false;
        WCS.loadSidebarTemplate('loading');



        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){
            WCS.OPEN_SIDEBAR();
        }
        if($(me).hasClass('wcs-post-comment-user-settings')){
            openSettings = true;
        }else{
            if(parseInt(WCS.USER_ID) !== userId){
                hideSettings = true;
            }
        }
        var notifications_tab = false;
        if($(me).hasClass('wcs-post-comment-user-notifications')){
            notifications_tab = true;
        }else{
            if(parseInt(WCS.USER_ID) !== userId){
                hideSettings = true;
            }
        }
        var endpoint = 'get_user_public_profile';
        if(!hideSettings){
            endpoint = 'get_user_private_profile';
        }
        $.ajax({
            url: '/ajax_comments/' + endpoint,
            data: {
                 user_id: userId,
                 get_comments: 1
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {

                WCS.PROFILE_USER_ID = userId;
                WCS.PROFILE_OPEN = true;
                //if not logged in hide settings tab
                if($(me).hasClass('wcs-post-comment-user-settings')){
                    if(WCS.termsAccepted == 1){
                        WCS.loadSidebarTemplate('profile_user');
                    }else{
                        WCS.force_action('accept_terms', true);
                        return;
                    }
                }else{
                    if(parseInt(WCS.USER_ID) !== userId){
                        WCS.loadSidebarTemplate('profile_other');
                    }else{
                        if(WCS.termsAccepted == 1){
                            WCS.loadSidebarTemplate('profile_user');
                        }else{
                            WCS.force_action('accept_terms', true);
                            return;
                        }
                    }
                }
                setTimeout(function(){
                console.log(resp);
                var user = resp['user'];
                var comments = resp['comments'];                
                if(user['is_admin'] == 1){
                    $('.wcs-profile-header-fullname').text(user['short_name']);
                    $('.wcs-profile-header-fullname').addClass('wcs-verified-user');
                }else{
                    $('.wcs-profile-header-fullname').removeClass('wcs-verified-user');
                }
                //use profile_url because two people from different services could have same name, but not same profile url
                $('.wcs-profile-header-username').text("@" + user['display_name']);
                $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', user['profile_image']);
                $('.wcs-comment-count').text(user['comment_count']);
                $('.wcs-user-karma-number').text(user['karma']);

                //$('.wcs-profile-header-likes span').text(user['total_likes']);
                //$('.wcs-profile-nav a.wcs-comments-total span').text();
                $('.wcs-profile-comments-wrap .wcs-profile-comments-item').remove();
                WCS.appendProfileComments(comments, resp['has_more']);
                WCS.PROFILE_COMMENT_PAGE = 0;
                WCS.PROFILE_COMMENT_USER = userId;

                var settings_wrapper = document.getElementById('wcs_notifications_settings');
                //var notifications_settings = resp.notifications;
                
                if(resp['email_notifications'] == 1){
                    $("#enable_email_alerts").attr('checked', 'checked');
                }
                
                if(resp['app_notifications'] == 1){
                    $("#enable_app_alerts").attr('checked', 'checked');
                }
                
                if(resp['browser_notifications'] == 1){
                    $("#enable_browser_alerts").attr('checked', 'checked');
                }
                
                console.log("notification refresh comments");
                WCS.refreshNotifications(resp['email_notifications'], 
                    resp['app_notifications'], resp['browser_notifications'], 
                    resp['notification_settings']);   
                    
                WCS.refreshReminderList(resp['user_reminders']);
                
                $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
                if(openSettings){
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-notifications-wrap').hide();
                    $('.wcs-profile-settings-wrap').show();
                    $('.wcs-profile-nav-tab').eq(1).addClass('wcs-profile-nav-active');
                }else if(notifications_tab){
                            
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-settings-wrap').hide();
                    $('.wcs-post-comment-user-notifications').show();
                    $('.wcs-profile-nav-tab').eq(2).addClass('wcs-profile-nav-active');
                }else{
                    $('.wcs-profile-comments-wrap').show();
                    $('.wcs-profile-settings-wrap').hide();
                    $('.wcs-profile-notifications-wrap').hide();
                    $('.wcs-profile-nav-tab').eq(0).addClass('wcs-profile-nav-active');
                }
                if(hideSettings){
                    $('.wcs-profile-nav-tab').eq( 1 ).hide();
                    $('.wcs-update-avatar-trigger').hide();
                }else{
                	$('.wcs-profile-header-logout').show();
                	$('.wcs-profile-header').addClass('wcs-profile-header-logged-in')
                    $('.wcs-profile-nav-tab').eq( 1 ).show();
                }
                var isSocial = false;
                if(user['service'] == 'google' || user['service'] == 'facebook' || user['service'] == 'twitter'){
                    isSocial = true;
                }

                WCS.setupProfileForm('settings', isSocial);
                if(!hideSettings){
                    //hide terms because registration is already done
                    $('.wcs-profile-settings-terms-container').hide();
                    $('input[name="is_update"]').val(1);
                    WCS.fillSettingsData(user);
                    //ugh, need to save this for the password update form
                    WCS.SETTINGS_DATA = user;
                }
                }, 50);
            },
            error: function(response)
            {
                console.log(response.responseText);
                console.log(response);
            }
        });

    });

    $('#wcs-main-wrapper').on('click', '.wcs-comment-flag', function(e){
        var me = this;
        if($(this).hasClass("wcs-comment-flag-active")){
            WCS.showModal("This comment is already flagged and will be reviewed by our staff.", "OK", function(){});
            return false;
        }
        e.preventDefault();
        WCS.showModal("Are you sure you want to flag this comment?", "Flag", function(doit){
            if(!doit){
                return false;
            }
            var $commentObj = $(me).closest('.wcs-comment-item');
            var commentId = $commentObj.data('id');

            $.ajax({
                url: '/ajax_comments/flag_comment',
                data: {
                     comment_id: commentId,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    if(resp['success'] == 'true'){
                        $(me).addClass('wcs-comment-flag-active');
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });


        });


    });

    /** LIKE REPLY SHARE DELETE  **/
    $('#wcs-main-wrapper').on('click', '.wcs-like-trigger', function(e){
        e.preventDefault();
        var $commentObj = $(this).closest('.wcs-comment-item');
        var commentId = $commentObj.data('id');
        var replyInfo = $commentObj.data('replyinfo');
        var posterId = replyInfo.split('|')[0];
        var me = this;
        var isLike = 1;
        if($(this).text().trim().indexOf('Unlike') === 0){
            isLike = 0;
        }
        if(WCS.IS_LIKING){
            return;
        }
        WCS.IS_LIKING = true;

        $.ajax({
            url: '/ajax_comments/do_upvote',
            data: {
                 comment_id: commentId,
                 thread_id: WCS.THREAD_ID,
                 poster_id : posterId,
                 like_it : isLike,
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                WCS.IS_LIKING = false;
                if(resp['success'] == 'false'){
                    if(resp['action']){
                        WCS.force_action(resp['action']);
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                    return;
                }
                var totalText = "";
                if(resp['total'] > 0){
                    totalText = " (" + resp['total'] + ')';
                }
                if(isLike == 1){
                    $(me).html('<i class="fas fa-heart"></i>' + " Unlike" + totalText);
                    $(me).addClass('wcs-like-btn-active');
                }else{
                    $(me).html('<i class="fas fa-heart"></i>' + " Like" + totalText);
                    $(me).removeClass('wcs-like-btn-active');
                }
            },
            error: function(response)
            {

            }
        });
    });


    //assumes reply comments are expanded
    var getLevel = function(cid, level){

        if($('#comment_' + cid).hasClass('wcs-comment-item-parent')){
            return level;
        }
        var replyInfo = $('#comment_' + cid).data('replyinfo');
        console.log("replyinfo");
        console.log(replyInfo);
        if(!replyInfo){
            return level;
        }
        var parentId = replyInfo.split('|')[2];
        level++;
        getLevel(parentId, level);
    };

    $('#wcs-main-wrapper').on('click', '.wcs-reply-trigger', function(e){
        //console.log(this);
        e.preventDefault();
        if(WCS.USER_ID < 0){
            WCS.showModal("Please login to reply to this comment", "OK", function(){});
            return false;
        }

        $('.wcs-reply-container').removeClass('wcs-reply-container-open');
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        var $parentComment = $(this).closest('.wcs-comment-item');
        var replyInfo = $parentComment.data('replyinfo');
        var isAdmin = $parentComment.data('isadmin');
        var parentId =  $parentComment.data('id');
        var parentUserid = replyInfo.split('|')[0];
        var parentName = replyInfo.split('|')[1];
        var ancestorId = $topComment.data('id');
        var commentId = $parentComment.data('id');

        //var replyHtml = $('#template_reply_container').html();
        WCS.REPLY_ANCESTOR_ID = ancestorId;
        WCS.REPLY_PARENT_ID = commentId;
        WCS.REPLY_PARENT_NAME = parentName;
        WCS.REPLY_PARENT_ADMIN = isAdmin;
        //do we even need a level?  probably not unless we change the structure again
        WCS.REPLY_LEVEL = getLevel(commentId, 1);
        var $replyBox = $topComment.find('.wcs-reply-container');

        $replyBox.addClass('wcs-reply-container-open');

        // scroll to reply block
        var itemTop = $replyBox.offset().top;
        console.log('Scroll top: ', itemTop);
        $('html,body').stop().animate({
            scrollTop: itemTop-100
        }, 800, function(){
        	$replyBox.children('textarea').focus();
        });

        //$replyBox.children('textarea').focus();

        $replyBox.find('.wcs-reply-username').text(parentName);
        $replyBox.find('.wcs-reply-username').attr('data-userid', parentUserid);
        if(isAdmin == 1){
            $replyBox.find('.wcs-reply-username').addClass('wcs-verified-user');
        }
        else{
            $replyBox.find('.wcs-reply-username').removeClass('wcs-verified-user');
        }
        //WCS.REPLY_BOX = $replyBox;

    });


    $('#wcs-main-wrapper').on('click', '.wcs-share-trigger', function(e){
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        var $commentObj = $(this).closest('.wcs-comment-item');
        var shareId = $commentObj.data('id');
       // WCS.POPUP_OPEN = true;
        var text = $commentObj.find('.wcs-comment-item-text').text().trim();
        var cutString = function(s, n){
            var cut= s.indexOf(' ', n);
            if(cut== -1) return s;
            return s.substring(0, cut)
        }
        text = cutString(text, 150)
        WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL + "#comment_" + shareId;
        WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + text + "... " + WCS.THREAD_URL + "#comment_" + shareId;
        $(this).next().find('.wcs-popout-share-btn-facebook').attr('href', WCS.FACEBOOK_SHARE);
        $(this).next().find('.wcs-popout-share-btn-twitter').attr('href', WCS.TWITTER_SHARE);

        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&#039;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&quot;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&amp;', "&");

        var mailData = "subject=" + encodeURIComponent("Svengoolie - " + WCS.THREAD_TITLE) + "&body=" + encodeURIComponent(text);
        var mailShare = "mailto:?" + mailData;
        $(this).next().find('.wcs-popout-share-btn-email').attr('href', mailShare);

        $(this).next().find('.wcs-popout-share-btn-facebook').prop("target","_blank");
        $(this).next().find('.wcs-popout-share-btn-twitter').prop("target","_blank");

        WCS.POPUP_OPEN = true;
    });
    $('#wcs-main-wrapper').on('click', '.wcs-popout-share-btn', function(e){
        e.preventDefault();
        $('.wcs-popout').removeClass('wcs-popout-active');
        WCS.POPUP_OPEN = false;
    });


    $('#wcs-main-wrapper').on('click', '.wcs-delete-trigger', function(e){
        e.preventDefault();
        var me = this;
        WCS.showModal("Are you sure you want to delete this comment?", "Delete", function(doit){
            if(!doit){
                return false;
            }

            var $commentObj = $(me).closest('.wcs-comment-item');
            var deleteId = $commentObj.data('id');
            $.ajax({
                url: '/ajax_comments/delete_comment',
                data: {
                     comment_id: deleteId,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    if(resp['success'] == 'true'){
                        if(resp['delete_type'] == 2){
                            var $elem = $('#comment_' + deleteId);
                            $elem.addClass('wcs-comment-item-deleted');
                            setTimeout(function(){
                                $elem.remove();
                            }, 500);
                        }else{
                            WCS.setDeleted(deleteId);
                        }
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });
        });
    });

    /******** Profile Avatar Select Popup ***********/
    $('#wcs-main-wrapper').on('click', '.wcs-update-avatar-trigger', function(e){
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;
    });

    $('#wcs-main-wrapper').on('click', '.selectmoji', function(e){
        e.preventDefault();
        var currEmoji = $(this).data('emoji');
        $.ajax({
            url: '/ajax_comments/update_emoji',
            data: {
                 emoji_file: currEmoji,
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                console.log("emokiji arespoinse");
                console.log(resp);
                if(resp['success'] == 'false'){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }else{
                    $('.wcs-popout').removeClass('wcs-popout-active');
                    WCS.POPUP_OPEN = false;
                    //go through each comment, activate delete if user matches
                    $('.wcs-comment-item-reply').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar1 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').attr('src', resp['profile_image']);
                            //new Date().getTime()
                        }
                    });
                    $('.wcs-comment-item-parent').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar2 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').first().attr('src', resp['profile_image']);
                        }
                    });
                    //loggedinDisplay(resp);
                    loginSuccess(resp, true, true);
                }
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });
    });
    /******** emoji, youtube, image embed **********/

    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-media-emoji,.wcs-post-comment-media-video,.wcs-post-comment-media-image', function(e){

        //add wcs-selected-textarea to the area we want to insert emoji
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        $('.wcs-selected-textarea').removeClass('wcs-selected-textarea');
        var $textarea = $('#topcomment_text');
        if($topComment.length > 0){
            $textarea = $topComment.find('.wcs-reply-textarea');
        }
        $textarea.addClass('wcs-selected-textarea');
        //display the popup
        $('.wcs-popout').removeClass('wcs-popout-active');
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;
        console.log("this is");
        console.log(this);
        var me = this;
        //only add these events when popup is open
        if($(this).hasClass('wcs-post-comment-media-image')){
            var holder = $(this).next().find('.wcs-popout-file-upload-dropzone').get(0);

            holder.ondragenter = function(e) { holder.textContent = 'Or drag a file here to upload';
                         e.stopPropagation(); e.preventDefault();};
            holder.ondragover = function (e) { e.stopPropagation(); e.preventDefault(); return false; };
            holder.ondragend = function () {
                //this.className = '';
                return false;
            };
            holder.ondrop = function (e) {
              //this.className = '';
              e.preventDefault();
              e.stopPropagation();
              $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');

              WCS.readfiles(e.dataTransfer.files, function(theid, msg){
                if(theid === null){
                    WCS.showModal(msg, "OK", function(){});
                    return;
                }
                var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;
                $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
                $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload');
                $('.wcs-popout').removeClass('wcs-popout-active');
                WCS.POPUP_OPEN = false;
              });
            }
        }

        e.preventDefault();
        return false;
    });

    $('#wcs-main-wrapper').on('click', '.selectemoji', function(e){
        e.preventDefault();
        var elem =$('#talkums_text').get(0);
        var theEmoji = $(this).data('emoji');
        $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + ":" + theEmoji + ":");

        $('.wcs-popout').removeClass('wcs-popout-active');
        WCS.POPUP_OPEN = false;
    });

    $('#wcs-main-wrapper').on('click', '.youtube-add', function(e){
        e.preventDefault();
       var theUrl = $(this).closest('.wcs-post-comment-media-btns').find('.youtube_url').val();
        var regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        var youtubeId = "";
        var match = theUrl.match(regExp);
        if (match && match[2].length == 11) {
          youtubeId = match[2];
        } else {
            WCS.showModal("Please enter a valid youtube url", "OK", function(){});
            return false;
        }
        var myUrl = "https://www.youtube.com/watch?v=" + youtubeId;
       $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[youtube=" + myUrl + "]");
       $('.wcs-popout').removeClass('wcs-popout-active');
       WCS.POPUP_OPEN = false;
    });

    $('#wcs-main-wrapper').on('change', '.image_uploader', function(){
        var me = this;
        $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');
        WCS.doS3Upload(null, function(theid, msg){
            if(theid === null){
                WCS.showModal(msg, "OK", function(){});
                return;
            }
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;
            $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
            $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload');
            $('.wcs-popout').removeClass('wcs-popout-active');
            WCS.resetFormElement($(me));

            WCS.POPUP_OPEN = false;
        });
    });
    $('#wcs-main-wrapper').on('change', '#avatar_uploader', function(){
        $(this).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('<i class="fa fa-sync fa-spin"></i>');
        var me = this;
        WCS.doS3Upload('avatar', function(theid, msg){
            if(theid === null){
                WCS.resetFormElement($(me));
                $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                WCS.CLOSE_SIDEBAR();
                WCS.showModal(msg, "OK", function(){});
                return;
            }
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;

            console.log(imageUrl);
            $.ajax({
                url: '/ajax_comments/update_avatar',                
                data: {
                     user_upload: imageUrl,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    WCS.resetFormElement($(me));
                    $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                    if(resp['success'] == 'true'){
                        //close avatar window
                        //go through each comment, activate delete if user matches
                        $('.wcs-comment-item-reply').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });
                        $('.wcs-comment-item-parent').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').first().attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });
                        //loggedinDisplay(resp);
                        loginSuccess(resp, true, true);
                    }else{
                        if(resp['msg']){
                            WCS.showModal(resp['msg'], "OK", function(){});
                        }
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });

        });

    });

    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-button', function(e){
        var text = $('#topcomment_text').val();
        var isReply = $(this).closest('.wcs-reply-container').length > 0 ? true : false;
        if(isReply){
            var $textarea = $(this).closest('.wcs-reply-container').find('.wcs-reply-textarea');
            text = $textarea.val();
            $textarea.addClass('wcs-reply-textarea-submitting');
        }
        WCS.doComment(isReply, text);
        e.preventDefault();
        return;
    });

    $('#wcs-main-wrapper').on('click', '.wcs-login-google', function(e){
        e.preventDefault();
        WCS.doAuthWindow('google');
        return false;

    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-twitter', function(e){
        e.preventDefault();
        WCS.doAuthWindow('twitter');
        return false;
    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-facebook', function(e){
        e.preventDefault();
        WCS.doAuthWindow('facebook');
        return false;
    });
    $('.wcs-login-email').on('click', function(e){
        if(WCS.RETURN_USER){
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }else{
            WCS.loadSidebarTemplate('register')
            WCS.setupProfileForm('register');
        }
    });    
    
    $('.wcs-force-login').on('click', function(e){
        if(WEBVIEW.is_webview){
            var isValid = WEBVIEW.is_invalid_user("add-user-tag", "to add a favorite show");
            if(isValid){
                $('.wcs-favorites-login').html("Thank you for logging in.  Click 'Add to Favorites' to receive personalized content related to that show.")
            }
        }else{            
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }
    });    
    
    $('.wcs-login-app').on('click', function(e){  
        WEBVIEW.is_invalid_user('comment', "to make a comment");
    });

    $('.wcs-comment-filter-trigger').on('click', function(e){
        e.preventDefault();
        $('.wcs-comment-filter-trigger').removeClass('wcs-comments-filter-active');
        var newFilterType = this.id.split('-')[2];
        if(newFilterType == WCS.FILTER_TYPE){
            //do nothing, we're using the same filter
            $(this).addClass('wcs-comments-filter-active');
            return false;
        }
        WCS.FILTER_TYPE = newFilterType;
        WCS.FILTER_PAGE = 0;

        $(this).addClass('wcs-comments-filter-active');

        WCS.refreshAllComments();
    });

     $('#wcs-main-wrapper').on('click', '.view-more-btn', function(e){
         e.preventDefault();
         if($(this).hasClass('view-more-topcomment')){
            WCS.FILTER_PAGE++;
            WCS.refreshAllComments();
         }else if($(this).hasClass('view-more-newcomment')){
            WCS.LOADING_NEW_COMMENTS = true;
            WCS.loadNewComments();
            var html = $('#template_loadinganimation').html();
            $('.view-more-newcomment').after(html);
            $('.view-more-newcomment').hide();
         }else if($(this).hasClass('view-more-profilecomment')){
            WCS.PROFILE_COMMENT_PAGE++;
            //WCS.PROFILE_COMMENT_USER = userId;
            WCS.loadMoreProfileComments();
         }
     });

     if(!WCS.IS_ONLYREGISTRATION){
        var comCheckInterval;
        function startCheck(){
            console.log("focus");
            WCS.checkNewComments();
            comCheckInterval = window.setInterval(WCS.checkNewComments,120000);
        }
        function stopCheck(){
           console.log('blur');
           window.clearInterval(comCheckInterval);
        }

        window.addEventListener('focus', startCheck);
        window.addEventListener('blur', stopCheck);

        comCheckInterval = setInterval(function(){
           WCS.checkNewComments();
        }, 120000);
     }

     $('#wcs-main-wrapper').on('click', '.view-prev-replies', function(e){
        e.preventDefault();
        var ancestorId = $(this).data('ancestorid');
        var $container = $('#comment_' + ancestorId);
        var loadingHtml = $('#template_loadinganimation').html();

        $container.find('.view-more-subcomment').before(loadingHtml);
        $container.find('.view-more-subcomment').remove();
        $.ajax({
            url: '/ajax_comments/get_all_children_comments',
            data: {
                 ancestor_id: ancestorId,
                 thread_id: WCS.THREAD_ID,
            },
            type: 'POST',
            dataType: 'json',
            success: function(data)
            {
                if(data.length <= 0){
                    return;
                }
                $container.find('.wcs-loading-animation-overlay').remove();
                console.log("children");

                //alert("adding child to " + '#comment_' + resp['parent_id']);
                var $futureComment = $container.find('.wcs-comment-item-reply').first();

                $(data).each(function(i, resp){
                    console.log("adding child ");
                    console.log(resp);
                    var $comment = $($('#template_acomment').html());

                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                    $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);
                    $comment.attr('data-isadmin', resp['is_admin']);

                    $comment.find('.wcs-other-user').html(resp['parent_username']);
                    $comment.find('.wcs-user-displayname').html(resp['display_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                    }
                    $comment.find('.wcs-like-trigger').html(html);

                    $comment.attr('data-id', resp['id']);
                    $comment.attr('id',  "comment_" + resp['id']);
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                    }
                    $comment.addClass('wcs-comment-item-reply');
                    $futureComment.before($comment);
                });
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });
     });
     setTimeout(function(){
        if(window.location.href.indexOf('#') > 0){
           var possibleComment = window.location.href.split('#')[1];
           if(possibleComment.indexOf('comment_') === 0){
              var commentId = parseInt(possibleComment.split('_')[1]);

              WCS.loadNewComments(commentId, function(){
                  setTimeout(function(){
                      //so we can add the hash here... otherwise it will be same and not move to location
                      var elem = document.getElementById(possibleComment);
                      elem.scrollIntoView();
                      //hash doesn't work if you already have the hash
                      //window.location.href = origUrl + "#" + possibleComment;
                  }, 2000);
              });
           }
           else if(possibleComment == 'settings'){
               $('.wcs-post-comment-user-notifications').trigger('click');
               //alert("show settings");
           }
       }
       
        if(WEBVIEW.is_webview && WCS.NOTIFICATION_SETTINGS_PAGE){

            $.ajax({
                url: '/ajax_comments/get_user_private_profile',
                data: {
                     access_token: WEBVIEW.access_token,
                     get_comments: 0
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    //alert("email  " + resp['email_notifications']);
                    //alert("app " + resp['app_notifications']);
                    var enableEmail = 0;
                   
                    if(resp['email_notifications'] == 1){
                        enableEmail = 1;
                        DG.switches['#enable_email_alerts'].check();     
                    }else{
                        DG.switches['#enable_email_alerts'].uncheck();                             
                    }
                    
                    var enablePush = 0;
                    if(resp['app_push_notifications'] == 1){
                        //alert("enabling check");
                        enablePush = 1;                        
                        DG.switches['#enable_app_alerts'].check();   
                    }else{                        
                        DG.switches['#enable_app_alerts'].uncheck(); 
                    }
                    console.log("notification refreshwebviewstart");

                    WCS.refreshNotifications(enableEmail, 
                        enablePush, 0, 
                        resp['notification_settings']);

                    WCS.refreshReminderList(resp['user_reminders']);    
                },
                error: function(err){

                }
            });        

        }       
       
       

     }, 1000);
})();

WCS.loadSidebarTemplate = function(theType, isSocial){
    $('#wcs-slideout-wrapper').empty();
   if(theType == 'register'){
        var $container = $('<div class="wcs-profile-registration-wrap wcs-profile-settings-wrap">');
        var innerHtml = $('#template_registration_header_email').html() + $('#template_profile_form').html();
        if(isSocial){
            WCS.SOCIAL_REGISTRATION_FORM = true;
            innerHtml = $('#template_registration_header_social').html() + $('#template_profile_form').html();
        }

        $container.append(innerHtml);

        $('#wcs-slideout-wrapper').append($container);
        if(WCS.DESIRED_ACTION !== ""){
            setTimeout(function(){
                $('.desired_action').html(WCS.DESIRED_ACTION);
            }, 20);
        }
        if(WCS.DESIRED_TITLE !== ""){
            setTimeout(function(){
                $('.desired_title').html(WCS.DESIRED_TITLE);
            }, 30);
        }       
        if(WCS.DESIRED_DESCRIPTION !== ""){
            setTimeout(function(){
                $('.desired_description').html(WCS.DESIRED_DESCRIPTION);
            }, 40);
        }     
        if(WCS.DESIRED_TITLE == "" && WCS.DESIRED_DESCRIPTION == ""){
            setTimeout(function(){
                $('.desired_title').html("Create an Account");
                $('.desired_description').html("");
            });
        }
   }
   else if(theType == 'login'){
       var $container = $('<div class="wcs-profile-settings-wrap">');
       var innerHtml = $('#template_login_header').html() + $('#template_login_form').html();
       $container.append(innerHtml);
       $('#wcs-slideout-wrapper').append($container);
       if(WCS.DESIRED_ACTION !== ""){
            setTimeout(function(){
                $('.desirect_action').html(WCS.DESIRED_ACTION);
            }, 20);
       }
       if(WCS.DESIRED_TITLE !== ""){
        setTimeout(function(){
            $('.desired_title').html(WCS.DESIRED_TITLE);
        }, 30);
       }       
        if(WCS.DESIRED_DESCRIPTION !== ""){
            setTimeout(function(){
                $('.desired_description').html(WCS.DESIRED_DESCRIPTION);
            }, 40);
        }       
        if(WCS.DESIRED_TITLE == "" && WCS.DESIRED_DESCRIPTION == ""){
            setTimeout(function(){
                $('.desired_title').html("Login");
                $('.desired_description').html("");
            });
        }        
   }
   else if(theType == 'profile_user'){
       var headerHtml = $('#template_profile_header').html();
       var formHtml = $('#template_profile_form').html();
       var notificationsHtml = $('#template_notifications').html();
       var $settingsBody = $($('#template_profile_display_wrapper').html());
       $settingsBody.find('.wcs-profile-settings-wrap').append(formHtml);
       $settingsBody.find('.wcs-profile-notifications-wrap').append(notificationsHtml);

       $('#wcs-slideout-wrapper').append(headerHtml);

       $('#wcs-slideout-wrapper').append($settingsBody);
   }
   else if(theType == 'profile_other'){
       var headerHtml = $('#template_profile_header').html();
       var wrapper = $('#template_profile_display_wrapper').html();


       $('#wcs-slideout-wrapper').append(headerHtml + wrapper);
   }
   else if(theType == 'forgot_password'){
       var wrapper = $('#template_forgotpass_form').html();
       $('#wcs-slideout-wrapper').append(wrapper);
   }
   else if(theType == 'update_password'){
       var wrapper = $('#template_update_password').html();
       $('#wcs-slideout-wrapper').append(wrapper);
   }
   else if(theType == 'loading'){
        var html = $('#template_loadinganimation').html();
       $('#wcs-slideout-wrapper').append(html);
   }
};


WCS.doAuthWindow  = function(authType){
    var windowWidth = 600;
    var windowHeight = 360;
    if(authType == 'facebook'){
        windowWidth = 800;
        windowHeight = 480;
    }else if(authType == 'twitter'){
        windowWidth = 500;
        windowHeight = 700;
    }
    var authWindow = window.open(WCS.SITE_URL + 'iframelogin/social_login?service=' + authType, '_blank', 'toolbars=0,width=' + windowWidth + ',height=' + windowHeight + ',left=200,top=200,scrollbars=1,resizable=1,location=no');
};

WCS.doComment = function(isReply, theText){

    var parentId = 0;
    var parentAdmin = 0;
    var ancestorId = 0;
    var replyLevel = 0;
    if(isReply){
        parentId = WCS.REPLY_PARENT_ID;
        parentAdmin = WCS.REPLY_PARENT_ADMIN;
        ancestorId = WCS.REPLY_ANCESTOR_ID;
        replyLevel = parseInt(WCS.REPLY_LEVEL);
        replyLevel++;
    }

    if(WCS.IS_POSTING){
        return false;
    }
    //Decrement counter, so user's own comment doesn't show up as 'new'
    newCommentCount = newCommentCount - 1;

    WCS.IS_POSTING = true;
    $.ajax({
        url: '/ajax_comments/post_comment',
        data: {
             thread_id: WCS.THREAD_ID,
             thread_url: WCS.THREAD_URL,
             site_id: WCS.TALKUMS_SITE_ID,
             ancestor_id : ancestorId,
             parent_id : parentId,
             parent_admin: parentAdmin,
             level : replyLevel,
             post_text: theText,
             access_token: WEBVIEW.access_token
        },
        type: 'POST',
        dataType: 'json',
        success: function(resp)
        {
            console.log("post comment data");
            console.log(resp);
            if(resp['success'] == 'false'){
                if(resp['action']){
                    WCS.force_action(resp['action']);
                }
                else if(resp['msg']){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }
                WCS.IS_POSTING = false;
                return;
            }
            if(parentId > 0){
                $('.subcomment_text').val("");
            }else{
                $('#topcomment_text').val("");
            }
            //$('.wcs-reply-container').remove();
            WCS.IS_POSTING = false;
            var $comment = $($('#template_acomment').html());


            $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
            $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

            if(resp['parent_userid']){
                $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + parentId);
                $comment.attr('data-isadmin', resp['is_admin']);
                if(resp['parent_admin'] == 1){
                    $comment.find('.wcs-other-user').addClass('wcs-verified-user');
                }else{
                    $comment.find('.wcs-other-user').removeClass('wcs-verified-user');
                }
                $comment.find('.wcs-other-user').html(resp['parent_username']);
            }else{
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + parentId);
                $comment.attr('data-isadmin', resp['is_admin']);

                $comment.addClass('wcs-comment-item-parent');
                $comment.find('.wcs-other-user').remove();
                $comment.find('.wcs-comment-item-username i').remove();
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);
            }
            $comment.find('.wcs-user-displayname').html(resp['display_name']);
            if(resp['is_admin'] == 1){
                $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
            }
            $comment.find('.wcs-user-displayname').attr('data-userid', WCS.USER_ID);
            $comment.find('.wcs-user-displayname').attr('data-isadmin', resp['is_admin']);
            $comment.find('.wcs-comment-item-date').html('Just Now');
            $comment.find('.wcs-comment-item-text').html(resp['post_html']);
            $comment.find('.wcs-like-trigger').html('<i class="fas fa-heart"></i>' + " Like ");
            $comment.attr('data-id', resp['insert_id']);
            $comment.attr('id',  "comment_" + resp['insert_id']);

            if(parentId > 0){
                $comment.addClass('wcs-comment-item-reply');
                var $container = $('#comment_' + ancestorId);
                $container.find('.wcs-reply-container').before($comment);
            }
            else{
                $('.wcs-comment-container').prepend($comment);
            }

            // adds/removes class to animate entrance
            $comment.addClass('wcs-comment-item-added');
            setTimeout(function() {
            	$comment.removeClass('wcs-comment-item-added');
            }, 500);

            if($('.wcs-comments-no-comments').length > 0){
                $('.wcs-comments-no-comments').remove();
            }
            WEBVIEW.log_stats('comment_posted', WCS.THREAD_URL + "#comment_" + resp['insert_id']);
            if(WCS.socket !== null){
                WCS.socket.publish('thread' + WCS.TALKUMS_THREADID, {user: 'user456',
                    message: 'Hi!'});
            }
        },
        error: function(response)
        {
            //Set new comment count back up if error (no actual commment)
            newCommentCount++;
            alert("Error");
            console.log(response.responseText);
            console.log(response);
        }
    });



};

WCS.setupProfileForm = function(formType, isSocial){
    WCS.SIDEBAR_PAGE = formType;

    //bind evends
    if(formType == 'register' || formType == 'settings'){
        $('#wcs-zipcode').on('keypress', function(ev) {
            var keyCode = window.event ? ev.keyCode : ev.which;
            //codes for 0-9
            if (keyCode < 48 || keyCode > 57) {
                //codes for backspace, delete, enter
                if (keyCode != 0 && keyCode != 8 && keyCode != 13 && !ev.ctrlKey) {
                    ev.preventDefault();
                }
            }
        });
        $('#wcs_zipcode').change(function(){
           WCS.load_providers();
        });

        $("#wcs_zipcode").keyup(function(){
            WCS.load_providers();
        });

        $('#wcs_provider').on('change', function(){
           var aProvider = $(this).val();
           //alert("channelDisplay: " + channelDisplay);
           if(aProvider == 'provider not listed'){
               $('.wcs-profile-settings-other-provider').show();
           }
           else if(aProvider == ''){

           }else{
               $('.wcs-profile-settings-other-provider').hide();
               var $option = $(this).find('option:selected');
               var channelDisplay = $option.data('display');
               $('#wcs_provider_display').val(channelDisplay);
               $('channelDisplay').find('selector')
           }
        });
        if(formType == 'register'){
            $('#username').on('keyup', function(ev) {
                //codes for 0-9
                var newVal = $(this).val();
                var code, i, len;
                var isAlphanumeric = true;
                 for (i = 0, len = newVal.length; i < len; i++) {
                   code = newVal.charCodeAt(i);
                   if (!(code > 47 && code < 58) && // numeric (0-9)
                       !(code > 64 && code < 91) && // upper alpha (A-Z)
                       !(code > 96 && code < 123) && // lower alpha (a-z)
                       !(code == 95)        ) {  // underscore
                     isAlphanumeric = false;
                   }
                 }
                if(!isAlphanumeric){
                    $('.wcs-settings-form-err-username').html("Username Invalid: spaces, hyphens and special characters are NOT allowed.");
                }else{
                    $('.wcs-settings-form-err-username').html("");
                }
            });            
        }

    }
    if(formType == "register"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-registration-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
        $('.wcs-profile-settings-email-username').hide();
        $('.wcs-profile-signup-username').show();
        $('.wcs-profile-signup-password').show();
    }else if(formType == "settings"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-edit-form');
        $('input[name="social_username"]').attr('readonly', 'readonly');
        $('input[name="social_username"]').addClass("wcs-profile-settings-form-readonly");
        $('input[name="username1"]').attr('readonly', 'readonly');
        $('input[name="username1"]').addClass("wcs-profile-settings-form-readonly");
        $('input[name="password"]').attr('readonly', 'readonly');
        $('input[name="password"]').addClass("wcs-profile-settings-form-readonly");
        if(isSocial){
            $('input[name="social_username"]').after('<span class="wcs-settings-form-disclaimer">Your username can' +
                    "'" + 't be edited</span>');
        }else{
            $('input[name="username1"]').after('<span class="wcs-settings-form-disclaimer">Your username can' +
                    "'" + 't be edited</span>');

            $('.wcs-settings-form-password-container').remove();
            $('.wcs-settings-form-password-updater').show();
            //$('.wcs-settings-form-password-updater').hide();

        }
        if(WCS.termsAccepted == 1){
            $('.wcs-profile-registration-terms').remove();
        }
        
        WCS.setupNotificationHandlers(false);

    }else if(formType == "login"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-login-form');
    }
    else if(formType == "forgot_password"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-forgotpass-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
    }
    else if(formType == 'update_password'){
        $('.wcs-profile-settings-form').attr('id', 'wcs-updatepass-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
    }

    $('.wcs-cancel-btn').on('click', function(e){
        e.preventDefault();
        if(WCS.SOCIAL_REGISTRATION_FORM){
            window.location.href = '/social_auth/logout';
        }
        WCS.CLOSE_SIDEBAR();
    });


    //ugly - delay to allow dom to update, so can bind events
    setTimeout(function(){
        if(formType == "register"){
            WCS.setupRegistrationForm();
        }else if (formType == "login"){
            WCS.setupLoginForm();
        }else if(formType == "settings"){
            WCS.setupSettingsForm();
        }
        else if(formType == "forgot_password"){
            WCS.setupForgotPass();
        }
        else if(formType == 'update_password'){
            WCS.setupUpdatePass();
        }
        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){
            WCS.OPEN_SIDEBAR();
            WCS.PROFILE_OPEN = true;
        }

    }, 10);
};

    WCS.refreshReminderList = function(userReminders){
        //console.log("in refresh reminders ");
        //console.log(userReminders);
        $('.reminders-list').empty();
        if(!userReminders || userReminders.length <= 0){
            $('.reminders-list').append("<li style='padding-left:0px;margin-left:0px;'><p >You have no reminders set.</p></li>");
            return;
        }
        console.log(userReminders);
        for(var x = 0; x < userReminders.length; x++){
            var rem = userReminders[x];
            var textSelected = "";
            var emailSelected = "";
            var browserSelected = "";
            if(rem['alert_type'] == 'text'){
                textSelected = "selected='selected'";
            }
            if(rem['alert_type'] == 'email'){
                emailSelected = "selected='selected'";                
            }
            if(rem['alert_type'] == 'browser'){
                browserSelected = "selected='selected'";                
            }
            console.log(rem);
            //alert("alert type " + rem['alert_type']);
            
            var selectControl = '<select  data-remindid="' + rem['id'] + '" data-remindtype="' + rem['type'] + 
                        '" id="notifications_reminder_type" class="reminder-changetype">' + 
                    '<option value="text" ' + textSelected + '>Text</option>' + 
                    '<option value="email" ' + emailSelected + '>Email</option>' + 
                    '<option value="browser" ' + browserSelected + '>Browser Notification</option>' + 
            '</select>';
            
            var remHtml = '<li id="uremind_' + rem['id'] + '">' + 
                    selectControl + 
                    '<button data-remindid="' + rem['id'] + '" data-remindtype="' + rem['type'] + '" class="reminder-remove">' +                     
                        'Remove</button>' + rem['display'] + 
                    '</li>';
            
            $('.reminders-list').append(remHtml);
                    
        }
    };

    WCS.refreshNotifications = function(enableEmail, enableBrowser, enableApp, notificationSettings){
        
        if(notificationSettings == null){
            console.log("empty data for notficationsettings update");
            return;
        }
        console.log("refreshing notification settings...");
        console.log(notificationSettings);
        for(var notificationId in notificationSettings){
            
            var notificationVal = notificationSettings[notificationId];
            
            
            if(notificationId == 'noteworthy_send_time'){
                $('#noteworthy_send_time').val(notificationVal);
                continue;                
            }
            
            
            var disabledType = false;           
            if(notificationId.indexOf('_email_') >= 0){
                if(enableEmail == 0){
                    disabledType = true;
                }
            }
            if(notificationId.indexOf('_app_') >= 0){
                if(enableBrowser == 0){
                    disabledType = true;
                }
            }
            if(notificationId.indexOf('_browser_') >= 0){
                if(enableApp == 0){
                    disabledType = true;
                }
            }
            
            if(notificationVal == 'yes' && !disabledType){
                $('#' + notificationId).attr('checked', 'checked');   
                $('#' + notificationId).removeAttr('disabled');   
                $('#' + notificationId).parent().removeClass("disabled_check");
            }else if(!disabledType){
                $('#' + notificationId).removeAttr('disabled');         
                $('#' + notificationId).removeAttr('checked');    
                $('#' + notificationId).parent().removeClass("disabled_check");
            }
            else{            
                $('#' + notificationId).removeAttr('checked');       
                $('#' + notificationId).attr('disabled', true);     
                $('#' + notificationId).parent().addClass("disabled_check");
            }
            
        }
        
        
        
    };

WCS.setupRegistrationForm = function(){
    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');

        return false;
    });
    $('input[name="wcs_zipcode"]').val(WCS.DEFAULT_SIGNUP_ZIPCODE);
    WCS.load_providers();

    $('#wcs-registration-form').submit(function(e){
       // alert("submitting");
       e.preventDefault();
        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);

       //lets try HTML5 formdata object...
       var formData = new FormData(document.getElementById("wcs-registration-form"));

       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                    //do modal
                   // alert("do modal close");
                  var successHtml = $('#template_registration_header_success').html();
                  $('.wcs-profile-registration-wrap').empty();
                  $('.wcs-profile-registration-wrap').html(successHtml);
                  loginSuccess(result, true, true);
                  WCS.termsAccepted = 1;
                    var defaultComment = $('#topcomment_text').val();
                    if(defaultComment.trim().length > 0)
                    $.ajax({
                        url: '/ajax_comments/set_default_comment_text',
                        data: {
                             default_comment: defaultComment
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(resp)
                        {
                        },
                        error: function(response)
                        {
                        }
                    });


                  /*
                  setTimeout(function(){
                     WCS.CLOSE_SIDEBAR();
                  }, 10000);
                  */
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('full-name');
                  setError('email');
                  setError('username');
                  setError('password');
                  setError('social-username');
                  setError('dob');
                  setError('gender');
                  setError('zipcode');
                  setError('provider');
                  setError('other-provider');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['msg']){
                      alert(result['msg']);
                  }

              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);
   });

}
WCS.setupForgotPass = function(){
    $('#wcs-login-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');
        return false;
    });

    $('#wcs-forgotpass-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-forgotpass-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/reset_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                var successHtml = $('#template_forgotpass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };
                  setError('email');
                  setError('captcha');
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });

};

WCS.setupUpdatePass = function(){
    $('.wcs-update-password-settings-link').on('click', function(e){
        e.preventDefault();
        //Just reload with ajax call - otherwise this would get really messy
        WCS.PROFILE_USER_ID = -1;
        $('.wcs-post-comment-user-settings').trigger('click');
        return false;
    });   

    $('#wcs-updatepass-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-updatepass-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/update_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                var successHtml = $('#template_updatepass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };
                  setError('password');
                  setError('password1');
                  setError('captcha');
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });

};



WCS.setupLoginForm = function(){

    $('#wcs-register-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('register');
        WCS.setupProfileForm('register');
        return false;
    });

    $('.wcs-login-forgot-un-pw').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('forgot_password');
        WCS.setupProfileForm('forgot_password');
        return false;
    });

    $('#wcs-login-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);

       var formData = new FormData(document.getElementById("wcs-login-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/login_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("result");
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();

              if(result['success'] == "true"){
                  //make user do the things
                  loginSuccess(result, true, false);
                    //do modal
                  //$('#wcs-edit-form').after("<h1 class='wcs-edit-success'>Thank you for updating your information!</h1>");
              }
              else{
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('username');
                  setError('password');
                  setError('generic');
                  //if(result['msg']){
                  //   WCS.showModal(result['msg'], "OK", function(){});
                  //}
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });


}

WCS.setupSettingsForm = function(){

    $('.wcs-profile-nav-tab').on('click', function(e){
        e.preventDefault();
        $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
        $(this).addClass('wcs-profile-nav-active');
        if($(this).text() == 'Settings'){
            $('.wcs-profile-settings-wrap').show();
            $('.wcs-profile-comments-wrap').hide();
            $('.wcs-profile-notifications-wrap').hide();
        }else if($(this).text() == 'Notifications'){
            $('.wcs-profile-notifications-wrap').show();
            $('.wcs-profile-comments-wrap').hide();
            $('.wcs-profile-settings-wrap').hide();
        }else{
            $('.wcs-profile-comments-wrap').show();
            $('.wcs-profile-settings-wrap').hide();
            $('.wcs-profile-notifications-wrap').hide();
        }
    });

    $('.wcs-view-in-discussion-trigger').on('click', function(e){
        e.preventDefault();
        var viewUrl = $(this).data('url');
        var vus = viewUrl.split('#');
        var baseUrl = vus[0];
        var commentDomId = vus[1];
        if(WCS.BASE_THREAD_URL == baseUrl && $('#' + commentDomId).length <= 0){
            var commentParts = commentDomId.split('_');
            var commentId = commentParts[1];
            var ancestorId = parseInt($(this).data('ancestorid'));
            if(ancestorId > 0){
                //fetch ancestor and it will pull in child
                commentId = ancestorId;
            }
            WCS.loadNewComments(commentId, function(){
                setTimeout(function(){
                    var elem = document.getElementById(commentDomId);
                    elem.scrollIntoView();
                    WCS.CLOSE_SIDEBAR();
                }, 100);
            });

        }else{

            window.location.href = viewUrl;

            setTimeout(function(){
                WCS.CLOSE_SIDEBAR();
            }, 250);
        }
    });

    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');

        return false;
    });

    $('.wcs-profile-settings-update-password').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('update_password');
        WCS.setupProfileForm('update_password');

        return false;
    });

    //alert("setting up settings form");
    $('#wcs-edit-form').submit(function(e){
       e.preventDefault();
       //lets try HTML5 formdata object...
       var formData = new FormData(document.getElementById("wcs-edit-form"));

        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);


       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                    //do modal
                   // alert("do modal close");
                  //alert("Some success message will display in some location");
                  $('.wcs-profile-settings-edit-message').html("<div class='wcs-profile-settings-edit-success'>Your settings have updated successfully!</div>");
              }
              else{
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('full-name');
                  setError('email');
                  setError('username');
                  setError('password');
                  setError('social-username');
                  setError('dob');
                  setError('gender');
                  setError('zipcode');
                  setError('provider');
                  setError('other-provider');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['errors']['msg']){
                      alert(result['errors']['msg']);
                  }

              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);
    });

    $('.manage-notifications').on('change', 'input', function(e){


        //manage notification checkboxs here
    });

};


WCS.force_action = function(theAction, skipQuestion){
   if(theAction == 'accept_terms'){
       var res = false;
       if(!skipQuestion){
           WCS.showModal("You have not completed registration.  Do you want to complete registration to perform this action?", "Yes",
           function(doit)
           {
               if(!doit){
                   return false;
               }

               WCS.loadSidebarTemplate('register', true);
                WCS.setupProfileForm('register', true);
                $.ajax({
                     url: '/ajax_comments/get_user_private_profile',
                     data: {
                          private: 'true'
                     },
                     type: 'POST',
                     dataType: 'json',
                     success: function(resp)
                     {
                         var user = resp['user'];
                         user['newsletter_signup'] = 1;
                         WCS.fillSettingsData(user);
                     }
                });
           });
       }else{
           //it must be social registration... because you can't be logged in otherwise
           WCS.loadSidebarTemplate('register', true);
           WCS.setupProfileForm('register', true);
           $.ajax({
                url: '/ajax_comments/get_user_private_profile',
                data: {
                     private: 'true'
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    var user = resp['user'];
                    user['newsletter_signup'] = 1;
                    WCS.fillSettingsData(user);
                }
           });

       }
   }
   else if(theAction == 'confirm_email'){
        WCS.showModal("You have not confirmed your email.  Do you want to resend the registration email?", "Yes", function(doit)
        {
            if(doit){
                $.ajax({
                    url: '/ajax_comments/resend_registration_email',
                    data: {
                        send: 1,
                        access_token: WEBVIEW.access_token
                    },
                    type: 'POST',
                    dataType: 'json',
                    success: function(resp)
                    {

                    },
                    error: function(response)
                    {

                    }
                });
            }
        });
   }
};

WCS.fillSettingsData = function(user){
    $('input[name="wcs_email"]').val(user['email']);
    $('input[name="fullName"]').val(user['name']);

    //is social
    if(user['service'] == 'google' || user['service'] == 'facebook' || user['service'] == 'twitter'){
        $('input[name="social_username"]').val(user['display_name']);
        $('input[name="is_social"]').val(1);
        $('.wcs-profile-settings-email-username').hide();
        $('.wcs-profile-signup-username').hide();
        $('.wcs-profile-signup-password').hide();
        $('.wcs-profile-settings-social-username').show();
        if(user['email'] && user['email'].length > 3){
            $('input[name="wcs_email"]').addClass("wcs-profile-settings-form-readonly");
            $('input[name="wcs_email"]').attr('readonly', 'readonly');
            $('input[name="wcs_email"]').after('<span class="wcs-settings-form-disclaimer">This email address is tied to your ' + user['service'] +
                    ' account and can' + "'" + 't be edited</span>');

        }
    }
    else{
        $('.wcs-profile-settings-email-username').show();
        $('.wcs-profile-signup-username').hide();
        $('.wcs-profile-signup-password').hide();
        $('input[name="username"]').val(user['display_name']);
        $('input[name="username1"]').val(user['display_name']);
        $('input[name="wcs_email"]').addClass("wcs-profile-settings-form-readonly");
        if(user['email'] && user['email'].length > 3){
            $('input[name="wcs_email"]').attr('readonly', 'readonly');
            $('input[name="wcs_email"]').after('<span class="wcs-settings-form-disclaimer">This email address is tied to your ' + user['service'] +
                    ' account and can' + "'" + 't be edited</span>');
        }
    }

    $('input[name="wcs_zipcode"]').val(user['zipcode']);
    var option = '';
    if(user['provider']){
        if(user['provider'].substring(0, 6) == "Other:"){
            $('input[name="other_provider"]').val(user['provider'].substring(7));
            $('.wcs-profile-settings-other-provider').show();
            option = 'provider not listed';
        }else{
            $('.wcs-profile-settings-other-provider').hide();
            option = user['provider'];
        }
    }
    if(user['newsletter_signup'] == 1){
        $('#wcs_newsletter_signup').attr('checked', 'checked');
    }else{
        $('#wcs_newsletter_signup').removeAttr('checked');
    }
    WCS.load_providers(option);

    $('select[name="gender"]').val(user['gender']);

    if(user['dob']){
        var dobSplit = user['dob'].split('-');
        if(dobSplit.length == 3){
            var year = parseInt(dobSplit[0].replace(/\b0+/g, '')).toString();
            var month = parseInt(dobSplit[1].replace(/\b0+/g, '')).toString();
            var day = parseInt(dobSplit[2].replace(/\b0+/g, '')).toString();
            $('select[name="dobYear"]').val(year);
            $('select[name="dobMonth"]').val(month);
            $('select[name="dobDay"]').val(day);
        }
    }
};

WCS.showModal = function(msg, buttonText, callback, hasInput){

        $('#wcs-overlay-modal').addClass('wcs-overlay-open');
        var cancelText = "Cancel";
        if(buttonText.indexOf("|") >= 0){
            var buttonParts = buttonText.split('|');
            buttonText = buttonParts[0];
            cancelText = buttonParts[1];        
        }
        var getInput = hasInput;
        if(hasInput){
            msg += '<br><br><input type="text" id="showmodal_input" value="" />';
        }
        
        $('.wcs-modal-innertext').html(msg);
        $('.wcs-modal-btns-cancel').off('click');
        $('.wcs-modal-btns-cancel').on('click', function(){
            callback(false);
            $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
            WCS.MODAL_OPEN = false;
        });

        $('.wcs-modal-btns-submit').html(buttonText);
        $('.wcs-modal-btns-submit').off('click');
        $('.wcs-modal-btns-submit').on('click', function(){
            if(getInput){
               var retVal = $('#showmodal_input').val(); 
               callback(retVal);
            }else{
                callback(true);
            }
            $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
            WCS.MODAL_OPEN = false;
        });
        WCS.MODAL_CALLBACK = callback;
        setTimeout(function(){
            WCS.MODAL_OPEN = true;
        }, 500);
        
    $('.wcs-modal-btns-submit').html(buttonText);
    if(cancelText == ''){
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').hide();
    }else{
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').show();        
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').html(cancelText);
    }
    /*
    $('.wcs-modal-btns-submit').off('click');
    $('.wcs-modal-btns-submit').on('click', function(){
        callback(true);
        $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
        WCS.MODAL_OPEN = false;
    });
    WCS.MODAL_CALLBACK = callback;
    setTimeout(function(){
        WCS.MODAL_OPEN = true;
    }, 500);
      */  

};

WCS.setDeleted = function(commentId){
    var $comment = $('#comment_' + commentId);
    var dateHtml = $comment.find('.wcs-comment-item-date').html();
    $comment.find('.wcs-comment-flag').first().remove();
    $comment.find('.wcs-comment-item-header').first().remove();
    $comment.find('.wcs-comment-item-text').first().remove();
    $comment.find('.wcs-comment-item-footer').first().remove();

    var $deleteHeader = $($('#template_deleted_comment').html()).find('.wcs-comment-item-header').unwrap();
    var $deleteText = $($('#template_deleted_comment').html()).find('.wcs-comment-item-text-removed').unwrap();
    $comment.prepend($deleteText);
    $comment.prepend($deleteHeader);
    setTimeout(function(){
        $comment.find('.wcs-comment-item-date').html(dateHtml);
    }, 10);
};

var newCommentCount = 0;
var conn;
if (window["WebSocket"]) {
    conn = new ReconnectingWebSocket("wss://socket2me.weigelbroadcasting.com:8080/metvthread/"+WCS.THREAD_ID);
    conn.onmessage = function (evt) {
        newCommentCount++;
        if(newCommentCount>0){
            $('.view-more-newcomment').html("Load " + newCommentCount + " new comments <i class='fas fa-angle-down'></i>");
            $('.view-more-newcomment').show();
        }
        //var data = JSON.parse(evt.data);
        //var song = data[0];
    };
} else {
    var item = document.createElement("div");
    item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
    appendLog(item);
}

var commentsLastChecked = Date.now();

WCS.checkNewComments = function(){
    //console.log("checking");
    return;
    nownow = Date.now();
    timediff = nownow - commentsLastChecked;
    if(timediff < 60000){
        //console.log("too soon");
        return;
    }
    commentsLastChecked = nownow;
   $.ajax({
        url: '/ajax_comments/get_new_comment_count',
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            var newTotal = parseInt(data['new_total']);
            if(newTotal > 0){
                //already updated button
                if(WCS.NEW_COMMENT_TOTAL == newTotal){
                    return;
                }
                WCS.NEW_COMMENT_TOTAL = newTotal;
                //alert("has new comments");
                $('.view-more-newcomment').html("Load " + newTotal + " new comments <i class='fas fa-angle-down'></i>");
                $('.view-more-newcomment').show();
            }
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });

};

WCS.loadNewComments = function(specificId, callback){
    var requestUrl = '/ajax_comments/get_specific_topcomment';
    if(!specificId){
        requestUrl = '/ajax_comments/get_new_comments';
    }
    $.ajax({
        url: requestUrl,
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID,
             comment_id : specificId
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            var total = parseInt(data['new_total']);
            if(total > 0){
                if(data['new_max'] > 0){
                    WCS.MAX_ID = parseInt(data['new_max']);
                    WCS.NEW_COMMENT_TOTAL = 0;
                }


                var topComments = data['topcomments'];
                var subComments = data['subcomments'];

                $(topComments).each(function(i, resp){
                    var $comment = $($('#template_acomment').html());
                    if(resp['active'] == 0){
                        $comment = $($('#template_deleted_comment').html());
                        if(!resp['has_children']){
                            return;
                        }
                    }

                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + resp['parent_id']);
                    $comment.attr('data-isadmin', resp['is_admin']);

                    $comment.addClass('wcs-comment-item-parent');
                    //need to add reply box
                    var replyBox = $('#template_reply_container').html();
                    $comment.append(replyBox);
                    $comment.find('.wcs-user-displayname').html(resp['display_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    if(resp['active'] == 0){
                        $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                    }else{
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    }
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                    }
                    if(resp.parent_id == 0){
                        $comment.find('.wcs-other-user').remove();
                        $comment.find('.wcs-comment-item-username i').remove();
                    }else{
                        $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                        $comment.find('.wcs-other-user').html(resp.parent_username);
                    }

                    //xxxxxxxxxxxxxxxx
                    if(resp.is_admin == 1){
                       $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                    }else{
                        $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
                    }

                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                    }


                    $comment.find('.wcs-like-trigger').html(html);
                    $comment.attr('data-id', resp['id']);
                    $comment.attr('id',  "comment_" + resp['id']);
                    if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                        if(data['new_max'] > 0){
                            $('.wcs-comment-container').prepend($comment);
                        }else{
                            $('.wcs-comment-container').append($comment);
                        }
                    }
                });
                setTimeout(function(){

                    $(subComments).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);
                        $comment.attr('data-isadmin', resp['is_admin']);

                        $comment.find('.wcs-other-user').html(resp['parent_username']);
                        $comment.find('.wcs-user-displayname').html(resp['display_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        if(resp.is_admin == 1){
                           $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                        }else{
                            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
                        }

                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                        }
                        $comment.find('.wcs-like-trigger').html(html);

                        $comment.attr('data-id', resp['id']);
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                        }

                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);

                        if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                            $container.find('.wcs-reply-container').before($comment);
                        }
                    });
                    setTimeout(function(){
                        callback();
                    }, 50);
                }, 500);
                WCS.LOADING_NEW_COMMENTS = false;
                $('.wcs-comments .wcs-loading-animation-overlay').remove();
            }
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });
};


WCS.loadMoreProfileComments = function(){
    $.ajax({
        url:'/ajax_comments/load_more_profile_comments/',
        data:{
            page: WCS.PROFILE_COMMENT_PAGE,
            user_id: WCS.PROFILE_COMMENT_USER
        },
        dataType:'json',
        type:'POST',
        success:function(resp){
            var comments = resp['comments'];
            var hasMore = resp['has_more'];
            WCS.appendProfileComments(comments, hasMore);
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });
}

WCS.appendProfileComments = function(comments, has_more){
    $(comments).each(function(){
        console.log("comment");
        console.log(this);
        //{"op":"do_navigation","key":"favorites",
        //"type":"quiz","fullurl":"https://local.metv.com//quiz/do-you-know-who-sings-these-flintstones-songs?contentview=2",
        //"itemurl":"do-you-know-who-sings-these-flintstones-songs",
        //"services":"https://services.weigelbroadcasting.com/metv/quiz/1717"}        
        
        var $comment = $($('#template_listcomment').html());
        $comment.find('.wcs-comment-post-title a').attr('href', this.thread_url);
        $comment.find('.wcs-comment-post-title a').html(this.thread_title);

        
        
        $comment.find('.wcs-avatar-img').attr('src', this.profile_image);
        $comment.find('.wcs-user-displayname').html(this.display_name);
        $comment.find('.wcs-user-displayname').attr('data-userid', this.user_id);
        if(this.parent_id == 0){
            $comment.find('.wcs-other-user').remove();
            $comment.find('.wcs-comment-item-username i').remove();
        }else{
            $comment.find('.wcs-other-user').attr('data-userid', this.parent_userid);
            $comment.find('.wcs-other-user').html(this.parent_username);
            if(this.parent_admin == 1){
                $comment.find('.wcs-other-user').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-other-user').removeClass('wcs-verified-user');
            }
        }
        $comment.find('.wcs-comment-item-date').html(this.timeago);
        $comment.find('.wcs-comment-item-text').html(this.generated_comment);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-url', this.thread_viewurl);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-ancestorid', this.ancestor_id);
        
        if(WEBVIEW.is_webview){
            var contentId = "";
            var theType = 'stories';
            if(this.thread_url.indexOf('quiz') > 0){
                theType = 'quiz';
            }
            else if(this.thread_url.indexOf('list') > 0){
                theType = 'lists';                
            }
            $comment.find('.wcs-view-in-discussion-trigger').attr('href', 'javascript:void(0);');
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-key', 'comment-profile');
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-type', theType);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-fullurl', 'https://www.metv.com' + this.thread_url + '?contentview=2#comment_' + this.id);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-itemurl', this.thread_url + '#comment_' + this.id);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-services', 'https://services.weigelbroadcasting.com/metv/' + theType + '/' + this.parent_id);   

            $comment.find('.wcs-comment-post-title a').attr('href', 'javascript:void(0);');
            $comment.find('.wcs-comment-post-title a').attr('data-key', 'comment-profile');
            $comment.find('.wcs-comment-post-title a').attr('data-type', theType);
            $comment.find('.wcs-comment-post-title a').attr('data-fullurl', 'https://www.metv.com' + this.thread_url + '?contentview=2');
            $comment.find('.wcs-comment-post-title a').attr('data-itemurl', this.thread_url);
            $comment.find('.wcs-comment-post-title a').attr('data-services', 'https://services.weigelbroadcasting.com/metv/' + theType + '/' + this.parent_id);            
        }        
        if(this.is_liked){
            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
        }
        if(this.is_admin == 1){
            $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
        }else{
            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
        }

        //actually prepend so before loadmore
        $('.wcs-profile-comments-wrap .wcs-profile-comments-load-more').before($comment);
    });
    if(has_more){
        $('.wcs-profile-comments-load-more').show();
    }else{
        $('.wcs-profile-comments-load-more').hide();
    }

};

WCS.refreshAllComments = function(){
    if(WCS.FILTER_PAGE == 0){
        var html = $('#template_loadinganimation').html();
        $('.wcs-comment-container').html(html);
        $('.view-more-topcomment').hide();
    }

    $.ajax({
        url:'/ajax_comments/reload_comments/?' + new Date().getTime(),
        data:{
            filter_type: WCS.FILTER_TYPE,
            filter_page: WCS.FILTER_PAGE,
            thread_id: WCS.THREAD_ID
        },
        dataType:'json',
        type:'POST',
        success:function(allData){
            if(WCS.FILTER_PAGE == 0){
                $('.wcs-comment-container').html("");
            }
            var data = allData['comments'];
            var totalTop = allData['total_topcomments'];
            var hasMore = allData['has_more'];
            var hasExtraMore = allData['has_extra_more'];
            var commentsLeft = allData['comments_left'];
            //just do top comments for now
            $(data).each(function(i, resp){
                var $comment = $($('#template_acomment').html());
                if(resp['active'] == 0){
                    $comment = $($('#template_deleted_comment').html());
                    if(!resp['has_children']){
                        return;
                    }
                }

                $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + resp['parent_id']);
                $comment.attr('data-isadmin', resp['is_admin']);

                $comment.addClass('wcs-comment-item-parent');
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);
                $comment.find('.wcs-user-displayname').html(resp['display_name']);
                $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                if(resp['active'] == 0){
                    $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                }else{
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                }
                if(WCS.USER_ID != resp['user_id']){
                    $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                }
                if(resp.parent_id == 0){
                    $comment.find('.wcs-other-user').remove();
                    $comment.find('.wcs-comment-item-username i').remove();
                }else{
                    $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                    $comment.find('.wcs-other-user').html(resp.parent_username);
                }

                var totalText = "";
                if(resp['upvotes'] > 0){
                    totalText = " (" + resp['upvotes'] + ')';
                }
                var html = "";
                if(resp['upvoted']){
                    html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                    $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                }else{
                    html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                }


                $comment.find('.wcs-like-trigger').html(html);
                $comment.attr('data-id', resp['id']);
                $comment.attr('id',  "comment_" + resp['id']);
                $('.wcs-comment-container').append($comment);

            });
            setTimeout(function(){


                $(data).each(function(i, parentComment){

                    if(parentComment['has_more']){
                        var moreHtml = '<a class="view-prev-replies view-more-subcomment" data-ancestorid="' + parentComment['id'] + '" href="#!">Load previous comments <i class="fas fa-angle-down"></i></a>';
                        var $container = $('#comment_' + parentComment['id']);
                        $container.find('.wcs-reply-container').before(moreHtml);
                    }
                    console.log("parent comment " + parentComment['id']);
                    console.log("has children " + parentComment['children'].length);
                    $(parentComment['children']).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['parent_username'] + "|" + resp['parent_id']);
                        $comment.attr('data-isadmin', resp['is_admin']);

                        $comment.find('.wcs-other-user').html(resp['parent_username']);
                        $comment.find('.wcs-user-displayname').html(resp['display_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                        }
                        $comment.find('.wcs-like-trigger').html(html);

                        $comment.attr('data-id', resp['id']);
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                        }

                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);
                        //alert("adding child to " + '#comment_' + resp['parent_id']);
                        $container.find('.wcs-reply-container').before($comment);
                    });
                });
            }, 500);

            if(hasMore && commentsLeft > 0){
                if(hasExtraMore){
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next 10 out of " + commentsLeft + " comments left ";
                    $('.view-more-topcomment').html(text);
                     $('.view-more-topcomment').show();
                }else{
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next " + commentsLeft + " comments";
                    $('.view-more-topcomment').html(text);
                     $('.view-more-topcomment').show();
                }
            }else{
                //hide button completely
                $('.view-more-topcomment').hide();
            }

        }, error : function(data){

        }
    });

};

WCS.resetFormElement = function(e) {
  e.wrap('<form>').closest('form').get(0).reset();
  e.unwrap();

  // Prevent form submission
};


String.prototype.replaceAll = function(str1, str2, ignore)
{
    return this.replace(new RegExp(str1.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(ignore?"gi":"g")),(typeof(str2)=="string")?str2.replace(/\$/g,"$$$$"):str2);
};

WCS.load_providers = function(exactText)
{
    var zipcode = $("#wcs_zipcode").val();
    var selbox = $("#wcs_provider");
    //$('#dk_container_channel').remove();

    if(zipcode.length > 4){
        WCS.provider_status("Searching providers...");

        $.ajax({
            url:'/ajax_comments/zipsearch/',
            data:{zipcode:zipcode},
            dataType:'json',
            type:'POST',
            success:function(data){
                var locators = data.channels;
                var count = data.count;
                console.log(locators);
                var val;
                if(count){
                    WCS.provider_status("");

                    selbox.empty();
                    selbox.append('<option value="">-- Select from this list --</option>');
                    //$("#provider_input_select").fadeIn();

                    if(exactText){
                        exactText = exactText.replaceAll(" ","_").replaceAll('/','').replaceAll('\/','');
                        exactText = exactText.replaceAll(" ", '').replaceAll('_', '');
                        exactText = exactText.replace(/(?:\r\n|\r|\n)/g, '');
                    }else{
                        exactText = "";
                    }
                    $.each(locators,function(index,channels){
                        if(index){
                            var key = index.replaceAll(" ","_").replaceAll('/','');
                            key = key.replace(" ", '');
                            key = key.replace(/(?:\r\n|\r|\n)/g, '');
                            selbox.append('<optgroup label="'+index+'" id="wcs-'+key+'"></optgroup>');
                            $.each(channels,function(c,channel){
                                if(channel.position.indexOf('-') !== -1){
                                    channel.position = channel.position.split('-')[0];
                                }
                                val = channel.id+'|' + index + '|' +channel.name+'|'+channel.position;
                                val = val.replaceAll(" ","").replaceAll('/','');
                                val = val.replaceAll(" ", '').replaceAll('_', '');
                                val = val.replace(/\//g, '');
                                val = val.replace(/(?:\r\n|\r|\n)/g, '');
                                var displayChannel = channel.broadcaster + " " + channel.position;
                                if(exactText != '' && exactText == val){
                                   $("#wcs-"+key).append('<option data-display="' + displayChannel + '" value="'+val+'" selected>'+channel.name+': '+channel.position+'</option>');
                                   $('#wcs_provider_display').val(displayChannel);
                                }else{
                                   $("#wcs-"+key).append('<option data-display="' + displayChannel + '" value="'+val+'">'+channel.name+': '+channel.position+'</option>');
                                }
                             });
                        }
                    });

                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');
                    }
                } else {
                    WCS.provider_status("");
                    selbox.empty();
                    selbox.append('<option value=""></option>');
                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');
                    }
                }
            },
            error:function(packet){


            }
        });
    }
}

WCS.provider_status = function(){

}

WCS.setupNotificationHandlers = function(isApp){

        var switches = document.querySelectorAll('.custom-switch');
        for(let i = 0; i < switches.length; i++){
            var switchId = switches[i].id;
            //var use_this_class = switches[i].className.split(" ")[2];
            //use_this_class = "." + use_this_class;

            new DG.OnOffSwitchAuto({
                cls: '#' + switchId,
                height: 24,
                trackColorOn:'#F9F9F9',
                trackColorOff:'#222',
                textColorOn: '#222',
                textColorOff: '#222',
                textOn:'On',
                textOff:'Off',
                listener:function(name, checked){
                    var setDisabled = 0;
                    if(!checked){
                        setDisabled = 1;
                    }
                    var activateNotification = function(name){
                        $.ajax({
                            url: '/ajax_comments/manage_notification_settings',
                            data: {
                                 is_disabled: setDisabled,
                                 is_single: false,
                                 name: name,
                                 access_token: WEBVIEW.access_token
                            },
                            type: 'POST',
                            dataType: 'json',
                            success: function(data)
                            {
                                //console.log("refreshing notifications with ");
                                //console.log(data);
                                //WCS.enable_notification_type(data.id, data.name, data.disabled);  
                                console.log("notification refresh setup");

                                WCS.refreshNotifications(data['enable_email_alerts'], 
                                    data['enable_push_alerts'], data['enable_browser_alerts'], 
                                    data['notification_settings']);
                            },
                            error: function(response)
                            {
                                alert("Error - updating notification settings");
                                console.log(response.responseText);
                                console.log(response);
                            }

                        });

                    }
                    if(name == 'enable_email_alerts'){
                        //check email is confirmed... if not show
                        if(WCS.emailConfirmed == 0){
                            WCS.force_action('confirm_email');
                            return false;
                        }
                        activateNotification(name);
                    }else if(name == 'enable_browser_alerts'){
                        if(setDisabled == 0){
                            console.log("requesting permission");
                            if ("Notification" in window) {
                                WCS.requestBrowserNotificationPermission(function(success){
                                    if(!success){
                                        DG.switches['#' + name].uncheck();
                                    }else{
                                        //it worked?
                                        //this turns on browser notifications
                                        activateNotification(name);   
                                    }
                                });
                            }else{
                                WCS.showModal("We're sorry, you're browser doesn't seem to allow browser notifications!", "OK", function(){});
                                DG.switches['#' + name].uncheck();                                        
                            }
                        }else{
                            //this turns off browser notifications
                            activateNotification(name);                                
                        }
                        console.log("done");

                    }else if(name == 'enable_app_alerts'){
                        if(!WEBVIEW.is_webview){
                            WCS.showModal("Please Download the MeTV app on iOS or Android to receive notifications as push alerts!", "OK", function(){});
                            DG.switches['#' + name].uncheck();
                        }else{
                            //alert("name is " + name);
                            //Do some message
                            if(setDisabled == 1){
                                DG.switches['#' + name].uncheck();
                                WEBVIEW.change_push_notifications(false);
                            }else{
                                WEBVIEW.change_push_notifications(true);                                
                            }
                        }
                    }
                }
            });

        }

    $('.manage-notifications').on('change', 'input', function(e){

        var id = $(this).data('id');
        var name = $(this).data('name');
        var val = "no";
        if($(this).is(':checked')){
            val = "yes";
        }

        $.ajax({
            url: '/ajax_comments/manage_notification_settings',
            data: {
                id: id,
                name: name,
                is_single: true,
                value: val,
                access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){

            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });

    });

    $('#noteworthy_send_time').on('change', function(e){

        var id = $(this).data('id');
        var name = $(this).data('name');
        var value = $(this).val();

        $.ajax({
            url: '/ajax_comments/manage_notification_settings',
            data: {
                id: id,
                name: name,
                is_single: true,                
                value: value
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){

            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });

    });
    
    $('.reminders-list').on('click', '.reminder-remove', function(){
         var remindId = $(this).data('remindid');
         var remindType = $(this).data('remindtype');
        $.ajax({
            url: '/ajax_comments/remove_user_reminder',
            data: {
                reminder_id: remindId,
                remind_type: remindType
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){
                if(data['success'] == 'true'){
                    $('#uremind_' + remindId).remove();
                    WCS.showModal("Your reminder has been deleted", "OK", function(){});                    
                }else{
                    WCS.showModal(data['msg'], "OK", function(){});
                }
            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });         
    });
    
    $('.reminders-list').on('change', '.reminder-changetype', function(){
         var remindId = $(this).data('remindid');
         var remindType = $(this).data('remindtype');
         var alertType = $(this).val();
         
        $.ajax({
            url: '/ajax_comments/changetype_user_reminder',
            data: {
                reminder_id: remindId,
                remind_type: remindType,
                alert_type:  alertType
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){
                console.log("change result");
                console.log(data);
                if(data['success'] == 'true'){
                    if(data['needs_phone']){
                       WCS.showModal("Please Enter your Phone Number", "OK", function(val){
                            $.ajax({
                                url: '/ajax_comments/update_user_reminder_phone',
                                data: {
                                    reminder_id: remindId,
                                    remind_type: remindType,
                                    reminder_phone: val
                                },        
                                type: 'POST',
                                dataType: 'json',
                                success: function(data){
                                    
                                },
                                error: function(response){
                                    alert('Error updating settings');
                                    console.log(response.responseText);
                                }
                            });   
                       }, true);
                    }
                }else{
                    WCS.showModal("The reminder could not be updated", "OK", function(){});                                   
                }                
            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });         
    });        
    
}

WCS.is_invalid_user = function(msg, title, desc){

    WCS.DESIRED_ACTION = msg;
    WCS.DESIRED_TITLE = title;
    WCS.DESIRED_DESCRIPTION = desc;
    if(WCS.USER_ID <= 0){
        if(WCS.RETURN_USER){
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }else{
            WCS.loadSidebarTemplate('register')
            WCS.setupProfileForm('register');
        }
        return true;
    }
    if(WCS.termsAccepted == 0){
        WCS.force_action('accept_terms', true);
        return true;
    }else if(WCS.emailConfirmed == 0){
        WCS.force_action('confirm_email');
        return true;
    }

    return false;
}


function loginSuccess(loggeduser, noParse, skipDialogs){

    //need to have
    //id, display_name, profile_image, terms_accepted, email_confirmed

    var userData;
    if(noParse){
        userData = loggeduser;
    }else{
        userData = JSON.parse(loggeduser);
    }
    //console.log("user data");
    //console.log(userData);
    WCS.USER_ID = userData['id'];

    //if just registered shouldn't close the sidebar
    //could be on login page...
    if(WCS.SIDEBAR_PAGE != 'register'){
        WCS.CLOSE_SIDEBAR();
    }
    $('.wcs-post-comment-header .wcs-user-displayname').html(userData['display_name']);
    $('.wcs-post-comment-header .wcs-user-displayname').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-user-settings').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-header .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-header .wcs-avatar').data('userid', WCS.USER_ID);
    $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-login').hide();
    $('.wcs-post-comment-header').show();

    //go through each comment, activate delete if user matches
    $('.wcs-comment-item-reply').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
        if(WCS.USER_ID == userId){
            //console.log("activating delete for subcomment " + this.id);
            $(this).find('.wcs-delete-trigger').show();
        }
    });
    $('.wcs-comment-item-parent').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
        if(WCS.USER_ID == userId){
            //console.log("activating delete for topcomment " + this.id);
            $(this).find('.wcs-delete-trigger').first().show();
        }
    });

    //header login / notifications
    $('#header-login-avatar').attr('src', userData['profile_image']);
    $('#header-login-avatar').data('userid', WCS.USER_ID);    
    $('.logged-in').css('display', 'flex');
    $('.logged-out').css('display', 'none');
    $('.logged-in .user-login').data('userid', WCS.USER_ID);
    $('.logged-in .user-login').html('<a href="javascript:void(0);">' + userData['display_name'] + '</a>');
    
    //should hide the other one
    //    $('.wcs-post-comment-header').show();
    $('.wcs-post-comment-header-loggedout').hide();

    $('.wcs-post-comment-logged-in-btns').show();

    if(userData['new_notifications'] == 1){

        $('.no-notifications').html('');
        $('.no-notifications').append('<a href="/notifications"><span class="notifications"><img class="" src="images/notifications.svg" width="27"></a></span></a>');
        /*
        var notification_type;

        if(userData['notification']['notification_type'] == 'metv_original'){

            notification_type = 'MeTV Original';

        }else if(userData['notification']['notification']['type'] == 'blog' && userData['notification']['notification_type'] == 'favorited_content') {

            notification_type = userData['notification']['notification']['show_name'] + ' Story';

        }else if(userData['notification']['notification']['type'] == 'lists' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Story';

        }else if(userData['notification']['notification']['type'] == 'quizzes' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Quiz';

        }else if(userData['notification']['notification']['type'] == 'video' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Video';
        }

        if(userData['notification']['notification_type'] == 'favorited_content' || userData['notification']['notification_type'] == 'metv_original'){

            $('.popup-notification').html('');
            $('.popup-notification').append(
                '<div class="popup-notification-show">' +
                    '<div class="popup-notification-icon">' +
                        '<a href="/notifications">' +
                            '<p class="popup-notification-headline">' +
                                '<span>' +
                                    '<i class="fas fa-bell"></i>' +
                                '</span>' +
                                'New ' + notification_type +
                            '</p>' +
                            '<p class="popup-notification-timestamp">' +
                                 userData['notification']['notification']['timeago'] +
                            '</p>' +
                        '</a>' +
                    '</div>' +
                '</div>');

            }

            if(userData['notification']['notification_type'] == 'comment_reply'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-text-comment">' +
                                    '<span>' +
                                        '<i class="fas fa-comment"></i>' +
                                    '</span>' +
                                    userData['notification']['notification']['display_name'] + ' responded to your comment' +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                 userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            if(userData['notification']['notification_type'] == 'comment_like'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-text-comment">' +
                                    '<span>' +
                                        '<i class="fas fa-heart"></i>' +
                                    '</span>' +
                                    userData['notification']['notification']['display_name'] + ' liked your comment' +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                    userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            if(userData['notification']['notification_type'] == 'noteworthy_episode'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-headline noteworthy">' +
                                    '<span>' +
                                        '<i class="far fa-star"></i>' +
                                    '</span>' +
                                    'Fan favorite coming up!' +
                                '</p>' +
                                '<p class="popup-notification-headline">' +
                                    userData['notification']['notification']['title'] +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                    userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            var notification = document.getElementsByClassName('popup-notification')[0];

            setTimeout(function(){

                notification.classList.add('show-notification');

            }, 1000);

            setTimeout(function(){

                    notification.classList.add('remove-notification');

                    setTimeout(function(){

                        notification.parentNode.removeChild(notification);

                    }, 1000);

            }, 5000);
            */

    } else {

        $('.no-notifications').html('');
        $('.no-notifications').append('<a href="/notifications"><i class="fas fa-bell"></i></a>');

    }

    WCS.termsAccepted = userData['terms_accepted'];
    WCS.emailConfirmed = userData['email_confirmed'];
    if(!skipDialogs){
        if(WCS.termsAccepted == 0){
            WCS.force_action('accept_terms', true);
            return false;
        }else if(WCS.emailConfirmed == 0){
            WCS.force_action('confirm_email');
            return false;
        }
    }
};

function appUpdatePushNotifications(isActive){
    
    var setDisabled = 0;
    if(!isActive){
        setDisabled = 1;
        DG.switches['#enable_app_alerts'].uncheck(); 
    }else{
        DG.switches['#enable_app_alerts'].check();         
    }
    
    $.ajax({
        url: '/ajax_comments/manage_notification_settings',
        data: {
             is_disabled: setDisabled,
             is_single: false,
             name: 'enable_app_alerts',
             access_token: WEBVIEW.access_token
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            //WCS.enable_notification_type(data.id, data.name, data.disabled);    
            console.log("notification refresh app_update");

            WCS.refreshNotifications(data['enable_email_alerts'], 
                data['enable_push_alerts'], data['enable_browser_alerts'], 
                data['notification_settings']);
        },
        error: function(response)
        {
            alert("Error - updating notification settings");
            console.log(response.responseText);
            console.log(response);
        }

    });        
}


    

</script>

</section>

<script src="/js/wcs-comments.js"></script>

                
<div class="reminder-popout ">
    <div class="reminder-show-title"></div>
    <form class="reminder-form" id="reminder-form" method="POST">
        <label>Set a reminder:</label>
        <div class="form-group">
            <div class="form-select-style">
                <select name="reminder-type" class="reminder-type" id="reminder-type">
                    <option value="episode">Just this episode</option>
                                        
                </select>
            </div>
        </div>
        <label>Alert me by:</label>
        <div class="form-group">
            <div class="form-select-style">
                <select name="reminder-type-alert" class="reminder-type-alert" id="reminder-type-alert">
                                            <option value="text">Text message</option>
                        <!-- <option value="text">Browser Alert</option> -->
                                        
                    <option value="email">Email</option>
                </select>
            </div>
        </div>
        <div class="form-group reminder-phone-container">
            <input id="reminder-type-text" type="text" name="alertBy" placeholder="Enter your phone number">
        </div>
        <span class="reminder-timezone-info">You are setting a reminder for the Central time zone. If this is not your location, <a href="/wheretowatch/">click here</a>.</span>                    
        <input class="reminder-save btn-primary" type="submit" name="submit" value="SAVE">
        <input class="reminder-alert btn-primary" type="hidden" id="reminder-schedule_id">
        <input class="reminder-alert btn-primary" type="hidden" id="reminder-show_id">
        <input class="reminder-alert btn-primary" type="hidden" id="reminder-house_num">
        <a class="reminder-cancel btn-primary">CANCEL</a>
    </form>
</div>

        <script src="/js/reminders.js?v9.16"></script>
                <script src="https://unpkg.com/popper.js@1.15.0/dist/umd/popper.min.js"></script>
                <!-- moving click handler for metv-music links here from script.js because links are dependent on market now -->
        <script>
    // Launch music player
        $(document).ready(function(){
            $('.metvmusic-listen-btn, .metvmusic-listen-btn-side, .metvmusic-banner-btn,.metvmusic-widget').on('click', function(){
                                    window.open('/metvmusic/','metvmusic','resizable,height=615,width=756');
                            });
        });
        </script>

        <!-- Quantcast Tag -->
        <script type="text/javascript">
        var _qevents = _qevents || [];

        (function() {
        var elem = document.createElement('script');
        elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
        elem.async = true;
        elem.type = "text/javascript";
        var scpt = document.getElementsByTagName('script')[0];
        scpt.parentNode.insertBefore(elem, scpt);
        })();

        _qevents.push({
        qacct:"p-Cq5uvh8D_c6jw"
        });
        </script>

                <noscript>
        <div style="display:none;">
        <img src="//pixel.quantserve.com/pixel/p-Cq5uvh8D_c6jw.gif" border="0" height="1" width="1" alt="Quantcast"/>
        </div>
        </noscript>
        <!-- End Quantcast tag -->


        <!-- QST ADS / NextMillennium -->
                
        
            
        <script async="" src="https://powerad.ai/script.js"></script>
        
                
        <!-- END OF QST ADS -->
                        <!-- smart banner -->
        <script src="/js/smart-app-banner.js"></script>
        <script type="text/javascript">
          new SmartBanner({
              daysHidden: 15,   // days to hide banner after close button is clicked (defaults to 15)
              daysReminder: 90, // days to hide banner after "VIEW" button is clicked (defaults to 90)
              appStoreLanguage: 'us', // language code for the App Store (defaults to user's browser language)
              title: 'MeTV',
              author: 'Weigel Broadcasting Co.',
              button: 'VIEW',
              store: {
                  ios: 'On the App Store',
                  android: 'In Google Play'
              },
              price: {
                  ios: 'FREE',
                  android: 'FREE'
              }
          });
          //use... force: 'ios' as option to force ios
        </script>
        
                    


</body></html>