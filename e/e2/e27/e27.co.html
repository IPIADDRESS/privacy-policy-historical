<!--The following is the downloaded HTML source of the e27.co privacy policy that was archived on 2017-06-07.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20170607002646id_/https%3A//e27.co/privacy) for the most accurate reproduction.-->

<!DOCTYPE html><html lang="en"><!--<![endif]--><!-- BEGIN HEAD --><head>
	<base href="https://e27.co/">
	<meta charset="utf-8">
<script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-NTCXTV"></script><script async="" src="//api.ematicsolutions.com/v1/ematic.min.js"></script><script async="" src="https://www.google-analytics.com/analytics.js"></script><script>
/***********************************************************
*                                                          *
*                                                          *
* WE SAW WHAT YOU DID THERE! :) EMAIL US AT TECH@E27.CO    *
*                                                          *
*                                                          *
***********************************************************/
</script>
<script src="https://e27.co/dist/js/GlobalJS.js?v=1496795207" type="text/javascript"></script>
	<script src="https://e27.co/dist/js/header/header-580273afbe.js" type="text/javascript"></script>
	<script>
GlobalJS.isMobile = "";
GlobalJS.UserId = "";
GlobalJS.init("https://e27.co/");
</script>
<title>e27 - Connecting you to Asia's Startup Ecosystem</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#F9F9F9">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#F9F9F9">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#F9F9F9">
<meta property="fb:app_id" content="287292464740886">
<meta property="og:image" content="https://e27.co/e27_og.png">
<meta property="og:image:width" content="690">
<meta property="og:image:height" content="390">
<meta property="og:description" content="e27 is Asias largest Tech media platform - covering emerging and disruptive businesses across the region. e27 also organizes world-class events like Echelon.">
<meta property="og:title" content="e27 - Connecting you to Asia's Startup Ecosystem">
<meta content="e27 is Asias largest Tech media platform - covering emerging and disruptive businesses across the region. e27 also organizes world-class events like Echelon." name="description">

<link rel="shortcut icon" href="https://e27.co/favicon.png">
	<link href="https://e27.co/dist/css/app-438215d0a0.css" rel="stylesheet" type="text/css">
	<link href="https://e27.co/dist/css/about-style.css?v=1.0" rel="stylesheet">
		<link href="https://e27.co/dist/css/jeangrey-styles.css?v=1496795207" rel="stylesheet" type="text/css">
	<link href="https://e27.co/dist/css/jeangrey-header.css?v=1496795207" rel="stylesheet" type="text/css">
	<link href="https://e27.co/dist/css/jeangrey-overide.css?v=1496795207" rel="stylesheet" type="text/css">
	<!-- APPLE TOUCH ICONS -->
<link rel="apple-touch-icon" href="https://e27.co/assets/icons/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="57x57" href="https://e27.co/assets/icons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://e27.co/assets/icons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://e27.co/assets/icons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://e27.co/assets/icons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://e27.co/assets/icons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://e27.co/assets/icons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://e27.co/assets/icons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://e27.co/assets/icons/apple-touch-icon-180x180.png">
<!-- END APPLE TOUCH ICONS -->
	<script>
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-230825-5', 'auto');
	ga('send', 'pageview');
		</script>
	<!-- <script async src="https://cdn.onthe.io/io.js/fPqK1CHLXuT5"></script> -->
<meta property="fb:pages" content="7137316668">
<script>
//Ematic js
var EmaticJS = {};
EmaticJS.subsEmail = "";
EmaticJS.ematicByeIQDisplayed = false;
EmaticJS.init = function(){
	(function(i,s,o,g,r,a,m){i['EmaticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//api.ematicsolutions.com/v1/ematic.min.js','ematics');

	var ematicApikey = "def2ca8e070411e6a0250242ac110025-sg1";
	var opt = {
	email: "", // **If user is logged in, assign the email ID here.**
	country_iso: "SG",
	currency_iso: "SGD",
	language_iso: "EN"
	};

	opt.events = {
		onAfterSubscribe: function(email, error, errorMessage, exists) {
			EmaticJS.subsEmail = email;
			$("#ematic_closeExitIntentOverlay_1_xl_0_0").click(function(){
				//alert(EmaticJS.subsEmail);
				//showSignupModalDoc(10);
				$(".openSignUpModal").trigger("click");
				$(".modal_email").each(function(){
					$(this).val(EmaticJS.subsEmail);
				});
			});
		}
	};
	 //initialize
	ematics("create", ematicApikey, opt);
}
EmaticJS.checkEmaticOverlay = function(){
	var display = $(".ematicOverlayContent").css("display");
	if(display=="block"){
		EmaticJS.ematicByeIQDisplayed = true;
		$("#signInModal").modal('hide');
		$("#signUpModal").modal('hide');
	}
	else{
		setTimeout(function(){
			EmaticJS.checkEmaticOverlay();
		}, 100);
	}
}
	EmaticJS.init();
	EmaticJS.checkEmaticOverlay();
	</script>

<!-- Hotjar Tracking Code for e27.co -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:465904,hjsv:5};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script><script async="" src="//static.hotjar.com/c/hotjar-465904.js?sv=5"></script>

<script type="text/javascript">/*<![CDATA[*/
        (function(u, t, c, s, r)
          { !t[c] && (t[c] = { projectId: 'cfe3bf5df17872f70f87c4fa30a279ad'}) && (r = u.createElement(s)) && (r.src = 'https://unamo.net/unamo.js') && (u.head.appendChild(r)); })
        (document, window, 'Unamo Session Recording', 'script');
       /*]]>*/</script><script src="https://unamo.net/unamo.js"></script>
	   
<!-- Medium Editor -->
<script src="//cdn.jsdelivr.net/medium-editor/latest/js/medium-editor.min.js"></script>

<!-- Sumo -->
<script src="//load.sumome.com/" data-sumo-site-id="0bc37c468538baa1914c62235b4e59a2b77d1ace1ed4110e6993eddd97a5e943" async="async"></script>


</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<!-- DOC: Apply "page-header-menu-fixed" class to set the mega menu fixed  -->
<!-- DOC: Apply "page-header-top-fixed" class to set the top menu fixed  -->
<body class="drawer drawer--left">
<iframe id="statssaver" style="display:none"></iframe>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NTCXTV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTCXTV');</script>
<!-- End Google Tag Manager -->
<script>
/* Calculate width of text in message balloon */
$.fn.textWidth = function(){
		var _t = jQuery(this);
		var html_org = _t.html();
		if(_t[0].nodeName=='INPUT'){
				html_org = _t.val();
		}
		var html_calcS = '' + html_org + '';
		$('body').append(html_calcS);
		var _lastspan = jQuery('span').last();
		//console.log(_lastspan, html_calc);
		_lastspan.css({
				'font-size' : _t.css('font-size')
				,'font-family' : _t.css('font-family')
		})
		var width =_lastspan.width() + 5;
		//_t.html(html_org);
		_lastspan.remove();
		return width;
};

/** Function that prevent the body scrollbar in scrolling while scrolling inside a scrollable div **/
$.fn.scrollGuard = function() {
		return this.on( 'wheel', function ( e ) {
				var $this = $(this);
				if (e.originalEvent.deltaY < 0) {
						/* scrolling up */
						return ($this.scrollTop() > 0);
				} else {
						/* scrolling down */
						return ($this.scrollTop() + $this.innerHeight() < $this[0].scrollHeight);
				}
		});
};


// For chat popup
function resize_conversation_box(obj){
		// Sum of chatbox header + chatbox user receiver textbox + chatbox message box textarea
		var total = parseInt($(obj).parents(".chat-open-user-box").find(".chat-open-user-box-header").innerHeight()) + parseInt($(obj).parents(".chat-open-user-box").find(".chat-conversation-receiver").outerHeight(true)) + parseInt($(obj).parents(".chat-open-user-box").find(".conversation-message-box textarea").innerHeight());

		// Height of the chat box popup
		var box = parseInt($(obj).parents(".chat-open-user-box").innerHeight());

		var conversation = box - total;

		$(obj).parents(".chat-open-user-box").find(".conversation-list").attr("style","height: "+conversation+ "px !important");

		$(obj).parents(".chat-open-user-box").find('.conversation-list').animate({ scrollTop: $('.conversation-list')[0].scrollHeight },100);
}

// For chat popup
function addUsersInChatPopup(obj){
		$(obj).parents(".chat-open-user-box").find(".chat-conversation-receiver").removeClass("hide");
		resize_conversation_box($(obj));
		return false;
}




// Textarea for message in mobile (message page)
$("body").on("keypress",".txtChatMessageMobile",function(e){
		$(this).attr("style","height:auto; height: "+$(this)[0].scrollHeight+"px");
});

// Textarea for message in mobile (message page)
$("body").on("keyup",".txtChatMessageMobile",function(e){
		if($(this).val().length == "0"){
				$(this).removeAttr("style");
				resize_conversation_box_in_mobile();
		}

		resize_conversation_box_in_mobile();
});

// Chat message textbox in message page view (Desktop)
$("body").on("keypress",".txtChatMessageInPage",function(e){
		if(e.which == 13) {
				$.ajax({
						context: this,
						url: $('base').attr('href')+'chat/send_chat_conversation',
						type: 'POST',
						data: { message: $(this).val() },
						dataType: 'json',
						success: function(json){
								$(".chat-user-conversation").append(json.html);
								$('.chat-user-conversation').scrollTop($('.chat-user-conversation')[0].scrollHeight);

								$(".chat-write-message-header").remove();
								$(".chat-user-messages-header").removeClass("hide");

								height_chat_conversation_display();
						}
				});

				$(this).val('');
				return false;
		}
});


function user_format(record) {
	if(record.logo){
		str = "<table style='margin-top:2px;' cellspcaing=0 cellpadding=0><tr><td><img src='"+record.logo+"' style='width:32px; height:32px; vertical-align:top; margin:3px; margin-right:6px;'></td>"
		str += "<td style='vertical-align:middle'><div><a href='javascript:;'>"+record.text+"</a></div>";
		str += "</td></tr></table>";
	}
	return str;
}

// Function in autocomplete searching of user in message page(desktop view)
function search_user_receiver_in_message_page(obj){
		$(obj).select2({
			 minimumInputLength: 1,
			 tokenSeparators: [","],
			 multiple: true,
			 dropdownCssClass: "chat-user-autocomplete",
			 formatResult: user_format,
			 allowClear: true,
			 ajax: {
					url: 'http://e27.co/_html/user.json',
					dataType: "json",
					data: function(term, page) {
						return {
							 q: term
						};
					},
					results: function(data, page) {
						return {
							 results: data
						};
					}
			 },
			 initSelection: function(element, callback) {

			 },
			 escapeMarkup: function(m) {
						return m;
				}
		})
		.on("change",function(e){
				height_chat_conversation_display($(obj));
		});

		$(obj).on("select2-focus", function(e) { global_nomatches_text = "No matches found."; });
		$(obj).on("select2-focus", function(e) { global_search_text = "Search user"; });
}

// Function in autocomplete searching of user in message page(mobile view)
function search_user_receiver_in_message_page_mobile(obj){
		$(obj).select2({
			 minimumInputLength: 1,
			 tokenSeparators: [","],
			 multiple: true,
			 dropdownCssClass: "chat-user-autocomplete",
			 formatResult: user_format,
			 allowClear: true,
			 ajax: {
					url: 'http://e27.co/_html/user.json',
					dataType: "json",
					data: function(term, page) {
						return {
							 q: term
						};
					},
					results: function(data, page) {
						return {
							 results: data
						};
					}
			 },
			 initSelection: function(element, callback) {

			 },
			 escapeMarkup: function(m) {
						return m;
				}
		})
		.on("change",function(e){
				resize_conversation_box_in_mobile($(obj));
		});

		$(obj).on("select2-focus", function(e) { global_nomatches_text = "No matches found."; });
		$(obj).on("select2-focus", function(e) { global_search_text = "Search user"; });
}

/** Function in Resizing of chat conversation in message page (mobile view) **/
function resize_conversation_box_in_mobile(){

		if($(".chat-write-message-header-mobile").hasClass("hide") > 0){
				var height_of_message_header = $(".chat-existing-message-header-mobile").outerHeight(true);
				var height_of_textbox_receiver = 0;
		}
		else {
				var height_of_message_header = $(".chat-new-message-header-mobile").outerHeight(true);
				var height_of_textbox_receiver = parseInt($(".chat-write-message-header-mobile").outerHeight(true));
		}

		var height_of_message_box = $(".chat-message-box-mobile").outerHeight(true);

		var height_of_chatbox = $("#chat-message-full-view").outerHeight(true);

		var height_of_conversation = height_of_chatbox - (parseInt(height_of_message_header) + parseInt(height_of_textbox_receiver) + parseInt(height_of_message_box));
		$(".chat-user-conversation").attr("style","height: "+height_of_conversation+ "px !important");
}

/** Function in Resizing edit group cat in message page (mobile view) **/
function resize_edit_group_chat_box_in_mobile(){

		var height_of_message_header = $(".chat-existing-message-header-mobile").outerHeight(true);
		var height_of_group_chat_name = $(".chat-edit-group-chat-mobile").outerHeight(true);

		var height_of_chatbox = $("#chat-message-full-view").outerHeight(true);

		var height_of_conversation = height_of_chatbox - (parseInt(height_of_message_header) + parseInt(height_of_group_chat_name));
		$(".chat-user-conversation").attr("style","height: "+height_of_conversation+ "px !important");
}

/** Function in Resizing of chat conversation in message page (desktop view) **/
function height_chat_conversation_display(){

		var height_of_chatbox = $("#chat-message-full-view").outerHeight(true);


		if($(".chat-user-messages").find(".chat-write-message-header").length > 0){
				var height_of_header = $(".chat-write-message-header").outerHeight(true);
		}
		else {
				var height_of_header = $(".chat-user-messages-header").outerHeight(true);
		}

		var height_of_message_box = $(".chat-conversation-message-box").outerHeight(true);

		var height_of_conversation = parseInt(height_of_chatbox) - (parseInt(height_of_header) + parseInt(height_of_message_box));

		console.log("CHATBOX: "+ height_of_chatbox);
		console.log("HEADER: "+ height_of_header);
		console.log("BOX: " + height_of_message_box);

		// $(".chat-user-conversation").css("height",height_of_conversation+"px");
		$(".conversation-list").css("height",height_of_conversation+"px");
}

// Function in displaying the convesation between two users (Message Page)
function btnNewMessage(obj){
		$.ajax({
				url: $('base').attr('href') + "chat/display_write_new_message",
				type: "POST",
				dataType: 'json',
				success: function(json){
						$(".chat-user-messages").html('');
						$(".chat-user-messages").html(json.html);

						$(".viewChatConversation").removeClass("active");

						height_chat_conversation_display($(obj));

						// Activate select2 autocomplete for new message
						search_user_receiver_in_message_page($(".txtMessageReceiverInPage"));

						// Prevent scrolling of parent
						$(".trapScroll").scrollGuard();

						$('.chat-user-conversation').scrollTop($('.chat-user-conversation')[0].scrollHeight);
				}
		});
}


// Send in message in mobile view (message page)
function sendMessageInMobile() {
		var receiver_value_obj = $(".txtMessageReceiverInMobile").select2('data');
		var receiver_value_array = [];
		$.each(receiver_value_obj,function(index,value){
				receiver_value_array.push(value.text);
		});
		var receiver_value_string = receiver_value_array.join(",");
		$.ajax({
			url: $('base').attr('href')+'chat/send_chat_conversation',
			type: 'POST',
			data: {
				message: $(".txtChatMessageMobile").val()
			},
			dataType: 'json',
			success: function(json){
					$(".chat-user-conversation").append(json.html);
					$(".chat-user-conversation").scrollTop($('.chat-user-conversation')[0].scrollHeight);
					$(".trapScroll").scrollGuard();


					$(".chat-write-message-header-mobile").addClass("hide");
					$(".chat-new-message-header-mobile").addClass("hide");
					$(".chat-existing-message-header-mobile").removeClass("hide");
					$(".chat-existing-message-header-mobile h4").text(receiver_value_string);

					$(".txtChatMessageMobile").removeAttr("style");
					resize_conversation_box_in_mobile();
			}
		});
		$(".txtChatMessageMobile").val('');
		$(".txtMessageReceiverInMobile").val('');
}


/************************************** Magneto Chat Object ******************************************/

var MagnetoChat = {};

/* properties */

MagnetoChat.chat_index = []; //chat index used for quick search for people
MagnetoChat.widget_id = ""; //the id of the chat widget
MagnetoChat.currentCanvas; //dom object current canvas where the user is sending message

MagnetoChat.baseURI = "https://chat.e27.co/index_beta.php/chat/"; //with trailing slash
//MagnetoChat.baseURI = "index_beta.php/chat/"; //with trailing slash

MagnetoChat.hash = ""; //the hash to avoid bots
MagnetoChat.stopFetcher = false; //to stop fetcher
MagnetoChat.fetcherAjax; //the ajax query
MagnetoChat.fetcherTimeout; //the ajax query
MagnetoChat.fullID = "";
MagnetoChat.afterLoadFunctions = [];
MagnetoChat.chatInitiated = false;
MagnetoChat.WebSocketServer = "";
MagnetoChat.WebSocketConnected = false;

//chat list class: chat-conv
//chat list popup class: chat-conv-popup
//chat canvas class: chat-conv-canvas
//chat txtarea class: chat-conv-popup .txtChatMessage

/* methods */

MagnetoChat.hrefify = function(html){
	var pieces = html.split(/\s+/g);
	for(i=0; i<pieces.length; i++){
		var piece = pieces[i].toLowerCase();
		if(piece.indexOf("http://")>=0||piece.indexOf("https://")>=0){
			html = html.replace(pieces[i], "<a href='"+pieces[i]+"' target='_blank' data-fetch='false'>"+pieces[i]+"</a>");
		}
	}
	return html;
}
MagnetoChat.hrefify("hello world anas http://google.com");
//send message
MagnetoChat.sendMessage = function(id, canvas, convid, toids, message, callback){	
	var last_bubble = canvas.find(".msgfromserver").last();
	var lastmessageid = last_bubble.attr("data-messageid");
	if(id.indexOf("-full")<0){
		var send_bubble = $("#"+MagnetoChat.widget_id+" .clone-send-bubble").clone();
		send_bubble.removeClass("hide");
	}
	else{
		var date = new Date();
		var monthi = date.getMonth()*1;
		var day = date.getDate();
		var year = date.getFullYear();
		var monthstr = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
		var hour = date.getHours()
		var min = date.getMinutes();
		var a = "AM";
		if(hour>=12){
			a = "PM";
		}
		if(hour%12==0){
			hour  = "12";
		}
		else{
			hour = hour%12;
		}
		if(min<10){
			min = "0"+min;
		}
		var send_bubble = $("#chat-in-full .clone-send-bubble").clone();
		send_bubble.removeClass("hide");
		send_bubble.find(".date").html(monthstr[monthi]+" "+day+", "+year+" "+hour+":"+min+a);
	}
	var sendbubbleid = "sendbubble-"+MagnetoChat.randomID();
	var callbackobj = {};
	callbackobj['canvas'] = canvas;
	callbackobj['sendbubbleid'] = sendbubbleid;
	send_bubble.removeClass("clone-send-bubble");
	send_bubble.addClass(sendbubbleid);
	send_bubble.addClass("msgfromlocal");
	var msgstr = "";
	var isfile = false;
	if(typeof message == "object"){
		isfile = true;
		//if sending a file
		if(message['type']=="file"){
			var fileobjid = message['fileobjid']
			msgstr = message['filename'];
			var fileobj = $("#"+fileobjid);
			fileobj.attr("name", "file");
			var fileobjform = $("#form-"+fileobjid);
			//add the extra data in the form
			fileobjform.find(".extradata").remove();
			var data = {
				"hash": MagnetoChat.hash,
				"id": id,
				"convid": convid,
				"toids": toids,
				"message": msgstr,
				"lastmessageid": lastmessageid
			};
			for(key in data){
				val = data[key];
				fileobjform.prepend($("<input type='hidden'>").addClass("extradata").attr("name", key).val(val));
			}
			//create an iframe
			var iframename = "chat-iframe-"+MagnetoChat.randomID();
			var iframe = $("<iframe class='hide'></iframe>");
			iframe.attr("name", iframename);
			//append the iframe
			fileobjform.attr("target", iframename);
			fileobjform.before(iframe);
			iframe.load(function(){
				var content = $(this).contents();
				var jsonstr = content.text();
				//the workaround is to get the json by parsing the return see controllers/chat.php sendMessage function
				jsonr = jsonstr.split("{\"filepath");
				jsonstr = "{\"filepath"+jsonr[1];
				try{
					var json = JSON.parse(jsonstr);
					callbackobj['json'] = json;
				}
				catch(e){
					callbackobj['failed'] = true;
				}
				$(this).remove();
				callback(callbackobj);
			})
			// fileobjform.attr("action", MagnetoChat.baseURI+'send_message');
			fileobjform.attr("action", MagnetoChat.baseURI+'send_message?site_user_id=' + '');
			//if file, submit the form
			fileobjform.submit();
		}
		msg = $('<div />').text(msgstr).html();
	}
	else{
		//if sending a normal text
		msgstr = message;
		msg = $('<div />').text(msgstr).html();
		msg = MagnetoChat.hrefify(msg);
	}

	msg = msg.replace(new RegExp("\n", 'g'), "<br />");
	send_bubble.find(".msg").html(msg);
	canvas.animate({ scrollTop: canvas.prop('scrollHeight') },100);
	canvas.append(send_bubble);
	//sent placeholder
	canvas.find(".mymsgstatus").remove();
	var sent = $('<div class="mymsgstatus seen other-person sent"><small>&nbsp;</small></div>');
	send_bubble.after(sent);
	var mymsgstatus = canvas.find(".mymsgstatus").find("small");
	var uniqueclass = "mymsgstatus-"+MagnetoChat.randomID();
	callbackobj['uniqueclass'] = uniqueclass;
	mymsgstatus.addClass(uniqueclass);
	if(isfile){
		mymsgstatus.html("Sending file...");
	}
	//if sending text only
	if(!isfile){
		$.ajax({
			context: this,
			// url: MagnetoChat.baseURI+'send_message',
			url: MagnetoChat.baseURI+'send_message?site_user_id=' + '',
			xhrFields: { 
				withCredentials: false 
			},
			type: 'POST',
			data: {
				"hash": MagnetoChat.hash,
				"convid": convid,
				"toids": toids,
				"message": msgstr,
				"lastmessageid": lastmessageid
			},
			dataType: 'json',
			success: function(json){
				try{
					var jsonstr = JSON.stringify(json);
					callbackobj['json'] = json;
				}
				catch(e){
					callbackobj['failed'] = true;
				}
				callback(callbackobj);
			},
			error: function (xhr, ajaxOptions, thrownError) {
				callbackobj['failed'] = true;
				callback(callbackobj);
			}
		});
	}
};

//get messages
MagnetoChat.getPreviousMessages = function (id, convid, toids, refmessageid, callback){
	setTimeout(function(){
		$.ajax({
			url: MagnetoChat.baseURI+'get_previous_messages?site_user_id=' + '',
			// url: MagnetoChat.baseURI+'get_previous_messages',
			xhrFields: { 
				withCredentials: false 
			},
			type: 'POST',
			data: {
				"id":id,
				"hash": MagnetoChat.hash,
				"convid":convid,
				"toids":toids,
				"refmessageid":refmessageid
			},
			dataType: 'json',
			success: function(json){
				var obj = {};
				obj['id'] = id;
				if(!MagnetoChat.isset(convid)){
					if(MagnetoChat.isset(json["convid"])){
						convid = json["convid"];
					}
				}
				obj['convid'] = convid;
				obj['toids'] = toids;
				obj['refmessageid'] = refmessageid;
				obj['json'] = json;
				if(MagnetoChat.isset(callback)){
					callback(obj);
				}
			}
		});
	}, 10);
}

//the polling fetcher
MagnetoChat.fetcher = function(fromwebsocket){
	if(MagnetoChat.WebSocketConnected==true && !GlobalJS.isset(fromwebsocket)){
		return false;
	}
	if(parseInt(GlobalJS.UserId)<=0){
		return false;
	}
	if(MagnetoChat.stopFetcher){
		MagnetoChat.fetcherStopped = true;
		return false;
	}
	//chat list class: chat-conv
	//chat list popup class: chat-conv-popup
	//chat canvas class: chat-conv-canvas
	var listobjs = $(".chat-conv");
	var chat_popups = $(".chat-conv-popup");
	var canvases = $(".chat-conv-canvas");
	var id_arr = [];
	var convid_arr = [];
	var toids_arr = [];
	var lastmessageid_arr = [];
	var openedcanvas_arr = [];
	listobjs.each(function(){
		var id = $(this).attr("data-id");
		var convid = $(this).attr("data-convid");
		var toids = $(this).attr("data-toids");
		var canvas = $("#chat-conv-canvas-"+id);
		var chat_popup = $("#chat-conv-popup-"+id);
		if(!MagnetoChat.isset(convid)){
			convid = "";
		}
		if(!MagnetoChat.isset(toids)){
			toids = "";
		}
		if(MagnetoChat.isset(toids)){ //at the very least it must have toids
			var lastmessageid = "";
			var openedcanvas = "";
			if(MagnetoChat.isset(canvas.attr("data-id"))){
				lastmessageid = canvas.find(".msgfromserver").last().attr("data-messageid");
				if(!chat_popup.hasClass("chat-minimise")){
					openedcanvas = 1;
				}
			}
			var data = {};
			if(
				MagnetoChat.isset(lastmessageid) ||
				MagnetoChat.isset(openedcanvas)
			){
				id_arr.push(id);
				convid_arr.push(convid);
				toids_arr.push(toids);
				lastmessageid_arr.push(lastmessageid);
				openedcanvas_arr.push(openedcanvas);
			}
		}
	});
	var ajaxdata = {
			/*
			//just to consider ini the future
			"i" : id_arr.join("|"),
			"c" : convid_arr.join("|"),
			"t" : toids_arr.join("|"),
			"l" : lastmessageid_arr.join("|"),
			"o" : openedcanvas_arr.join("|")
			*/
			"i" : id_arr,
			"c" : convid_arr,
			"t" : toids_arr,
			"l" : lastmessageid_arr,
			"o" : openedcanvas_arr
		};
	MagnetoChat.fetcherAjax = $.ajax({
		// url: MagnetoChat.baseURI+'fetcher',
		url: MagnetoChat.baseURI+'fetcher?site_user_id=' + '',
		xhrFields: { 
			withCredentials: false 
		},
		type: 'POST',
		data: ajaxdata,
		//dataType: 'json',
		success: function(retjson){
			var json = retjson['json'];
			var onlineids = retjson['onlineids'];
			var newconvids = retjson['newconvids']; //if there are new conv ids
			var totalunseen = 0;
			//set all to offline
			//$(".chat-open-list").find(".chat-user-status").each(function(){
			//	$(this).find("span").removeClass("offline").removeClass("online").addClass("offline");
			//});
			//mark all for offline
			$(".chat-conv").removeClass("off").addClass("off");
			//onlines
			for(x in onlineids){
				var id = onlineids[x];
				var listobj = $("#chat-conv-"+id);
				var listobjfull = $("#chat-conv-"+id+"-full");
				MagnetoChat.setOnlineStatus(listobj, "on");
				MagnetoChat.setOnlineStatus(listobjfull, "on");
			}

			for(x in json){
				var row = json[x];
				//chat list class: chat-conv
				//chat list popup class: chat-conv-popup
				//chat canvas class: chat-conv-canvas
				//chat txtarea class: chat-conv-popup .txtChatMessage
				var listobj = $("#chat-conv-"+row['id']);
				var listobjfull = $("#chat-conv-"+row['id']+"-full");
				var canvas = $("#chat-conv-canvas-"+row['id']);
				var chat_popup = $("#chat-conv-popup-"+row['id']);
				var txtarea = chat_popup.find(".txtChatMessage");
				//set the new data-convid of the 4 elems
				MagnetoChat.setDataValue(listobj, chat_popup, canvas, txtarea, "data-convid", row["convid"]);
				listobjfull.attr("data-convid", row["convid"]);

				//seenmessageid for PMs
				if(MagnetoChat.isset(row['seenmessageid'])){
					var msgbubble = canvas.find(".msg-bubble-"+row['seenmessageid']);
					if(!MagnetoChat.isset(msgbubble.attr("data-seen"))){

						var mymsgstatus = canvas.find(".mymsgstatus").find("small."+"mymsgstatus-"+row['seenmessageid']);
						mymsgstatus.html("Seen");
						msgbubble.attr("data-seen", true);
						MagnetoChat.scrollToBottom(canvas);
					}
				}
				//unseen count on list
				if(MagnetoChat.isset(row['unseencount'])){
					//update the list object to put the unseen count
					totalunseen += parseInt(row['unseencount']);
					listobj.find(".unseencount").html(row['unseencount']);
					listobj.find(".unseencount").show();
					listobjfull.find(".unseencount").html(row['unseencount']);
					listobjfull.find(".unseencount").show();
					if(MagnetoChat.isset(chat_popup.attr("data-id"))){
						if(chat_popup.hasClass("chat-minimise")){
							//chat_popup.removeClass("chat-minimise")
							//listobj.find(".unseencount").hide();
						}
					}

				}
				else{
					listobj.find(".unseencount").hide();
					listobjfull.find(".unseencount").hide();
				}
				//if has new message
				if(MagnetoChat.isset(row['html'])){
					//need to check if elements in the html is not yet in the canvas
					var appended = MagnetoChat.cleanHTML(canvas, row['html']);
					if(appended>0){
						canvas.find(".mymsgstatus").remove();
					}
					//canvas.append(htmlclean);
					MagnetoChat.scrollToBottom(canvas);
					//if you are receiving messages it means the person youre talking to is online
					MagnetoChat.setOnlineStatus(listobj, "on");
					MagnetoChat.setOnlineStatus(listobjfull, "on");
					//websocket
					setTimeout(function(){
						try{
							//to tell others that the message was seen
							var wsmsg = {};
							wsmsg["command"] = "fetch";
							wsmsg["convid"] = row["convid"];
							var wsmsgjson = JSON.stringify(wsmsg);
							MagnetoChat.WebSocketServer.send( 'message', wsmsgjson );
						}
						catch(e){
						}
					}, 500);
				}
				//online on list
				else if(MagnetoChat.isset(row['online'])){
					MagnetoChat.setOnlineStatus(listobj, "on");
					MagnetoChat.setOnlineStatus(listobjfull, "on");
				}
			}
			//set marked "off" to offline
			$(".chat-conv").each(function(){
				var listobj = $(this);
				if(listobj.hasClass("off")){
					MagnetoChat.setOnlineStatus(listobj, "off");
				}
			})
			//get/set title
			MagnetoChat.setPageTitleCount(totalunseen);

			//if there are new convs update list
			if(MagnetoChat.isset(newconvids)&&newconvids.length>0){
				MagnetoChat.fillChatList();
			}
			else{
				clearTimeout(MagnetoChat.fetcherTimeout);
				MagnetoChat.fetcherTimeout = setTimeout(function(){
					MagnetoChat.fetcher();
				}, 5000);
			}
		},
		error: function (xhr, ajaxOptions, thrownError) {
			clearTimeout(MagnetoChat.fetcherTimeout);
			MagnetoChat.fetcherTimeout = setTimeout(function(){
				MagnetoChat.fetcher();
			}, 5000);
		}
	});
}
//this is to make sure that the new messages are placed properly in the canvas
MagnetoChat.cleanHTML = function(canvas, html){
	var htmlobj = $("<div style='display:none; background:green'>"+html+"</html>");
	//get message bubbles
	//this is to make sure that the new messages are placed properly in the canvas
	var msgbubbleids  = [];
	var appended = 0;
	canvas.find(".msgfromserver").each(function(){
		msgbubbleids.push($(this).attr("data-messageid"));
	});
	canvas.append(htmlobj);
	htmlobj.find(".msgfromserver").each(function(){
		var messageid = $(this).attr("data-messageid");
		//alert(canvas.find(".msg-bubble-"+messageid).length);
		//if 2 or more already in the canvas
		if(canvas.find(".msg-bubble-"+messageid).length >= 2){
			htmlobj.find(".msg-bubble-"+messageid).remove();
		}
		else if(msgbubbleids.length){
			var aftermeid = 0;
			for(i=msgbubbleids.length-1; i>=0; i--){
				//alert((messageid*1)+">"+(msgbubbleids[i]*1))
				if((messageid*1)>(msgbubbleids[i]*1)){
					aftermeid = msgbubbleids[i];
					break;
				}
			}
			//only insert the message bubble after the proper id
			canvas.find(".msg-bubble-"+aftermeid).after($(this));
			msgbubbleids.push(messageid);
			appended++;
		}
	});
	var htmlclean = htmlobj.html()
	htmlobj.remove();
	if(appended<=0){
		canvas.append(htmlclean);
	}
	return appended;

}

//Utility functions

//generate a random id
MagnetoChat.randomID = function(){
	 var id = "id-"+Math.ceil(Math.random() * 100000000);
	 return id;
}

//check if variable is set
MagnetoChat.isset = function(v, strict){
	//not strict
	if(typeof strict == "undefined" || strict==""){
		if(typeof v == "undefined"){
			return false;
		}
		else if(v == ""){
			return false;
		}
		else if(v == false){
			return false;
		}
		else if(v == 0){
			return false;
		}
		else if(v == null){
			return false;
		}
		else if(!v){
			return false;
		}
		else{
			return true;
		}
	}
	//strict
	else{
		if(typeof v == "undefined"){
			return false;
		}
		else{
			return true;
		}
	}
}

//UI functions below

//creates markup for a new popup.
MagnetoChat.registerChatCanvas = function(id, name, profile_img, convid, toids, listobj, dlink){

	if($(window).width()<768){
		$(".chat-user-list-sidebar").addClass("hide");
		$(".chat-user-messages").removeClass("hide");
	}

	//ids
	var chat_popup_id = "chat-conv-popup-"+id;
	var listid = "chat-conv-"+id;

	//add class to list obj
	var listobj = $("#"+listid);
	listobj.removeClass("chat-conv").addClass("chat-conv");
	//if the popup already exists
	if(MagnetoChat.isset($("#"+chat_popup_id).attr("data-id"))){
		MagnetoChat.focusChatPopup(chat_popup_id);
		return false;
	}

	//get a clone
	var chat_popup = $("#chat-in-full .clone-chat-box").clone();
	//append the clone
	$(".chat-user-messages").html("");
	chat_popup.appendTo(".chat-user-messages").removeClass("hide").attr("id" ,chat_popup_id);

	//chat_popup.find(".settings").hide();
	//all popups should have a class chat-conv-popup
	chat_popup.removeClass("chat-conv-popup").addClass("chat-conv-popup");
	//add additional properties to chat_popup
	chat_popup.attr("data-id", id);
	chat_popup.find(".minimizer").attr("data-id", id);
	chat_popup.attr("data-convid", convid);
	chat_popup.attr("data-toids", toids);
	//remove the clone class
	chat_popup.removeClass("clone-chat-box");
	if(!MagnetoChat.isset(dlink)){
		var dlink = listobj.attr("data-link");
	}
	if(MagnetoChat.isset(dlink)){
		//popup name
		chat_popup.find(".title h4").html("<a href='"+dlink+"' data-fetch='true'>"+name+"</a>");
		//set profile image
		var circle = chat_popup.find(".circle");
		var circleparent = circle.parent();
		var acircle = $("<a href='"+dlink+"' data-fetch='true'></a>");
		circleparent.prepend(acircle);
		circle.attr('src', profile_img).appendTo(acircle);
		GlobalJS.setHrefs(chat_popup.find(".profile-name"));
	}
	else{
		//popup name
		chat_popup.find(".title h4").text(name);
		//set profile image
		chat_popup.find(".circle").attr('src', profile_img);
	}
	var closebutton = chat_popup.find(".close-chat-popup-box");
	closebutton.attr("data-chatpopupid", chat_popup_id)
	closebutton.click(function(){
		MagnetoChat.closePopup($(this).attr("data-chatpopupid"));
	});

	//for file button update the for id
	var fileobj = chat_popup.find(".message-attachment").find("input");
	var filelabelobj = chat_popup.find(".message-attachment").find("label");
	var fileobjform = chat_popup.find(".message-attachment").find("form");
	var fileobjiframe = chat_popup.find(".message-attachment").find("fileobjiframe");
	var forid = filelabelobj.attr("for") + "-"+id;
	filelabelobj.attr("for", forid);
	fileobj.attr("data-id", id);
	fileobj.attr("data-convid", convid);
	fileobj.attr("data-toids", toids);
	fileobj.attr("id", forid);
	fileobjform.attr("id", "form-"+forid);
	fileobjiframe.attr("id", "iframe-"+forid);
	MagnetoChat.registerFileButton(fileobj, "full");

	//set the textarea data
	var txtarea = chat_popup.find(".txtChatMessage");
	txtarea.attr("data-id", id);
	txtarea.attr("data-convid", convid);
	txtarea.attr("data-toids", toids);
	txtarea.attr("id", "txtChatMessage-"+MagnetoChat.randomID());
	txtarea.on("focus", function(){
		$(".chat-open-user-box").find(".chat-open-user-box-header").removeClass("new-message-alert-header");
		$(this).parents(".chat-open-user-box").find(".chat-open-user-box-header").addClass("new-message-alert-header");
	});
	MagnetoChat.registerTxtArea(txtarea, "full");

	$("#chat-in-full .conversation-message-box").hide();
	//get previous messages
	MagnetoChat.getPreviousMessages(id, convid, toids, "", function(obj){
		var id = obj['id'];
		var listid = "chat-conv-"+id;
		var listobj = $("#"+listid);
		var convid = obj['convid'];
		var toids = obj['toids'];
		var chat_popup_id = "chat-conv-popup-"+id;
		var chat_popup = $("#"+chat_popup_id);
		//websocket
		try{
			//to tell others that the message was read
			var wsmsg = {};
			wsmsg["command"] = "fetch";
			wsmsg["convid"] = convid;
			var wsmsgjson = JSON.stringify(wsmsg);
			MagnetoChat.WebSocketServer.send( 'message', wsmsgjson );
		}
		catch(e){
		}
		//if chat popup is ready
		if(MagnetoChat.isset(chat_popup.attr("data-id"))){
			var canvas = chat_popup.find(".conversation-list");
			var canvasloader = chat_popup.find(".conversation-list .loading");
			var canvas_id = "chat-conv-canvas-"+id;
			canvas.attr("id", canvas_id);
			var txtarea = chat_popup.find(".txtChatMessage");

			//add this class
			canvas.removeClass("chat-conv-canvas").addClass("chat-conv-canvas");
			//add additional properties to canvas
			canvas.attr("data-id", id);
			canvas.attr("data-toids", toids);

			//set consistent convid to all
			MagnetoChat.setDataValue(listobj, chat_popup, canvas, txtarea, "data-convid", convid);
			//hide unseen count cause popup is alrady open
			listobj.find(".unseencount").hide();

			canvasloader.fadeOut(200).remove();
			//set new html value
			canvas.hide().html(obj['json']['html']).fadeIn(200);

			//the seen status in the last bubble
			var lastbubble  = canvas.find(".msgfromserver").last();
			if(lastbubble.hasClass("you")){
				var sent = $('<div class="mymsgstatus seen other-person sent"><small class="mymsgstatus-'+lastbubble.attr("data-messageid")+'">&nbsp;</small></div>');
				lastbubble.after(sent);
			}

			clearTimeout(MagnetoChat.fetcherTimeout);
			MagnetoChat.fetcherTimeout = setTimeout(function(){
				MagnetoChat.fetcher();
			}, 100);

			MagnetoChat.setSearchUserElem(chat_popup.find(".txtMessageReceiver"));
			// Put the scrollbar at the bottom of the chatbox window.
			MagnetoChat.scrollToBottom(canvas);

			canvas.scrollGuard();
			//onclick canvas and not a highlight
			canvas.mousedown(function(e){
				$(this).attr("data-mousepagex", e.pageX);
			});
			canvas.mouseup(function(e){
				var pageX = $(this).attr("data-mousepagex");
				//if same position and left click
				if(pageX==e.pageX&&e.which==1){
					var chat_popup_id = "chat-conv-popup-"+$(this).attr("data-id");
					MagnetoChat.focusChatPopup(chat_popup_id);
				}
			});
			//scroll to get more previous messages
			canvas.scroll(function(){
				if($(this).scrollTop()<=0){
					var firstmessage = $(this).find(".msgfromserver").first();
					if(MagnetoChat.isset(firstmessage)){
						var id = $(this).attr("data-id");
						var chat_popup_id = "chat-conv-popup-"+id;
						var convid = $(this).attr("data-convid");
						var toids = $(this).attr("data-toids");
						var refmessageid = firstmessage.attr("data-messageid");
						canvas.prepend("<div class='loadingprevmsg' style='text-align:center; color:#a0a0a0; font-size:11px; padding:7px; padding-top:3px'>Loading previous messages...</div>");
						//return 0;
						MagnetoChat.getPreviousMessages(id, convid, toids, refmessageid, function(obj){
							var convid = obj['convid'];
							var toids = obj['toids'];
							var refmessageid = obj['refmessageid'];
							var chat_popup_id = "chat-conv-popup-"+id;
							var chat_popup = $("#"+chat_popup_id);
							//if chat popup is ready
							if(MagnetoChat.isset(chat_popup.attr("data-id"))){
								var canvas = chat_popup.find(".conversation-list");
								canvas.find(".loadingprevmsg").remove();
								canvas.prepend(obj['json']['html']);
								var firstmessage = canvas.find(".msg-bubble-"+refmessageid);
								var scrolltop = firstmessage.offset().top - canvas.offset().top - (canvas.parent().height()/2);
								//scrolltop =20;
								canvas.animate({ scrollTop: scrolltop },1)
								//alert(canvas.offset().top+" "+firstmessage.offset().top);
								//canvas.animate({ scrollTop: 500 },100)
							}
						});

					}
				}
			});


		}
		//this has to be run only after getting teh contents of the canvas
		MagnetoChat.heightChatConversationDisplay();
	});



	/*
	if(type == "new"){
		$.ajax({
			 url: $('base').attr('href')+'chat/display_new_chat_popup',
			 type: 'GET',
			 data: { chat_id: id },
			 dataType: 'json',
			 success: function(json){
					 $(".chat-open-user-container").append(json.html);
					 $("#"+id).find(".txtChatMessage").focus();
					 MagnetoChat.search_user_receiver($("#"+id).find(".txtMessageReceiver"));

					 if(MagnetoChat.popups.length + 1 > MagnetoChat.total_popups){
							 $("#"+MagnetoChat.popups[MagnetoChat.total_popups-1]).remove();
							 Array.remove(MagnetoChat.popups, MagnetoChat.total_popups-1);
					 }

					 MagnetoChat.popups.push(id);
					 MagnetoChat.calculate_popups();
			 }
		});
	}
	*/
	$(".chat-open-user-box-header").removeClass("new-message-alert-header");
	$("#"+id+" .chat-open-user-box-header").addClass("new-message-alert-header");
}


//creates markup for a new popup.
MagnetoChat.registerPopup = function(id, name, profile_img, convid, toids, listobj, href, dlink){
	if($(window).width()<768){
		history.pushState({}, '', href);
		GlobalJS.onLoad(function(){
			MagnetoChat.afterLoadFunctions.push(function(){
				MagnetoChat.registerChatCanvas(id+'-full', name, profile_img, convid, toids, listobj, dlink);
			});
		});
		GlobalJS.setPageContainer(href);
		return false;
	}

	//ids
	var chat_popup_id = "chat-conv-popup-"+id;
	var listid = "chat-conv-"+id;

	//add class to list obj
	var listobj = $("#"+listid);
	listobj.removeClass("chat-conv").addClass("chat-conv");
	//if the popup already exists
	if(MagnetoChat.isset($("#"+chat_popup_id).attr("data-id"))){
		MagnetoChat.focusChatPopup(chat_popup_id);
		return false;
	}

	//get a clone
	var chat_popup = $("#"+MagnetoChat.widget_id+" .clone-chat-popup-box").clone();
	//append the clone
	chat_popup.appendTo(".chat-open-user-container").removeClass("hide").attr("id" ,chat_popup_id);
	//all popups should have a class chat-conv-popup
	chat_popup.removeClass("chat-conv-popup").addClass("chat-conv-popup");
	//add additional properties to chat_popup
	chat_popup.attr("data-id", id);
	chat_popup.find(".minimizer").attr("data-id", id);
	chat_popup.attr("data-convid", convid);
	chat_popup.attr("data-toids", toids);
	//remove the clone clas
	chat_popup.removeClass("clone-chat-popup-box");
	var dlink = listobj.attr("data-link");
	if(MagnetoChat.isset(dlink)){
		//popup name
		chat_popup.find(".title h4").html("<a href='"+dlink+"' data-fetch='true'>"+name+"</a>");
		//set profile image
		var circle = chat_popup.find(".circle");
		var circleparent = circle.parent();
		var acircle = $("<a href='"+dlink+"' data-fetch='true'></a>");
		circleparent.prepend(acircle);
		circle.attr('src', profile_img).appendTo(acircle);
		GlobalJS.setHrefs(chat_popup.find(".profile-name"));
	}
	else{
		//popup name
		chat_popup.find(".title h4").text(name);
		//set profile image
		chat_popup.find(".circle").attr('src', profile_img);
	}
	//popup position
	var chat_popups = $(".chat-conv-popup");
	var rightpos = chat_popups.length * (chat_popups.first().width()+20);
	var totalwidth = chat_popup.width()+rightpos;
	//if popups are too long remove oldest
	if(totalwidth>($("body").width()-100)){
		chat_popups.first().remove();
	}
	//rearrange the popups
	MagnetoChat.arrangePopups();
	MagnetoChat.focusChatPopup(chat_popups.last().attr("id"));
	var closebutton = chat_popup.find(".close-chat-popup-box");
	closebutton.attr("data-chatpopupid", chat_popup_id)
	closebutton.click(function(){
		MagnetoChat.closePopup($(this).attr("data-chatpopupid"));
	});

	//for file button update the for id
	var fileobj = chat_popup.find(".message-attachment").find("input");
	var filelabelobj = chat_popup.find(".message-attachment").find("label");
	var fileobjform = chat_popup.find(".message-attachment").find("form");
	var fileobjiframe = chat_popup.find(".message-attachment").find("fileobjiframe");
	var forid = filelabelobj.attr("for") + "-"+id;
	filelabelobj.attr("for", forid);
	fileobj.attr("data-id", id);
	fileobj.attr("data-convid", convid);
	fileobj.attr("data-toids", toids);
	fileobj.attr("id", forid);
	fileobjform.attr("id", "form-"+forid);
	fileobjiframe.attr("id", "iframe-"+forid);
	MagnetoChat.registerFileButton(fileobj);

	//set the textarea data
	var txtarea = chat_popup.find(".txtChatMessage");
	txtarea.attr("data-id", id);
	txtarea.attr("data-convid", convid);
	txtarea.attr("data-toids", toids);
	txtarea.attr("id", "txtChatMessage-"+MagnetoChat.randomID());
	txtarea.on("focus", function(){
		$(".chat-open-user-box").find(".chat-open-user-box-header").removeClass("new-message-alert-header");
		$(this).parents(".chat-open-user-box").find(".chat-open-user-box-header").addClass("new-message-alert-header");
	});
	MagnetoChat.registerTxtArea(txtarea);

	//see full chat
	var href = chat_popup.find(".seefullchat").attr("href");
	href += "?id="+chat_popup.attr("data-id");
	chat_popup.find(".seefullchat").attr("href", href);

	//get previous messages
	MagnetoChat.getPreviousMessages(id, convid, toids, "", function(obj){
		var id = obj['id'];
		var listid = "chat-conv-"+id;
		var listobj = $("#"+listid);
		var convid = obj['convid'];
		var toids = obj['toids'];
		var chat_popup_id = "chat-conv-popup-"+id;
		var chat_popup = $("#"+chat_popup_id);
		//websocket
		try{
			//to tell others that the message was read
			var wsmsg = {};
			wsmsg["command"] = "fetch";
			wsmsg["convid"] = convid;
			var wsmsgjson = JSON.stringify(wsmsg);
			MagnetoChat.WebSocketServer.send( 'message', wsmsgjson );
		}
		catch(e){
		}
		//if chat popup is ready
		if(MagnetoChat.isset(chat_popup.attr("data-id"))){
			var canvas = chat_popup.find(".conversation-list");
			var canvasloader = chat_popup.find(".conversation-list .loading");
			var canvas_id = "chat-conv-canvas-"+id;
			canvas.attr("id", canvas_id);
			var txtarea = chat_popup.find(".txtChatMessage");

			//add this class
			canvas.removeClass("chat-conv-canvas").addClass("chat-conv-canvas");
			//add additional properties to canvas
			canvas.attr("data-id", id);
			canvas.attr("data-toids", toids);

			//set consistent convid to all
			MagnetoChat.setDataValue(listobj, chat_popup, canvas, txtarea, "data-convid", convid);
			//hide unseen count cause popup is alrady open
			listobj.find(".unseencount").hide();

			canvasloader.fadeOut(200).remove();
			//set new html value
			canvas.hide().html(obj['json']['html']).fadeIn(200);

			//last bubble
			var lastbubble  = canvas.find(".msgfromserver").last();
			if(lastbubble.hasClass("you")){
				var sent = $('<div class="mymsgstatus seen other-person sent"><small class="mymsgstatus-'+lastbubble.attr("data-messageid")+'">&nbsp;</small></div>');
				lastbubble.after(sent);
			}

			clearTimeout(MagnetoChat.fetcherTimeout);
			MagnetoChat.fetcherTimeout = setTimeout(function(){
				MagnetoChat.fetcher();
			}, 100);

			MagnetoChat.setSearchUserElem(chat_popup.find(".txtMessageReceiver"));
			// Put the scrollbar at the bottom of the chatbox window.
			MagnetoChat.scrollToBottom(canvas);

			canvas.scrollGuard();
			//onclick canvas and not a highlight
			canvas.mousedown(function(e){
				$(this).attr("data-mousepagex", e.pageX);
			});
			canvas.mouseup(function(e){
				var pageX = $(this).attr("data-mousepagex");
				//if same position and left click
				if(pageX==e.pageX&&e.which==1){
					var chat_popup_id = "chat-conv-popup-"+$(this).attr("data-id");
					MagnetoChat.focusChatPopup(chat_popup_id);
				}
			});
			//scroll to get more previous messages
			canvas.scroll(function(){
				if($(this).scrollTop()<=0){
					var firstmessage = $(this).find(".msgfromserver").first();
					if(MagnetoChat.isset(firstmessage)){
						var id = $(this).attr("data-id");
						var chat_popup_id = "chat-conv-popup-"+id;
						var convid = $(this).attr("data-convid");
						var toids = $(this).attr("data-toids");
						var refmessageid = firstmessage.attr("data-messageid");
						canvas.prepend("<div class='loadingprevmsg' style='text-align:center; color:#a0a0a0; font-size:11px; padding:7px; padding-top:3px'>Loading previous messages...</div>");
						//return 0;
						MagnetoChat.getPreviousMessages(id, convid, toids, refmessageid, function(obj){
							var convid = obj['convid'];
							var toids = obj['toids'];
							var refmessageid = obj['refmessageid'];
							var chat_popup_id = "chat-conv-popup-"+id;
							var chat_popup = $("#"+chat_popup_id);
							//if chat popup is ready
							if(MagnetoChat.isset(chat_popup.attr("data-id"))){
								var canvas = chat_popup.find(".conversation-list");
								canvas.find(".loadingprevmsg").remove();
								canvas.prepend(obj['json']['html']);
								var firstmessage = canvas.find(".msg-bubble-"+refmessageid);
								var scrolltop = firstmessage.offset().top - canvas.offset().top - (canvas.parent().height()/2);
								//scrolltop =20;
								canvas.animate({ scrollTop: scrolltop },1)
								//alert(canvas.offset().top+" "+firstmessage.offset().top);
								//canvas.animate({ scrollTop: 500 },100)
							}
						});

					}
				}
			});
		}
		GlobalJS.setHrefs(chat_popup);
	});
	/*
	if(type == "new"){
		$.ajax({
			 url: $('base').attr('href')+'chat/display_new_chat_popup',
			 type: 'GET',
			 data: { chat_id: id },
			 dataType: 'json',
			 success: function(json){
					 $(".chat-open-user-container").append(json.html);
					 $("#"+id).find(".txtChatMessage").focus();
					 MagnetoChat.search_user_receiver($("#"+id).find(".txtMessageReceiver"));

					 if(MagnetoChat.popups.length + 1 > MagnetoChat.total_popups){
							 $("#"+MagnetoChat.popups[MagnetoChat.total_popups-1]).remove();
							 Array.remove(MagnetoChat.popups, MagnetoChat.total_popups-1);
					 }

					 MagnetoChat.popups.push(id);
					 MagnetoChat.calculate_popups();
			 }
		});
	}
	*/
	$(".chat-open-user-box-header").removeClass("new-message-alert-header");
	$("#"+id+" .chat-open-user-box-header").addClass("new-message-alert-header");
}

//register the file send button
MagnetoChat.registerFileButton = function(fileobj, type){
	fileobj.attr("data-type", type);
	fileobj.unbind("change");
	fileobj.change(function (){
		var filename = $(this).val();
		filename = filename.split("\\");
		filename = filename[filename.length-1];

		//stop fetcher when sent something
		MagnetoChat.stopFetcher = true;
		clearTimeout(MagnetoChat.fetcherTimeout);

		if($.trim(filename)!=""){
			var id	 = $(this).attr("data-id");
			var convid	 = $(this).attr("data-convid");
			var toids	 = $(this).attr("data-toids");
			var canvas = $("#chat-conv-canvas-"+id);
			var message  = {};
			message['type'] = "file";
			message['fileobjid'] = fileobj.attr("id");
			message['filename'] = filename;

			//if canvas is not yet ready
			if(!canvas.hasClass("chat-conv-canvas")){
				return false;
			}
			MagnetoChat.currentCanvas = canvas;
			//send message
			MagnetoChat.sendMessage(id, canvas, convid, toids, message, function(obj){
				var canvas = obj['canvas'];
				var json = obj['json'];
				var listobj = $("#chat-conv-"+canvas.attr("data-id"));
				var chat_popup = $("#chat-conv-popup-"+canvas.attr("data-id"));
				var txtarea = chat_popup.find(".txtChatMessage");
				//websocket
				try{
					//to tell others that the message sent
					var wsmsg = {};
					wsmsg["command"] = "fetch";
					wsmsg["convid"] = canvas.attr("data-convid");
					var wsmsgjson = JSON.stringify(wsmsg);
					MagnetoChat.WebSocketServer.send( 'message', wsmsgjson );
				}
				catch(e){
				}
				//sending status
				var mymsgstatus = canvas.find(".mymsgstatus").find("small."+obj["uniqueclass"]);
				if(!MagnetoChat.isset(obj['failed'])){
					var html = json['html'];
					mymsgstatus.html("Sent");
					mymsgstatus.addClass("mymsgstatus-"+json['messageid']).removeClass(obj["uniqueclass"]);
				}
				else{
					mymsgstatus.html("Sending failed!");
					return false;
				}

				//set the new data-convid of the 4 elems
				MagnetoChat.setDataValue(listobj, chat_popup, canvas, txtarea, "data-convid", json["convid"]);
				//move to top
				listobj.prependTo(listobj.parent());
				var msgbubble = obj['canvas'].find("."+obj['sendbubbleid']);
				msgbubble.addClass("msgfromserver");
				msgbubble.addClass("msg-bubble-"+json['messageid']);
				msgbubble.attr("data-messageid", json['messageid']);
				msgbubble.removeClass("msgfromlocal");
				msgbubble.removeClass(obj['sendbubbleid']);
				if(MagnetoChat.isset(json['filepath'])){
					var spanhtml = msgbubble.find("span").html();
					msgbubble.find("span").html("<i class='fa fa-paperclip' aria-hidden='true'></i>&nbsp;<a href='"+json['filepath']+"'>"+spanhtml+"</a>");
				}

				//if there are messages before
				if(MagnetoChat.isset(html)){
					var htmlclean = MagnetoChat.cleanHTML(canvas, html);
					//msgbubble.before(htmlclean);
				}
				/*
				setTimeout(function(){
					canvas.find(".mymsgstatus").fadeOut(200,function(){
						canvas.find(".mymsgstatus").remove();
					});
				}, 8000);
				*/
				//scroll to bottom
				MagnetoChat.scrollToBottom(canvas);
				MagnetoChat.stopFetcher = false;
				clearTimeout(MagnetoChat.fetcherTimeout);
				MagnetoChat.fetcherTimeout = setTimeout(function(){
					MagnetoChat.fetcher();
				}, 5000);
			});
			$(this).val('');
			var type = $(this).attr("data-type");
			if(type!="full"){
				MagnetoChat.resizeChatPopupTxtBox($(this));
			}


			//$(".chat-conversation-receiver").remove();
		}
		MagnetoChat.scrollToBottom(canvas);
		return false;
	});
}

MagnetoChat.registerTxtArea = function(txtarea, type){
	txtarea.unbind("keyup");
	txtarea.unbind("keypress");
	txtarea.attr("data-type", type);
	// Textbox inside a chat popup
	txtarea.keyup(function(e){
		if($(this).val().length == "0"){
			$(this).removeAttr("style");
			var type = $(this).attr("data-type");
			if(type!="full"){
				MagnetoChat.resizeChatPopupTxtBox($(this));
			}
		}
	});
	// Textbox inside a chat popup
	txtarea.keypress(function(e){
		//adjusting textarea
		$(this).attr("style","height:auto; height: "+$(this)[0].scrollHeight+"px");
		var type = $(this).attr("data-type");
		if(type!="full"){
			MagnetoChat.resizeChatPopupTxtBox($(this));
		}
		//send the message
		if(e.which == 13 && !e.shiftKey) {
			//stop fetcher when sent something
			MagnetoChat.stopFetcher = true;
			clearTimeout(MagnetoChat.fetcherTimeout);

			if($.trim($(this).val())!=""){
				/*
				//sydney's codes
				$(this).parents(".chat-open-user-box").find(".dropdown").removeClass("hide");
				if($(this).parents(".chat-open-user-box-conversation").hasClass("chat-new-conversation")){
						var receiver_value_obj = $(".txtMessageReceiver").select2('data');

						var receiver_value_array = [];
						$.each(receiver_value_obj,function(index,value){
								receiver_value_array.push(value.text);
						});
						var receiver_value_string = receiver_value_array.join(",");

						//If receiver is only one display the image of the receiver
						if(receiver_value_obj.length == "1"){
								var html_image = '<img src="http://e27.co/img/profiles/40120/profile_pic.png" alt="" title="" />';
								$(this).parents(".chat-open-user-box").find(".title").prepend(html_image);
						}

						$(this).parents(".chat-open-user-box").find(".title h4").text(receiver_value_string);
						$(this).parents(".chat-open-user-box-conversation").removeClass("chat-new-conversation");
				}
				*/
				var id	 = $(this).attr("data-id");
				var convid	 = $(this).attr("data-convid");
				var toids	 = $(this).attr("data-toids");
				var canvas = $("#chat-conv-canvas-"+id);
				var message  = $(this).val();
				//if canvas is not yet ready
				if(!canvas.hasClass("chat-conv-canvas")){
					return false;
				}
				MagnetoChat.currentCanvas = canvas;
				canvas.find(".mymsgstatus").remove();
				//send message
				MagnetoChat.sendMessage(id, canvas, convid, toids, message, function(obj){
					var canvas = obj['canvas'];
					var json = obj['json'];
					var listobj = $("#chat-conv-"+canvas.attr("data-id"));
					var chat_popup = $("#chat-conv-popup-"+canvas.attr("data-id"));
					var txtarea = chat_popup.find(".txtChatMessage");
					//websocket
					try{
						//to tell others that the message sent
						var wsmsg = {};
						wsmsg["command"] = "fetch";
						wsmsg["convid"] = canvas.attr("data-convid");
						var wsmsgjson = JSON.stringify(wsmsg);
						MagnetoChat.WebSocketServer.send( 'message', wsmsgjson );
					}
					catch(e){
					}
					//sending status
					var mymsgstatus = canvas.find(".mymsgstatus").find("small."+obj["uniqueclass"]);
					if(!MagnetoChat.isset(obj['failed'])){
						var html = json['html'];
						mymsgstatus.html("Sent");
						mymsgstatus.addClass("mymsgstatus-"+json['messageid']).removeClass(obj["uniqueclass"]);
					}
					else{
						mymsgstatus.html("Sending failed!");
						return false;
					}

					if(!MagnetoChat.isset(listobj.attr("data-convid"))){
						//refresh chat list
						MagnetoChat.fillChatList();
					}
					//set the new data-convid of the 4 elems
					MagnetoChat.setDataValue(listobj, chat_popup, canvas, txtarea, "data-convid", json["convid"]);

					//move to top list
					listobj.prependTo(listobj.parent());

					var msgbubble = obj['canvas'].find("."+obj['sendbubbleid']);
					msgbubble.addClass("msgfromserver");
					msgbubble.addClass("msg-bubble-"+json['messageid']);
					msgbubble.attr("data-messageid", json['messageid']);
					msgbubble.removeClass("msgfromlocal");
					msgbubble.removeClass(obj['sendbubbleid']);

					/*
					setTimeout(function(){
						canvas.find(".mymsgstatus").fadeOut(200,function(){
							canvas.find(".mymsgstatus").remove();
						});
					}, 8000);
					*/
					//scroll to bottom
					MagnetoChat.scrollToBottom(canvas);
					MagnetoChat.stopFetcher = false;
					clearTimeout(MagnetoChat.fetcherTimeout);
					MagnetoChat.fetcherTimeout = setTimeout(function(){
						MagnetoChat.fetcher();
					}, 5000);
				});
				$(this).val('');
				if(type!="full"){
					MagnetoChat.resizeChatPopupTxtBox($(this));
				}
				//$(".chat-conversation-receiver").remove();
			}
			MagnetoChat.scrollToBottom(canvas);
			return false;
		}
	});
}

// For chat popup
MagnetoChat.resizeChatPopupTxtBox = function(txtobj){
	// Height of the chat box popup
	var box = parseInt($(txtobj).parents(".chat-open-user-box").innerHeight());

	// If chat popup is a new conversation (new message)
	if($(txtobj).parents(".chat-open-user-box-conversation").hasClass("chat-new-conversation")){
		// Sum of chatbox header + chatbox user receiver textbox + chatbox message box textarea
		var total = parseInt($(txtobj).parents(".chat-open-user-box").find(".chat-open-user-box-header").innerHeight()) + parseInt($(txtobj).parents(".chat-open-user-box").find(".chat-conversation-receiver").outerHeight(true)) + parseInt($(txtobj).parents(".chat-open-user-box").find(".conversation-message-box textarea").innerHeight());
		var conversation = (box - total);
	}
	else {
		// if Chat popup is an existing conversation but the user will not add an additional member on that chat.
		if($(txtobj).parents(".chat-open-user-box").find(".chat-conversation-receiver").hasClass("hide")){
			// Sum of chatbox header + chatbox user receiver textbox + chatbox message box textarea
			var total = parseInt($(txtobj).parents(".chat-open-user-box").find(".chat-open-user-box-header").innerHeight()) + parseInt($(txtobj).parents(".chat-open-user-box").find(".conversation-message-box textarea").innerHeight());
			var conversation = (box - total);
		}
		// else if Chat popup is an existing conversation but the user will add an additional member on that chat.
		else {
			var total = parseInt($(txtobj).parents(".chat-open-user-box").find(".chat-open-user-box-header").innerHeight()) + parseInt($(txtobj).parents(".chat-open-user-box").find(".chat-conversation-receiver").outerHeight(true)) + parseInt($(txtobj).parents(".chat-open-user-box").find(".conversation-message-box textarea").innerHeight());
			var conversation = (box - total);
		}
	}
	$(txtobj).parents(".chat-open-user-box").find(".conversation-list").attr("style","height: "+conversation+ "px !important");
}

//this is used to close a popup
MagnetoChat.closePopup = function(id){
	var chat_popup = $("#"+id);
	chat_popup.attr("id", "");
	chat_popup.fadeOut(200, function(){
		chat_popup.remove();
		MagnetoChat.arrangePopups();
	});
	//$("#"+id).remove();
}

//focus on chat popup
MagnetoChat.focusChatPopup = function(id){
	$(".chat-open-user-box-header").each(function(){
		$(this).removeClass("new-message-alert-header");
	});
	setTimeout(function(){
		$("#"+id).find(".chat-open-user-box-header").addClass("new-message-alert-header");
		$("#"+id).find(".txtChatMessage").focus();
	}, 100);
}

//minimize popup
MagnetoChat.minimizePopup = function(obj) {
	var listobj = $("#chat-conv-"+$(obj).attr("data-id"));
	var canvas = $("#chat-conv-canvas-"+$(obj).attr("data-id"));
	var chat_popup = $("#chat-conv-popup-"+$(obj).attr("data-id"));
	//max
	if($(obj).parents(".chat-open-user-box").hasClass("chat-minimise")){
		$(obj).parents('.chat-open-user-box').removeClass("chat-minimise",100, function(){
			if(listobj.find(".unseencount").is(":visible")){
				clearTimeout(MagnetoChat.fetcherTimeout);
				MagnetoChat.fetcherTimeout = setTimeout(function(){
					MagnetoChat.fetcher();
				}, 100);
			}
			MagnetoChat.scrollToBottom(canvas);
		});
		//alert(chat_popup);
		chat_popup.find(".min-button .fa").addClass("hide");
		chat_popup.find(".min-button .min").removeClass("hide");
		//check if has unseen messages
	}
	//min
	else {
		$(obj).parents('.chat-open-user-box').addClass("chat-minimise",100);
		chat_popup.find(".min-button .fa").addClass("hide");
		chat_popup.find(".min-button .max").removeClass("hide");
	}
}

//arrange popups
MagnetoChat.arrangePopups = function(){
	var chat_popups = $(".chat-conv-popup");
	var increment = chat_popups.first().width()+20;
	var rightpos = increment;
	chat_popups.each(function(){
		$(this).css("right", rightpos);
		rightpos +=increment;
	});
	var chat_popup = $(".new-message-alert-header").parent();
	chat_popup.find(".txtChatMessage").focus();
}

//move list to top
MagnetoChat.moveListToTop = function(listid){
	var list = $("."+listid);
	list.prependTo(list.parent());
}

//scroll the canvas to bottom
MagnetoChat.scrollToBottom = function(canvas){
	canvas.animate({ scrollTop: canvas.prop('scrollHeight') },400);
}

//set page title with count
MagnetoChat.setPageTitleCount = function(thecount){
	var title = $(document).attr("title");
	//remove current count
	if(title.indexOf("(")==0){
		title = title.split(")");
		if(MagnetoChat.isset(title[1])){
			//add count
			title = title[1];
		}
		else{
			title = "";
		}
	}
	if(thecount>0){
		title = "("+thecount+") "+title;
		$(".msg-count").html(thecount);
	}
	else{
		$(".msg-count").html("");
	}
	$(document).attr("title", title);

}

// Function in autocomplete searching of user in chat popup
MagnetoChat.setSearchUserElem = function(obj){
	$(obj).select2({
		 minimumInputLength: 1,
		 tokenSeparators: [","],
		 multiple: true,
		 dropdownCssClass: "chat-user-autocomplete",
		 formatResult: user_format,
		 allowClear: true,
		 ajax: {
				url: $('base').attr('href') + "_html/user.json",
				dataType: "json",
				data: function(term, page) {
					return {
						 q: term
					};
				},
				results: function(data, page) {
					return {
						 results: data
					};
				}
		 },
		 initSelection: function(element, callback) {

		 },
		 escapeMarkup: function(m) {
					return m;
			}
	})
	.on("change",function(e){
			resize_conversation_box($(obj));
	});

	$(".txtMessageReceiver").on("select2-focus", function(e) { global_nomatches_text = "No matches found."; });
	$(".txtMessageReceiver").on("select2-focus", function(e) { global_search_text = "Search user"; });
}

//set the data-<any> of 4 vital elements
MagnetoChat.setDataValue = function(listobj, chat_popup, canvas, txtarea, key, convid){
	//of teh list object
	listobj.attr(key, convid);
	//of the popup
	chat_popup.attr(key, convid);
	//of the canvas
	canvas.attr(key, convid);
	//of the textarea
	txtarea.attr(key, convid);
}

//set on/offline status
MagnetoChat.setOnlineStatus = function(listobj, thestatus){
	if(thestatus=='on'){
		//remove ofline mark
		listobj.removeClass("off");
		listobj.find(".chat-user-status").find("span").removeClass("offline").removeClass("online").addClass("online");
		if(!MagnetoChat.isset(listobj.attr("data-moved"))){
			listobj.prependTo(listobj.parent());
			listobj.attr("data-moved", true);
		}
	}
	else{
		listobj.find(".chat-user-status").find("span").removeClass("offline").removeClass("online").addClass("offline");
	}
}

MagnetoChat.initSearchBox = function(){
	// Textbox inside the chat list
	$(".txtSearchUserChatList").unbind("keyup");
	$(".txtSearchUserChatList").keyup(function(){
		var search = $(this).val().toLowerCase();
		var search_orig = $(this).val();
		setTimeout(function(){
			var result = $.grep(MagnetoChat.chat_index, function(el) {
				return el.keyword.toLowerCase().indexOf(search) > -1;
			});
			if(!MagnetoChat.isset(search_orig)){
				$(".searchfor").addClass("hide");
			}
			else{
				$(".searchfor").removeClass("hide");
				$(".searchfor").find(".searchfor_key").html(search_orig);
				var href = $(".searchfor").find("a").attr("data-href");
				$(".searchfor").find("a").attr("href", href+escape(search));
			}
			$(".chat-user-list").addClass("hide");
			$(".chat-user-list-widget").addClass("hide");
			for(key in result){
				$(".chat_index_"+result[key].index).removeClass("hide");
			}
		},200);

	});
}
//fill the chat list class: .chat_list
MagnetoChat.fillChatList = function(id){
	// if(!MagnetoChat.isset(GlobalJS.isMobile)){
	// 	MagnetoChat.fillChatListWidget(function(){
	// 		MagnetoChat.fillChatListFull("", "", function(){
	// 			clearTimeout(MagnetoChat.fetcherTimeout);
	// 			MagnetoChat.fetcherTimeout = setTimeout(function(){
	// 				MagnetoChat.fetcher();
	// 			}, 5000);
	// 		});
	// 	});
	// }
	// else{
	// 	MagnetoChat.fillChatListFull("", true, function(){
	// 		clearTimeout(MagnetoChat.fetcherTimeout);
	// 		MagnetoChat.fetcherTimeout = setTimeout(function(){
	// 			MagnetoChat.fetcher();
	// 		}, 5000);
	// 	});
	// }
	MagnetoChat.fetcherTimeout = setTimeout(function(){
		MagnetoChat.fetcher();
	}, 2000);
}
MagnetoChat.fullChatIntervalFunc = function(){
	if($(window).width()>=768){
		$("#chat-in-full .chat-user-list-sidebar").removeClass("hide");
		$("#chat-in-full .chat-user-messages").removeClass("hide");
	}
	else{

		if($(".chat-user-list").length<=0){
			$("#chat-in-full .chat-user-list-sidebar").addClass("hide");
			$("#chat-in-full .chat-user-messages").removeClass("hide");

		}
	}
	//not in chat page
	if(!MagnetoChat.isset($(".chat_list")[0])){
		$("#chat-container").show();
		$(".page-prefooter").show();
		$(".page-footer").show();
		$("#chat-in-full .chat-user-messages-header").removeClass("smallheader");
		$("#chat-in-full .chat-conv-canvas").css("height", "auto");
		var msgbox = $("#chat-in-full .conversation-message-box");
		msgbox.removeClass("bottomfix");
	}
	else{
		//hide the widget
		$("#chat-container").hide();
		if($(window).width()<768){
			$(".chat-user-messages").addClass("border0");
			$(".page-prefooter").hide();
			$(".page-footer").hide();
			$("#chat-in-full .chat-user-messages-header").addClass("smallheader");
			var msgbox = $("#chat-in-full .conversation-message-box");
			$("#chat-in-full .chat-conv-canvas").css("height", $(window).height()-msgbox.outerHeight()-50-40);
			msgbox.addClass("bottomfix");
		}
	}
	MagnetoChat.hideShowWidget();
}
//fill the chat list class: .chat_list
MagnetoChat.fillChatListFull = function(id, skiphideshow, callback){
	if(MagnetoChat.isset(id)){
		MagnetoChat.fullID = id;
	}
	//$(".chat-user-list-sidebar").removeClass("hide");
	if(MagnetoChat.isset($(".chat_list")[0])){
		$.ajax({
			// url: MagnetoChat.baseURI+'chat_list',
			url: MagnetoChat.baseURI+'chat_list?site_user_id=' + '',
			xhrFields: { 
				withCredentials: false 
			},
			success: function(html){
				MagnetoChat.chat_index = [];
				$(".chat_list").html(html);
				$(".chat-user-list").unbind("click");
				$(".chat-user-list").click(function(){
					//alert("later :P");
					var id = $(this).attr("data-id");
					var name = $(this).attr("data-name");
					var img = $(this).attr("data-img");
					var convid = $(this).attr("data-convid");
					var toids = $(this).attr("data-toids");
					var listobj = $(this);
					MagnetoChat.registerChatCanvas(id, name, img, convid, toids, listobj);

					console.log("HERE");

				});
				if(!MagnetoChat.isset(skiphideshow)){
					clearInterval(MagnetoChat.fullChatInterval);
					$(".chat-user-list-sidebar").removeClass("hide");
					MagnetoChat.fullChatIntervalFunc();
					//if list has content
					if($(".chat-user-list").length>0){
						$(".chat-user-list-sidebar").removeClass("hide");
						if(!MagnetoChat.isset(MagnetoChat.fullID)){
							if($(window).width()>=768){
								$(".chat-user-list").first().trigger("click");
							}
						}
						else{
							if($("#chat-conv-"+MagnetoChat.fullID).attr("data-id")){
								$("#chat-conv-"+MagnetoChat.fullID).trigger("click");
								MagnetoChat.fullID = "";
							}
							else{
								if($(window).width()>=768){
									$(".chat-user-list").first().trigger("click");
								}
							}
						}
					}
					else{
						$(".chat-user-messages").find(".loading").hide();
						$(".chat-user-messages").find(".searchhere").removeClass("hide");
					}
				}
				for(x in MagnetoChat.afterLoadFunctions){
					MagnetoChat.afterLoadFunctions[x]();
					MagnetoChat.afterLoadFunctions[x] = function(){};
				}
				MagnetoChat.initSearchBox();
				GlobalJS.setHrefs($(".chat_list"));
				if(MagnetoChat.isset(callback)){
					callback();
				}
			}
		});
	}
	else{
		if(MagnetoChat.isset(callback)){
			callback();
		}
	}
}
//fill the chat list of widget. class: .chat_list_widget
MagnetoChat.fillChatListWidget = function(callback){
	$.ajax({
		// url: MagnetoChat.baseURI+'chat_list_widget',
		url: MagnetoChat.baseURI+'chat_list_widget?site_user_id=' + '',
		xhrFields: { 
			withCredentials: false 
		},
		success: function(html){
			MagnetoChat.chat_index = [];
			$(".chat_list_widget").html(html);
			$(".chat-user-list-widget").unbind("click");
			$(".chat-user-list-widget").click(function(){
				var id = $(this).attr("data-id");
				var name = $(this).attr("data-name");
				var img = $(this).attr("data-img");
				var convid = $(this).attr("data-convid");
				var toids = $(this).attr("data-toids");
				var listobj = $(this);
				MagnetoChat.registerPopup(id, name, img, convid, toids, listobj);
			});
			MagnetoChat.initSearchBox();
			GlobalJS.setHrefs($(".chat_list_widget"));
			if(MagnetoChat.isset(callback)){
				callback();
			}
		}
	});
}
MagnetoChat.heightChatConversationDisplay = function(){

	var height_of_chatbox = $("#chat-message-full-view").outerHeight(true);
	if($("#chat-message-full-view .chat-user-messages").find("#chat-message-full-view .chat-write-message-header").length > 0){
			var height_of_header = $("#chat-message-full-view .chat-write-message-header").outerHeight(true);
	}
	else {
			var height_of_header = $("#chat-message-full-view .chat-user-messages-header").outerHeight(true);
	}
	var height_of_message_box = $("#chat-message-full-view .reply-box").parent("div").outerHeight(true);
	var height_of_conversation = parseInt(height_of_chatbox) - (parseInt(height_of_header) + parseInt(height_of_message_box));

	$("#chat-message-full-view .conversation-list").css("height",height_of_conversation+"px");
	$("#chat-in-full .conversation-message-box").show();

}
MagnetoChat.setupHeightForChatFullViewContainers = function(){
	// Returns height of browser viewport
	var height_of_browser = $(window).height();
	if( $('.page-header').length ){
		var height_of_navbar = $(".page-header").innerHeight();
	}
	else {
		var height_of_navbar = $(".jg-page-header").innerHeight();
	}

	var height_of_footer = $(".page-prefooter").innerHeight();
	var height_of_chatbox = parseInt(height_of_browser) - parseInt(height_of_navbar);

		$("#chat-message-full-view").height(height_of_chatbox);
		$("#chat-message-full-view .chat-user-list-sidebar").height(height_of_chatbox);
		$("#chat-message-full-view .chat-user-messages").height(height_of_chatbox);
}

MagnetoChat.resizeWindowChatFullView = function() {
	MagnetoChat.setupHeightForChatFullViewContainers();
	setTimeout(function(){
		MagnetoChat.heightChatConversationDisplay();
	},500);
}

MagnetoChat.hideShowWidget = function(){
	//not in chat page
	if(!MagnetoChat.isset($(".chat_list")[0])){
		$("#chat-container").show();
	}
	else{
		//hide the widget
		$("#chat-container").hide();
	}
	setTimeout(function(){
		MagnetoChat.hideShowWidget();
	}, 100);
}
//INIT FUNCTIONS
MagnetoChat.widget = function(){
	if(parseInt(GlobalJS.UserId)>0){
		var widget_id = "chat-widget-"+MagnetoChat.randomID();
		/*
		$(window).unload(function() {
		   alert("1");
		});
		*/
		$.ajax({
			// url: MagnetoChat.baseURI+'widget',
			url: MagnetoChat.baseURI+'widget?site_user_id=' + '',
			xhrFields: { 
				withCredentials: false 
			},
			success: function(res){
				var chatopen = false;
				if($("#chat-container").attr("data-open")=="1"){
					chatopen = true;
				}
				$(".magneto-chat-widget-container").remove(); //remove any existing
				MagnetoChat.widget_id = widget_id;
				$("body").prepend("<div id='"+widget_id+"' class='magneto-chat-widget-container' style='display:none'></div>");
				$("#"+widget_id).html(res);
				$("#"+widget_id).fadeIn(100);
				if(chatopen){
					$("#chat-container").addClass("openToggle");
					$("#chat-container").attr("data-open", "1");
				}
				GlobalJS.setHrefs($("#chat-container"));
				MagnetoChat.initSearchBox();
				clearTimeout(MagnetoChat.fetcherTimeout);
				MagnetoChat.fetcherTimeout = setTimeout(function(){
					MagnetoChat.fetcher();
				}, 1000);
			}
		});
	}
	else{
		$.ajax({
			// url: MagnetoChat.baseURI+'widget',
			url: MagnetoChat.baseURI+'widget?site_user_id=' + '',
			xhrFields: { 
				withCredentials: false 
			},
			success: function(res){
				var chatopen = false;
				if($("#chat-container").attr("data-open")=="1"){
					chatopen = true;
				}
				$(".magneto-chat-widget-container").remove(); //remove any existing
				MagnetoChat.widget_id = widget_id;
				$("body").prepend("<div id='"+widget_id+"' class='magneto-chat-widget-container' style='display:none'></div>");
				$("#"+widget_id).html(res);
				$("#"+widget_id).fadeIn(100);
				if(chatopen){
					$("#chat-container").addClass("openToggle");
					$("#chat-container").attr("data-open", "1");
				}
				GlobalJS.setHrefs($("#chat-container"));
			}
		});
	}
}

MagnetoChat.init = function(){
	clearTimeout(MagnetoChat.fetcherTimeout);
	MagnetoChat.fetcherTimeout = setTimeout(function(){
		MagnetoChat.fetcher();
	}, 1000);
}

//recalculate when window is loaded and also when window is resized.
window.addEventListener("resize", MagnetoChat.calculate_popups);
window.addEventListener("resize", MagnetoChat.resizeWindowChatFullView);
window.addEventListener("load", MagnetoChat.calculate_popups);
</script>	
	<script src="https://e27.co//dist/js/new/fancywebsocket.js"></script>
	<script>
	//delay chat loading
	MagnetoChat.initInterval = setTimeout(function(){
		//if(GlobalJS.FirstLoad==false){
			clearInterval(MagnetoChat.initInterval);
			MagnetoChat.chatInitiated==true;
			MagnetoChat.hash = 'e7b50c9053cb2b266158b7254e624fb0';
MagnetoChat.widget();		//}
	},
	3000);
	</script>
	
<div id="nav_modals">
	<!-- START MODALS -->
<div id="all_modals"></div>
	<script>
	GlobalJS.viewLoader("modals", "#all_modals", function(html){
		if($.trim(html)==""){
		}
	}  );
	</script>
	<!-- END MODALS -->
<nav class="navbar navbar-default navbar-fixed-top jg-page-header">
	
	<!-- BEGIN ANNOUNCEMENT BAR -->
		<div class="announcement-bar hidden-announcement">
		<div class="container">
			<div class="announcement-bar-content-container">	
				<a class="announcement-bar-content announcement-bar-content-14" data-fetch="true" href="http://e27.co/yjxbx">
					#ECASIA2017: 5 days left! Save 10% on single tickets or up to 30% on group deals!										<button type="button" class="btn btn-default announcement-bar-cta" data-fetch="true" href="http://e27.co/yjxbx">
						Claim offer now!					</button>	
												
				</a>
			</div>
			
			<a class="hide-announcement-bar" onclick="viewAnnoucement()">
				<i class="fa fa-angle-up hide-announcement-bar-i" aria-hidden="true"></i>
			</a>	
		</div>
		
		<script type="text/javascript">
			$(document).ready(function(){
				//Show .announcement-bar after 1.5s
				setTimeout(function(){
					$(".announcement-bar").addClass("visible-announcement");

					if($( window ).width() < 1000){
						var nav_bar_height = parseInt($(".hidden-announcement").height()) + parseInt($(".firstNav").height()); 
						$(".top_fix").css("cssText", "top: " + nav_bar_height + "px !important;");	
					}
					else {
						var nav_bar_height = parseInt($(".hidden-announcement").height()) + parseInt($(".firstNav").height()) + parseInt($(".secNav").height()); 
						$(".top_fix").css("cssText", "top: " + nav_bar_height + "px !important;");	
					}

					$(".jeangrey-container").addClass("translateY-show-announcement").removeClass("translateY-hide-announcement");
				}, 1500);
				
				//Hide .announcement-bar after click
				$(".hide-announcement-bar").click(function(){
					$(".announcement-bar").removeClass("visible-announcement").addClass("hidden-announcement");
					var nav_bar_height = parseInt($(".firstNav").height()) + parseInt($(".secNav").height()); 
					$(".top_fix").css("top",nav_bar_height+"px");	
					$(".jeangrey-container").addClass("translateY-hide-announcement").removeClass("translateY-show-announcement");
				});
			});
		</script>		
	</div>
		<!-- END ANNOUNCEMENT BAR-->

	<div class="firstNav">
		<div class="container">
			<div id="navbar" class="navbar-collapse">
				<a class="navbar-brand navbar-logo hidden-xs hidden-sm" href="https://e27.co/" data-fetch="true">
					<img src="https://e27.co/assets/img/jeangrey/logo_e27.png" alt="">
				</a>
				<!-- Home and Partner -->
				<ul class="nav navbar-nav hidden-xs hidden-sm">
					<li>
						<a data-fetch="true" href="https://e27.co/">Home</a>
					</li>
					<li class="navbar-partner navbar-hover">
						<a href="#">Partner with us</a>
						<ul class="dropdown-menu">
														<li><a href="https://e27.co/advertise">Advertise with us</a></li>
							<li><a href="https://e27.co/about">About us</a></li>
							<li><a href="https://e27.co/send-a-tip">Send us a Tip</a></li>
							<li>
								<a href="https://e27.co/events/">Submit an Event</a>							</li>
							<li>
								<a href="https://e27.co/contribute" data-ct="submit_a_blog_post">Write for #e27community</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="https://e27.co/jobs?keyword[]=e27">We are hiring!</a>
					</li>
				</ul>

				<ul class="nav navbar-nav navbar-right row navbar-mobile">
					<!-- Smartphone only: Logo-->
					<li class="visible-xs visible-sm">
						<a data-fetch="true" class="navbar-brand navbar-logo" href="https://e27.co/">
							<img src="https://e27.co/assets/img/jeangrey/logo_e27.png" alt="">
						</a>
					</li>
					<!-- Smartphone only: Home-->
					<!-- <li class="visible-xs visible-sm">
						<a href="https://e27.co/" data-fetch="true"><i class="fa fa-home" aria-hidden="true"></i></a>
					</li> -->

						<script>
	GlobalJS.onLoad(function(){
		$("#public_notif").mouseenter(function(){
			$("#badge_counter").hide();
			$.ajax({
				method: "POST",
				url: "https://e27.co/tester?public_notif=1",
				async: true
			}).done(function( res ) {

			});
		});
	});
	</script>
	
<li class="dropdown navbar-noti">
	<a href="javascript:;" id="public_notif" class="dropdown-toggle has-badge" data-toggle="dropdown" data-hover="dropdown" data-close-others="true" aria-haspopup="true" aria-expanded="false">
		<i class="fa fa-bell-o" aria-hidden="true">
			<span id="badge_counter" class="badge ">1</span>
		</i>
	</a>
	<div class="dropdown-menu" style="overflow-y: auto">
		<div class="dropdown-sticky-itemscount ">
			You have 1 new notifications
		</div>
		<ul class="dropdown-menu dropdown-menu-list">
								<li>
						<a data-fetch="true" href="http://k-startupgc.org/project.html" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								K-Startup Grand Challenge application is still ongoing! Submit your application by clicking here.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/yjxbx" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Save up to 30% off when you rally your friends to Echelon Asia Summit! Click now to enjoy &gt;&gt;							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Final few hours to secure Earlybird 27% off ALL #ECASIA2017 pass types. Hurry now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								5,000+ delegates, 200 exhibiting tech companies, 150 investors will be at #ECASIA2017. Will you?							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								#ECASIA2017 Earlybird Sales ends in 2 DAYS. Secure 27% off passes now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								3 days left to secure #ECASIA2017 passes. Click now to enjoy!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Just 6 days left to secure #ECASIA2017 earlybird passes. Click to enjoy 27% off NOW!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								5 days left: Click here to enjoy Earlybird #ECASIA2017 passes now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/bd9X3" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Last call to join the K-Startup Grand Challenge 2017! Submit your applications now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/asia/exhibitors" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Over 200 exhibiting companies are joining us at the #ECASIA2017 Marketplace. Click to join them! Or email engage@e27.co to learn more!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Have you heard? Angelhack Founder Sabeen Ali is joining us in #ECASIA2017. Will you?							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								New speaker alert! Remind’s David Kopf joins us at #ECASIA2017! Where will you be?							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								C Channel’s Akira Morikawa takes on SEA at #ECASIA2017 - how about you?							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Hatcher’s John Sharp is back for Round 2 at #ECASIA2017. You in?							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/UPXbH" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								AngelList’s Utsav Somani returns to the #ECASIA2017 stage for more. Join him in SG this June!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 is hiring Engineering Lead :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 is hiring Engineering Lead :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 is hiring Engineering Lead :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/bd9X3" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Having a presence in South Korea is a must for your startup! Hurry and join the K-Startup Grand Challenge 2017!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/bd9X3" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Having a presence in South Korea is a must for your startup! Hurry and join the K-Startup Grand Challenge 2017!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/bd9X3" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Accelerate your startup in Korea with the likes of Samsung, Kakao and Hyundai! Join the K-Startup Grand Challenge 2017 now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Engineering is hiring :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Engineering is hiring :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Engineering is hiring :) Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/job/e27/full-stack-software-engineer" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Engineering is hiring :) 
Exciting product for startup community!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Echelon Thailand 2017: Hear world class speakers, create funding opportunities and make lasting connections. Join today.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Reader special: Save 10% off any Echelon Thailand 2017 pass when you sign up today. 							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Echelon Thailand 2017 is taking place this May 15-16 at C-Asean, Bangkok. Join the tech movement today. 							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Only ONE week left! Gain insights on the tech ecosystem from around the region, only at Echelon Thailand 2017.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Get up to date with the latest ecosystem trends the region when you join Echelon Thailand 2017. 							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Join Venturecon, an investor-only forum exclusively at ECHELON conferences. Up next: Echelon Thailand 2017.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Join the Startup Academy at Echelon Thailand 2017, designed to accelerate founders and entrepreneurs through the learning curve. 							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Expand your personal and business networks, and forge strategic partnerships at Echelon Thailand 2017.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand/register?code=e27-PFT-BELL10" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								e27 Special: Save 10% off any Echelon Thailand 2017 pass when you sign up today. 							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/means-product-first-company-product-done-right-will-sell-20170420/" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								This article is current trending on e27!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://goo.gl/dJtvnK" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								What VCs are models in Southeast Asia? Offer your thoughts here!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/LC5uy" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Join Echelon Thailand for the freshest insights, connections, talent and funding opportunities this May 15-16! Click now to enjoy 27% off passes!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="http://e27.co/vfBm4" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Would you rather - ability or attitude? Join the discussion!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/discussion-take-us250k-smart-funding-vs-us5m-dumb-funding-20170418/" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Should startups take less smart money or more dumb money? Discuss here!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/went-10k-walk-singapore-yesterday-spotted-27-bike-sharing-riders-20170417/" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								This article is trending on e27 now!							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Echelon Thailand starts now. Join the new movement today.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Echelon Thailand is a digital platform and conference. Join the new movement today.							</p>
						</a>
					</li>
										<li>
						<a data-fetch="true" href="https://e27.co/echelon/thailand" data-ct="echelon">
							<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
							<p>
								Echelon Thailand is only ONE MONTH away! Save more and get your pass today.							</p>
						</a>
					</li>
								<li>
				<a data-fetch="true" href="https://www.facebook.com/events/175494492929786/" data-ct="live_session">
					<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
					<p>Join our Facebook Live session and find out how you can navigate SEA's unique and diverse market. Click <b>here</b> for details! </p>
				</a>
			</li>

			<li>
				<a data-fetch="true" href="https://e27.co/job/e27/front-end-engineer-vietnam" data-ct="viet_engineer">
					<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
					<p>e27 is hiring <b>Front-end Engineer</b> in <b>Vietnam</b>. Apply now!</p>
				</a>
			</li>

			<li>
				<a data-fetch="true" href="https://e27.co/e27-fintech-project-take-our-survey-20161128/" data-ct="fintech">
					<img style="width:34px" class="user-img" src="https://e27.co/assets/img/bell3.png" alt="">
					<p>Take our fintech survey to help the community understand the industry!</p>
				</a>
			</li>
			<li class="visible-xs visible-sm" style="height: 43px; border-bottom: none">&nbsp;</li>
		</ul>
	</div>
</li>
						<li class="dropdown navbar-messages hidden-xs hidden-sm">
							<a data-fetch="true" href="https://e27.co/login" aria-haspopup="true" aria-expanded="false">Login</a>
						</li>
						<li class="dropdown navbar-messages hidden-xs hidden-sm">
							<a data-fetch="true" href="https://e27.co/signup" aria-haspopup="true" aria-expanded="false">Signup</a>
						</li>
						


					<!-- Smartphone only: Search Button-->
					<li class="visible-xs visible-sm dropdown navbar-search-mobile">
						<a href="javascript:;" data-fetch="false" data-toggle="dropdown" class="dropdown-toggle" data-hover="dropdown" data-close-others="true" role="button"><i class="fa fa-search" aria-hidden="true"></i></a>
						<form id="" class="dropdown-menu navbar-search">
							<div class="input-group">
								<input type="text" class="form-control new-mobile-header-search" placeholder="Search for everything on e27..." style="height: 35px;">
								<span class="input-group-addon">
										<button type="submit">
											<span class="glyphicon glyphicon-search"></span>
								</button>
								</span>
							</div>
						</form>
					</li>

										<!-- Smartphone only: Menu-->
					<li class="visible-xs visible-sm dropdown" id="navbar-secnav">
						<a href="javscript:;" data-fetch="false" class="dropdown-toggle has-badge" data-hover="dropdown" data-close-others="true" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown"><i class="fa fa-bars" aria-hidden="true"></i></a>
						<ul id="navbar-sub-menu" class="dropdown-menu" style="overflow-y: scroll">
															<li class="">
									<a data-fetch="true" href="https://e27.co/login" aria-haspopup="true" aria-expanded="false">Login</a>
								</li>
								<li class="">
									<a data-fetch="true" href="https://e27.co/signup" aria-haspopup="true" aria-expanded="false">Signup</a>
								</li>
															<li>
								<a data-fetch="true" href="https://e27.co/">
									<img src="https://e27.co/assets/img/jeangrey/nav/news.png" alt="">
									<span>News</span>
								</a>
							</li>
							<li class="navbar-click">
								<a href="#"><img src="https://e27.co/assets/img/jeangrey/nav/echelon.png" alt=""><span>Echelon</span></a>
								<ul class="navbar-close">
									<li><a data-fetch="true" href="https://e27.co/echelon">e27 Echelon Conferences</a></li>
									<li><a data-fetch="true" href="https://e27.co/echelon/asia">Echelon Asia Summit 2017 <label class="hot">Hot</label></a></li>
									<li><a data-fetch="true" href="https://e27.co/echelon/top100">TOP100 powered by EC Connect</a></li>
									<li><a data-fetch="true" href="https://e27.co/echelon/malaysia">Echelon Malaysia 2017</a></li>
									<li><a data-fetch="true" href="https://e27.co/echelon/thailand">Echelon Thailand 2017</a></li>
								</ul>
							</li>
							<li>
								<a data-fetch="true" href="https://e27.co/events"><img src="https://e27.co/assets/img/jeangrey/nav/events.png" alt=""><span>Events</span></a>
							</li>
							<li>
								<a data-fetch="true" href="https://e27.co/startups"><img src="https://e27.co/assets/img/jeangrey/nav/startups.png" alt=""><span>Startups</span></a>
							</li>
							<li>
								<a data-fetch="true" href="https://e27.co/fundraise"><img src="https://e27.co/assets/img/jeangrey/nav/investors.png" alt=""><span>Investors</span></a>
							</li>
							<li>
								<a data-fetch="true" href="https://e27.co/jobs"><img src="https://e27.co/assets/img/jeangrey/nav/jobs.png" alt=""><span>Jobs</span></a>
							</li>
							<li>
								<a data-fetch="true" href="https://e27.co/marketplace"><img src="https://e27.co/assets/img/jeangrey/nav/products.png" alt=""><span>Marketplace</span></a>
							</li>
							<li class="visible-xs visible-sm" style="height: 43px; border-bottom: none">&nbsp;</li>
						</ul>
					</li>
				</ul>

				<!--Search Bar-->
				<form action="https://e27.co/search/" class="navbar-form navbar-right hidden-xs hidden-sm navbar-search">
					<div class="input-group">
						<input type="text" class="new-header-search form-control" name="s" value="" placeholder="Search for everything on e27...">
						<span class="input-group-addon">
							<button type="submit">
								<span class="glyphicon glyphicon-search"></span>
							</button>
						</span>
					</div>
				</form>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="secNav">
		<div class="container">
			<ul class="nav navbar-nav">
				<li class="navbar-hover">
					<a data-fetch="true" href="https://e27.co/">
						<img src="https://e27.co/assets/img/jeangrey/nav/news.png" alt="">
						<span>News</span>
					</a>
					<!--<ul class="dropdown-menu">
						<li><a data-fetch="true" href="https://e27.co/news/channel/startup">Startups</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/funding">Funding</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/investors">Investors</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/apps">Apps</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/crowdfunding">Crowdfunding</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/resources">Resources</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/whitepapers">Whitepapers</a></li>
						<li><a data-fetch="true" href="https://e27.co/news/channel/videos">Videos</a></li>
						<li class="navbar-hover">
							<a href="javascript:;">Country</a>
						</li>
					</ul>-->
				</li>
				<li class="navbar-hover">
					<span class="secNav-hot">!</span>
					<a data-fetch="true" href="https://e27.co/echelon">
						<img src="https://e27.co/assets/img/jeangrey/nav/echelon.png" alt="">
						<span>Echelon</span>
					</a>
					<ul class="dropdown-menu">
						<li><a data-fetch="true" href="https://e27.co/echelon">e27 Echelon Conferences</a></li>
						<li><a data-fetch="true" href="https://e27.co/echelon/asia">Echelon Asia Summit 2017 <label class="hot">Hot</label></a></li>
						<li><a data-fetch="true" href="https://e27.co/echelon/top100">TOP100 powered by EC Connect</a></li>
						<li><a data-fetch="true" href="https://e27.co/echelon/malaysia">Echelon Malaysia 2017</a></li>
						<li><a data-fetch="true" href="https://e27.co/echelon/thailand">Echelon Thailand 2017</a></li>
					</ul>
				</li>
				<li>
					<a data-fetch="true" href="https://e27.co/events">
						<img src="https://e27.co/assets/img/jeangrey/nav/events.png" alt="">
						<span>Events</span>
					</a>
				</li>
				<li class="navbar-hover">
					<a data-fetch="true" href="https://e27.co/startups">
						<img src="https://e27.co/assets/img/jeangrey/nav/startups.png" alt="">
						<span>Startups</span>
					</a>
					<!--<ul class="dropdown-menu">
						<li><a data-fetch="true" href="https://e27.co/startups">Find Startups</a></li>
						<li>
															<a href="#signInModal" data-toggle="modal">Create&nbsp;Your&nbsp;Company&nbsp;Profile</a>
														</li>
					</ul>-->
				</li>
				<li>
					<a data-fetch="true" href="https://e27.co/fundraise">
						<img src="https://e27.co/assets/img/jeangrey/nav/investors.png" alt="">
						<span>Investors</span>
					</a>
				</li>
				<li class="navbar-hover">
					<a data-fetch="true" href="https://e27.co/jobs">
						<img src="https://e27.co/assets/img/jeangrey/nav/jobs.png" alt="">
						<span>Jobs</span>
					</a>
					<!--<ul class="dropdown-menu">
						<li><a data-fetch="true" href="https://e27.co/jobs">Find a Startup Job</a></li>
						<li>
															<a href="#signInModal" data-toggle="modal">Recruit</a>
														</li>
					</ul>-->
				</li>
				<li>
					<a data-fetch="true" href="https://e27.co/marketplace">
						<img src="https://e27.co/assets/img/jeangrey/nav/products.png" alt="">
						<span>Marketplace</span>
					</a>
				</li>
							</ul>
		</div>
	</div>
</nav>
<script type="text/javascript">
$(document).ready(function(){
	var currentCategory = "";
	$(".new-header-search").autocomplete({
		source: function(request, response) {
			$.ajax({
				url: "https://e27.co/index/main_search_new",
				//url: "http://e27beta.co/index/main_search_new",
				//url: "http://e27beta.co/_html/header_search.json",
				dataType: "json",
				data: {
					q : request.term
				},
				success: function(data) {
					//console.log("search");
					$("#statssaver").attr("src", "https://e27.co/stats/log");
					try{
						ga('send', 'pageview', "/index/main_search_new?q="+searchq);
					}
					catch(e){
					}
					if(data.length > 0){
						response(data);
						var footer = "<div style='padding:5px; background:#f0f0f0; text-align:center; cursor:pointer' onclick=\"self.location='https://e27.co/search/?s="+request.term+"&utm_source=searchbar'\">CLICK HERE FOR MORE RESULTS</div>";
						$(".ui-autocomplete").append("<li class='media autocomplete-response-text' style='margin-top:0;'>"+footer+"</li>");
					}
					else {
						var no_result_found = "<div style='padding:5px; background:#f0f0f0; text-align:center; cursor:pointer' onclick=\"self.location='https://e27.co/search/?s="+request.term+"&utm_source=searchbar'\">CLICK HERE FOR MORE RESULTS</div>";
						response([{ label: no_result_found, val: -1}]);
					}
				}
			});
		},
		search: function(){
			$(this).addClass("header-search-autocomplete-loading");
			$(".ui-autocomplete").remove("li.autocomplete-response-text");
		},
		minLength: 1,
		select: function( event, ui ) {
			self.location = ui.item.link
		},
		open: function(event, ui){
			$('.ui-autocomplete').css('width', "310px");
			$('.ui-autocomplete').css('height', '300px');
			$('.ui-autocomplete').css('overflow-y', 'scroll');
			$('.ui-autocomplete').css('z-index', '10000');
			$(this).removeClass("header-search-autocomplete-loading");
		}
	})
	.data("ui-autocomplete")._renderItem = function (ul, item) {
		var sub = "";
		var html = "";
		if (item.category) {

			var li;
			if ( item.category != currentCategory ) {
				ul.append( "<li class='ui-autocomplete-category'><div>" + item.category + "</div></li>" );
				currentCategory = item.category;
			}

		}

		if(item.icon) {
			var html = '<a class = "pull-left" href = "#">';
			html += '<img class = "media-object" src = "'+item.icon+'" alt = "Generic placeholder image" style="width: 60px;">';
			html += '</a>';
		}

		html += '<div class = "media-body">';
		html += '<p style="margin: 0 0 0; font-size: 14px;font-family: \'ProximaNova-Regular\'">'+item.label+'</p>';
		if(item.location){
			html += '<p style="margin: 0 0 0; font-size: 12px;font-family: \'ProximaNova-Regular\'">'+item.location+'</p>';
		}
		html += '</div>';
		return $("<li class='media'></li>")
			.data("ui-autocomplete-item", item)
			.append(html)
			.appendTo($(ul).addClass("navbar-search-list"));
	};

	$(".new-mobile-header-search").autocomplete({
		source: function(request, response) {
			$.ajax({
				url: "https://e27.co/index/main_search_new",
				//url: "http://e27beta.co/index/main_search_new",
				//url: "http://e27beta.co/_html/header_search.json",
				dataType: "json",
				data: {
					q : request.term
				},
				success: function(data) {
					//console.log("search");
					$("#statssaver").attr("src", "https://e27.co/stats/log");
					try{
						ga('send', 'pageview', "/index/main_search_new?q="+searchq);
					}
					catch(e){
					}
					if(data.length > 0){
						response(data);
						var footer = "<div style='padding:5px; background:#f0f0f0; text-align:center; cursor:pointer' onclick=\"self.location='https://e27.co/search/?s="+request.term+"&utm_source=searchbar'\">CLICK HERE FOR MORE RESULTS</div>";
						$(".ui-autocomplete").append("<li class='media autocomplete-response-text' style='margin-top:0;'>"+footer+"</li>");
					}
					else {
						var no_result_found = "<div style='padding:5px; background:#f0f0f0; text-align:center; cursor:pointer' onclick=\"self.location='https://e27.co/search/?s="+request.term+"&utm_source=searchbar'\">CLICK HERE FOR MORE RESULTS</div>";
						response([{ label: no_result_found, val: -1}]);
					}
				}
			});
		},
		search: function(){
			$(this).addClass("header-search-autocomplete-loading");
			$(".ui-autocomplete").remove("li.autocomplete-response-text");
		},
		minLength: 1,
		select: function( event, ui ) {
			self.location = ui.item.link
		},
		open: function(event, ui){
			$('.ui-autocomplete').css('width', "100%");
			$('.ui-autocomplete').css('height', '300px');
			$('.ui-autocomplete').css('overflow-y', 'scroll');
			$('.ui-autocomplete').css('z-index', '10000');
			$(this).removeClass("header-search-autocomplete-loading");
		}
	})
	.data("ui-autocomplete")._renderItem = function (ul, item) {
		var sub = "";
		var html = "";
		if (item.category) {

			var li;
			if ( item.category != currentCategory ) {
				ul.append( "<li class='ui-autocomplete-category'><div>" + item.category + "</div></li>" );
				currentCategory = item.category;
			}

		}

		if(item.icon) {
			var html = '<a class = "pull-left" href = "#">';
			html += '<img class = "media-object" src = "'+item.icon+'" alt = "Generic placeholder image" style="width: 60px;">';
			html += '</a>';
		}

		html += '<div class = "media-body">';
		html += '<p style="margin: 0 0 0; font-size: 14px;font-family: \'ProximaNova-Regular\'">'+item.label+'</p>';
		if(item.location){
			html += '<p style="margin: 0 0 0; font-size: 12px;font-family: \'ProximaNova-Regular\'">'+item.location+'</p>';
		}
		html += '</div>';
		return $("<li class='media'></li>")
			.data("ui-autocomplete-item", item)
			.append(html)
			.appendTo($(ul).addClass("navbar-search-list"));
	};
});
GlobalJS.onLoad(function(){
	$('.navbar-mobile > .dropdown > .dropdown-menu').click(function(e){
		e.stopPropagation();
	});
	$('.navbar-click a').click(function(e){
		var ulElem = $(this).parent().find('ul');
		if (ulElem.hasClass('navbar-open')){
			ulElem.removeClass('navbar-open').addClass('navbar-close');
		}
		else{
			ulElem.removeClass('navbar-close').addClass('navbar-open');
		}
	});
});

function viewAnnoucement(){
		
	jQuery.ajax({
		url: "https://e27.co/api/announcement/viewed/14",
		type: "GET",
		contentType: false,
		processData: false,
		success: function (response) {
			console.log("viewed");
		},
		error: function(jqXHR, textStatus, errorThrown) {
		}
	});
	}
</script>
</div>
<script>
//set onclick behavior for href links and links with data-fetch attribute
GlobalJS.setHrefs($("#nav_modals"))
</script>
<div id="page-container-loader" style="top: 0;position:fixed; height:100%; background:white; width:100%; z-index:10000; opacity:0.5; display:none"></div><!-- BEGIN PAGE CONTAINER -->

<div class="
		page-container  jeangrey-container" id="page-container">
<!-- BEGIN PAGE CONTENT -->
<div class="page-content">
	<div class="container">
		<!-- BEGIN PAGE CONTENT INNER -->
		<div class="row margin-top-10">
			<div class="col-md-12">
				<!-- BEGIN PROFILE SIDEBAR -->

				<!-- BEGIN PROFILE CONTENT -->
				<div class="profile-content article">
					<div class="row">
						<div class="col-md-8">
							<div class="portlet blog-page">
								<div class="portlet-body mbt-l">
									<div class="row">
										<div class="col-md-12">
											<h1 class="article-title">Privacy Policy</h1>
												<p>This privacy policy is a legal notice that details how e27 uses the personal information collected on this website and other e27 digital assets. The information below outlines what information is collected, how we use some of that information, who the information is disclosed to as well as what measures we take to protect your personal information.</p>
												<p>Last updated: 3 August 2016</p>
												<p>This Privacy Policy discloses the privacy practices for e27.co, 27x.co, echelon.e27.co, (collectively referred to as “e27”), mobile sites, applications and other properties, events or services owned or operated by Optimatic Pte. Ltd. If you have questions or concerns about any aspect of this policy, please feel free to contact our Privacy Policy Coordinator as follows:</p>
												<address>
													<span class="txt-17">Privacy Policy Coordinator (Web)</span><br>
													<strong class="txt-18">Optimatic Pte. Ltd</strong><br>
													Blk 71 Ayer Rajah Crescent<br>
													#02-15<br>
													Singapore 139951
												</address>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<strong class="txt-25">What the Privacy Policy covers</strong>
											<p>Please read this Privacy Policy carefully. You can access the Privacy Policy anytime at www.e27.co/privacy. Your use and/or registration on any aspect of e27 will constitute your agreement to this Privacy Policy. This policy covers our treatment of information that we obtain when you visit e27. This privacy policy does not cover information collected elsewhere, including, without limitation, offline and on sites linked from e27. It does not apply to practices of companies that e27 does not own or control, or to individuals whom e27 does not employ or manage, including any of the third parties that e27 may disclose user information as set forth in this policy.</p>

											<strong class="txt-20">1. What Types of User Information Does e27 Collect?</strong>
											<p>Registration for certain content, events or services may require e27 to collect the following types of information from you or concerning your computer or device (“Information”), that may include information that can be used to identify you as specified below (“Personally Identifiable Information”):</p>
											<ul>
												<li dir="ltr">Name</li>
												<li dir="ltr">Email Address</li>
												<li dir="ltr">Mailing Address</li>
												<li dir="ltr">Telephone Number(s)</li>
												<li dir="ltr">Blog or Website URL</li>
												<li dir="ltr">Social Networking Handle or Username</li>
												<li dir="ltr">Photo</li>
												<li dir="ltr">Demographic Information (e.g., age, gender, interests, and preferences)</li>
												<li dir="ltr">Professional Title</li>
												<li dir="ltr">Company</li>
												<li dir="ltr">Industry</li>
												<li dir="ltr">Activities or Content Viewed on e27</li>
												<li dir="ltr">Information Collected Automatically</li>
												<li dir="ltr">Information Received from Third Parties</li>
											</ul>
											<p>We may request that you provide some of the Information listed above in order to obtain specific products or services (such as registering for an e27 event or to download a research report from e27). You may choose not to provide the information being requested, and you will still be able to use the e27’s content but you may not be able to access certain features or services.</p>
											<p>When you register to receive any products or services from e27 or provide information to e27 for any other matter, you agree to provide only true, accurate, current and complete
												information.</p>
											<span class="txt-16">1.1 Information Collected Automatically</span>
											<p>e27 may also automatically receive and log certain types of information when you visit or interact with our websites, services, mobile applications or other products, including:</p>
											<ul>
												<li dir="ltr">Browser Information</li>
												<li dir="ltr">Operating System Information</li>
												<li dir="ltr">Mobile Device Information (e.g., device identifier, mobile operating system, etc.)</li>
												<li dir="ltr">IP Address</li>
												<li dir="ltr">Internet Service Provider</li>
												<li dir="ltr">Content Viewed</li>
												<li dir="ltr">Geographic Location</li>
												<li dir="ltr">Connection Speed</li>
												<li dir="ltr">Time of Visit</li>
												<li dir="ltr">Referring Site, Application, or Service</li>
												<li dir="ltr">Registration Time</li>
											</ul>
											<span class="txt-16">1.2 Information Received From Third Parties</span>
											<span class="txt-16">1.2.1 Information Received From Third Parties</span>
											<p>When registering for events or services provided by e27, we may receive information about from the service providers that host or process registration for such programmes. Other service providers that support these programmes (eg. technical support) may also collect certain portions of Personally Identifying Information listed above.</p>
											<span class="txt-16">1.2.2 Third Party Websites/Social Networking Sites</span>
											<p>e27 may receive information identified above if you use any third party website or service that is integrated with e27. These may include third-party social networking or blogging sites like LinkedIn, Facebook, Twitter or WordPress. If you happen to use an e27 application provided by any Third-Party website, we may also receive Personally Identifying Information that includes but is not limited to:</p>
											<ul>
												<li dir="ltr">Name</li>
												<li dir="ltr">Nickname or Username</li>
												<li dir="ltr">Photo or Graphic Avatar</li>
												<li dir="ltr">Unique Third Party Website Identifier (e.g., Facebook User ID)</li>
												<li dir="ltr">Biographical or Demographic Information (e.g. professional title, gender, college attended, etc.)</li>
												<li dir="ltr">Likes and Interests</li>
												<li dir="ltr">Contacts/Friends/Associations</li>
												<li dir="ltr">Any Information That Is Publicly Available on Third Party Websites</li>
											</ul>
											<p>Your decision to use, or share with, a Third Party Website when accessing or using e27 products and services is completely voluntary. e27 is not responsible for compliance with the policies or practices of any Third Party Website. You should ensure that you are comfortable with the information such Third Party Websites may make available to e27 by reviewing those Websites’ privacy policies and service terms, and by modifying your privacy settings and preferences on those Services.</p>
											<p>Any information we receive from Third Party Websites will be governed by this Privacy Policy.</p>
											<span class="txt-16">1.3. e27’s Use of Cookies</span>
											<p>e27 may place “cookies” on your computer or device that may contain anonymous Information that is associated with you. Cookies are small text files a website uses to recognize users, and are usually placed on your hard disk by a web server. These contain information that can be read by a web server in the domain (here, e27) that issue the cookie to you, or by a third party domain. e27’s cookies may record information about your use of e27 so that we can give you a more personalized and continuous experience, including one or more of the following purposes: to help identify visitors; assess usage patterns; identify preferences; control the display of ads; diagnose problems with our servers; gather demographic data; analyze trends and usage patterns; conduct research; deliver editorial content; record registration and personalized information and administer e27 products and services.</p>
											<p>If you prefer not to have e27 place and use cookies on your computer, you should set your browser preferences to refuse cookies before using e27 products and services. However, you may not be able to access interactive features of e27 that are dependant on cookies. We will not be responsible for any failure by you or your browser to accurately implement or communicate your browser settings or preferences.</p>
											<p>e27 does not control nor is it responsible for the use of cookies by its third party partners or advertisers. The use of cookies by these third parties is discussed below (See “Third Party Advertisements” and “Analytics Services”).</p>
											<span class="txt-16">1.4. Reviewing and Modifying Your Personally Identifying Information</span>
											<p>There are several ways to update your Personally Identifying Information that is obtained and stored by e27:</p>
											<ol>
												<li>You may unsubscribe  to any of e27’s email updates or products by following the unsubscribe instructions accessed via the unsubscribe link provided in the body of any message.</li>
												<li>You may update your information by following the update instructions accessed via the update information link provided in the body of any email message.</li>
												<li>You may contact us at contact [at] e27 [dot] sg</li>
											</ol>
											<strong class="txt-20">2. How e27 uses the information we gather</strong>
											<p class="txt-16">2.1. Services you request. e27 uses personally identifying information you supply to provide you with the service you have requested. For example, if you subscribe to the e27 Mailing List, we may use your email address to send you a confirmation notice and your mailing address to send you the mailer.</p>
											<p>We may also use the information to communicate with you about new features, products, or services and/or to improve the services we offer by tailoring them to your needs. Similarly, if you enter an online contest, sweepstakes, or giveaway, we will use the information you provide to notify you.</p>
											<p class="txt-16">2.2. Analysis. We perform statistical, demographic, and marketing analysis of users of e27 for product development purposes and to generally inform partners about the nature of our users. We also use this information to improve customer relationships.</p>

											<p class="txt-16">2.3. Third Party Service Providers. e27 will allow access to our database by third parties that provide services on our behalf, including shipping, email distribution, list processing, and analytics or promotions management. Our service providers are restricted from using any data in any way other than to provide services for e27 and they may not share or resell our data. Such information includes Personally Identifying Information such as your Name and Address Information.</p>

											<p class="txt-16">2.4. Event Registration. e27 uses third parties, such as EventBrite, to process registration for e27 events and programs. e27 may provide your Information (including Personally Identifying Information) to such registration services when you register for an e27 event or program. In addition, e27 (or the third party registration service) may provide your Information (including Personally Identifying Information) to companies that sponsor or underwrite portions of an event that you register for, attend, or view.</p>

											<p class="txt-16">2.5. Affiliates and Partners. Unless otherwise specified elsewhere on e27, we may share personally identifying information with our affiliates, and with carefully selected partners.</p>

											<p class="txt-16">2.6. Third Party Sponsors. If you choose to register for one of our sponsored webinars or events, or to access research or content from e27, we may share your Information (including Personally Identifying Information) with business partner(s) and/or sponsor(s) of the webinar, event, research and/or content. You agree that these sponsor(s) and/or business partner(s) may use your Personally Identifying Information to contact you to provide additional information about their products or services.</p>

											<p class="txt-16">2.7. Third Party Websites. e27 offers the ability to share e27 content on Third Party Websites, including social networking and blogging services such as Twitter or Facebook, through “plugins” or “widgets” (such as Twitter’s “Tweet” button or Facebook’s “Like” button). When you share content and information with others on Third Party Websites, e27 may transmit your Information (including Personally Identifying Information) to such Third Party Websites. This Information may be visible on the Third Party Website to anyone who has access to that content or Information. Your decision to share information in this manner is completely voluntary. You should ensure that you are comfortable with how Third Party Websites may share your Information by reviewing their privacy policies and/or modifying your privacy settings directly on those Third Party Websites.</p>

											<p class="txt-16">2.8. Web Hosts. e27’s website services are hosted by WP Engine, an enterprise web publishing platform. All information obtained and stored by e27’s websites is processed and stored on servers owned by WP Engine.</p>

											<p class="txt-16">2.9. Law Enforcement / Legal Process. We may disclose your Information (including Personally Identifying Information) when we believe in good faith that disclosure is necessary to comply with any law, regulation or legal request; enforce, apply, or investigate breaches of our terms of use and other agreements; respond to public requests; or protect the rights, property, user experience or safety of e27, our employees, our users, or others. This can include exchanging information with other companies and organizations for fraud protection and credit risk reduction.</p>

											<p class="txt-16">2.10. Compliance to Personal Data Protection Act (PDPA). e27 complies to the Personal Data Protection Act 2012 (No. 26 of 2012), which takes precedence during the collection, transfer and disclosure of any personal data or databases agreed within the contract. The purpose of this Act is to govern the collection, use and disclosure of personal data by organisations in a manner that recognises both the right of individuals to protect their personal data and the need of organisations to collect, use or disclose personal data for purposes that a reasonable person would consider appropriate in the circumstances. Refer to the provided link below for a complete elaboration on the Act.</p>

											<p class="txt-16">Personal Data Protection Act: <a href="https://www.pdpc.gov.sg/legislation-and-guidelines/legislation">https://www.pdpc.gov.sg/legislation-and-guidelines/legislation</a>

											</p><p class="txt-16">By submitting your details on our platform, you acknowledge, understand and comply to the above mentioned Act.</p>
											<strong class="txt-20">3. Comments and Public Posts; Sharing on Third-Party Websites</strong>
											<p>e27 encourages active participation by users, including through comments on e27. However, please be aware that if you voluntarily disclose Information, personal or otherwise, on e27, that Information can be viewed, collected and used by others, including other users, search engines, advertisers, third party applications developers, and anyone with access to e27. e27 has no control over the use, collection or disclosure of any Information that you post publicly on e27.</p>
											<strong class="txt-20">4. Change of Control</strong>
											<p>If e27, or substantially all of its assets, is acquired by another company or party, user Information will be one of the assets transferred or acquired by the purchaser. You acknowledge that such transfers may occur, and that any purchaser of e27 or its assets may continue to collect, use and disclose your Information as set forth in this Policy.</p>
										</div>
									</div>

								</div>
							</div>
						</div>

						<!-- DEFAULT SIDEBAR -->
											</div>
				</div>
				<!-- END PROFILE CONTENT -->
			</div>
		</div>
		<!-- END PAGE CONTENT INNER -->
	</div>
</div>
<!-- END PAGE CONTENT -->
</div>
<script> 
	GlobalJS.consoleLog('Cache Details: ');
	GlobalJS.consoleLog('Cache Time Stamp: ');
	GlobalJS.consoleLog('Page loaded in 1496795207.4994 secs.');
	GlobalJS.runAfterFetchFunctions();
	var titletemp = "";
	if(titletemp){
		document.title = titletemp;
	}
	if(GlobalJS.UserId){
		//show items if logged
		$(".showiflogged").removeClass("hide");
		$(".showiflogged").show();
	}
	else{
		//show items if not logged
		$(".showifloggedout").removeClass("hide");
		$(".showifloggedout").show();
	}
	</script><!-- END PAGE CONTAINER -->
<div class="page-prefooter">
	<div class="container">
		<div class="row">
			<div class="col-md-1"></div>
			<div class="col-md-10 col-sm-12">
				<div class="row">
					<div class="col-md-3 col-sm-3 col-xs-4">
						<strong>E27</strong>
						<ul class="footer-links-wrapper unstyled-list mt">
							<li class="mbt"><a href="https://e27.co/about">About</a></li>
							<li class="mbt"><a href="https://e27.co/startup/e27">Team</a></li>
							<li class="mbt"><a href="https://e27.co/contact-us">Contact Us</a></li>
							<li class="mbt"><a href="&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;https://e27.co/advertise&#9;&#9;&#9;&#9;&#9;&#9;&#9;">Advertise</a></li>
							<li class="mbt"><a href="https://e27.co/privacy">Privacy Policy</a></li>
						</ul>
					</div>
					<div class="col-md-3 col-sm-3 col-xs-4">
						<strong>NEWS</strong>
						<ul class="footer-links-wrapper unstyled-list mt">
							<li class="mbt"><a href="https://e27.co/category/business">Business</a></li>
							<li class="mbt"><a href="https://e27.co/category/technology">Technology</a></li>
							<li class="mbt"><a href="https://e27.co/category/resource">Resource</a></li>
							<li class="mbt"><a href="https://e27.co/category/investment">Investment</a></li>
						</ul>
					</div>
					<div class="col-md-3 col-sm-3 col-xs-4">
						<strong>CONFERENCES</strong>
						<ul class="footer-links-wrapper unstyled-list mt">
							<li class="mbt"><a href="https://e27.co/echelon/vietnam/">Echelon Vietnam</a></li>
							<li class="mbt"><a href="http://e27.co/echelon/thailand/">Echelon Thailand</a></li>
							<li class="mbt hidden"><a href="http://www.echelonalmaty.com/">Echelon Central Asia</a></li>
							<li class="mbt"><a href="http://e27.co/echelon/indonesia/">Echelon Indonesia</a></li>
							<li class="mbt"><a href="http://e27.co/echelon/asia/">Echelon Asia Summit <em class="f-green txt-11 hide">Upcoming</em></a></li>
						</ul>
					</div>
					<div class="col-md-3 col-sm-3 col-xs-4">
						<strong>FOLLOW US</strong>
						<ul class="footer-links-wrapper unstyled-list left mt">
							<li class="mbt mrt-s"><a href="https://www.facebook.com/e27" target="_blank">Facebook</a></li>
							<li class="mbt mrt-s"><a href="http://twitter.com/e27co" target="_blank">Twitter</a></li>
							<li class="mbt mrt-s"><a href="http://www.linkedin.com/company/e27-optimatic-" target="_blank">Linkedin</a></li>
							<li class="mbt mrt-s"><a href="https://plus.google.com/+E27Co" target="_blank">Google+</a></li>
							<li class="mbt mrt-s"><a href="https://www.youtube.com/user/e27co" target="_blank">Youtube</a></li>
							<li class="mbt mrt-s"><a href="https://e27.co/feed" target="_blank">RSS</a></li>
						</ul>
					</div>
				</div>

				<hr class="" style="border-color: rgb(76, 76, 76);">
			</div>
			<div class="col-md-1"></div>
		</div>
	</div>
</div>
<div class="page-footer">
	<div class="container">
		 2017 © E27 (Entrepreneurs 27). All Rights Reserved.
	</div>
</div>
<!--<div class="scroll-to-top">
	<i class="fa fa-arrow-circle-up"></i>
</div>-->
<script src="https://e27.co/dist/js/footer/footer.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<script>
	jQuery(document).ready(function() {
		
		// initiate layout and plugins
		Metronic.init(); // init metronic core components
		Layout.init(); // init current layout
		/* Demo.init(); // init demo features\ */
		/* Profile.init(); // init page demo*/
		ComponentsPickers.init();
	});

	function validate(fieldList){

		var result = true;
		var items = fieldList.split(',');

		for(i = 0; i < items.length; i++){

			var itemid = items[i];
			if(itemid != ""){
				if($("#"+itemid).val() == "" || $("#"+itemid).val() == null){
					$("#"+itemid).addClass("has-error");
					$("#"+itemid).focus();
					result = false;
				}

			}
		}

		return result;
	}

	(function(e,h,l,c){e.fn.sonar=function(o,n){if(typeof o==="boolean"){n=o;o=c}return e.sonar(this[0],o,n)};var f=l.body,a="scrollin",m="scrollout",b=function(r,n,t){if(r){f||(f=l.body);var s=r,u=0,v=f.offsetHeight,o=h.innerHeight||l.documentElement.clientHeight||f.clientHeight||0,q=l.documentElement.scrollTop||h.pageYOffset||f.scrollTop||0,p=r.offsetHeight||0;if(!r.sonarElemTop||r.sonarBodyHeight!==v){if(s.offsetParent){do{u+=s.offsetTop}while(s=s.offsetParent)}r.sonarElemTop=u;r.sonarBodyHeight=v}n=n===c?0:n;return(!(r.sonarElemTop+(t?0:p)<q-n)&&!(r.sonarElemTop+(t?p:0)>q+o+n))}},d={},j=0,i=function(){setTimeout(function(){var s,o,t,q,p,r,n;for(t in d){o=d[t];for(r=0,n=o.length;r<n;r++){q=o[r];s=q.elem;p=b(s,q.px,q.full);if(t===m?!p:p){if(!q.tr){if(s[t]){e(s).trigger(t);q.tr=1}else{o.splice(r,1);r--;n--}}}else{q.tr=0}}}},25)},k=function(n,o){n[o]=0},g=function(r,p){var t=p.px,q=p.full,s=p.evt,o=b(r,t,q),n=0;r[s]=1;if(s===m?!o:o){setTimeout(function(){e(r).trigger(s===m?m:a)},0);n=1}d[s].push({elem:r,px:t,full:q,tr:n});if(!j){e(h).bind("scroll",i);j=1}};e.sonar=b;d[a]=[];e.event.special[a]={add:function(n){var p=n.data||{},o=this;if(!o[a]){g(this,{px:p.distance,full:p.full,evt:a})}},remove:function(n){k(this,a)}};d[m]=[];e.event.special[m]={add:function(n){var p=n.data||{},o=this;if(!o[m]){g(o,{px:p.distance,full:p.full,evt:m})}},remove:function(n){k(this,m)}}})(jQuery,window,document);

	function lazy_load_image(img){
		var $img=jQuery(img),src=$img.attr('src');
		$img.unbind('scrollin').hide().removeAttr('src').attr('data-lazy-loaded','true');
		img.src=src;
		$img.fadeIn();
	}

	function lazy_load_init(){
		$('img[src]').bind('scrollin',{distance:200},function(){
			lazy_load_image(this);
		});
		$('[data-carousel-extra]').each(function(){
			$(this).find('img[src]').each(function(){lazy_load_image(this);});
		});
	}


	(function($){lazy_load_init();$('body').bind('post-load',lazy_load_init);})(jQuery);


	$(document).ready(function(){
		$('[data-toggle="tooltip"]').tooltip();
		$("#startup-location").select2();
		$("#job-location").select2();
		$("#job-role").select2();
		$("#startup-market").select2();
	});

	//Add deal tooltip
	//$("#addDealBtn").tooltip();
	$(document).ready(function(){
		if ($("#deal_term").is(":checked")) {
			jQuery('#addDealBtn').tooltip('disable');
		}
		else {
			jQuery('#addDealBtn').tooltip('enable');
		}
	});

	$("#deal_term").on("click", function () {
		if ($("#deal_term").is(":checked")) {
			jQuery('#addDealBtn').tooltip('disable');
		}
		else {
			jQuery('#addDealBtn').tooltip('enable');
		}
	});

</script>
<!-- END JAVASCRIPTS -->
<script async="" src="https://e27.co/dist/js/new/jeangrey/scripts.js?v=1" type="text/javascript"></script>
	
<!-- END BODY -->

</body></html>